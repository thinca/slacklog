import _readline from "readline"

const readline = _readline.createInterface({
  input: process.stdin,
  output: process.stdout,
})

let buffer: Array<string> = []

const readInput = (query: string): Promise<Array<string>> => {
  return new Promise((resolve, _) => {
    readline.question(query, (answer: string) => {
      buffer = [...buffer, answer]
      resolve(buffer)
    })
  })
}

const main = async () => {
  while (true) {
    // eslint-disable-next-line no-await-in-loop
    await readInput("Input: ")
    console.log(JSON.stringify({ a: "a", b: "b" }))
    console.log("\n")
  }
}

// eslint-disable-next-line no-void
void main()
