function! fzf_preview#rpc#start() abort
  try
    let server = s:server()
    call server.request('start', {
    \   'id': 'foo',
    \ })

    return server.request('fetch', {
    \   'id': 'foo',
    \   'query': 'bar',
    \   'index': 'foobar',
    \   'count': '1',
    \ }).then({ response -> s:on_response(response) })
  catch /.*/
    call fzf_preview#rpc#on_exception()
  endtry
endfunction

function! s:on_response(response) abort
  PP a:response
endfunction
