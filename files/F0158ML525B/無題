export type SingleLineConsume = (line: string) => void
export type BulkLineConsume = (lines: Array<string>) => void
type Consume = SingleLineConsume | BulkLineConsume

export type CreateProcess<T extends Consume> = (consume: T) => Process

export const createSingleLineProcess: CreateProcess<SingleLineConsume> = (consume) => async (lines: Array<string>) => {
  for await (const line of lines) {
    consume(line)
  }
}

export const createBulkLineProcess: CreateProcess<BulkLineConsume> = (consume) => (lines: Array<string>) => consume(lines)