[{"client_msg_id":"a0b7225e-3194-42da-8b59-9602e98fb6b9","type":"message","user":"U03C6TEAZ","text":"パフォーマンス的にはどうです？","ts":"1602514126.074400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BnuM"}]},{"client_msg_id":"9f951fbf-fe00-46f0-adb2-4cb87acc45aa","type":"message","user":"U03C71D7H","text":"`/home` 以下もちゃんと減った。やっぱりこっちで行こう (うろうろ)\n\n```Data, single: total=59.00GiB, used=32.05GiB```\n```Data, single: total=35.00GiB, used=28.91GiB```","ts":"1602513260.074200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oQNy"}]},{"client_msg_id":"a9982c5e-36d8-4b0b-ac97-928e1f2e28bb","type":"message","user":"U03C71D7H","text":"やっぱり気になってもう1度 `/` を zstd にしてみたら、ちゃんと減った。最初に減らなかったのは snapshots があったからで確定っぽいな\n\n```Data, single: total=28.01GiB, used=22.04GiB```\n```Data, single: total=28.01GiB, used=21.87GiB```","ts":"1602512951.073500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5qP"}]},{"client_msg_id":"cb198a3f-a432-4b88-802f-8d255e39a646","type":"message","user":"U03C71D7H","text":"まあまだ数日なのでよいじゃろ。なくなって困るファイルはないはず…","ts":"1602511014.072500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ap=b"}]},{"client_msg_id":"68e7999e-b34a-4c58-92cc-4f0e3b769c24","type":"message","user":"U03C71D7H","text":"色々試した結果 snapshots が全部消えて(消して)しまった","ts":"1602510996.072100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"loHt"}]},{"client_msg_id":"146918a4-0342-49a9-b022-afa0cbc42134","type":"message","user":"UAZ33BKV2","text":"fs操作テストのHDDとかがあったほうがよさそうですね","ts":"1602510929.071600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Y6IWp"}]},{"client_msg_id":"02418d1a-7ce6-47f9-94ad-6f80357a56b8","type":"message","user":"U03C71D7H","text":"やるならもっとミニマムな環境作るとかだな…","ts":"1602510882.071100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Efl"}]},{"client_msg_id":"2a53b0f0-2291-4600-b158-5b14183a033e","type":"message","user":"U03C71D7H","text":"試してみたいところだけどこれ以上 SSD に全体何度も書き換える変更をしたくないw","ts":"1602510858.070800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"crF"}]},{"client_msg_id":"b54fe89a-7c18-49ba-b06e-1367c7c25362","type":"message","user":"U03C71D7H","text":"flush しないと正確に出ないのかも? defragment 時に、一緒に flush するってオプションがある","ts":"1602510807.070200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"A1r"}]},{"client_msg_id":"8bf3ed46-903c-4b46-a5a1-b7493cb97eb9","type":"message","user":"U9S4G0LJW","text":"マウント時にあれこれしてるのか\nそれともロックでも握っとるんかな","ts":"1602510798.069900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"B++X"}]},{"client_msg_id":"5d4f0928-3a40-4c69-97e1-caeeda8498d7","type":"message","user":"U03C71D7H","text":"マシンを再起動したら減った\n\n```Data, single: total=59.00GiB, used=32.05GiB\nSystem, single: total=4.00MiB, used=16.00KiB\nMetadata, single: total=3.01GiB, used=952.38MiB\nGlobalReserve, single: total=69.34MiB, used=0.00B```","ts":"1602510761.069100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MyOMX"}]},{"client_msg_id":"360a6ade-6ef7-414d-8c08-02d5c831c44a","type":"message","user":"UAZ33BKV2","text":"なんかジャーナルログ的な、まだ削除してないなにかがあるんですかね?","ts":"1602510595.068800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WzT"}]},{"client_msg_id":"50a690bf-5ebf-46a3-9870-912aabdd4de0","type":"message","user":"U03C71D7H","text":"この4行のやつはそれの結果","ts":"1602510549.068200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WSqxg"}]},{"client_msg_id":"5bdf45c6-1bf7-4bf5-8293-dcd3e9850488","type":"message","user":"U9S4G0LJW","text":"`btrfs filesystem df`の結果であれば信用してよさそうな風に書いてあったが","ts":"1602510533.068000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uLid"}]},{"client_msg_id":"a1cca266-53c2-42de-84ca-1edcb50e115f","type":"message","user":"U03C71D7H","text":"`df` によると 36GB しか使ってないらしい。まあ Btrfs の場合は `df` の値は当てにならないらしいが","ts":"1602510438.067200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IIu"}]},{"client_msg_id":"43f42426-f55a-4504-b6c6-41d7baa5bca5","type":"message","user":"U03C71D7H","text":"```Data, single: total=76.01GiB, used=71.55GiB\nSystem, single: total=4.00MiB, used=16.00KiB\nMetadata, single: total=3.01GiB, used=1.86GiB\nGlobalReserve, single: total=199.00MiB, used=64.00KiB```","ts":"1602510350.066500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QVlc"}]},{"client_msg_id":"54d152bb-32a9-4e33-9e35-25df71dee1f1","type":"message","user":"U03C71D7H","text":"あれ… $HOME の方、lzo で再デフラグかけたら更に容量がでかくなってしまった…snapshot は一旦全部消してみたけど変わらず…何もわからなくなってきた","ts":"1602510338.066300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hvfoj"}]},{"client_msg_id":"2754e0b5-30a9-4c51-9114-f6d6d57fdf38","type":"message","user":"U03C71D7H","text":"ちなみに $HOME 以下を変換した結果が割とえぐかった\n\nbefore:\n```Data, single: total=42.01GiB, used=39.55GiB\nSystem, single: total=4.00MiB, used=16.00KiB\nMetadata, single: total=3.01GiB, used=1.02GiB\nGlobalReserve, single: total=134.23MiB, used=0.00B```\nafter:\n```Data, single: total=68.01GiB, used=67.58GiB\nSystem, single: total=4.00MiB, used=16.00KiB\nMetadata, single: total=3.01GiB, used=1.86GiB\nGlobalReserve, single: total=198.98MiB, used=0.00B```","ts":"1602509952.065100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ccmOa"}]},{"client_msg_id":"2634c44d-dcf8-42c3-a573-fc2916560eb5","type":"message","user":"U03C71D7H","text":"再度 lzo でデフラグし直したら容量小さくなった。うーん、たぶんケースバイケースなんだろうな… zstd が圧倒的優位ということはなさそうなので一旦 lzo で運用することにしよう。戻そ","ts":"1602509844.064200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TdXSf"}]},{"client_msg_id":"4a2db801-2471-40a6-84c3-79349731d586","type":"message","user":"U03C71D7H","text":"容量増えたの、snapshots が残っててこっちはデフラグされないせいかもと思って snapshots 全部消してみたけど容量増えたままだった…うーん…","ts":"1602509653.063200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/Sw"}]},{"client_msg_id":"d4b95c1f-b311-4aea-98f5-8f868c66572f","type":"message","user":"U06BRP8VD","text":"へーおもしろいな","ts":"1602509323.062500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wJArp"}]},{"client_msg_id":"fd458dcf-b85c-4c48-bde4-82afae4a2e5b","type":"message","user":"U03C71D7H","text":"変換は明示的にデフラグを走らせないとされないです","ts":"1602509315.062200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3gT7"}]},{"client_msg_id":"5d2bed71-d146-4f00-847d-9387d7810638","type":"message","user":"U03C71D7H","text":"変換はしてないので、恐らくファイルごとに記録されてるんじゃないですかね","ts":"1602509301.061700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/TV"}]},{"client_msg_id":"e470fac6-b110-4485-aa66-f7cd19ac7170","type":"message","user":"U06BRP8VD","text":"マウント時に決まるってことは、ファイルごとに圧縮形式が記録されるのかしら? それともマウント時に必要なら全部変換し直す?","ts":"1602509225.061400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hJvx8"}]},{"client_msg_id":"48c7ba23-4613-44ab-b346-a3b78d3ddaea","type":"message","user":"U03C71D7H","text":"Btrfs はマウントオプションなので FS 作成時ではなくてマウント時に決まる。なので subvolume をマウントして使う場合は subvolume 毎に変えるとかもできそう","ts":"1602509030.060500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Vhf"}]},{"client_msg_id":"39b0abee-5467-4acb-8276-249d1e23b57c","type":"message","user":"U03C71D7H","text":"(ちなみに別にディスクの空き(作業スペース)に困ってたりなどは一切してない)","ts":"1602508957.059500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3AS"}]},{"client_msg_id":"1670ffcc-87f5-426a-9b36-b29fc34b151b","type":"message","user":"U06BRP8VD","text":"ふむ。ZFSだと圧縮アルゴリズムはLZ4だな。あとFS単位で圧縮の有無を選べそう。","ts":"1602508954.059400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Yc3O"}]},{"client_msg_id":"294ea39b-111f-42e9-b967-533c7e0176ee","type":"message","user":"U03C71D7H","text":"どうしよっかな。戻すのもだるい、というかそんな何度も全部書き換えとかしたくない…w","ts":"1602508912.058300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nvJH"}]},{"client_msg_id":"fcaf9990-117f-41dc-a9c9-75d75d90f456","type":"message","user":"U03C71D7H","text":"容量減らせるなら zstd かなぁと思ったんだけど、常に減るってわけでもないのか…圧縮レベルを上げれば小さくなるのかもしれんが…速度への影響がどうなるか全くわからない","ts":"1602508836.057700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lwxLL"}]},{"client_msg_id":"cb247e8b-03b5-425e-bd35-6903916f855d","type":"message","user":"U06BRP8VD","text":"圧縮\u0026amp;解凍の速度がディスクI/Oよりも速い場合が多いから、単純なアクセスだと圧縮で減ったI/O分の時間が圧縮にかかる時間を上回るんですよねぇ。","ts":"1602508633.056500","thread_ts":"1602507796.048600","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PuPZ"}],"root":{"client_msg_id":"9a13bc5c-e377-49bb-8cf6-a48991152190","type":"message","user":"U03C71D7H","text":"圧縮率の改善はわかりやすいけど、IO 速度の劣化はベンチマーク見た感じだと恐らく体感できなさそう","ts":"1602507796.048600","thread_ts":"1602507796.048600","last_read":"1602508721.056800","subscribed":true,"reply_count":2,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nF1Q"}]}},{"client_msg_id":"51116d45-a520-4ebf-afc3-cfc7c413cdb2","type":"message","user":"U03C71D7H","text":"うーん? どうして…","ts":"1602508603.056400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XdrEb"}]},{"client_msg_id":"afb98293-38fb-49cf-ae86-a52a9401e4e4","type":"message","user":"U03C71D7H","text":"before\n```Data, single: total=28.01GiB, used=22.02GiB\nSystem, single: total=4.00MiB, used=16.00KiB\nMetadata, single: total=2.01GiB, used=1.71GiB\nGlobalReserve, single: total=86.02MiB, used=0.00B```\n```sudo btrfs filesystem defragment -r -v -czstd /```\nafter\n```Data, single: total=28.01GiB, used=25.41GiB\nSystem, single: total=4.00MiB, used=16.00KiB\nMetadata, single: total=2.01GiB, used=1.77GiB\nGlobalReserve, single: total=93.97MiB, used=0.00B```","ts":"1602508574.056100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NJE2"}]},{"client_msg_id":"6d6e3a9f-92f3-43b6-8935-342df44b269a","type":"message","user":"U03C71D7H","text":"うーん、あれ、ディスク使用量増えたんだが…?ww","ts":"1602508518.055500","team":"T03C4RC8V","reactions":[{"name":"thinking_face","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9v+Q"}]},{"client_msg_id":"242012a0-ca26-4934-aeea-81fc1c263807","type":"message","user":"U03C71D7H","text":"bot も起動 done (なお起動はまだ手動です)","ts":"1602508328.055200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0zNP"}]},{"client_msg_id":"f53753b9-9e20-4395-94ce-f4c01648b7f0","type":"message","user":"U03C71D7H","text":"ですね","ts":"1602508303.054900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kKfP"}]},{"client_msg_id":"7aea31a5-df5e-48b9-a582-9c9befd947d1","type":"message","user":"U9S4G0LJW","text":"それまでは書き換えた所から変わる感じか","ts":"1602508294.054700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vuvm"}]},{"client_msg_id":"23ec5a6a-795f-4435-b294-301eb93177a9","type":"message","user":"U03C71D7H","text":"zstd になった。再デフラグしないと中身は変わらないけど","ts":"1602508268.054400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/SYO/"}]},{"client_msg_id":"3f61f978-51ed-4fbe-987a-431bf80b0bef","type":"message","user":"U7B4ZD49X","text":"その後彼の行方を知るものはいない・・・","ts":"1602508249.054000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AMJ"}]},{"client_msg_id":"6a98fe6d-5a21-400d-aeaf-4eba96680c56","type":"message","user":"U03C71D7H","text":"再起動ぽち","ts":"1602508192.053400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Lkh"}]},{"client_msg_id":"4131b70b-87bf-4f7b-bc91-e1c16bd72e1b","type":"message","user":"U03C71D7H","text":"再起動してる間は bot が止まるからな。まあ誰も困らんよね","ts":"1602508158.053200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HGGe"}]},{"client_msg_id":"bc078967-5f7c-4a08-a5f4-11ce5ebe7e21","type":"message","user":"U9S4G0LJW","text":"システム設定いじった時は割とカジュアルに再起動してる","ts":"1602508127.052800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KUm"}]},{"client_msg_id":"7c4e3048-a63e-4a64-ad9d-a04db8f67399","type":"message","user":"U03C71D7H","text":"横着せずに再起動した方がいいんだろうか","ts":"1602508093.052300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gDMss"}]},{"client_msg_id":"80049f17-7a0b-4bf0-80cc-fc524ae6a15d","type":"message","user":"U03C71D7H","text":"なんも指定しないとレベルは 3 になるっぽい","ts":"1602508070.052100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0y/u5"}]},{"client_msg_id":"c7f423ae-0ef0-4357-a7db-7a6dbc12a79c","type":"message","user":"U03C71D7H","text":"あれ… fstab 書き換えて再マウントしたのだけど compress 消えてしまった。なんでだろう","ts":"1602508030.051800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2s="}]},{"client_msg_id":"3f63b432-f3c7-4b9c-ab0a-1fc0c73e5b45","type":"message","user":"U03C71D7H","text":"逆に言うと気にならなければ問題ない…かな","ts":"1602507809.048900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dtm0"}]},{"client_msg_id":"9a13bc5c-e377-49bb-8cf6-a48991152190","type":"message","user":"U03C71D7H","text":"圧縮率の改善はわかりやすいけど、IO 速度の劣化はベンチマーク見た感じだと恐らく体感できなさそう","ts":"1602507796.048600","thread_ts":"1602507796.048600","last_read":"1602508721.056800","subscribed":true,"reply_count":2,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nF1Q"}]},{"client_msg_id":"99d8d8be-45fc-486e-9b4a-87fb095bb14e","type":"message","user":"U8CC7MDCL","text":"圧縮率はいいんですけどね… xz\n遅い","ts":"1602507772.048000","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":2,"users":["U9S4G0LJW","U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TS4f"}]},{"client_msg_id":"d5452fcc-df22-4b9a-adbd-50e8e3942a19","type":"message","user":"U03C71D7H","text":"zstd にしてみよ","ts":"1602507754.047400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jmZ"}]},{"client_msg_id":"83291c50-9a2e-4996-90f5-b32a847e02a2","type":"message","user":"U7B4ZD49X","text":"zの名を冠するもの。それすなわち最強","ts":"1602507721.046900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"p11Vd"}]},{"client_msg_id":"900a1f61-0f5a-4fb5-82a6-c825d10ea24f","type":"message","user":"UNJ2DANJC","text":"xzは重かった","ts":"1602507666.046500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7O6"}]},{"client_msg_id":"a96b6a5d-5aad-4510-a6b6-52928004640b","type":"message","user":"U9S4G0LJW","text":"Archの公式パッケージもだいぶ前にZstdに移行しましたね","ts":"1602507628.046000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=mq"}]},{"client_msg_id":"8f2ebca3-e759-4a08-8a7f-6a4cc465746c","type":"message","user":"U8CC7MDCL","text":"makepkg(AUR)の圧縮フォーマットとしても使える","ts":"1602507472.045000","team":"T03C4RC8V","reactions":[{"name":"sorena","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DdQ"}]},{"client_msg_id":"586d0ae8-df15-4d7b-b71a-0c2eb4163896","type":"message","user":"U03C71D7H","text":"\u003chttps://www.phoronix.com/scan.php?page=article\u0026amp;item=btrfs-zstd-compress\u003e ベンチマーク貼っておきます","ts":"1602507330.044400","attachments":[{"fallback":"Btrfs Zstd Compression Benchmarks On Linux 4.14 - Phoronix","id":1,"title":"Btrfs Zstd Compression Benchmarks On Linux 4.14 - Phoronix","title_link":"https://www.phoronix.com/scan.php?page=article\u0026item=btrfs-zstd-compress","text":"Phoronix is the leading technology website for Linux hardware reviews, open-source news, Linux benchmarks, open-source benchmarks, and computer hardware tests.","blocks":null,"service_name":"phoronix.com","service_icon":"https://www.phoronix.com/apple-touch-icon-57x57.png","from_url":"https://www.phoronix.com/scan.php?page=article\u0026item=btrfs-zstd-compress","original_url":"https://www.phoronix.com/scan.php?page=article\u0026amp;item=btrfs-zstd-compress"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2o1"}]},{"client_msg_id":"3314963f-94d5-402a-bb2d-649ca81e3879","type":"message","user":"U7B4ZD49X","text":"zstandard.名前だけ知ってる","ts":"1602507092.044200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pZs"}]},{"client_msg_id":"18b24ea3-ff46-48c4-abd1-2bfdaec5e8c9","type":"message","user":"U03C71D7H","text":"外付け HDD を RAID 組むとしたら Btrfs 使うと思うのでこちらは間違いなく zstd だなぁ","ts":"1602506746.043700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HjngW"}]},{"client_msg_id":"c0eee794-5dd2-4feb-9071-aa8b192ee93b","type":"message","user":"U03C71D7H","text":"Btrfs、全部を lzo で圧縮した後で、今だと zstd という選択肢もあることを知る。上位互換とまでは行かないけど、圧縮率は高まる。速度はその分ちょっと劣るか同じくらいっぽい (条件次第)\n再圧縮するか悩むw","ts":"1602506706.043100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"76xU"}]},{"client_msg_id":"19a4ec5b-1aeb-481e-a612-8cfbc00a4716","type":"message","user":"U03C71D7H","text":"引用のど真ん中に広告挟むのやめてほしい","ts":"1602480597.041100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QUF"}]},{"client_msg_id":"de0c5094-3659-47bd-a695-691167f8e39f","type":"message","user":"U776661HA","text":"何度で（ry","ts":"1602480157.040300","team":"T03C4RC8V","reactions":[{"name":"goodpoem","count":2,"users":["U9S4G0LJW","U8CC7MDCL"]},{"name":"iinoyo","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WHB"}]},{"client_msg_id":"e6584bd9-3f1f-4cda-8337-08e6f37baa4f","type":"message","user":"U06ECBRTJ","text":"w","ts":"1602480144.040000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"V7OR"}]},{"client_msg_id":"ee81394d-94ca-4668-9073-ab16d5a38f45","type":"message","user":"U7B4ZD49X","text":"これはすごいw","ts":"1602479940.039500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fyB"}]},{"client_msg_id":"c6e2b400-8600-40de-8fdc-fa5b88147154","type":"message","user":"U9S4G0LJW","text":"被り力","ts":"1602479870.039100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NaHP"}]},{"client_msg_id":"50642131-0046-4346-9c1d-0d35003b0e53","type":"message","user":"U06ECBRTJ","text":"\u003chttps://gigazine.net/news/20201011-linux-history/|https://gigazine.net/news/20201011-linux-history/\u003e","ts":"1602479854.038800","edited":{"user":"U06ECBRTJ","ts":"1602480131.000000"},"team":"T03C4RC8V","reactions":[{"name":"joy","count":1,"users":["U01AQ5BFNLX"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mmNI"}]},{"type":"message","user":"U01AQ5BFNLX","text":"Linux生みの親リーナス・トーバルズの当時のメールで振り返る「Linux」誕生の瞬間 - GIGAZINE\n\u003chttps://gigazine.net/news/20201011-linux-history/\u003e","ts":"1602466053.038600","attachments":[{"fallback":"GIGAZINE: Linux生みの親リーナス・トーバルズの当時のメールで振り返る「Linux」誕生の瞬間","id":1,"title":"Linux生みの親リーナス・トーバルズの当時のメールで振り返る「Linux」誕生の瞬間","title_link":"https://gigazine.net/news/20201011-linux-history/","text":"オープンソースコミュニティで最も成功したプロジェクトのひとつである「Linux」は、1991年にヘルシンキ大学の学生であったリーナス・トーバルズ氏によって開発されたOSであり、ウェブサーバーやスマートフォン、IoTデバイスをも支える、現代においてなくてはならない存在です。そんなトーバルズ氏が「Linuxの始まり」を当時のメールをもとに振り返る記述が、カーネギーメロン大学で教授を務めるAlan W Black氏によって公開されています。","image_url":"https://i.gzn.jp/img/2020/10/11/linux-history/00_m.jpg","blocks":null,"service_name":"GIGAZINE","service_icon":"https://gigazine.net/apple-touch-icon.png","from_url":"https://gigazine.net/news/20201011-linux-history/","original_url":"https://gigazine.net/news/20201011-linux-history/"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"ef94d624-6cf8-44ca-a5db-40f0a0a28ce3","type":"message","user":"U03C71D7H","text":"`getopt` は GNU 版は高機能だけど BSD 版は最初期オリジナル版で低機能なのか。めんどい。やはり諦めて `getopts` にしておくか (自分しか使わない予定のスクリプトでポータビリティ気にしてもしゃーないってのはまああるのだけど)","ts":"1602433526.038100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"x+Je"}]},{"client_msg_id":"b435aa3c-c974-4412-b2d0-ef74833c29ba","type":"message","user":"U03C71D7H","text":"そう言えば引数の処理に `getopts` を使ったけど、やっぱりロングオプションが使えないのが不便。 `getopt` がない環境ってそうそうないのかな。どの程度当たり前にあるものなのかよくわかってない","ts":"1602433390.036700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mmigW"}]},{"client_msg_id":"59cedc4c-fdc8-4679-991f-5673a4056d3b","type":"message","user":"U03C71D7H","text":"まあでもそうせざるを得ないよなぁ","ts":"1602433277.035600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"K6FN7"}]},{"client_msg_id":"7e59ede1-20aa-4dbd-9ccd-748cf625126b","type":"message","user":"U9S4G0LJW","text":"BtrfsでかつSSD使っていればメタデータの走査だけだろうからそこまでかからないだろうけど、それでもちょっとは待たされそうな気がする","ts":"1602433016.035300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2wlt"}]},{"client_msg_id":"f1cbee26-47f7-4d15-92d5-8862f82dc3db","type":"message","user":"U9S4G0LJW","text":"スクリプトの塊だと勝手に想像していたのでC++出てきて驚いた","ts":"1602432875.034200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lEtG"}]},{"client_msg_id":"ed5088e1-c31b-4bda-bc80-353227177687","type":"message","user":"U9S4G0LJW","text":"全走査してそうな雰囲気ある \u003chttps://github.com/openSUSE/snapper/blob/master/snapper/Compare.cc\u003e","ts":"1602432855.033600","attachments":[{"fallback":"GitHub: openSUSE/snapper","id":1,"title":"openSUSE/snapper","title_link":"https://github.com/openSUSE/snapper/blob/master/snapper/Compare.cc","text":"Manage filesystem snapshots and allow undo of system modifications - openSUSE/snapper","thumb_url":"https://avatars1.githubusercontent.com/u/623819?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/openSUSE/snapper/blob/master/snapper/Compare.cc","original_url":"https://github.com/openSUSE/snapper/blob/master/snapper/Compare.cc"}],"edited":{"user":"U9S4G0LJW","ts":"1602432957.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uOF"}]},{"client_msg_id":"30e522ae-d130-4979-8847-f89853e17e1e","type":"message","user":"U03C71D7H","text":"```usage: btrfs subvolume find-new \u0026lt;path\u0026gt; \u0026lt;lastgen\u0026gt;\n\n    List the recently modified files in a filesystem```\nそんな2点間の差分みたいな目的に使うにはざっくりすぎる気がする","ts":"1602432552.033100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"==Zg"}]},{"client_msg_id":"b85bcadc-babc-4fd0-86bb-9e3b9b247d07","type":"message","user":"U03C71D7H","text":"使い方知らんけど","ts":"1602432494.032400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZZc"}]},{"client_msg_id":"3616bacc-bef3-4987-985e-f7609241bc4d","type":"message","user":"U03C71D7H","text":"あーなるほど。それかも?","ts":"1602432488.032200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IYI"}]},{"client_msg_id":"b6c82000-30bd-4daa-9a83-e6848f279fc4","type":"message","user":"U9S4G0LJW","text":"そういえば`btrfs subvolume find-new`とかいうのがあるな、これ使ってるのかは知らないしこれ自体使ったことないが","ts":"1602432466.031900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VOUZ"}]},{"client_msg_id":"a5842e88-5fc5-4c81-8690-6b5fe4105af8","type":"message","user":"U03C71D7H","text":"プロジェクト単位とかならともかくシステム全体だとめっちゃ重いし、システムに負荷かかりそうでやりたくないんだが…","ts":"1602432414.031400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"S9M"}]},{"client_msg_id":"cd5f1078-a868-47ab-ae24-45b9f3a32bf7","type":"message","user":"U9S4G0LJW","text":"多分dir-diff取ってるだけじゃないかな","ts":"1602432388.030800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Dc6z"}]},{"client_msg_id":"f88f64af-3cec-4068-9fa2-ef1a5cdf166e","type":"message","user":"U03C71D7H","text":"snapper の差分便利そうだったけどあれどうやってるんだろう。まさか全捜査してる…?","ts":"1602432367.030300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HTI2"}]},{"client_msg_id":"78c58158-605c-463a-b91f-b908b535efb3","type":"message","user":"U03C71D7H","text":"復元は割り切って手動の予定","ts":"1602432343.029600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WBLGk"}]},{"client_msg_id":"566c6ccc-6ff6-47eb-862a-41faba5d693a","type":"message","user":"U03C71D7H","text":"と言うよりそもそも使い方がわからなかった…","ts":"1602432331.029200","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6u9xj"}]},{"client_msg_id":"c7ef61a5-e3d1-4b20-8c24-861b8aaea930","type":"message","user":"U9S4G0LJW","text":"復元するやつとか差分見るやつとか作りたいんだけど気が乗らないんだよな","ts":"1602432327.029100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Iaw1"}]},{"client_msg_id":"322ba217-7fc9-4b34-a155-3562ded7fddb","type":"message","user":"U9S4G0LJW","text":"年ごと、月ごと、日ごとに最古の物と最新の物をキープするようにはした（管理したくない）","ts":"1602432314.028500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"t8=/L"}]},{"client_msg_id":"86b8737c-ca2a-4b5e-b7db-4dd39c89bd8f","type":"message","user":"U9S4G0LJW","text":"snapperを自分の気が済むまで設定するより作った方が楽という真理","ts":"1602432302.028300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SI3"}]},{"client_msg_id":"77e3118d-2007-4d39-bc38-c52a60bfb51e","type":"message","user":"U03C71D7H","text":"ちゃんとやりたいなら snapper でいいだろという話もありそうだが、snapper どうも使い方がわからなかった。設定ファイル作ったのに読み込んでくれなかったし","ts":"1602432180.027300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hA=ot"}]},{"client_msg_id":"dbf0e20a-7aef-4e1c-9b9e-92cfc3baf550","type":"message","user":"U03C71D7H","text":"もうちょい整理したらスクリプトは公開します (ただしオレオレ仕様なので他の人が使うことはあんまり想定してない)","ts":"1602432133.026600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SgD"}]},{"client_msg_id":"04858879-8c34-4114-9b00-f4447326dad2","type":"message","user":"U03C71D7H","text":"最新 n 個を残して古いのを削除、などできるようになってる","ts":"1602432094.026000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IqXXT"}]},{"client_msg_id":"665d70d3-7ed3-44a6-93b0-ccd6c2b44f21","type":"message","user":"U9S4G0LJW","text":"スナップショット、撮りはしてるけどその後の事は何も考えられてない…","ts":"1602431976.025600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vL1"}]},{"client_msg_id":"3ac3bce4-bd4a-4bc0-aba8-81f464c8dc8e","type":"message","user":"U03C71D7H","text":"Btrfs のスナップショットをいい感じにするラッパスクリプトを作っている。今は選択して削除する部分を作った","ts":"1602431615.024900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2Xvqg"}]},{"client_msg_id":"70d90bd4-789f-4298-a8cb-e752180ecb59","type":"message","user":"U03C71D7H","text":"簡単なスクリプトのつもりだったけどちょっとずつ書き足していった結果 191 行になってた","ts":"1602431552.024300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1Kx5"}]},{"client_msg_id":"7de30c88-de2b-4e99-af60-347bdd5c5b15","type":"message","user":"U9S4G0LJW","text":":goodpoem:","ts":"1602431475.023900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"h=r=="}]},{"client_msg_id":"b8b6f12a-c4dd-46c4-b7fd-b071e459bdfb","type":"message","user":"U03C71D7H","text":"select 便利だった","ts":"1602431466.023700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CK2/"}]},{"client_msg_id":"4795b76a-3282-43e1-9819-5e937b834c96","type":"message","user":"U03C71D7H","text":"使い方むずいなこれ","ts":"1602431006.023500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"H2XUW"}]},{"client_msg_id":"a9462d6a-4d10-48b4-b9ee-bb080ece7316","type":"message","user":"U03C71D7H","text":"select 知らんかった","ts":"1602430568.023300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"X12Tk"}]},{"client_msg_id":"ec2f0bb2-32a9-47b6-97dd-cc0c5b1dd034","type":"message","user":"U9S4G0LJW","text":"VM の中で sudoers を直接触ろうとしたら read only になってて:erai:ってなってる","ts":"1602430006.022500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TF6l"}]},{"client_msg_id":"339a8f54-11f3-4044-9641-7a2f8aae62d1","type":"message","user":"U06BRP8VD","text":"まぁ、なかなかないケースだけどねw","ts":"1602428805.021200","team":"T03C4RC8V","reactions":[{"name":"tashikani","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Lh+"}]},{"client_msg_id":"12008134-8969-40d9-a51d-54039f750ff1","type":"message","user":"U9S4G0LJW","text":"ちょっと面倒だな","ts":"1602428793.020900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QvY/x"}]},{"client_msg_id":"a0e094cb-96d2-479c-9af4-cd546b0f1a31","type":"message","user":"U06BRP8VD","ts":"1602428792.020600","files":[{"id":"F01BY6EQB1V","created":1602428790,"timestamp":1602428790,"name":"Untitled","title":"Untitled","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"プレーンテキスト","user":"U06BRP8VD","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":79,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F01BY6EQB1V/untitled","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F01BY6EQB1V/download/untitled","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F01BY6EQB1V/untitled","permalink_public":"https://slack-files.com/T03C4RC8V-F01BY6EQB1V-33e2b403e7","edit_link":"https://vim-jp.slack.com/files/U06BRP8VD/F01BY6EQB1V/untitled/edit","preview":"$ select x in aa bb cc \"\"; do echo $x; done\n1) aa\n2) bb\n3) cc\n4)","preview_highlight":"\u003cdiv class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text/plain',window.getSelection().toString().replace(/\\u200b/g,''));event.preventDefault();event.stopPropagation();}\"\u003e\n\u003cdiv class=\"CodeMirror-code\"\u003e\n\u003cdiv\u003e\u003cpre\u003e$ select x in aa bb cc \u0026quot;\u0026quot;; do echo $x; done\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e1) aa\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e2) bb\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e3) cc\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e4)\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n","lines":10,"lines_more":5,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"dfcefa1f-677d-4f53-954a-5639c6c2092a","type":"message","user":"U9S4G0LJW","text":"ん、例外ないのか","ts":"1602428786.020300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"N9HwY"}]},{"client_msg_id":"36111676-aa0a-4997-ae29-eaed215fe359","type":"message","user":"U06BRP8VD","text":"ん? これ無効な値を入れたことの検出が微妙にムズイな? まぁ選択肢に空文字列がなければ良いのか?","ts":"1602428758.020100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SYO"}]},{"client_msg_id":"3e4880d2-7948-4a14-abad-44c652a8cea2","type":"message","user":"U06BRP8VD","text":"select でループするのは違うか。","ts":"1602428604.019400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jLHv"}]},{"client_msg_id":"70d3a445-1676-4ea3-a8ef-54dbde46f811","type":"message","user":"U06BRP8VD","text":"へー","ts":"1602428513.019100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UyS"}]},{"client_msg_id":"6be71d05-3db3-4ad4-ba7b-dfe3286684d3","type":"message","user":"U06BRP8VD","text":"あーこれchoiceとほぼいっしょだ","ts":"1602428508.018900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"25xu"}]},{"client_msg_id":"7e81329a-e979-4aa3-ba56-2d8650f7ed73","type":"message","user":"U03C71D7H","text":"ですね。なので lzo にするとパフォーマンスも向上するってどこかの記事に書いてありました (この記事は zstd がない頃のもの)","ts":"1602508721.056800","thread_ts":"1602507796.048600","parent_user_id":"U03C71D7H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"V0Y9Y"}]}]
