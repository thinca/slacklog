[{"client_msg_id":"44f799ec-f109-4891-8c9e-a12fb8134967","type":"message","user":"U03C71D7H","text":"curl で 4xx 系だった時はコマンドを失敗にしたいのだけど、レスポンスの表示もしたい場合ってどうすればいいでしょう? `--fail` だとレスポンスが表示されず…","ts":"1583680818.199200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uAHL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"F44B7135-BC99-478A-A55A-72E4BC638FD5","type":"message","user":"UDDCM376D","text":"-o とか指定してもダメな感じすか？","ts":"1583681164.199900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6XX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0bb4ebbb-62a2-40ee-afcf-ecde3c1fd5ce","type":"message","user":"U9S4G0LJW","text":"ググったらシェルで頑張るという答えとwgetを使うという答えが出てきました:totemoturai:","ts":"1583681291.200500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Pyk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4ad7f938-97a9-4a1f-b4e3-f32c7bd23dee","type":"message","user":"U9S4G0LJW","text":"<https://stackoverflow.com/questions/22506024/get-page-output-with-curl-fail>","ts":"1583681296.200700","attachments":[{"fallback":"Stack Overflow: Get page output with curl --fail","id":1,"title":"Get page output with curl --fail","title_link":"https://stackoverflow.com/questions/22506024/get-page-output-with-curl-fail","text":"Calling curl without parameters, i get the page output, even with an http status code = 404: $ curl <http://www.google.com/linux;> <!DOCTYPE html> &lt;html lang=en&gt; &lt;meta charset=utf-8...","thumb_url":"https://cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon@2.png?v=73d79a89bded","blocks":null,"service_name":"Stack Overflow","service_icon":"https://cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon.png?v=c78bd457575a","thumb_width":316,"thumb_height":316,"from_url":"https://stackoverflow.com/questions/22506024/get-page-output-with-curl-fail","original_url":"https://stackoverflow.com/questions/22506024/get-page-output-with-curl-fail"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"32rY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"567739a4-844f-4724-aaaa-4b9683a8e055","type":"message","user":"U9S4G0LJW","text":"curl単品だと無理っぽい、manにも-f付けないと終了コード22は使われないよって書いてあるし","ts":"1583681373.201700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3vAc0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"de495960-ef5c-4828-85c2-f2927e421ed7","type":"message","user":"U9S4G0LJW","text":"-o指定しても-f付いてたら保存されない","ts":"1583681399.202000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DxmR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"44ce2280-8ce7-4628-b8e7-8fd8d2f164bd","type":"message","user":"U03C6TEAZ","text":"15年前からドキュメントに書いてある、と close される issue です。ご確認下さい。 <https://github.com/curl/curl/issues/1978>","ts":"1583681492.202700","attachments":[{"fallback":"GitHub: use of --fail hides http headers/body · Issue #1978 · curl/curl","id":1,"title":"use of --fail hides http headers/body · Issue #1978 · curl/curl","title_link":"https://github.com/curl/curl/issues/1978","text":"I did this % curl --fail --dump-header - --request POST --data-urlencode foo=bar 127.0.0.1:9999 curl: (22) The requested URL returned error: 403 Forbidden % echo $? 22 I expected the following % cu...","thumb_url":"https://repository-images.githubusercontent.com/569041/a7c0b500-5cae-11e9-9287-1d94b1db9c95","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":500,"thumb_height":250,"from_url":"https://github.com/curl/curl/issues/1978","original_url":"https://github.com/curl/curl/issues/1978"}],"team":"T03C4RC8V","reactions":[{"name":"eyes","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1/nI9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fe9ef34d-1d8e-4902-ac62-4fbb2e2fda5a","type":"message","user":"U03C71D7H","text":"とてもつらい","ts":"1583681746.203100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"svqm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7f288bf3-c5cf-4def-9589-66a20d406ad8","type":"message","user":"U03C71D7H","text":"GitHub API を curl で叩くのに、失敗したらそこで止まってほしいけど失敗の理由は出力されてほしい…","ts":"1583681891.203700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tSaVo"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"19636776-60f8-40fe-9704-fd6468162b40","type":"message","user":"U03C6TEAZ","text":"メッセージは stderr にでますけどそれでは不十分？","ts":"1583682153.204100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FZuI"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8a14735a-e7ff-4d80-9f06-e4ead4f978aa","type":"message","user":"U03C71D7H","text":"あれ、レスポンスの body でます?","ts":"1583682261.204300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VxwtY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"126325e8-2d2a-48c3-ace1-4d88f9df8d36","type":"message","user":"U03C6TEAZ","text":"メッセージだけ出ます。","ts":"1583682283.204700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Wks"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"88a7c493-11cb-4bd7-b45c-7bdd73bda10f","type":"message","user":"U03C6TEAZ","text":"header の。","ts":"1583682292.205000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sMJj"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e771945d-6afd-4c86-9698-f521f6fe5c04","type":"message","user":"U03C71D7H","text":"API は失敗するとレスポンスの body に失敗の理由を返してくれるので、できればそれを残したい感じです","ts":"1583682309.205400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Tyl3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7d217534-d614-4c99-84bf-a9f0395822db","type":"message","user":"U03C6TEAZ","text":"stackoverflow とか見ると wget 使えと書いてますね。","ts":"1583682346.206100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fom9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5126b8f1-42dd-4c71-866d-a5ded92367d7","type":"message","user":"U03C71D7H","text":"wget かー POST が割とダルいイメージ…","ts":"1583682382.206500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"a66"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b412a7d4-8b4f-418a-86f3-b0233e615788","type":"message","user":"U03C71D7H","text":"がんばるしかないか","ts":"1583682469.207500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+dzb"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f9779e3c-069b-47a9-8155-f47b5a4b2424","type":"message","user":"U03C6TEAZ","text":"HTTP のレスポンスが HTML 返すか `{\"error\": \"xxx\"}` 返すかは特にルール無いので(ドキュメント化されてなければ)、もし取れても汎用的に作れるかどうかは分からないすねー。","ts":"1583682488.207900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oUFay"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ba4f30e6-0dcb-4b6e-ab0b-e32ffe973ef9","type":"message","user":"U03C71D7H","text":"あー単に人が見る用なので形式はなんでもよいのです。GHA が失敗した時に理由がないとしんどいと言うアレ","ts":"1583682536.208700","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["U03C6TEAZ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"43J"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c60274a8-dd41-4af6-92fe-e221fbe61cb5","type":"message","user":"U03C71D7H","text":"<https://github.com/actions/virtual-environments/blob/master/images/linux/Ubuntu1804-README.md>\nwget はさすがに入ってそうなのでやるか","ts":"1583682628.209200","attachments":[{"fallback":"GitHub: actions/virtual-environments","id":1,"title":"actions/virtual-environments","title_link":"https://github.com/actions/virtual-environments/blob/master/images/linux/Ubuntu1804-README.md","text":"GitHub Actions virtual environments. Contribute to actions/virtual-environments development by creating an account on GitHub.","thumb_url":"https://avatars2.githubusercontent.com/u/44036562?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/actions/virtual-environments/blob/master/images/linux/Ubuntu1804-README.md","original_url":"https://github.com/actions/virtual-environments/blob/master/images/linux/Ubuntu1804-README.md"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ppB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f20c4fe5-7272-4afb-90f6-3fa87f68673a","type":"message","user":"U03C71D7H","text":"wget で検索しているのに curl を含む結果を返してくる Google さん…","ts":"1583682671.209700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HN7W"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0c79fc9a-406e-47b2-8255-a428d7c53afb","type":"message","user":"U03C71D7H","text":"curl のコマンドラインを wget に変換するツールほしい","ts":"1583682721.210100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"t246"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"95a6b1be-c8f1-4e7e-a2ad-aa4b627f9e28","type":"message","user":"U03C71D7H","text":"たぶん書き直せた。 `--content-on-error` 最高","ts":"1583683232.210400","team":"T03C4RC8V","reactions":[{"name":"tiken","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"b/E"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6fa2d02c-2d1f-4184-b22e-fbf06a5fd3b6","type":"message","user":"U06ECBRTJ","text":"あとは、 `-v` つけて、 `&lt; HTTP/2 404` とか `&lt; HTTP/1.1 404` を `grep` するとか？","ts":"1583684763.211800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hPR9h"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5b3bd944-ecde-4d97-bb48-12fa7f65eb35","type":"message","user":"U03C71D7H","text":"絶対にやりたくない","ts":"1583684865.212000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QDfFi"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"50e12619-da11-40a8-975a-af1a2e345567","type":"message","user":"U03C6TEAZ","text":"もしそれやるなら `-i` がいい。","ts":"1583684919.212500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tsh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0f47ce6d-f439-4999-b07b-385907c8f02e","type":"message","user":"U06ECBRTJ","text":"確かにそうですね","ts":"1583684948.213200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eQ9+F"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3896552f-21a0-4e56-8e32-c1ef05aaca84","type":"message","user":"U03C71D7H","text":"Ruby とかならともかく Bash ではやりたくないですねw","ts":"1583684955.213400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"q+C8w"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8139f4c7-8540-4a80-94ce-e28dd7af622e","type":"message","user":"U06ECBRTJ","text":"もしくは、 `--head` か…","ts":"1583684969.213700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OaX1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"75ad8e2b-bb34-400d-9952-604e91c67efa","type":"message","user":"U03C4RC8X","text":"今日のarchlinux活の様子です <https://aur.archlinux.org/packages/acroread/#comment-732753>","ts":"1583688113.214000","attachments":[{"fallback":"AUR (en) - acroread","id":1,"title":"AUR (en) - acroread","title_link":"https://aur.archlinux.org/packages/acroread/#comment-732753","text":"Adobe Acrobat Reader is a PDF file viewer","blocks":null,"service_name":"aur.archlinux.org","from_url":"https://aur.archlinux.org/packages/acroread/#comment-732753","original_url":"https://aur.archlinux.org/packages/acroread/#comment-732753"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nG3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bf1a2f91-b19b-4748-b98a-9c7d77d4f387","type":"message","user":"U06ECBRTJ","text":"<https://ja.wikipedia.org/wiki/Adwaita_(%E3%83%86%E3%83%BC%E3%83%9E)>\nadwaita ってこれだろうけど、 warn として出ても、無視して大丈夫って割と思ってた","ts":"1583713144.214900","attachments":[{"fallback":"wikipedia: Adwaita (テーマ)","id":1,"author_name":"Wikipedia","author_link":"https://ja.wikipedia.org/","title":"Adwaita (テーマ)","title_link":"https://ja.wikipedia.org/wiki/Adwaita_(%E3%83%86%E3%83%BC%E3%83%9E)","text":"Adwaita（アドワイタ）は、GTK向けのテーマ。また、同名のアイコンのセットも存在する。GNOMEデスクトップ環境において、バージョン3以降のデフォルトのテーマとなっている。","image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/2/22/GNOME_Files_v3.34_%282019-09%29.png/1200px-GNOME_Files_v3.34_%282019-09%29.png","blocks":null,"service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/wikipedia.png","from_url":"https://ja.wikipedia.org/wiki/Adwaita_(%E3%83%86%E3%83%BC%E3%83%9E)","original_url":"https://ja.wikipedia.org/wiki/Adwaita_(%E3%83%86%E3%83%BC%E3%83%9E)"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"g=T"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b629a158-8411-42fe-a5f9-07d48240dd12","type":"message","user":"U03C4RC8X","text":"うむ、おそらくこれは無関係&gt;adwaita","ts":"1583717038.215500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OA4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
