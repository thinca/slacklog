[{"client_msg_id":"f8dfc989-3242-4177-a89b-047043e778de","type":"message","user":"U7986PPFH","text":"Ubuntu 18.04 でASANビルドしてテストかけると、vim9周りでメモリリークがぽろぽろ出てくる","ts":"1583490135.324700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YMQs1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"61f706f8-71cc-4b17-9f75-efb854c9e620","type":"message","user":"U7986PPFH","text":"Vimはまだon 14.04でCI走らせているけど、14.04のASANは結構リーク見逃しているのでいまいち役に立ってない","ts":"1583490325.327400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YsHMq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c7208b78-51ab-4457-9544-e11a6f2853cd","type":"message","user":"U03C6TEAZ","text":"<https://github.com/vim/vim/blob/49b79bd4888341d527c95f2aa73ed953203ce2b6/src/popupmenu.c#L44>","ts":"1583490886.329000","attachments":[{"fallback":"GitHub: vim/vim","id":1,"title":"vim/vim","title_link":"https://github.com/vim/vim/blob/49b79bd4888341d527c95f2aa73ed953203ce2b6/src/popupmenu.c#L44","text":"The official Vim repository. Contribute to vim/vim development by creating an account on GitHub.","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/blob/49b79bd4888341d527c95f2aa73ed953203ce2b6/src/popupmenu.c#L44","original_url":"https://github.com/vim/vim/blob/49b79bd4888341d527c95f2aa73ed953203ce2b6/src/popupmenu.c#L44"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zsY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6b9af419-23fe-4a99-bc6f-f1bd7f1196cf","type":"message","user":"U03C6TEAZ","text":"typo: s/poup/popup/","ts":"1583490894.329400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9U8Un"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"13a4deb6-61f3-4f89-98e6-47443b72b361","type":"message","user":"U6XP9LZ6V","text":"ubuntu、アップデートしないといけないか。14.04だとサポート切れてるし","ts":"1583490967.330600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+mjXg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"66a6b420-1762-48f8-9165-9b961178ee93","type":"message","user":"U6XP9LZ6V","text":"あるいはGHAに移行するのも手かもしれないけど、面倒…","ts":"1583492802.331500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+5iS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c0befabf-ffa8-43bd-99c3-8739f6e27099","type":"message","user":"U03C71D7H","text":"k-takata さんのアドバイス(win32-installer の手法紹介)のおかげでようやく GHA の Windows で Vim をビルドしてバージョンを確認できるようになった","ts":"1583492945.332500","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U6XP9LZ6V"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"E8qeA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2ad3aa09-cac8-4122-ad9e-f00a65d5d565","type":"message","user":"U6XP9LZ6V","text":"VimのOLE機能を使ってる人いるのだろうかという疑問が…","ts":"1583493354.334900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aXL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b59dcfe2-0319-4ea4-ab47-2abd8b257ebf","type":"message","user":"U03C6TEAZ","text":"たぶんいない。","ts":"1583493436.335100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"N+V9X"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e9af5323-8f9a-4364-95c1-43945baf89c3","type":"message","user":"U03C6TEAZ","text":"デフォルトオフでもいい気がしてる。","ts":"1583493468.335700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"H9aNp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"06867b9b-2a34-4fd3-b844-3035c453cb3c","type":"message","user":"U6XP9LZ6V","text":"OLE対応ってVisVimのための機能ですよね？\nVisVimのソースも削除しちゃってもいい気がする。","ts":"1583494238.338200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ybv9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"af564a72-9470-46fa-8085-1ff1bbd05d4a","type":"message","user":"UAZ33BKV2","text":"まー使ってませんよねー...","ts":"1583494296.338500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"F7h"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"15a13d16-ce3c-482c-a619-a49c7b402640","type":"message","user":"U03C6TEAZ","text":"Vim 自信が IDE になりつつあるしいらんかな。","ts":"1583494381.339300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Hv4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c49b1c41-c5df-47de-9ae8-917b87f1727d","type":"message","user":"U6XP9LZ6V","text":"お、`a:` 辞書に何も追加しないようにしたら 0.83sec まで大幅改善。built-in が 0.79sec、文字列が 0.35sec なので、ここまでくれば十分かな。","ts":"1583463768.306500","team":"T03C4RC8V","reactions":[{"name":"sokudo","count":2,"users":["U9S4G0LJW","U7JL1UKKL"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"O+QDP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"39568bba-1f88-40b3-80d0-46a6fadee51f","type":"message","user":"U03C6TEAZ","text":"すごい","ts":"1583464434.306700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UPbJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2ff7062c-34c9-4dc5-be56-3118d5efe27b","type":"message","user":"U03C6TEAZ","text":"lambda の引数 `...` にできるけど機能落ちはしない？","ts":"1583464464.307200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"f6dg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"32cb4beb-3d88-433c-b94f-a699020392ec","type":"message","user":"U03C6TEAZ","text":"あれ？ <https://github.com/vim/vim/pull/5728#issuecomment-595544783>","ts":"1583464685.307400","attachments":[{"fallback":"GitHub: Fix popup by mattn · Pull Request #5728 · vim/vim","id":1,"title":"Fix popup by mattn · Pull Request #5728 · vim/vim","title_link":"https://github.com/vim/vim/pull/5728#issuecomment-595544783","text":"func! Test() abort call popup_atcursor(repeat(&amp;#39;x&amp;#39;, 500), { \\ &amp;#39;moved&amp;#39;: &amp;#39;any&amp;#39;, \\ &amp;#39;border&amp;#39;: [1, 1, 1, 1], \\}) endfunc call cursor([9, 78]) call Test() &amp;quot;===...","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/pull/5728#issuecomment-595544783","original_url":"https://github.com/vim/vim/pull/5728#issuecomment-595544783"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lliz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dabf7f4b-fff5-4169-ac4a-6a6edf6f5e79","type":"message","user":"U03C6TEAZ","text":"この件、Bram から再現しないって言われてしまったけど皆さんも再現しない？","ts":"1583464700.308000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BwE"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0c3b4ccb-908f-48d6-9924-5b51fd034e80","type":"message","user":"U6XP9LZ6V","text":"lambda式を \"a:\" で検索して、見つからなければ `a:` 辞書には何も追加しないというようにしたので、a: を使っていれば従来通り動作します。（遅いままですが）","ts":"1583466693.310300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uhV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3e84a156-d72e-476d-a1dd-38faee92e52e","type":"message","user":"U03C71D7H","text":"eval() 使うと死亡? (まあそんなことしてる人いないと思いますが)","ts":"1583466790.310700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mJx0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f2d82594-2746-4b18-8250-2123ba822fca","type":"message","user":"U9S4G0LJW","text":"もうそこまでいくと無視していいと思うけど","ts":"1583466947.311200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tSq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e16069e0-b145-4b2c-9a6a-edf057743af8","type":"message","user":"U9S4G0LJW","text":"スコープを状況で変えたいケース自体遭遇したことないし、ラムダの中でそれする人がいるとも思えない","ts":"1583466985.312200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GDu4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9587690b-c77a-4ee0-ab59-70e235c57964","type":"message","user":"U6XP9LZ6V","text":"lambda式自体を文字列として検索しているので、eval() とか execute() の中で a: を使っても動きます。逆に、文字列の中にたまたま a: が出てきても `a:` 辞書に変数が追加されてしまいますが、速くならないだけでそれ以外の害はありません。","ts":"1583467205.314600","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":2,"users":["U03C6TEAZ","U7D5LRRQD"]},{"name":"banjaku","count":3,"users":["U9S4G0LJW","U7D5LRRQD","U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BlN"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ef7b9415-da51-413f-87ff-48ad6112f73e","type":"message","user":"U03C6TEAZ","text":"vimlparser の\n```(echo ::)```\nエラーになるのずっと前からだけどこれは無視していいやつなんだろか。","ts":"1583468122.316600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+r5L"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0a788458-c445-4ee0-9a69-4dae9ce1996d","type":"message","user":"U6XP9LZ6V","text":"いくつか構造体のサイズを調べてみたんだけど、`funccall_T` が2KB以上もあってヤバい。関数1個実行するたびにこれだけメモリが使われるのか…。","ts":"1583474244.318300","team":"T03C4RC8V","reactions":[{"name":"fuita","count":2,"users":["U06BRP8VD","U7JL1UKKL"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IlrY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"027a3bb6-d2fe-40ba-b096-60632cb6208e","type":"message","user":"U03C6TEAZ","text":"でかw","ts":"1583474258.318600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mgIo"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a4ddf1e1-65a6-44f1-9540-7cdb6ee78c3b","type":"message","user":"U6XP9LZ6V","text":"```garray_T: 24\nhashtab_T: 296\ndict_T: 336\ndictitem_T: 24\nlist_T: 88\nlistitem_T: 32\nfunccall_T: 2112\nufunc_T: 304\npartial_T: 48\ntypval_T: 16\njobopt_T: 728```","ts":"1583474267.318800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qwDsW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1e7473b8-b8ae-413e-97c2-e425553f3ed2","type":"message","user":"U6XP9LZ6V","text":"64bit Windowsの場合","ts":"1583474305.319200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2WKY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ba6b26f9-b782-4be1-8e51-06b8c2454fc1","type":"message","user":"UAZ33BKV2","text":"hashtabとdictもかなり...てかufunc...","ts":"1583474715.319600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qlz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"88b47a73-21a3-4ce7-bfc5-ab1ffdbeb139","type":"message","user":"U03C6TEAZ","text":"Vim script の引数の最大数が  20 というのを知った。","ts":"1583475602.319900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"b06W4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"14d8f5b6-6318-4626-8ab1-6f6e0dcf0af2","type":"message","user":"U03C6TEAZ","text":"```func X(v001, v002, v003, v004, v005, v006, v007, v008, v009, v010, v011, v012, v013, v014, v015, v016, v017, v018, v019, v020, v021) abort\n echo a:v001 a:v002 a:v003 a:v004 a:v005 a:v006 a:v007 a:v008 a:v009 a:v010 a:v011 a:v012 a:v013 a:v014 a:v015 a:v016 a:v017 a:v018 a:v019 a:v020 a:v021\nendfunc\n\ncall X(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21)```","ts":"1583475619.320100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"061"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"36ef6afe-5a70-4b3b-921e-dbf9d50c7026","type":"message","user":"UAZ33BKV2","text":"42ではなかったか...","ts":"1583475731.320300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cN7H"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d4f9917d-35c0-4e99-bdd5-374f1ec5df2e","type":"message","user":"U03C71D7H","text":"配列を渡せばいいんですよ","ts":"1583476174.320800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MWz+y"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"daadfd5c-c5ab-4ba5-ade5-dce6c4aaddad","type":"message","user":"U6XP9LZ6V","text":":h a:0","ts":"1583476183.321000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dp=o="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UPZHKAM7W","text":"```\n                                        *a:0* *a:1* *a:000* *E740* *...*\n引数はコンマで区切ることで、最大20まで与えることができる。最後の引数を \"...\"\nにすることで、可変長の引数を使用できる。関数の中では \"a:1\" や \"a:2\" のようにし\nて可変長の引数にアクセスできる。\"a:0\" は可変長引数が幾つあるかを示している (0\nであること、つまり引数がそれ以上ないこともある)。\"a:000\" は全引数を持つリスト\n|List|を示している。Note \"a:1\" は \"a:000[0]\" と同じである。\n```","ts":"1583476184.321100","bot_id":"BPM858KEE","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"e1deae8c-9b90-43c4-b13a-a973a605f6a2","type":"message","user":"U6XP9LZ6V","text":"引数20個分の配列が `funccall_T` の中に丸ごと確保されてるのがなかなか豪快。","ts":"1583476320.321900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"x8qgw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9be60a75-8863-4a8f-8234-53f3a85de749","type":"message","user":"U6XP9LZ6V","text":"32 * 20 = 640 bytes","ts":"1583476370.322200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2Gp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
