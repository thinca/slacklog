[{"client_msg_id":"f79ab7ca-2c00-40df-922c-45267276c9ba","type":"message","user":"UB88NP1PY","text":"<@U03C6TEAZ> さん、v8.1.1579 の修正どうもありがとうございました。","ts":"1561361385.042700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"77321b70-2633-4760-81d2-09cd8868460a","type":"message","user":"UB88NP1PY","text":"なんか、まだ同じ手順でうまくいかないことがあるのでとりあえずデータだけ。。","ts":"1561361402.043100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bde9a307-a0cd-4783-bf4d-f283d30968e2","type":"message","user":"U03C6TEAZ","text":"僕は問題提起だけで直したのは Bram ですね。","ts":"1561361476.043600","team":"T03C4RC8V","reactions":[{"name":"pray","count":1,"users":["UB88NP1PY"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9315b6a6-e62f-4bbd-99b1-c88af7d46089","type":"message","user":"UB88NP1PY","text":"あ、そうでしたか。中身まで追えてませんでした。。","ts":"1561361507.044000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8acc974e-b332-4c1b-a84c-bbe14a37b4cb","type":"message","user":"UB88NP1PY","text":"それだと vim-dev に送ったほうがよさそうですね。","ts":"1561361523.044400","team":"T03C4RC8V","reactions":[{"name":"man-gesturing-ok","count":1,"users":["U03C6TEAZ"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d08c39fb-5eff-40a4-af8f-5f79c4b49879","type":"message","user":"U7986PPFH","text":"<https://github.com/vim/vim/pull/4579> 修正送りました","ts":"1561361830.045700","attachments":[{"fallback":"GitHub: Fix: Crash by GC during specific processing by ichizok · Pull Request #4579 · vim/vim","id":1,"title":"Fix: Crash by GC during specific processing by ichizok · Pull Request #4579 · vim/vim","title_link":"https://github.com/vim/vim/pull/4579","text":"Ref #4571 Repro steps Case 1. Error in timer callback timer.vim func Func(timer) &amp;quot; fail to create list let x = [ endfunc call timer_start(1, &amp;#39;Func&amp;#39;) vim --clean -S timer.vim Case 2...","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/pull/4579","original_url":"https://github.com/vim/vim/pull/4579"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2f425cc8-bede-4b9c-977f-c81114c2c04a","type":"message","user":"UB88NP1PY","text":"お、ありがとうございます！まさにこれっぽいですがマージされたら確認してみます。","ts":"1561361967.046500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cd03592e-1f6d-41b5-8ca9-1048a49c6606","type":"message","user":"U7D5LRRQD","text":"基本的なとこできた！\n<https://twitter.com/public_ai000ya/status/1142808772106051586>","ts":"1561303162.012900","attachments":[{"fallback":"<https://twitter.com/public_ai000ya|@public_ai000ya>: 現在のVim script's string interpolations実装状況です！\n\n#Vim\n#進捗ノート <https://pbs.twimg.com/tweet_video_thumb/D9wSfsjU4AAscKQ.jpg>","id":1,"author_name":"あいや","author_subname":"@public_ai000ya","author_link":"https://twitter.com/public_ai000ya/status/1142808772106051586","author_icon":"https://pbs.twimg.com/profile_images/1128854181048045568/cABlPICl_normal.jpg","text":"現在のVim script's string interpolations実装状況です！\n\n#Vim\n#進捗ノート","thumb_url":"https://pbs.twimg.com/tweet_video_thumb/D9wSfsjU4AAscKQ.jpg","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1561301818,"service_name":"twitter","thumb_width":1200,"thumb_height":517,"video_html":"<video autoplay loop muted poster=\"https://pbs.twimg.com/tweet_video_thumb/D9wSfsjU4AAscKQ.jpg\" width=\"1200\" height=\"517\"><source type=\"video/mp4\" src=\"https://video.twimg.com/tweet_video/D9wSfsjU4AAscKQ.mp4\"></video>","video_html_width":1200,"video_html_height":517,"from_url":"https://twitter.com/public_ai000ya/status/1142808772106051586","original_url":"https://twitter.com/public_ai000ya/status/1142808772106051586"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3bfa7de5-7273-48c4-ba20-6caa0429654c","type":"message","user":"U03C71D7H","text":"これ割と致命的かなと思ってるんですが、分かる人いますか? 私も明日辺りダメ元でソースコードとにらめっこしてみようかなとは思ってるんですが…\n<https://github.com/vim-jp/issues/issues/1279>","ts":"1561306936.013800","attachments":[{"fallback":"GitHub: scriptversion 2 で、評価されない辞書アクセスがエラーになる · Issue #1279 · vim-jp/issues","id":1,"title":"scriptversion 2 で、評価されない辞書アクセスがエラーになる · Issue #1279 · vim-jp/issues","title_link":"https://github.com/vim-jp/issues/issues/1279","text":"不具合の内容 scriptversion 2 を実行したスクリプト内 (. による文字列連結の禁止)で、短絡評価で実際に評価されなかった部分に辞書アクセス dict.foo があるとエラーになってしまいます。 現象・ログ 再現手順を参照。 再現手順 sample.vim scriptversion 2 let x = {&amp;#39;foo&amp;#39;: 0} if 0 &amp;&amp; x....","thumb_url":"https://avatars2.githubusercontent.com/u/1051958?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/vim-jp/issues/issues/1279","original_url":"https://github.com/vim-jp/issues/issues/1279"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b7b2c0c9-3c48-4d13-9974-ab4edf99da53","type":"message","user":"U9S4G0LJW","text":"とりあえず直接の原因はeval5の中にあるというのがわかった","ts":"1561309631.014200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6556f2bb-26ad-4292-92f6-2b718e706d74","type":"message","user":"U9S4G0LJW","text":"ここの部分の分岐ですね\n<https://github.com/vim/vim/blob/7be3ab25891fec711d8a2d9d242711a9155852b6/src/eval.c#L4039>","ts":"1561309878.015000","attachments":[{"fallback":"GitHub: vim/vim","id":1,"title":"vim/vim","title_link":"https://github.com/vim/vim/blob/7be3ab25891fec711d8a2d9d242711a9155852b6/src/eval.c#L4039","text":"The official Vim repository. Contribute to vim/vim development by creating an account on GitHub.","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/blob/7be3ab25891fec711d8a2d9d242711a9155852b6/src/eval.c#L4039","original_url":"https://github.com/vim/vim/blob/7be3ab25891fec711d8a2d9d242711a9155852b6/src/eval.c#L4039"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a7623288-40b2-4eab-866b-52c9386d2ded","type":"message","user":"U9S4G0LJW","text":"これ、評価が走ると `x.foo` の部分の文字列が辞書アクセスとして構文解析されて消費されるけど、 `&amp;&amp;` により評価が走らないと辞書アクセスが丸ごとスキップされて、全部文字列連結として構文解析されるので、結果エラーが起きているみたいですね","ts":"1561312805.017400","edited":{"user":"U9S4G0LJW","ts":"1561313145.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fa3a8131-5700-4ffd-b53b-7ce9daf459b2","type":"message","user":"U9S4G0LJW","text":"構文解析が文脈に依存してるのでつらい","ts":"1561313050.017900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b4fbc5ee-7301-4e95-9f20-bc67bf70dbd1","type":"message","user":"U9S4G0LJW","text":"その他の項目を今見たら原因全部書いてあった","ts":"1561313510.018500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0fcd409f-7586-45f3-837e-ae34f1e1a05d","type":"message","user":"U9S4G0LJW","text":"Issueの方にコメントしておいた","ts":"1561314360.018900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"71cbb0b4-7279-4ec0-a35b-ea96b501c308","type":"message","user":"U03C6TEAZ","text":"これ無理だと思います。","ts":"1561330096.019500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2145d3fe-b5b7-4941-bb99-b43bccece6b8","type":"message","user":"U03C6TEAZ","text":"```\nif s:foo() &amp;&amp; s:x.bar\n```\ns:foo() の中で s:bar の型が文字列から辞書に変わるかも知れない。","ts":"1561330255.022300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eac676da-e390-43d4-b743-37010ced7221","type":"message","user":"U03C6TEAZ","text":"Vim は s:foo() が偽の場合、残りの . は全部辞書参照として片付けてるんです。","ts":"1561330343.024000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"adfbfb81-3a7d-4e97-a667-b116d77f98e8","type":"message","user":"U9S4G0LJW","text":"あ、そうなんですね、連結の判定でこけてたので全部連結扱いなのかと","ts":"1561330564.025100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1f990186-1116-4b1c-ba7e-c5610ef9a50c","type":"message","user":"U03C6TEAZ","text":"あ、ごめんなさい。どっちかで倒してたはす。文字列結合だったかも。","ts":"1561331137.026000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b0b5a2d7-519f-4965-919f-d0277f9963b7","type":"message","user":"U03C6TEAZ","text":"なので無理な気がします。","ts":"1561331173.026600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ede1f1f1-c444-4a8e-a03d-a105437707b7","type":"message","user":"U03C71D7H","text":"scriptversion の指定があるので、 `.` による文字列連結は禁止されています。そのことから scriptversion の指定がある時は全て辞書アクセスに倒せるはずです。\nそれとも scriptversion の有無で倒す方向を変えるのが無理って意味ですかね?","ts":"1561334227.029800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cb465901-1fde-4279-a0f1-f1149f6bb9b9","type":"message","user":"U03C71D7H","text":"どちらにしてもこれがエラーになってしまうと scriptversion は事実上使えないです。誰も使えず、形骸化する機能になる。","ts":"1561334314.031900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"782c8ee3-89fb-4da7-b301-6c24ebc756d7","type":"message","user":"U03C6TEAZ","text":"```\nif s:foo() &amp;&amp; s:x.bar\n```\n`&amp;&amp;` 以降はスキップの処理で、現状は `s:x` の型をちゃんと見てないんですよね。","ts":"1561334334.032300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4600ca26-d641-434f-bc25-98df62bc1b16","type":"message","user":"U03C6TEAZ","text":"評価してエラーにならない様に何も評価してない。","ts":"1561334352.032900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"47423e07-cd37-4f68-ac10-b83ccead4e8e","type":"message","user":"U06BRP8VD","text":"s:foo() が true として評価される場合ってやつですね。","ts":"1561334373.033700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0b2406bc-9802-4b7b-a3f9-d12b12ec65a1","type":"message","user":"U06BRP8VD","text":"稀に常に両方評価されるやつある","ts":"1561334386.034300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cde345bb-4244-463c-aa4b-5c53f9328aeb","type":"message","user":"U03C71D7H","text":"型を見る必要はなくて間違いなく辞書です。静的に確定します。そのための scriptversion です","ts":"1561334405.034700","edited":{"user":"U03C71D7H","ts":"1561334425.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2aa577c2-ecfc-48a8-aa02-3022559c5183","type":"message","user":"U03C6TEAZ","text":"`s:foo()` を呼び出した結果によって `s:x.bar` が正しいかどうかが決まります。","ts":"1561334493.036400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ab6062b7-bf51-476c-9347-d76877108f54","type":"message","user":"U06BRP8VD","text":"ima","ts":"1561334509.037000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"982ad94d-b122-4ef8-9257-c7e391450fe4","type":"message","user":"U03C6TEAZ","text":"`s:foo()` の中で `s:x` が辞書に更新されるかもしれないし、文字列になってるかもしれない。","ts":"1561334514.037300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1bf18348-fec4-4596-87b3-57b944d624c4","type":"message","user":"U06BRP8VD","text":"issueの内容見たけど、これは普通にチェック ~し忘れ~ の内容の誤りでは?","ts":"1561334535.037500","edited":{"user":"U06BRP8VD","ts":"1561334576.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"96b83c99-a142-465d-a28c-8b6bb919d7a3","type":"message","user":"U03C6TEAZ","text":"あ、issue を今読みました。","ts":"1561334621.037900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"88d18a26-5560-49a6-937c-0683b67e8ca3","type":"message","user":"U03C71D7H","text":"正しくなかった時に実行した時にエラーにすればいいだけだと思いますが…","ts":"1561334703.038700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"42d8ac22-b478-4a21-b644-a922ae91048d","type":"message","user":"U03C6TEAZ","text":"これは単なるバグですね。","ts":"1561334784.038900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"60e61771-8a13-4623-a489-5f2a8359e26c","type":"message","user":"U03C6TEAZ","text":"逆の事を言ってるんだと思ってた。","ts":"1561334801.039200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"387117d8-d5a8-416b-ae6d-9d2a2ea9d013","type":"message","user":"U03C6TEAZ","text":"strict にチェックして欲しい、という意味に。","ts":"1561334812.039600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"49e13726-203e-4c9a-927f-a977575b75df","type":"message","user":"U03C71D7H","text":"なるほど。実行時の型エラーは実行時のエラーだから実行しないとチェックは無理ですねー","ts":"1561335116.040900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
