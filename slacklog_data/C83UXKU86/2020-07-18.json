[{"client_msg_id":"635ed107-58bd-485d-98a7-61e6fc393b71","type":"message","user":"U06BRP8VD","text":"PR 作っといた。\n<https://github.com/vim/vim/pull/6477>","ts":"1595064916.061700","thread_ts":"1595044535.053000","attachments":[{"fallback":"GitHub: declare variables first in block for old C compiler. by koron · Pull Request #6477 · vim/vim","id":1,"title":"declare variables first in block for old C compiler. by koron · Pull Request #6477 · vim/vim","title_link":"https://github.com/vim/vim/pull/6477","text":"Old C compiler can't compile if_lua.c because some variables are declared after statements. This PR fix it. I tested this with VS2010 on Windows","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/pull/6477","original_url":"https://github.com/vim/vim/pull/6477"}],"subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"J7n1E"}],"root":{"client_msg_id":"2b67bb3f-3be8-40aa-9683-ab3d37eafcaa","type":"message","user":"U06BRP8VD","text":"626行目 `state` の宣言位置が遅すぎて、VS2010(古いC)だと死ぬってやつだった。ほかにもありそげ。","ts":"1595044535.053000","thread_ts":"1595044535.053000","reply_count":1,"files":[{"id":"F017B4JP2QJ","created":1595044532,"timestamp":1595044532,"name":"if_lua.c","title":"if_lua.c","mimetype":"text/plain","image_exif_rotation":0,"filetype":"c","pretty_type":"C","user":"U06BRP8VD","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":134,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F017B4JP2QJ/if_lua.c?t=xoxe-3412862301-1275341511351-1302709613697-e4dac31e46d80b92f910a8ea214db56c","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F017B4JP2QJ/download/if_lua.c?t=xoxe-3412862301-1275341511351-1302709613697-e4dac31e46d80b92f910a8ea214db56c","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F017B4JP2QJ/if_lua.c","permalink_public":"https://slack-files.com/T03C4RC8V-F017B4JP2QJ-d6f8a72592","edit_link":"https://vim-jp.slack.com/files/U06BRP8VD/F017B4JP2QJ/if_lua.c/edit","preview":"\tcase LUA_TFUNCTION:\n\t{\n\t    char_u *name;\n\t    lua_pushvalue(L, pos);\n\t    luaV_CFuncState *state = ALLOC_CLEAR_ONE(luaV_CFuncState);","preview_highlight":"<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text/plain',window.getSelection().toString().replace(/\\u200b/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre>\t<span class=\"cm-keyword\">case</span> <span class=\"cm-variable\">LUA_TFUNCTION</span>:</pre></div>\n<div><pre>\t{</pre></div>\n<div><pre>\t    <span class=\"cm-variable\">char_u</span> <span class=\"cm-operator\">*</span><span class=\"cm-variable\">name</span>;</pre></div>\n<div><pre>\t    <span class=\"cm-variable\">lua_pushvalue</span>(<span class=\"cm-variable\">L</span>, <span class=\"cm-variable\">pos</span>);</pre></div>\n<div><pre>\t    <span class=\"cm-variable\">luaV_CFuncState</span> <span class=\"cm-operator\">*</span><span class=\"cm-variable\">state</span> <span class=\"cm-operator\">=</span> <span class=\"cm-variable\">ALLOC_CLEAR_ONE</span>(<span class=\"cm-variable\">luaV_CFuncState</span>);</pre></div>\n</div>\n</div>\n","lines":5,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IsGZ"}]}},{"client_msg_id":"51019150-26fa-4198-85dc-949985643db1","type":"message","user":"U6XP9LZ6V","text":"もうマージされた。早い。","ts":"1595070146.062300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gjvIs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4dad8099-e502-4550-b850-01d538e2a146","type":"message","user":"U06BRP8VD","text":"まじか…","ts":"1595084266.062500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wkyt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"919797fe-6f7b-44db-bc92-dc35bb299124","type":"message","user":"U06BRP8VD","text":"まぁコンパイル通らない系ですしね。","ts":"1595084323.062700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"61ni"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d4c25697-b03b-4cc9-bc8d-edda1f43968d","type":"message","user":"U06BRP8VD","text":"…古い luajit との組み合わせだとビルドできないな…","ts":"1595043373.052300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/V+L"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2f43fa9a-8a83-45f8-b3a8-933768cbe58b","type":"message","user":"U6XP9LZ6V","text":"Oh, この前のLua 5.4対応でやらかしたかな？","ts":"1595044203.052900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+0htT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2b67bb3f-3be8-40aa-9683-ab3d37eafcaa","type":"message","user":"U06BRP8VD","text":"626行目 `state` の宣言位置が遅すぎて、VS2010(古いC)だと死ぬってやつだった。ほかにもありそげ。","ts":"1595044535.053000","thread_ts":"1595044535.053000","reply_count":1,"replies":[{"user":"U06BRP8VD","ts":"1595064916.061700"}],"files":[{"id":"F017B4JP2QJ","created":1595044532,"timestamp":1595044532,"name":"if_lua.c","title":"if_lua.c","mimetype":"text/plain","image_exif_rotation":0,"filetype":"c","pretty_type":"C","user":"U06BRP8VD","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":134,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F017B4JP2QJ/if_lua.c","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F017B4JP2QJ/download/if_lua.c","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F017B4JP2QJ/if_lua.c","permalink_public":"https://slack-files.com/T03C4RC8V-F017B4JP2QJ-d6f8a72592","edit_link":"https://vim-jp.slack.com/files/U06BRP8VD/F017B4JP2QJ/if_lua.c/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IsGZ"}]},{"client_msg_id":"a655d62b-3706-4c30-8011-7eee0048120d","type":"message","user":"U06BRP8VD","text":"とりあえずこうなおした。","ts":"1595044617.053300","files":[{"id":"F016WC5E1F1","created":1595044615,"timestamp":1595044615,"name":"Untitled","title":"Untitled","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"Plain Text","user":"U06BRP8VD","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":886,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F016WC5E1F1/untitled","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F016WC5E1F1/download/untitled","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F016WC5E1F1/untitled","permalink_public":"https://slack-files.com/T03C4RC8V-F016WC5E1F1-9017eb3e3b","edit_link":"https://vim-jp.slack.com/files/U06BRP8VD/F016WC5E1F1/untitled/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sz8v"}]},{"client_msg_id":"debd58d6-065d-422b-b223-2fbe2bd5c927","type":"message","user":"U06BRP8VD","text":"これ、いまのポリシーがようわからんからアレ。","ts":"1595044639.053900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jAR47"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"aea83454-7792-48f0-9aa5-6b656478e5ba","type":"message","user":"U06BRP8VD","text":"まぁVim本体にそういうコードはないから、ここだけが間違ってるって考えて良さそうか。","ts":"1595044666.054400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XNy"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"24450b75-d43d-40ce-91b4-259d3d1bb393","type":"message","user":"U06BRP8VD","text":"guiltベースのパッチ管理が限界に来てる。","ts":"1595044683.054700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"u9zNp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9c40ca64-1d35-4442-b2a1-1d841d92c13d","type":"message","user":"U6XP9LZ6V","text":"CIはVC2010で流してるけど、if_xxxはpython2/3しかテストしてないなあ。他はAppVeyorにはデフォルトでは入ってないので。","ts":"1595045561.056900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oJtp+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d46a271b-255f-4821-becd-a0fa2d080ddc","type":"message","user":"U06BRP8VD","text":"Vimのテスト、並列実行できないかしらね?w terminal がいやに時間かかるからそこだけ裏で実行するだけでも随分違うかも?","ts":"1595045612.057700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aNP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3523238c-8e55-401d-ad10-176a69db47a6","type":"message","user":"U06BRP8VD","text":"結構テスト失敗するな。あとで内容を確認するか…","ts":"1595045723.057800","files":[{"id":"F016WCDSLH5","created":1595045721,"timestamp":1595045721,"name":"Untitled","title":"Untitled","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"Plain Text","user":"U06BRP8VD","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":65,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F016WCDSLH5/untitled","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F016WCDSLH5/download/untitled","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F016WCDSLH5/untitled","permalink_public":"https://slack-files.com/T03C4RC8V-F016WCDSLH5-0b49283992","edit_link":"https://vim-jp.slack.com/files/U06BRP8VD/F016WCDSLH5/untitled/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/os3J"}]},{"type":"message","user":"U06BRP8VD","text":"参考までにこんな感じ","ts":"1595045929.058200","files":[{"id":"F016WCF79EK","created":1595045924,"timestamp":1595045924,"name":"test_result-20200718T1314JST.log","title":"test_result-20200718T1314JST.log","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"Plain Text","user":"U06BRP8VD","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":34371,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F016WCF79EK/test_result-20200718t1314jst.log","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F016WCF79EK/download/test_result-20200718t1314jst.log","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F016WCF79EK/test_result-20200718t1314jst.log","permalink_public":"https://slack-files.com/T03C4RC8V-F016WCF79EK-8f01636f04","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fKd=X"}]},{"client_msg_id":"4f7b48e8-04b7-407a-9ce9-3da6db1f4f6d","type":"message","user":"U06BRP8VD","text":"いくつかは パッチのまちがいっぽいな。","ts":"1595045976.058800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Av29+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"68169421-e560-4006-98d3-2c4f61bd3e80","type":"message","user":"U6XP9LZ6V","text":"Test_classes_re1/2 はずいぶん前からローカルで動かすと落ちてたような。CIだと落ちてないので日本語環境だと何かあるのかな？","ts":"1595054777.061000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Szyo"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0ddaa262-db2a-4489-a270-39a011acf75e","type":"message","user":"UAZ33BKV2","text":"タイムゾーンもそうですけどCIだけだと注意したテストにしないと取り零しってけっこうでますねえ","ts":"1595054830.061600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ifj"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
