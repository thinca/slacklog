[{"client_msg_id":"ec8b2dc6-4d1d-454f-b842-371afb8f5513","type":"message","user":"U03C6TEAZ","text":"この動作は最初からそうだろうし。","ts":"1604852350.165800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hZT"}]},{"client_msg_id":"708ee93e-9e96-4c20-b0a8-40ae12af9a5c","type":"message","user":"U03C6TEAZ","text":"んーバグというよりも改善すかね。","ts":"1604852340.165500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+WRf3"}]},{"client_msg_id":"e0531121-bd54-46c7-837e-da33d6a5409d","type":"message","user":"U6XP9LZ6V","text":"ttimeoutlen を、control sequence として扱うかどうかと mapping 展開するかどうかの両方の閾値として使えば良さそう？\n端末素人なのでよく分からない。","ts":"1604852171.164900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"a+p"}]},{"client_msg_id":"cb8f1471-ee8f-446d-96a1-3cb54c28fc7d","type":"message","user":"U03C71D7H","text":"うーん、そうなんですかね…端末周りはあまり細かくはわかってないので、私にはなんとも判断が付かない…素人目には、ttimeoutlen の間だけはまだ control sequence が来るかもしれないのでキーマッピングを展開しない、でも良さそうかなぁと思ってたんですけど","ts":"1604851724.161700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PVF"}]},{"client_msg_id":"2fa021e1-5f50-4145-9894-a78758ccdf25","type":"message","user":"U03C71D7H","text":"今だとキーマッピングの有無がキーコードの判定に影響しちゃってるみたいなので","ts":"1604851548.160000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NTt"}]},{"client_msg_id":"c59045d4-ae83-45c1-917b-938d151256ab","type":"message","user":"U7986PPFH","text":"考えてみたんですが、キーマッピング展開を判定するなら ttimeoutlen (これ以上時間が空いたら control sequence として扱わない) ではなくて「この時間以内であればキーマッピング展開しない」オプションが必要になると思う","ts":"1604851542.159900","edited":{"user":"U7986PPFH","ts":"1604851630.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FTnCg"}]},{"client_msg_id":"748b621e-933b-4736-bce1-1902e06a3642","type":"message","user":"U03C71D7H","text":"そのはずですよね…やっぱりバグですかね","ts":"1604851487.158600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RVyKL"}]},{"client_msg_id":"bb520edf-5863-43ca-9fdf-eae599f4463c","type":"message","user":"U7986PPFH","text":"ttimeout,ttimeoutlen は control sequence の待機時間なのでキーマッピングの展開可否とは関係ないですね、多分","ts":"1604851378.156700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"It0"}]},{"client_msg_id":"e4c877eb-b9a6-4cb3-8a03-f27cbde5389b","type":"message","user":"U03C71D7H","text":"tmux なしだとなぜか `\u0026lt;C-c\u0026gt;` も効かずに `xxx[99;5u` が入力されるようになってしまって Vim から抜けられなくなったw ｵﾜﾀ","ts":"1604851017.154800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"djJ"}]},{"client_msg_id":"c422ed75-606f-4cae-b10c-b390bf7013db","type":"message","user":"U03C71D7H","text":"あとはターミナルの種類とかどこかに依存があるのかも?","ts":"1604850951.153900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=54v"}]},{"client_msg_id":"bf6fba0f-e53d-4031-8d49-a0ef224a7aff","type":"message","user":"U03C71D7H","text":"tmux なしでも再現しますね…","ts":"1604850924.153500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XNG8"}]},{"client_msg_id":"15f2e3bf-dbf9-4de1-95cf-e0ccfe766a27","type":"message","user":"U03C71D7H","text":"ターミナル周りだし環境依存なのかな… tmux 噛んでるのでなしでも試してみよう","ts":"1604850847.153200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jcl"}]},{"client_msg_id":"9c2ffae3-db1e-4fa4-85b7-c000ba9e299a","type":"message","user":"U03C71D7H","text":"Linux のターミナルに Windows の mintty から ssh しています。\n```$ vim -u NONE -i NONE -N\n:inoremap \u0026lt;Esc\u0026gt; xxx```\nこの状態で挿入モードに入って矢印キーを入力すると、例えば ← を押すと `xxx0D` が入力されます。","ts":"1604850685.152700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Uyzr"}]},{"client_msg_id":"fb180eb3-1773-428b-a49a-e1c64fca61d2","type":"message","user":"U03C6TEAZ","text":"カーソル特に変にならない様に見えるんですが、手順教えて貰まスか。","ts":"1604849952.150900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aQ55t"}]},{"client_msg_id":"b86fec53-c874-40a2-8718-045abc2af17e","type":"message","user":"U03C71D7H","text":"`imap \u0026lt;Esc\u0026gt; xxx` があると矢印キーみたいな `\u0026lt;Esc\u0026gt;` はら始まるキーコードで問題が起きるんですが、更に `imap \u0026lt;Esc\u0026gt;\u0026lt;Esc\u0026gt; \u0026lt;Esc\u0026gt;` みたいに `\u0026lt;Esc\u0026gt;` から始まるキーマッピングが存在する(= `imap \u0026lt;Esc\u0026gt;` 単体が即座に発動せず、キーマッピングの確定待ち状態が挟まるようになる)と、矢印キーなんかのキーコードが即座に発動するようになります。どうもバグっぽい雰囲気がします…。","ts":"1604849508.150000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fgNe"}]},{"client_msg_id":"8a2da8a7-3094-42e0-9223-7f7f6ac54789","type":"message","user":"U03C71D7H","text":"tmap もですね。どちらでも起きます。","ts":"1604849363.147600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=Cz"}]},{"client_msg_id":"292ef6a5-7b83-4595-9931-90552686fc8e","type":"message","user":"U03C6TEAZ","text":"tmap ではなくて？","ts":"1604849329.147300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pzmL"}]},{"client_msg_id":"1d44a760-b949-431a-8817-1263c843b715","type":"message","user":"U03C71D7H","text":"以前ちらっと話した、ターミナル上で `imap \u0026lt;Esc\u0026gt; xxx` を設定すると `set timeout ttimeout` していても矢印キーなんかのキーコードがキーマッピングに取られちゃうのって、バグなんですかね?\n実際の仕様はわからないんですが、期待する挙動は、キーコードがある場合 (例えば `:set \u0026lt;Left\u0026gt;` には `\u0026lt;Esc\u0026gt;0D` が設定されてる) は ttimeoutlen の間だけその入力が来るのを待ってくれて、なければキーマッピングに展開してくれるって感じなんですけど、そうはなってない?","ts":"1604849098.147100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Q=JG"}]}]
