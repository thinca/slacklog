[{"client_msg_id":"830a9b71-e613-4210-ab4d-9725a310b0dc","type":"message","user":"U03C71D7H","text":"`substutite()` の第3引数に Partial を渡すとクラッシュする\n```\nfunction s:foo(pre, str) abort\n  return a:str[0]\nendfunction\nlet g:result = substitute('x', '.', function('s:foo', ['']), 'g')\n```","ts":"1571934322.017700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9683ffb9-a051-4758-9003-d3fdf21c9f3e","type":"message","user":"U03C6TEAZ","text":"これ別のチャネルで言っておられる free のやつですか？","ts":"1571957019.018700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"97be4dc1-c1a1-425e-b0d5-20cd1f154b6d","type":"message","user":"U03C71D7H","text":"あ、そうです","ts":"1571959190.018900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"057e2db9-313f-45be-a2a2-5695dc9fc624","type":"message","user":"U03C71D7H","text":"↑たぶんこれどこかで上げるべき参照カウントを上げてないだけとかなので、分かる人が見たら比較的簡単に直せそうだし慣れてない人の練習にも良さそう","ts":"1571959640.019900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"74fcb395-54b7-4274-a833-78295f531a86","type":"message","user":"U03C6TEAZ","text":"そのままでしたね。 &gt; 参照カウント","ts":"1571962212.020300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"aa3655fd-7b6f-4f7c-95d5-4e8593c4b53f","type":"message","user":"U03C6TEAZ","text":"誰もパッチ書きそうにないならこのまま出します。","ts":"1571963280.020700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ec926733-76aa-45ab-97d7-770f9b21acb1","type":"message","user":"U03C71D7H","text":"おなしゃす！:pray:","ts":"1571964032.020900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b2010ed8-e518-4b69-a388-bd25e1a91361","type":"message","user":"U03C6TEAZ","text":"テストコード書いてるんですが","ts":"1571964163.021300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f84f1e35-a795-40b2-8cba-65e3b8497578","type":"message","user":"U03C6TEAZ","text":"```\nfunc s:replace(item) abort\n  echomsg string(a:item)\n  if a:item[1] == 'x'\n    return 'X'\n  elseif a:item[1] == 'y'\n    return 'Y'\n  endif\n  return '-'\nendfunc\n\nfunc Test_replace_with_func()\n  let ret = substitute('xzyz', '\\([xy]\\)z', function('s:replace'), 'gI')\n  call assert_equal('XYz', ret)\nendfunc\n```\nこれ期待する動作ですか？","ts":"1571964177.021700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cd1b09b5-ce8d-4d71-9587-0842f0137a63","type":"message","user":"U03C6TEAZ","text":"あ、partial じゃないのは意図的です。","ts":"1571964188.022000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"caf4f247-a397-4119-b147-9d1329b35951","type":"message","user":"U03C6TEAZ","text":"僕これ XYz を期待してたんですが XY になってしまう。","ts":"1571964210.022500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"31a268e9-c642-40e7-ba90-441612bbfc4e","type":"message","user":"U03C6TEAZ","text":"あー、ちゃうちゃう僕の間違い。","ts":"1571964722.022800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5d1f2fed-6e9e-4902-ae2c-156a4e273020","type":"message","user":"U03C6TEAZ","text":"```\n['xz', 'x', '', '', '', '', '', '', '', '']\n['yz', 'y', '', '', '', '', '', '', '', '']\n```\nこう飛んでくるので `s:replace` で `Xz` か `Yz` を返すべきだった。","ts":"1571964757.023400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U8R597E9H","text":"<@U8R597E9H> has joined the channel","ts":"1571967635.023600","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"UPS51R83E","text":"<@UPS51R83E> has joined the channel","ts":"1571983494.023900","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null}]
