[{"type":"message","user":"U6XP9LZ6V","text":"波線もD2Dで描けるように変更。","ts":"1511861372.000280","team":"T03C4RC8V","reactions":[{"name":"slow-loris","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":"color-emoji手元で試してみよっと","ts":"1511868651.000503","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"<@U6XP9LZ6V> <https://github.com/vim-jp/vim/pull/2> こんなPR作ってみました。","ts":"1511869587.000230","attachments":[{"fallback":"GitHub: introduce DwraingMode to reduce switching by koron · Pull Request #2 · vim-jp/vim","id":1,"title":"introduce DwraingMode to reduce switching by koron · Pull Request #2 · vim-jp/vim","title_link":"https://github.com/vim-jp/vim/pull/2","text":"描画モードを集中的に管理することで、 AssureXxxやFlushXxxを呼び出す煩雑さからの脱却を目指した。 合わせて意図せぬモード変更を避けやすくなるはず。","thumb_url":"https://avatars0.githubusercontent.com/u/468368?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/vim-jp/vim/pull/2"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"Merged.","ts":"1511876821.000065","team":"T03C4RC8V","reactions":[{"name":"be","count":1,"users":["U03C4RC8X"]},{"name":"nri","count":1,"users":["U03C4RC8X"]},{"name":"bow","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"環境によっては1行ずつのスクロールが遅い場合がありますね。これも関係しているのかな。\n<https://vim-jp.slack.com/archives/C83UXKU86/p1511406856000112>","ts":"1511877605.000646","attachments":[{"fallback":"[November 22nd, 2017 7:14 PM] koron: 関係ないですが <https://github.com/vim-jp/issues/issues/994> これの理由わかったかも。","id":1,"author_id":"U06BRP8VD","author_name":"KoRoN","author_subname":"KoRoN","author_link":"https://vim-jp.slack.com/team/U06BRP8VD","author_icon":"https://secure.gravatar.com/avatar/4b5a6f711a4e22e617b74058239ade53.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0007-48.png","text":"関係ないですが <https://github.com/vim-jp/issues/issues/994> これの理由わかったかも。","mrkdwn_in":["text"],"blocks":null,"footer":"Posted in #color-emoji","ts":1511406856.000112,"from_url":"https://vim-jp.slack.com/archives/C83UXKU86/p1511406856000112"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"絵文字対応によっていろいろな物が見えてきている","ts":"1511879234.000319","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"これ、プリンタのときも成功するのかな…\n\n```\n\t// This always succeeds.\n\tmRT-&gt;QueryInterface(\n\t\t__uuidof(ID2D1GdiInteropRenderTarget),\n\t\treinterpret_cast&lt;void**&gt;(&amp;mGDIRT));\n```","ts":"1511795389.000440","edited":{"user":"U06BRP8VD","ts":"1511795414.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"BindDC は行けるだろうなとは思ったのですが、こっちはどうだろ。","ts":"1511795890.000122","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"ヒャッハー！ 何か気になって眠れなかったので直しちゃったぜ！","ts":"1511797091.000307","team":"T03C4RC8V","reactions":[{"name":"laughing","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"何かいつの間にか GDI 側の FillRect が要らなくなってた模様。","ts":"1511797145.000004","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"Fallback 時はこれで良いとして、underlineとstrikethroughはDirectXのIDWriteTextLayout で描いたらもっと速いんじゃなかろうか?","ts":"1511797269.000682","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"<https://msdn.microsoft.com/ja-jp/library/windows/desktop/dd370971(v=vs.85).aspx>\n「QueryInterface メソッドは常に成功することに注意してください。」","ts":"1511797314.000602","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"TextRenderer の DrawUnderline, DrawStrikethrough を実装するという話？","ts":"1511797449.000511","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"別の方法でチェックしなきゃいけないのかw","ts":"1511797453.000758","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"ですです。そしたらもっと速いんちゃうかなぁって。","ts":"1511797465.000705","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"で、最終的には DrawText にflag渡して、そのなかで全部やっちゃう。","ts":"1511797488.000604","edited":{"user":"U06BRP8VD","ts":"1511797496.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"まあ少なくともDrawLineはGDIじゃなくて、D2Dでもいいのかもしれない。","ts":"1511797668.000304","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"ネックは波線、だよなぁ…","ts":"1511797677.000907","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"<https://github.com/Microsoft/Windows-classic-samples/blob/77e53afb4285fde2ac1c13f6bc9f5146bdb8e286/Samples/Win7Samples/multimedia/DirectWrite/HelloWorld/CustomTextRenderer.cpp> ＜下線と打ち消し線の引き方","ts":"1511797724.000214","attachments":[{"fallback":"GitHub: Microsoft/Windows-classic-samples","id":1,"title":"Microsoft/Windows-classic-samples","title_link":"https://github.com/Microsoft/Windows-classic-samples/blob/77e53afb4285fde2ac1c13f6bc9f5146bdb8e286/Samples/Win7Samples/multimedia/DirectWrite/HelloWorld/CustomTextRenderer.cpp","text":"Windows-classic-samples - This repo contains samples that demonstrate the API used in Windows classic desktop applications.","thumb_url":"https://avatars2.githubusercontent.com/u/6154722?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/Microsoft/Windows-classic-samples/blob/77e53afb4285fde2ac1c13f6bc9f5146bdb8e286/Samples/Win7Samples/multimedia/DirectWrite/HelloWorld/CustomTextRenderer.cpp"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"波線は諦めてGdiInterop。","ts":"1511797750.000047","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"すっごい雑に全部の下に引いてみた。","ts":"1511798387.000388","files":[{"id":"F86QY2HSS","created":1511798385,"timestamp":1511798385,"name":"directx-underline.png","title":"directx-underline.png","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"U06BRP8VD","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":103783,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F86QY2HSS/directx-underline.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F86QY2HSS/download/directx-underline.png","original_h":683,"original_w":577,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F86QY2HSS-f0bc0cc62a/directx-underline_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F86QY2HSS-f0bc0cc62a/directx-underline_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F86QY2HSS-f0bc0cc62a/directx-underline_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F86QY2HSS-f0bc0cc62a/directx-underline_360.png","thumb_360_gif":"","thumb_360_w":304,"thumb_360_h":360,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-F86QY2HSS-f0bc0cc62a/directx-underline_480.png","thumb_480_w":406,"thumb_480_h":480,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F86QY2HSS/directx-underline.png","permalink_public":"https://slack-files.com/T03C4RC8V-F86QY2HSS-3406b27ffe","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U06BRP8VD","text":"URLとかはGDIで二重に引いちゃってるかも。","ts":"1511798442.000504","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"DrawGeometry を呼ばないと、シュッとする。","ts":"1511798838.000384","files":[{"id":"F86R3M7GE","created":1511798836,"timestamp":1511798836,"name":"directx-underline-wo-drawgeo.png","title":"directx-underline-wo-drawgeo.png","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"U06BRP8VD","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":106397,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F86R3M7GE/directx-underline-wo-drawgeo.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F86R3M7GE/download/directx-underline-wo-drawgeo.png","original_h":686,"original_w":581,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F86R3M7GE-8c970426e9/directx-underline-wo-drawgeo_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F86R3M7GE-8c970426e9/directx-underline-wo-drawgeo_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F86R3M7GE-8c970426e9/directx-underline-wo-drawgeo_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F86R3M7GE-8c970426e9/directx-underline-wo-drawgeo_360.png","thumb_360_gif":"","thumb_360_w":305,"thumb_360_h":360,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-F86R3M7GE-8c970426e9/directx-underline-wo-drawgeo_480.png","thumb_480_w":407,"thumb_480_h":480,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F86R3M7GE/directx-underline-wo-drawgeo.png","permalink_public":"https://slack-files.com/T03C4RC8V-F86R3M7GE-3853e1cf8e","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U06BRP8VD","text":"とりあえず DrawUnderline &amp; DrawStrikethrough の差分だけ。","ts":"1511799103.000885","files":[{"id":"F863Q193P","created":1511799102,"timestamp":1511799102,"name":"-.diff","title":"Untitled","mimetype":"text/plain","image_exif_rotation":0,"filetype":"diff","pretty_type":"Diff","user":"U06BRP8VD","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":3311,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F863Q193P/-.diff","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F863Q193P/download/-.diff","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F863Q193P/-.diff","permalink_public":"https://slack-files.com/T03C4RC8V-F863Q193P-f9be2085dc","edit_link":"https://vim-jp.slack.com/files/U06BRP8VD/F863Q193P/-.diff/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U6XP9LZ6V","text":"DWriteContext_FlushInterop の呼び出しを減らして速度改善に成功。","ts":"1511799254.000229","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"満足したので今度こそ寝る。","ts":"1511799464.000295","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"おやすみなさいw","ts":"1511799507.000311","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"波線もDirectXでやるなら PathGeometry を使うことになりそう。 <https://msdn.microsoft.com/ja-jp/library/windows/desktop/dd371512(v=vs.85).aspx>","ts":"1511799530.000353","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"僕の方が早く寝てた","ts":"1511822718.000536","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":":sokudo:","ts":"1511824263.000032","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"set spellしてeval.txtをスクロールし続けても、Ctrl-Fを離したらパッと止まるようになったんで、もう十分じゃないだろうか。","ts":"1511828235.000087","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"ラスターフォントのフォールバックの方は、これでもまだ速度低下が感じられるが、所詮はフォールバックだし、これでいいんじゃないかな。","ts":"1511828491.000053","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"スバラッ","ts":"1511828684.000298","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"パッと止まるのってフォントのサイズと行数桁数ってどのくらいでした?","ts":"1511831869.000193","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"この設定でこのくらいの場所で0.2秒くらい遅れる感じ。","ts":"1511832251.000056","files":[{"id":"F873YKBAA","created":1511832248,"timestamp":1511832248,"name":"0.2sec.png","title":"0.2sec.png","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"U06BRP8VD","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":91787,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F873YKBAA/0.2sec.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F873YKBAA/download/0.2sec.png","original_h":640,"original_w":582,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F873YKBAA-b22a7d078f/0.2sec_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F873YKBAA-b22a7d078f/0.2sec_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F873YKBAA-b22a7d078f/0.2sec_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F873YKBAA-b22a7d078f/0.2sec_360.png","thumb_360_gif":"","thumb_360_w":327,"thumb_360_h":360,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-F873YKBAA-b22a7d078f/0.2sec_480.png","thumb_480_w":437,"thumb_480_h":480,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F873YKBAA/0.2sec.png","permalink_public":"https://slack-files.com/T03C4RC8V-F873YKBAA-9728358b66","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U06BRP8VD","text":"やっぱ画面サイズに依存しているかな。ウィンドウフルスクリーンサイズにするとdelayが拡大する。","ts":"1511832255.000232","edited":{"user":"U06BRP8VD","ts":"1511832668.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"デバッグビルドじゃないの、試しておこう。","ts":"1511832638.000026","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"リリースビルドだとフルスクリーン時で、デバッグビルドの82x42と同じくらいの印象だな。","ts":"1511832833.000165","edited":{"user":"U06BRP8VD","ts":"1511832854.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"そうそう。 enc=cp932 の時にも DirectX サポートできないかやってみたけど、なんか文字が出なかった。時々見えることもあるんだけど、それも utf-8 を cp932 で表示したように化けてたように見えた。一瞬だったんでよくわかんないんだけど。","ts":"1511832957.000180","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"GDIとD2Dの切り替えをできる限り減らすのが高速化の鍵らしい。","ts":"1511840982.000126","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"フォールバックもかなり速くなった。","ts":"1511841027.000015","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"DrawLineとFillRectは、GDIとD2Dの両方を用意した。","ts":"1511841391.000006","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"切り替えを減らす = Flush の呼び出しを少なくするってことだと思いますけど、その場合 Flush を呼び忘れて画面に表示されないものが発生しないか心配なんですけど、どうですかね?","ts":"1511841579.000203","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"もう検討したりしました?","ts":"1511841597.000097","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"GdiInteropのGetDCを呼ぶとD2D面がDC面にコピーされて、描き終わってReleaseDCを呼ぶとDC面がD2D面にコピーされるのかなと。","ts":"1511849632.000136","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"D2Dで描く前にReleaseDCを呼んでおかないと、次にReleaseDCを呼んだ際に描画が上書きされてしまいます。","ts":"1511849790.000173","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"GDIフォールバックが発生しているときは、FillRectや線を描くのもGdiInterop経由のGDIを使い、発生していなければひたすらD2Dで描くのが速いです。","ts":"1511850095.000089","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"SetPixelはDrawLineで右に1ドット描くのが良さげ。余計なアンチエイリアスも発生しない。","ts":"1511850269.000061","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"なるほどなるほど","ts":"1511850387.000270","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"あーGetDCでコピーされるのか","ts":"1511850403.000108","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"実は BeginDraw - EndDraw のタイミングで、透明ピクセルはそのまま生DCに転送されるっぽいんですよね。","ts":"1511850446.000031","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"今は背景をDirectX側で塗っちゃってるんでアレですけど、うまく使えないか気になってる。","ts":"1511850468.000082","edited":{"user":"U06BRP8VD","ts":"1511850503.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"WM_PAINT でやってくれてればなぁ。","ts":"1511850483.000095","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
