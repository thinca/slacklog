[{"type":"message","user":"U012WRSTHEG","text":"<@U012WRSTHEG> has joined the channel","ts":"1588252443.262000","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"09d8829d-88be-4d5e-842a-54d620ab48de","type":"message","user":"UFZL441S8","text":"VTP 速度向上パッチ、いま置いてきました。os_wn32.c での向上はこれが精いっぱいのような気がします。\nssh での乱れは引き続き見ています。うちでは VMware 内 Gentoo の xfce4-terminal に対して VTP 環境から ssh の形になっています。","ts":"1588184243.226300","team":"T03C4RC8V","reactions":[{"name":"+1","count":3,"users":["U06BRP8VD","U03C6TEAZ","UD73ZNZAP"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BLuA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"79009ed2-32bd-4abb-8e30-b715bdedf0ed","type":"message","user":"U6XP9LZ6V","text":"直した。<https://github.com/vim/vim/pull/6015>","ts":"1588211721.226700","thread_ts":"1588170139.219300","attachments":[{"fallback":"GitHub: Fix that Test_ruby_p fails on Windows after 8.2.0636 by k-takata · Pull Request #6015 · vim/vim","id":1,"title":"Fix that Test_ruby_p fails on Windows after 8.2.0636 by k-takata · Pull Request #6015 · vim/vim","title_link":"https://github.com/vim/vim/pull/6015","text":"Discussed at 41f6918 .","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/pull/6015","original_url":"https://github.com/vim/vim/pull/6015"}],"parent_user_id":"U6XP9LZ6V","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iusKH"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4575197d-be91-4e5b-9a3d-aa5a935cb2b0","type":"message","user":"U6XP9LZ6V","text":"vtp_sgr_bulks() の実装、技巧的すぎません？ 理解するの諦めましたｗ\nここ辺りとか <https://github.com/vim/vim/pull/6014/files#diff-e687828637fcec0cded195d5e8ff7ae0R7719>","ts":"1588211988.228200","attachments":[{"fallback":"GitHub: VTP speedup by ntak · Pull Request #6014 · vim/vim","id":1,"title":"VTP speedup by ntak · Pull Request #6014 · vim/vim","title_link":"https://github.com/vim/vim/pull/6014/files#diff-e687828637fcec0cded195d5e8ff7ae0R7719","text":"The display in VTP is slow, so I made it faster. The speedup of this function is almost complete.","thumb_url":"https://avatars3.githubusercontent.com/u/44701315?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/vim/vim/pull/6014/files#diff-e687828637fcec0cded195d5e8ff7ae0R7719","original_url":"https://github.com/vim/vim/pull/6014/files#diff-e687828637fcec0cded195d5e8ff7ae0R7719"}],"team":"T03C4RC8V","reactions":[{"name":"eyes","count":1,"users":["U03C4RC8X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tlR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e27ecfb6-98c4-4df1-bfbb-e2b23b4ed779","type":"message","user":"U0M7GCBPD","text":"FAST256 の中にしれっと代入あるの怖いｗ","ts":"1588222752.229300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lSQR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"94fd7107-b11d-4a05-b8f9-15f52a138a9c","type":"message","user":"U6XP9LZ6V","text":"やっと試しました。VTPを使ってるときに、画面がちゃんと戻らないような？\n<https://github.com/vim/vim/pull/5932>","ts":"1588224501.237400","attachments":[{"fallback":"GitHub: Win32: restoring screen not always done right (try again) by ntak · Pull Request #5932 · vim/vim","id":1,"title":"Win32: restoring screen not always done right (try again) by ntak · Pull Request #5932 · vim/vim","title_link":"https://github.com/vim/vim/pull/5932","text":"I cannot reply to ML now, so I chose PR. I quickly realized that there was a problem. It starts with a different color when !cmd is executed, only there. It&amp;#39;s a little big, because the code isn...","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/pull/5932","original_url":"https://github.com/vim/vim/pull/5932"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eSq0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ab387123-3f2b-4090-8387-53fa730b00e7","type":"message","user":"UFZL441S8","text":"bulks の方はさすがに以後のメンテ的にどうかと思ったのでコミットを小分けにして切り離しできるよう仕込みました、HiDPI ではそこの有無で速度が体感変わってきます。\nswitch の fallthrough でシーケンスを末尾方向から組み上げています、マクロ内での代入は次の桁の処理の下準備で、変数のレジスタ割り当てを期待しています。\n画面がちゃんと戻らない件、見た感じざっくりでかまわないんですが、文字情報は戻って色が戻らない感じでしょうか？","ts":"1588225446.244800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Idd"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b542c3a0-7631-4f6a-8c94-514c87fa3a22","type":"message","user":"U6XP9LZ6V","text":"カーソルが何画面分か飛んでブランクが表示されている感じですね。色は16色だけ復元されて、24bit色は黒になってしまっています。","ts":"1588226196.246900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eHkc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fdb2edce-2403-4781-93ef-f1b0dbbbb666","type":"message","user":"UFZL441S8","text":"ありがとうございます、alt 画面への切り替えシーケンスが発行された時点の画像がそのまま vim.exe 終了時に戻ってくるのが理想なんですが、\nカーソル位置が違うとなると vim.exe 側で退避しているスクロールバッファのデータの扱い方を見直す必要がある感じです(まだ見ていない)…。\nさらに詰めてきます。","ts":"1588227047.255100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cfUl4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0abf92c9-ba95-480e-9265-70f6a67bb1f4","type":"message","user":"UFZL441S8","text":"切り替えシーケンスが保存する情報の中にカーソル位置も含まれていたと思うんですが、それがズレるとなると、シーケンスで画面を戻した後に\nカーソル位置変更の API を発行しているわけで、そこのロジックを間違えてしまっているのかなと思われます。\n16 色になるのは API で保存したスクロールバッファ(16色になってしまっている分)の書き戻しが発生したかなんかだという気がします。まずは見ます…。","ts":"1588227646.259600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dW3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9dbd2526-ef15-49e4-9eff-4e7de3ea64a9","type":"message","user":"U6XP9LZ6V","text":"termcap_mode_end() の中で RestoreConsoleBuffer() を呼ぶのを止めてみたら、カーソル位置がおかしくなるのは直りますね。ただそれだと、スクリーンバッファのサイズが元に戻らなくてダメですね。あと、色も戻らない。","ts":"1588228947.261800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3jx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
