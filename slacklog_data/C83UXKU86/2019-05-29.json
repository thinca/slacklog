[{"client_msg_id":"65a63e0f-5f4a-4561-9c02-0e335d54901c","type":"message","user":"UDDCM376D","text":"`popup_getoptions` を追加したら `popup_create` が動かなくなった…\nなぜだ…","ts":"1559081662.226200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b9ea1ba3-54ca-41a2-8c22-7493e05e48e0","type":"message","user":"UDDCM376D","text":"<https://github.com/skanehira/vim/commit/a0a0254208877ed72ceaf29fe6f227f021d13fff>","ts":"1559082066.226400","attachments":[{"fallback":"GitHub: add popup_getoptions · skanehira/vim@a0a0254","id":1,"title":"add popup_getoptions · skanehira/vim@a0a0254","title_link":"https://github.com/skanehira/vim/commit/a0a0254208877ed72ceaf29fe6f227f021d13fff","text":"The official Vim repository. Contribute to skanehira/vim development by creating an account on GitHub.","thumb_url":"https://avatars0.githubusercontent.com/u/7888591?s=200&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":200,"thumb_height":200,"from_url":"https://github.com/skanehira/vim/commit/a0a0254208877ed72ceaf29fe6f227f021d13fff","original_url":"https://github.com/skanehira/vim/commit/a0a0254208877ed72ceaf29fe6f227f021d13fff"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6a9afc55-35a3-45f2-b530-959671497d0d","type":"message","user":"UDDCM376D","text":"なにか足りない、変なところありますか？","ts":"1559082075.226800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"155cf9c9-eb2b-4b34-8ad4-cc4ca84ead43","type":"message","user":"UDDCM376D","text":"ヘルプのサンプルを `let winid = popup_create('hello', {})` コピって実行したら `E117: Unknown function: popup_create` って出ます","ts":"1559082183.228200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9138c76b-254c-4161-9eaa-ef7c253484f0","type":"message","user":"U03C6TEAZ","text":"関数エントリを追加してる箇所を壊したか、ソートされてないか。","ts":"1559084053.229200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e835d462-2530-4b26-964a-84f1b09b101e","type":"message","user":"U03C6TEAZ","text":"diff みたらそれだった。popup_getposition 差し込む位置が違います。","ts":"1559084133.230200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"78187579-75d9-4016-8946-4853ce4a24c7","type":"message","user":"U03C6TEAZ","text":"このテーブル、二分探索するのでソートされてないと見つからなくなります。","ts":"1559084183.231100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2DB987CF-0E6D-4F6F-94F5-397CE0361136","type":"message","user":"UDDCM376D","text":"位置の可能性頭によぎったけど、本当にそれだったのか…\n\n二分探索のアルゴリズムって、ソートしてないとダメなんでしたっけ？","ts":"1559085405.233200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"58ed9232-a024-43d2-9ce4-94821db369e7","type":"message","user":"U03C6TEAZ","text":"真ん中を見て大きいかとうかで探すので順が狂ってると飛ばされます。","ts":"1559085876.236200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"D697ACF6-F839-43F7-A331-AFA37F5CA899","type":"message","user":"UDDCM376D","text":"あー\nなる","ts":"1559086333.236500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7791EA20-CBAF-4515-8074-8BD97F7AC73E","type":"message","user":"UDDCM376D","text":"あとで直してみます\nありがとうございますっ","ts":"1559086348.236900","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U03C6TEAZ"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6e93d904-b8dc-4c40-9f4b-3468c2c0a61e","type":"message","user":"UDDCM376D","text":"`call popup_getoptions(id)`\n```\nVim: Caught deadly signal SEGV\nVim: Finished.\nfish: 'vim' terminated by signal SIGSEGV (Address boundary error)\n```\nSEGV出た\nあかん","ts":"1559088027.237500","edited":{"user":"UDDCM376D","ts":"1559088062.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8a7077be-9ccd-4e21-b3cf-03f430cd57bb","type":"message","user":"U03C6TEAZ","text":"dict が allocate されてないので null ですね。","ts":"1559088361.238000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8570ade1-242f-4c64-9212-8e548a4359e3","type":"message","user":"U03C6TEAZ","text":"evalfunc.c から dict_alloc を探すといいです。","ts":"1559088378.238400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"397b1e75-eed3-4754-87a0-16f5e57ad4d9","type":"message","user":"UDDCM376D","text":"あー、Cってメモリを手動で確保しないといけないだったか","ts":"1559088417.238800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UJQ0V9SJW","text":"<@UJQ0V9SJW> has joined the channel","ts":"1559088773.239100","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"UK23J3NG4","text":"<@UK23J3NG4> has joined the channel","ts":"1559090855.240800","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"532a79a0-603e-4012-9523-449ad6598abd","type":"message","user":"U6XP9LZ6V","text":"<https://github.com/vim/vim/issues/4211>\nこれ、attributeのチェックを追加したのって、テストが失敗してたからだったはずだけど、今ならもうそのチェックはいらないのか…？ mattnさん、PR出したらどうでしょうか。","ts":"1559091460.243000","attachments":[{"fallback":"GitHub: resolve() doesn't resolve intermediate symlinks on MS-Windows · Issue #4211 · vim/vim","id":1,"title":"resolve() doesn't resolve intermediate symlinks on MS-Windows · Issue #4211 · vim/vim","title_link":"https://github.com/vim/vim/issues/4211","text":":help resolve() says: On MS-Windows, ... When {filename} is a symbolic link or junction point, return the full path to the target. ... On Unix, repeat resolving symbolic links in all path component...","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/issues/4211","original_url":"https://github.com/vim/vim/issues/4211"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0fe3f509-ff11-45f9-b124-8381026f97d2","type":"message","user":"U03C6TEAZ","text":"あ、はい。30分間度前に push してそろそろ travis 君が結果を出している頃","ts":"1559091572.243800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8c6576a7-5db7-4b68-838e-79a83933ad28","type":"message","user":"U03C6TEAZ","text":"<https://travis-ci.org/mattn/vim/builds/538507789>","ts":"1559091602.244100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c1b693b2-1641-4d6b-bf45-a5823de87f49","type":"message","user":"U03C6TEAZ","text":"良き","ts":"1559091606.244300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"729efa52-cc51-4a15-9b20-ba975d04715d","type":"message","user":"U6XP9LZ6V","text":"travis君じゃなくてappveyor君の結果が必要なのでは","ts":"1559091667.245900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b0c20810-e001-4aff-bb4a-8839bf803396","type":"message","user":"U03C6TEAZ","text":"あ、そうですね。pr 投げてしまった。まぁ通るはず。(手元の簡易テストは通ったので)","ts":"1559091713.246400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c053a9b7-4daf-4137-a326-cca28dc21152","type":"message","user":"U03C6TEAZ","text":"`s:normalize_fname` が return していなくて一部のテストが何も意味してなかったというのに気付く朝","ts":"1559093860.247200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7e414407-f8b5-416c-9f03-5fcf379630f4","type":"message","user":"U6XP9LZ6V","text":"空文字同士の比較…","ts":"1559094843.248100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"55f17570-4d51-4fff-8173-48d9bcb5a963","type":"message","user":"U03C71D7H","text":"テストが落ちる確認をしなかったやつか","ts":"1559094906.248400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"da551db8-be19-43f4-a4c1-9dedd62d1239","type":"message","user":"U6XP9LZ6V","text":"今度は `test` と `text` の違いで落ちてる","ts":"1559096392.250200","thread_ts":"1559096392.250200","reply_count":1,"replies":[{"user":"U03C6TEAZ","ts":"1559097731.251800"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d75094fc-6e73-4bf1-ad67-b74e2581c12a","type":"message","user":"U03C71D7H","text":"カーソル位置に popup 出すのむずすぎ案件","ts":"1559097011.250500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"034fa51f-487a-4eb3-9ced-87658327801f","type":"message","user":"U03C71D7H","text":"popup、幅が 1 になってしまうな。条件がわからない","ts":"1559097480.250900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ae58c03f-42c2-4050-892f-464b32525ff7","type":"message","user":"UDDCM376D","text":"カーソルの真下に出す感じですか？","ts":"1559097700.251600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"42a89330-e18d-494b-b4c6-62b14d2bf95a","type":"message","user":"U03C6TEAZ","text":"パスしたらお伝えしますよ","ts":"1559097731.251800","thread_ts":"1559096392.250200","parent_user_id":"U6XP9LZ6V","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bfddbb83-939a-40bc-9dee-0efb6f24d02b","type":"message","user":"U03C71D7H","text":"今 popup あれこれ試しているんですが、どうにもまだまだまともに使える段階ではなく、実用はおろか評価すらできないレベルと言う印象。せっせと直したり未実装部分を実装したりを手伝わないといけないフェーズの予感","ts":"1559097813.253200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ac36b1fe-4da5-4d94-9465-bc6628d9982e","type":"message","user":"U03C6TEAZ","text":"文字列の場合は常に行幅1になるかも","ts":"1559097966.253700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2fce6e0c-321f-4a60-9e11-885f596cf8e4","type":"message","user":"U03C6TEAZ","text":"文字列配列渡すと複数行。","ts":"1559097978.254100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"98e5d763-7a50-43aa-80bc-6d648fb646f0","type":"message","user":"U03C6TEAZ","text":"あとボーダーはまだ未実装。","ts":"1559097985.254400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"66d0298c-e40a-45db-a7b2-020c383ebbec","type":"message","user":"U03C71D7H","text":"文字列配列渡してるんですけど、幅がちゃんと出ないんですよね… `popup_create(map(range(1, 25), 'string(v:val)'), {})`","ts":"1559098072.255000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6acb034a-78ab-4afb-a52e-8e33785155ea","type":"message","user":"U03C71D7H","ts":"1559098357.255100","files":[{"id":"FK4RSDK5L","created":1559098356,"timestamp":1559098356,"name":"1__vim.png","title":"popup","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"U03C71D7H","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":6233,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FK4RSDK5L/1__vim.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FK4RSDK5L/download/1__vim.png","original_h":690,"original_w":94,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-FK4RSDK5L-c6811948e8/1__vim_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-FK4RSDK5L-c6811948e8/1__vim_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-FK4RSDK5L-c6811948e8/1__vim_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-FK4RSDK5L-c6811948e8/1__vim_360.png","thumb_360_gif":"","thumb_360_w":49,"thumb_360_h":360,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-FK4RSDK5L-c6811948e8/1__vim_480.png","thumb_480_w":65,"thumb_480_h":480,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U03C71D7H/FK4RSDK5L/1__vim.png","permalink_public":"https://slack-files.com/T03C4RC8V-FK4RSDK5L-31bd01ac39","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"d2ac4426-4286-4a0c-8324-7796e39d01ee","type":"message","user":"U03C6TEAZ","text":"桁溢れしてるっぽい。","ts":"1559098488.255500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"582e5a13-1e5e-40f4-bd70-11a095ca19f1","type":"message","user":"U03C6TEAZ","ts":"1559098493.255600","files":[{"id":"FK2KVHV1T","created":1559098492,"timestamp":1559098492,"name":"image.png","title":"image.png","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"U03C6TEAZ","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":10336,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FK2KVHV1T/image.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FK2KVHV1T/download/image.png","original_h":435,"original_w":521,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-FK2KVHV1T-23d51029ad/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-FK2KVHV1T-23d51029ad/image_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-FK2KVHV1T-23d51029ad/image_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-FK2KVHV1T-23d51029ad/image_360.png","thumb_360_gif":"","thumb_360_w":360,"thumb_360_h":301,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-FK2KVHV1T-23d51029ad/image_480.png","thumb_480_w":480,"thumb_480_h":401,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U03C6TEAZ/FK2KVHV1T/image.png","permalink_public":"https://slack-files.com/T03C4RC8V-FK2KVHV1T-71009e1990","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"1634c02f-878f-4ca4-a3dd-19959246b874","type":"message","user":"U03C71D7H","text":"結果が違うけどどのみち何かがおかしい…","ts":"1559098515.256100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4c353076-c6dd-4ba1-9052-26ed9c11b1df","type":"message","user":"U03C71D7H","text":"vimrc なしでやってみます","ts":"1559098521.256300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"40ec6326-28f1-45b7-acf2-5e5c489d0e25","type":"message","user":"U03C6TEAZ","text":"僕のは空白を先頭に足してます","ts":"1559098553.256600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"698494d2-9932-4f54-81a9-6279168ffcc7","type":"message","user":"U03C71D7H","ts":"1559098588.256800","files":[{"id":"FK2KWA1U5","created":1559098586,"timestamp":1559098586,"name":"1__vim_.png","title":"popup vimrc なし","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"U03C71D7H","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":8324,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FK2KWA1U5/1__vim_.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FK2KWA1U5/download/1__vim_.png","original_h":782,"original_w":130,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-FK2KWA1U5-73d2a5770f/1__vim__64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-FK2KWA1U5-73d2a5770f/1__vim__80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-FK2KWA1U5-73d2a5770f/1__vim__160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-FK2KWA1U5-73d2a5770f/1__vim__360.png","thumb_360_gif":"","thumb_360_w":60,"thumb_360_h":360,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-FK2KWA1U5-73d2a5770f/1__vim__480.png","thumb_480_w":80,"thumb_480_h":480,"thumb_720":"https://files.slack.com/files-tmb/T03C4RC8V-FK2KWA1U5-73d2a5770f/1__vim__720.png","thumb_720_w":120,"thumb_720_h":720,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U03C71D7H/FK2KWA1U5/1__vim_.png","permalink_public":"https://slack-files.com/T03C4RC8V-FK2KWA1U5-ef4778d1e8","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"60bbbfe2-37b5-4e9d-8fbe-7b2f41a1aaa5","type":"message","user":"U03C71D7H","text":"これ最初の行の幅しか見てないとか?","ts":"1559098600.257300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"be03309f-7dd4-4414-9e9b-c3d8ca2b7c91","type":"message","user":"U03C71D7H","text":"`popup_create(map(range(1, 25), 'string(v:val)'), {'minwidth': 3})` こうするときれいに出た","ts":"1559098665.257500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d27e6d97-9fcd-459c-9144-1377d48a9398","type":"message","user":"U03C6TEAZ","text":"あー、minwidth のチェックか","ts":"1559098703.257700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"95dc2d01-e60e-415e-bba0-8a431bdfebc9","type":"message","user":"U03C71D7H","text":"`popup_create(['---'] + map(range(1, 25), 'string(v:val)'), {})` これでも幅3で出てくれた","ts":"1559098714.258000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d7297d65-2e1b-4283-b633-51a52464052e","type":"message","user":"U03C71D7H","text":"`popup_create(map(range(1, 25) + ['---'], 'string(v:val)'), {})` これはダメ。やはり最初の行しか見てない疑惑かな (ソースは一切見てない)","ts":"1559098755.258400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2a76d339-e17e-4406-8dca-fba1c1757638","type":"message","user":"U03C6TEAZ","text":"あー、実際に1行目しか見てないすね。","ts":"1559098812.258800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ecf92871-05f6-4b21-9b79-914595d206c0","type":"message","user":"U03C6TEAZ","text":"<https://github.com/vim/vim/blob/59edb00e2219d4eda34b32a5d405f245053c5b74/src/popupwin.c#L175>","ts":"1559098840.259000","attachments":[{"fallback":"GitHub: vim/vim","id":1,"title":"vim/vim","title_link":"https://github.com/vim/vim/blob/59edb00e2219d4eda34b32a5d405f245053c5b74/src/popupwin.c#L175","text":"The official Vim repository. Contribute to vim/vim development by creating an account on GitHub.","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/blob/59edb00e2219d4eda34b32a5d405f245053c5b74/src/popupwin.c#L175","original_url":"https://github.com/vim/vim/blob/59edb00e2219d4eda34b32a5d405f245053c5b74/src/popupwin.c#L175"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a3c24124-63cb-428e-a7fb-efc63a2c4222","type":"message","user":"U03C71D7H","text":"TODO と書いてあるからミスったわけじゃなくて一旦後回しにしてある感じか","ts":"1559098888.259600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ec7c9afb-d6f1-4a95-a8d0-0acc686049e2","type":"message","user":"U03C6TEAZ","text":"スクロールバー出す予定なのでどこが最大幅か調べるの少し難しい。","ts":"1559098986.260200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a1ad4fb7-d233-4b8f-8e34-3f49a677d4b0","type":"message","user":"U03C71D7H","text":"そう言えばフォーカスはできないって噂でしたけど、スクロールバー出したらスクロールはどのように? API?","ts":"1559099103.260700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a776b3d6-6427-4b0f-ba1d-e86f2edb942d","type":"message","user":"U03C71D7H","text":"というか普通のウィンドウにもスクロールバーほしいよ〜","ts":"1559099122.261100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cdd9fa5e-e4c7-48f8-9ceb-86efe2edad10","type":"message","user":"U03C71D7H","text":"普通のウィンドウにスクロールバーを実装すれば popup でも同じ実装が使えて便利なのではー??","ts":"1559099158.261600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3e01bc5a-8027-4702-a0e5-0797d260b504","type":"message","user":"U03C6TEAZ","text":"実際、いまの実装って中身がバッファなんです。","ts":"1559099202.262000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"84bc6af2-89d0-4b58-9938-83326783b64d","type":"message","user":"U03C71D7H","text":"ですよね。もうちょっとがんばれば neovim の float window に近いものにできると思うのだけど…下手に新しい概念を生み出すよりは既存の概念使い回したほうが応用効くし Unix っぽいし Vim っぽいと思うのだけどなぁ","ts":"1559099293.263100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"295996b0-42be-4a82-85d5-bfbf73d53b8d","type":"message","user":"U06BRP8VD","text":"既存のウィンドウはタイリングに特化してるからなぁ","ts":"1559099446.263500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c620f02a-6e2e-40fd-9382-a0a80a91a62c","type":"message","user":"U06BRP8VD","text":"ちゃんとデザインするとウィンドウを再定義して、ポップアップウィンドウのサブクラスとして通常のウィンドウってのが正着になりそう。もしくはベースウィンドウクラス用意して両方を派生する。","ts":"1559099557.264800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f7f6d38c-707d-4978-9f06-bfc03257f93e","type":"message","user":"U03C6TEAZ","text":"今の実装は通常ウィンドウを全てレンダリングした後でポップアップを上書きする感じになってます。","ts":"1559099571.265500","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e17a9aa8-1306-45fb-b064-f32d9e4aa869","type":"message","user":"U06BRP8VD","text":"どちらも面倒そうだ。既存部分に影響あるし。","ts":"1559099576.265600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c4b05111-0511-424e-808a-e166d4769108","type":"message","user":"U06BRP8VD","text":"既存のウィンドウに影響与えずに漸増的に実装するには今の方式がベストで、しかもVimっぽい。","ts":"1559099620.266400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5e8ce734-39bc-47e1-8e06-a965774386c3","type":"message","user":"U03C71D7H","text":"建て増しを繰り返した雑居ビルになりつつある","ts":"1559099729.266700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6b6fd7f3-e3d2-4144-9413-384edf634ef4","type":"message","user":"U03C71D7H","text":"うーん、補完のポップアップが残ってしまうことが増えた気がする…?","ts":"1559099900.267200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"128b8d54-0cf9-415f-8148-81bf4d8e2bcf","type":"message","user":"U06BRP8VD","text":"いやもともと雑居ビルよ。","ts":"1559100995.267700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9be26c2f-b809-4800-a9e8-7b9005c1b025","type":"message","user":"U06BRP8VD","text":"最近少し綺麗になったけど、まだまだ雑居ビル","ts":"1559101010.268000","team":"T03C4RC8V","reactions":[{"name":"sorena","count":2,"users":["U03C6TEAZ","U6XP9LZ6V"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"83b056ee-cee9-4289-8895-71ab16c52b3a","type":"message","user":"U03C6TEAZ","text":"リフォームした雑居ビル","ts":"1559101029.268300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ead1ab53-fc70-4503-9911-b464ec3e37e4","type":"message","user":"U03C6TEAZ","text":"スーパードクターK による延命治療","ts":"1559101065.268800","edited":{"user":"U03C6TEAZ","ts":"1559101089.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cc7a69cc-077d-4abc-a1b1-7a05731ef3a1","type":"message","user":"U03C6TEAZ","text":"(K は k-takata の k)","ts":"1559101078.269300","team":"T03C4RC8V","reactions":[{"name":"god","count":2,"users":["UB88NP1PY","U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"68D638C6-995C-4D81-AD85-3A9A9E5BA21B","type":"message","user":"UDDCM376D","text":"ぼくは壊さないように気をつけよ","ts":"1559101515.269900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"661894a8-029c-43a1-9162-a230b45fba18","type":"message","user":"U03C71D7H","text":"scrap &amp; build","ts":"1559101530.270100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"961f99e1-b6fe-4ed2-90ec-683e91a7a987","type":"message","user":"U6XP9LZ6V","text":"scrap &amp; break","ts":"1559101805.270900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"593b9a67-1e42-40dd-b161-6f9ac2f79d00","type":"message","user":"U03C71D7H","text":"直らない…","ts":"1559101845.271200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1F008833-128C-4B1E-9737-48DA5858D3EA","type":"message","user":"UDDCM376D","text":"w","ts":"1559101911.271400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"65bcdbd3-f510-4571-a798-8107105db4fe","type":"message","user":"U06BRP8VD","text":"scrap &amp; scrap って叫んだ候補者がいた記憶が…","ts":"1559103188.271900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3dbb3e66-b98d-432b-9513-4101acbae5b3","type":"message","user":"U06BRP8VD","text":"これだw <https://www.youtube.com/watch?v=HdSZW_uCulQ>","ts":"1559103212.272200","attachments":[{"fallback":"YouTube Video: 外山恒一　政見放送","id":1,"author_name":"bluedonchan777777","author_link":"https://www.youtube.com/user/bluedonchan777777","title":"外山恒一　政見放送","title_link":"https://www.youtube.com/watch?v=HdSZW_uCulQ","thumb_url":"https://i.ytimg.com/vi/HdSZW_uCulQ/hqdefault.jpg","blocks":null,"service_name":"YouTube","service_icon":"https://a.slack-edge.com/2089/img/unfurl_icons/youtube.png","thumb_width":480,"thumb_height":360,"video_html":"<iframe width=\"400\" height=\"300\" src=\"https://www.youtube.com/embed/HdSZW_uCulQ?feature=oembed&autoplay=1&iv_load_policy=3\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>","video_html_width":400,"video_html_height":300,"from_url":"https://www.youtube.com/watch?v=HdSZW_uCulQ","original_url":"https://www.youtube.com/watch?v=HdSZW_uCulQ"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"731abcae-9313-4099-902c-2561d0414bb9","type":"message","user":"U6XP9LZ6V","text":"しばらく前のパッチでVMSとAmiga、確実に壊しちゃったなーって気付いた。VMSは1人メンテナンスしてる人がいるから直してくれるだろうか。Amigaはいつまで残すんだろうｗ","ts":"1559107438.277400","team":"T03C4RC8V","reactions":[{"name":"laughing","count":2,"users":["U06BRP8VD","UEACRCY0Z"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e0ced8ec-a6e5-40db-b38a-d1ed488d1f1d","type":"message","user":"UAZ33BKV2","text":"そろそろCIにVMインスタンスとして、異種マシンのエミュレーターが必要かもしれませんね(特定プロジェクトが必要なだけw)\nでも、わりとARM用とかWindows/Linuxでも必要な気がする","ts":"1559111315.278700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0582d9c7-8d1c-4b09-9ecf-1d810088c846","type":"message","user":"U03C71D7H","text":"popup のバッファに `setbufvar(bufnr, '&amp;filetype', 'ruby')` みたいに設定してもハイライトされない。本当に text property しか受け付けないんだろうか? 割と不便感…","ts":"1559112109.279600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"55d855d4-892f-4002-a266-90de22ec039b","type":"message","user":"U03C6TEAZ","text":"いまはそうです。","ts":"1559112166.279800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"513fb420-deea-47ed-99a2-12be9eaf36d9","type":"message","user":"U03C6TEAZ","text":"意図的に切ってます。","ts":"1559112241.280000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7fc3e1b9-2c1c-4180-91dd-b6e26ca52d2a","type":"message","user":"U03C71D7H","text":"なるほど","ts":"1559112252.280200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"887e767a-26a4-4903-8260-0a97755231e2","type":"message","user":"U03C71D7H","text":"将来的には入って欲しい…","ts":"1559112281.280600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b0739b7d-adff-408e-8c13-f2a1e8c2db48","type":"message","user":"U03C6TEAZ","text":"取り込み始めてくれただけでまずは :goodpoem:","ts":"1559112335.281300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"048ED445-9463-431F-84EC-E0BB5012ED2C","type":"message","user":"UDDCM376D","text":":sorena: ","ts":"1559112382.281500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d3bd2d43-f9a4-4710-9e9d-e36f1a7490aa","type":"message","user":"U06BRP8VD","text":"Amiga ときどきアキバで実機中古が売り出されますよね。見るたびにVimのために買うか迷ってます。","ts":"1559120298.281900","edited":{"user":"U06BRP8VD","ts":"1559120334.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1179aff3-77e6-4f16-805a-9f70be5cd16a","type":"message","user":"U06BRP8VD","text":"コンパイラ、どーすんだろ?","ts":"1559120340.282200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5b9d995a-9e37-4879-97f4-c5dece7f1dd8","type":"message","user":"U03C4RC8X","text":"w","ts":"1559121056.282400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fd065bad-6fda-42c7-902c-209d4ec89e10","type":"message","user":"U6XP9LZ6V","text":"Amiga実物まだ見たことないや","ts":"1559121268.283300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"これ少し前に入ったk-takataさんのフォント幅の計算を修正するやつ、あれで治ってWinなら綺麗に使えるんじゃなかったっけ?","ts":"1559121437.283400","attachments":[{"color":"D0D0D0","fallback":"[May 29th, 2019 1:46 PM] work: Cica使ってるんですが、UD教科書体使いたくてごにょごにょしてます","author_id":"UK4SNDUP8","author_name":"miiton","author_subname":"miiton","author_link":"https://vim-jp.slack.com/team/UK4SNDUP8","author_icon":"https://secure.gravatar.com/avatar/4baa52af88afbba9636b95fec27a580a.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2F00b63%2Fimg%2Favatars%2Fava_0018-48.png","text":"Cica使ってるんですが、UD教科書体使いたくてごにょごにょしてます","mrkdwn_in":["text"],"blocks":null,"footer":"Posted in #question","ts":1559105204.261900,"from_url":"https://vim-jp.slack.com/archives/CJMV3MSLR/p1559105204261900"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"46e2f0f2-cb2b-473e-acbc-74fcf6410c6a","type":"message","user":"U06BRP8VD","text":"昔、模試かなにかの帰りに御茶ノ水界隈あるいてて、Amiga専門店の店頭に1GB HDD入荷の文字をみて「うわーそんな大容量を何に使うんだ」って思ったまだまだ幼かったぼく。","ts":"1559121514.284700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"527e6b9e-31cc-446e-b030-20c21aad43cc","type":"message","user":"U6XP9LZ6V","text":"フォント幅は直りました。","ts":"1559121673.285600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a7068437-d08e-4a32-8308-1e7187df31d5","type":"message","user":"U06BRP8VD","text":"いい感じです。","ts":"1559121975.285900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9802828a-0b61-42ce-8d13-3c7522fbb6f2","type":"message","user":"U06BRP8VD","ts":"1559121982.286000","files":[{"id":"FJWHQKFLH","created":1559121980,"timestamp":1559121980,"name":"image.png","title":"image.png","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"U06BRP8VD","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":174492,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FJWHQKFLH/image.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FJWHQKFLH/download/image.png","original_h":750,"original_w":662,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-FJWHQKFLH-cfa0fd504d/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-FJWHQKFLH-cfa0fd504d/image_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-FJWHQKFLH-cfa0fd504d/image_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-FJWHQKFLH-cfa0fd504d/image_360.png","thumb_360_gif":"","thumb_360_w":318,"thumb_360_h":360,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-FJWHQKFLH-cfa0fd504d/image_480.png","thumb_480_w":424,"thumb_480_h":480,"thumb_720":"https://files.slack.com/files-tmb/T03C4RC8V-FJWHQKFLH-cfa0fd504d/image_720.png","thumb_720_w":636,"thumb_720_h":720,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/FJWHQKFLH/image.png","permalink_public":"https://slack-files.com/T03C4RC8V-FJWHQKFLH-8cba66ad28","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"E37E2604-32A6-4D40-B5EB-3BF5DE5408CF","type":"message","user":"U03C4RC8X","text":"Amigaで:terminalしよう","ts":"1559122356.286600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"045559c0-967e-4440-8d26-d7a031f96ca9","type":"message","user":"U7986PPFH","text":"```\ngvim --clean\n:set nobuflisted\n:terminal\n```\nウインドウ閉じるボタンを押す\n\"Kill job ~?\" ダイアログでOKを選択\n=&gt; ファイル選択ダイアログが出て、キャンセルを選ぶとダイアログが出続ける\nこれWindowsでも再現しますか？","ts":"1559122767.289900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"176bc8d7-8159-4dce-b509-7097d2252ae1","type":"message","user":"U03C6TEAZ","text":"再現しません。","ts":"1559123397.290100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8d4afe79-4765-4f1e-b9d8-5a0d862ad1d6","type":"message","user":"U7986PPFH","text":"ありがとうございます。unixだけかな","ts":"1559124039.290700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"146f0bc9-c29b-4fb1-9f7e-474b29c50c88","type":"message","user":"U7D5LRRQD","text":"string-interplation用のテストを書いてみました！\nどうだろ……。\n<https://gist.github.com/b7d999fbfa4f652de697337b3fb7b6ae>","ts":"1559125318.291500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"919d1edf-0924-40ea-aa13-8049daea895a","type":"message","user":"U03C71D7H","text":"文法は確定?","ts":"1559125369.291800","thread_ts":"1559125369.291800","reply_count":4,"replies":[{"user":"U7D5LRRQD","ts":"1559125540.292500"},{"user":"U03C71D7H","ts":"1559125661.293200"},{"user":"U7D5LRRQD","ts":"1559125855.295000"},{"user":"U03C71D7H","ts":"1559125889.295300"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f27d3cfc-d781-490e-8c3e-5eb0d5b22103","type":"message","user":"U03C6TEAZ","text":"```\n`xxx`\n```\n内に ` は書ける？","ts":"1559125450.292400","thread_ts":"1559125450.292400","reply_count":1,"replies":[{"user":"U7D5LRRQD","ts":"1559125624.292700"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"614a7fa1-1829-42e7-87cd-3a016a5bc02d","type":"message","user":"U7D5LRRQD","text":"僕はこれが好みなので、まずはこれでPRしようと思ってます！\nただ、それを拒否されたら、thincaさんに考えてもらった `$'I'm a ${x}'` を使いたい……\nという感じ :flushed:","ts":"1559125540.292500","thread_ts":"1559125369.291800","parent_user_id":"U03C71D7H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d4c450ba-8d53-4893-8401-256d6d2c25f3","type":"message","user":"U7D5LRRQD","text":"あっ、そうか、そのケースが。\nありがとうございます！　テスト追加しよう。\n\n想定としては\n```\n`\\``\n```\nという感じで、書ける感じです :+1:","ts":"1559125624.292700","thread_ts":"1559125450.292400","parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U03C6TEAZ"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0181c495-8556-48ba-9811-a9d4e6071cba","type":"message","user":"U03C71D7H","text":"個人の好みを言うと `${x}` の `{}` が省略できるのはあまり好きではない :grin:","ts":"1559125661.293200","thread_ts":"1559125369.291800","parent_user_id":"U03C71D7H","team":"T03C4RC8V","reactions":[{"name":"heart","count":1,"users":["U7D5LRRQD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7307072c-e152-4138-b078-474a45712119","type":"message","user":"U7D5LRRQD","text":"そうか、エスケープ関連忘れてました :pray:\n```\necho `\\``\n\" `\n\necho `\\${10}`\n\" ${10}\n\necho `$\\{10}`\n\" ${10}\n\nlet _ = `${10\\}`\n\" パースエラー！（ECMAScriptを参考）\n```","ts":"1559125783.294900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b4c1f339-2b7f-48c7-97e8-67c66622eaa6","type":"message","user":"U7D5LRRQD","text":"今そこ、すごい迷ってる……。\nECMAScriptだと省略できなくて、Kotlinだとできる…… :confused:","ts":"1559125855.295000","thread_ts":"1559125369.291800","parent_user_id":"U03C71D7H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"251e11c5-3026-4495-9135-14ef72c6d908","type":"message","user":"U03C71D7H","text":"省略できると、人から見て曖昧な書き方をした時にコードの可読性が落ちる懸念があるんですよね","ts":"1559125889.295300","thread_ts":"1559125369.291800","parent_user_id":"U03C71D7H","team":"T03C4RC8V","reactions":[{"name":"sob","count":1,"users":["U7D5LRRQD"]},{"name":"wakaru","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3dff1eb4-fa65-475f-a18f-d3f898a8b7a0","type":"message","user":"U7D5LRRQD","text":"<https://twitter.com/public_ai000ya/status/1133682855400181760?s=19>","ts":"1559126256.295600","attachments":[{"fallback":"<https://twitter.com/public_ai000ya|@public_ai000ya>: あなたが期待する挙動\n\nval x = 10\nprint `${x}`\nprint `$x`","id":1,"author_name":"あいや","author_subname":"@public_ai000ya","author_link":"https://twitter.com/public_ai000ya/status/1133682855400181760","author_icon":"https://pbs.twimg.com/profile_images/1128854181048045568/cABlPICl_normal.jpg","text":"あなたが期待する挙動\n\nval x = 10\nprint `${x}`\nprint `$x`","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1559126030,"service_name":"twitter","from_url":"https://twitter.com/public_ai000ya/status/1133682855400181760?s=19","original_url":"https://twitter.com/public_ai000ya/status/1133682855400181760?s=19"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9db7b3e2-dd9c-448c-b1dc-278fb1dee4ad","type":"message","user":"U03C6TEAZ","text":"$x は環境変数とシンタックスがかぶって色付けしんどそう。","ts":"1559127495.297500","team":"T03C4RC8V","reactions":[{"name":"sob","count":1,"users":["U7D5LRRQD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"24c5063a-e497-423b-a77f-8b71feaf9e14","type":"message","user":"U0M7GCBPD","text":"<https://github.com/vim/vim/pull/4446#issuecomment-496876334>\nBram に「ほかのファイル :edit したりウィンドウ移ったりした時にも clear しないとアカンやんけ」って言われたんですが、役割的に window-local variable だったらいいと思うんですよね（できればの話）。\nただ w: はユーザが変更可能なので既存プラグインを壊さないとも限らない（そして Bram は絶対入れなさそう？）。","ts":"1559130715.300000","attachments":[{"fallback":"GitHub: Add v:searchstat variable by tyru · Pull Request #4446 · vim/vim","id":1,"title":"Add v:searchstat variable by tyru · Pull Request #4446 · vim/vim","title_link":"https://github.com/vim/vim/pull/4446#issuecomment-496876334","text":"As of 8.1.1270, vim can show current match position and count like [1/20] at command-line. It is useful but cannot get the status from Vim script, without using execute(&amp;#39;:unsilent :norm! n&amp;#39;...","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/pull/4446#issuecomment-496876334","original_url":"https://github.com/vim/vim/pull/4446#issuecomment-496876334"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3129eeca-e928-4745-9822-ba05a9d06a4c","type":"message","user":"U0M7GCBPD","text":"そこでふと思ったんですが、ウィンドウローカルな `v:` とかってありましたっけ？というか、内部的にウィンドウ毎に別の `v:searchstat` の値を持たせる事が可能なのか知りたい","ts":"1559130790.301300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"74ac0168-3ff2-4990-a7cd-02a38f5a35e9","type":"message","user":"U0M7GCBPD","text":"とはいうもののやっぱり window-local な値を持つ vim-variable とかややこしいし、どんなインターフェースがいいのかまた迷ってる段階です…","ts":"1559130890.302500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1aa040d7-7d85-4906-b2ba-efa967942b72","type":"message","user":"U0M7GCBPD","text":"となると window-local なオプションなのかなぁ","ts":"1559130963.302800","thread_ts":"1559130963.302800","reply_count":1,"replies":[{"user":"U0M7GCBPD","ts":"1559131280.307500"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b1ddcff1-fc86-4068-bb65-3e05d4a29eae","type":"message","user":"U06BRP8VD","text":"基本的なところがわかってないんですが searchstat ってどういう値なんです?","ts":"1559131038.303900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eda4e8c4-b9fe-4eb0-857b-da268ca9e0ee","type":"message","user":"U0M7GCBPD","text":"8.1.1270 から `set shortmess-=S` して `n`, `N`, `/` コマンドを実行すると、コマンドラインに `[1/20]` みたいなヒット件数と現在位置が出るようになったんですが（以前 vim-anzu みたいなやつが本体に入ったって言われてたので覚えてるかもしれませんが）","ts":"1559131128.305400","edited":{"user":"U0M7GCBPD","ts":"1559131149.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"41aef366-d871-4106-9e79-82376b5ae6fe","type":"message","user":"U0M7GCBPD","text":"その `[1/20]` を `{'current': 1, 'count': 20, 'wrap': 0}` みたいな値で参照可能にする変数です。","ts":"1559131189.306200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fc9e03e7-a573-4e62-aa8f-d9492a2a4ac7","type":"message","user":"U0M7GCBPD","text":"なぜ欲しいかはここら辺に書きました <https://github.com/vim/vim/pull/4446>","ts":"1559131217.306500","attachments":[{"fallback":"GitHub: Add v:searchstat variable by tyru · Pull Request #4446 · vim/vim","id":1,"title":"Add v:searchstat variable by tyru · Pull Request #4446 · vim/vim","title_link":"https://github.com/vim/vim/pull/4446","text":"As of 8.1.1270, vim can show current match position and count like [1/20] at command-line. It is useful but cannot get the status from Vim script, without using execute(&amp;#39;:unsilent :norm! n&amp;#39;...","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/pull/4446","original_url":"https://github.com/vim/vim/pull/4446"}],"edited":{"user":"U0M7GCBPD","ts":"1559131231.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"78b275dc-ab7c-4d95-95b5-485135f03911","type":"message","user":"U06BRP8VD","text":"ははーん…いま表示する時は1つだけど、それやるとWin毎に設定できるようになるんか。","ts":"1559131262.307400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cf10b1b0-36d6-442a-8904-9127efe1bcd6","type":"message","user":"U0M7GCBPD","text":"いやオプションだと変更可能にしないとダメだし値が文字列型に限られてしまう…","ts":"1559131280.307500","thread_ts":"1559130963.302800","parent_user_id":"U0M7GCBPD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3ea3d240-221a-4ad1-8098-f309fef71cfc","type":"message","user":"U0M7GCBPD","text":"いや、設定は考えてないです。まず参照したいというモチベがあって、なぜ参照したいかというと\n1. statusline に表示させたい (今はコマンドラインに表示される)\n2. `nnoremap n nzz` みたいなマッピングを持ってると `zz` で画面が redraw してしまい見えなくなる","ts":"1559131381.309200","edited":{"user":"U0M7GCBPD","ts":"1559131395.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2f9d4f17-3cbd-434a-b8fb-ff9877fd3d58","type":"message","user":"U06BRP8VD","text":"あ、スクリプトからという意味ではなく、Vim側からという意味。","ts":"1559131398.309700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"461557db-69b5-43c8-8a88-6a534a4dd23a","type":"message","user":"U06BRP8VD","text":"なんか","ts":"1559131421.310100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f2aa4669-a963-4b31-b34f-96ac533c02c1","type":"message","user":"U06BRP8VD","text":"1 をやるんだったら `'statusline'` に新しい item 追加したほうが正しいんじゃないの?","ts":"1559131478.310800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4fc6af53-1ebb-40d4-bc96-9cf84c39d8bb","type":"message","user":"U0M7GCBPD","text":"はい。statusline だけだったらそれだけで事足りるんですよね…\n分けた方がいいんですかね？","ts":"1559131512.311400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3f5e1e2b-47e0-4a0e-b05e-255daecde614","type":"message","user":"U06BRP8VD","text":"正しいっていうか「説得力が出る」というべきかな。","ts":"1559131533.312100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e02fe254-75f5-4a11-87db-bb597f29cbb4","type":"message","user":"U0M7GCBPD","text":"（まぁ正直自分としては usecase として示したかっただけで 2 が主な理由です）","ts":"1559131534.312200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"be43de94-ed2c-477d-a443-05b22fc16298","type":"message","user":"U06BRP8VD","text":"Vim script にマップするなら、関数追加でどう?","ts":"1559131562.312800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"51df2291-6d68-46ad-ab5a-2320ef345e01","type":"message","user":"U0M7GCBPD","text":"うーん確かに…","ts":"1559131594.313000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4481c9ee-9f22-4ba2-91ff-7a32caa633ae","type":"message","user":"U06BRP8VD","text":"そうすればどこに入ってるかは気にならないし。たしかに shortmes は微妙だと僕も思う。","ts":"1559131619.313800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a1307423-569d-4109-9827-f2b890221410","type":"message","user":"U06BRP8VD","text":"ただ…これ全バッファに出すと、めんどそう(再描画の精度と速度のトレードオフが生じそう)ってのはある。","ts":"1559131647.315000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e2c96680-040e-448d-a267-e4a6e1d68f89","type":"message","user":"U0M7GCBPD","text":"今まで関数を避けてた理由としては (↑の issue でも書いた) statusline で参照する時に若干のオーバーヘッドがある、くらいで\nstatusline に追加しちゃえばそれはなくなるんですよね…","ts":"1559131654.315200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"feebc7cc-3865-4a06-8c74-878361295761","type":"message","user":"U0M7GCBPD","text":"関数にすればウィンドウ毎の値も取れるし汎用的になるんだけど、↑の理由があって変数を選んだ、って感じでした","ts":"1559131684.315900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1267dea2-3eb7-4ee0-8fd3-b597c9558759","type":"message","user":"U06BRP8VD","text":"vimscriptから使うなら現在の値を取るよりは `search()` の亜種でそういう情報が取れるほうが汎用的で説得力あるかもしれない。","ts":"1559131736.316800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8d3c9183-01bd-4427-8cef-5b7f0c1a6c0d","type":"message","user":"U0M7GCBPD","text":"念のため、それって設定とかは考えてる感じですか？参照だけでいいような気はしますが &gt;`search()` の亜種","ts":"1559131812.317900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"03178672-a5b4-467b-b2fa-078ec7f20ea8","type":"message","user":"U06BRP8VD","text":"いや考えてないです。","ts":"1559131824.318100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"365f31f6-bbfb-4239-a217-89279e50d9d6","type":"message","user":"U06BRP8VD","text":"searchの亜種っていうのは、いまのままだと最後の検索による情報しか取れないけど、任意のパターンで、検索のメタ情報(位置とか総件数とか)がわかるほうがなにかしら使い回しができて、Vim scriptから参照できる意味があるなぁ、くらいの発想。","ts":"1559131927.320100","edited":{"user":"U06BRP8VD","ts":"1559131934.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"48311bcf-3f3c-4fd4-b183-922a64ce0cd8","type":"message","user":"U0M7GCBPD","text":":naruhodo:\n確かに関数にすればより汎用的にも展開できるしよさそう","ts":"1559132208.322600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e6918b91-cd30-4023-a6d7-2ff53d53eb1f","type":"message","user":"U06BRP8VD","text":"いっといてなんですが、too muchだとは思いますけどねw","ts":"1559132244.323700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8df7b551-185e-47e5-b87e-d84c9acc06ed","type":"message","user":"U0M7GCBPD","text":"ただちょっと気になってるのが、関数にすると再検索が必要になっちゃって重くならないかというのがあった（当初考えていた時）","ts":"1559132257.324200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c75bd8de-61ad-479e-b672-1f759129883b","type":"message","user":"U0M7GCBPD","text":"いや、ただ statusline は statusline で項目追加すべきはその通りだと思います","ts":"1559132278.324900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3366fac5-fc5d-46e7-bef7-fc7543f74c99","type":"message","user":"U0M7GCBPD","text":"大分頭整理出来てきた","ts":"1559132283.325100","thread_ts":"1559132283.325100","reply_count":2,"replies":[{"user":"U06BRP8VD","ts":"1559132352.326500"},{"user":"U0M7GCBPD","ts":"1559132426.327300"}],"team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5da7098f-8ab6-41d3-addb-d7912a64d04f","type":"message","user":"U06BRP8VD","text":"やっぱちらついたり消えたりってのを解消するってのは結構重要だと思うし、ちょうどよい変数の種類がないのもそのとおりなのでitemで追加しちゃうのがユーザーにとってもベストかなって思います。","ts":"1559132321.325900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7ad3c8a9-2aa0-41e6-897d-4c9d3a0ddc0b","type":"message","user":"U06BRP8VD","text":"itemに使えるアルファベットがないんじゃねぇか? っていう心配はあります。","ts":"1559132341.326300","team":"T03C4RC8V","reactions":[{"name":"innocent","count":1,"users":["U0M7GCBPD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a79963fe-2064-4abd-9cf6-9a762f7229e7","type":"message","user":"U06BRP8VD","text":"それならよかった","ts":"1559132352.326500","thread_ts":"1559132283.325100","parent_user_id":"U0M7GCBPD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4ed775d8-e4cc-477f-9885-811a12707db5","type":"message","user":"U06BRP8VD","text":"記号は特殊な用途になってますね。","ts":"1559132404.327200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"38c10e5c-b6a4-464d-85ee-7a2cd32afeea","type":"message","user":"U0M7GCBPD","text":"いえいえ、ありがとうございます :bow:","ts":"1559132426.327300","thread_ts":"1559132283.325100","parent_user_id":"U0M7GCBPD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"50c30520-09af-4d80-a4e5-5fef64fc36d8","type":"message","user":"U06BRP8VD","text":"ソートされてないからわかりにくいけど `s` と `S` は空いてそう。","ts":"1559132480.328000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dda1d2b3-4cd0-48bc-b633-62e1d0298b1e","type":"message","user":"U0M7GCBPD","text":"おぉ、あざます！","ts":"1559132654.328300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0415761d-e2b8-4b35-858e-b4771379df7d","type":"message","user":"U0M7GCBPD","text":"まとめ\n• statusline にも項目追加した方が良い\n• Vim script から参照可能にするには？（以下懸念点）\n    ◦ 変数 (v:) → ウィンドウ毎の値が取れない\n    ◦ 変数 (w:) → ユーザが変更可能で互換性壊してしまうので×\n    ◦ 関数 → 再検索のコストがかかってしまう\n    ◦ オプション → 変更可能にしないとダメだし、値が文字列型に限られてしまう","ts":"1559132705.329100","edited":{"user":"U0M7GCBPD","ts":"1559133000.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"58cd4627-f458-488e-9c86-8c7b56a6a224","type":"message","user":"U06BRP8VD","text":"変更可能にする意味がないからオプションはアウトな気がしますね。","ts":"1559133110.330000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2fbb78bf-18e0-4fc3-ad77-9760ad434772","type":"message","user":"U06BRP8VD","text":"っていうかstatuslineで取れるものにアクセスする関数ってあっても良いのでは?","ts":"1559133131.330600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cafea114-5725-47f6-bd53-417d71ebbfb6","type":"message","user":"U06BRP8VD","text":"# どんどん話を大きくしすぎてる感はあるw","ts":"1559133153.330900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ba530b16-2db8-4583-9286-c0948d7d4868","type":"message","user":"U0M7GCBPD","text":"なんかそれが一番いい案な気がしてきましたｗ","ts":"1559133287.332900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e9cc4f9e-6da8-4f41-a2ef-99ef1afa67d3","type":"message","user":"U0M7GCBPD","text":"関数のネックであるコストを回避するために何らかの形で (内部的に) 値を置いておく必要はあるなと感じてたんですが、\n関数で (今は未対応？としても将来的に) 任意のパターンの検索を可能にするならキャッシュするのはメモリ的に不安だし","ts":"1559133367.334700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4c5fd854-55f1-47b7-9229-512d4eaf7959","type":"message","user":"U0M7GCBPD","text":"それなら `getcompletion()` の statusline 版みたいなの合ってもいいかも、みたいな","ts":"1559133398.335400","edited":{"user":"U0M7GCBPD","ts":"1559133406.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f44c7ac9-576d-4f68-9bd9-5dd88d670e59","type":"message","user":"U06BRP8VD","text":"いまどこから取ってくればよいのか見てた。言い出しっぺの責任的なアレで","ts":"1559133435.336800","team":"T03C4RC8V","reactions":[{"name":"man-bowing","count":1,"users":["U0M7GCBPD"]},{"name":"dai","count":1,"users":["U0M7GCBPD"]},{"name":"kan","count":1,"users":["U0M7GCBPD"]},{"name":"sha","count":1,"users":["U0M7GCBPD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"519631d6-0dd1-4944-91c8-cda2e56a5482","type":"message","user":"U06BRP8VD","text":"src/buffer.c の `build_stl_str_hl()` のなかに `case STL_xxx` なところで埋めてますね。","ts":"1559133649.341700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"822bef4e-feba-4654-98dc-aab9c821dc28","type":"message","user":"U06BRP8VD","text":"`case STL_FILEPATH` で探せば見つかる。","ts":"1559133675.342700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4e2abae2-cfa7-40df-bb80-0b47c230d978","type":"message","user":"U06BRP8VD","text":"この部分をいい感じに関数化して、vim scriptから使えるようにラッパーかぶせてっていうのが最短手かと。","ts":"1559133719.344000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ff858b19-2da4-43c9-b6c5-4372b263d99a","type":"message","user":"U06BRP8VD","text":"いずれにせよまずはココに実装しちゃうのがはやそげ","ts":"1559133737.344500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ea7fefa2-399c-4b3e-9617-6fed8d1ad764","type":"message","user":"U0M7GCBPD","text":":kan: :kiwa: :mattekimashita:  あざます！","ts":"1559133805.345900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f84b11ab-20b6-4471-9c1b-ed90b029dcca","type":"message","user":"U03C71D7H","text":"任意のパターンで検索できる関数、パターンを省略すると `@/` が使われてその場合はキャッシュから取ってきて速くなるとかはアリな気がする","ts":"1559134651.347000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7cecbec1-c6a9-4c9e-ace4-1e8dbc3fe919","type":"message","user":"U0M7GCBPD","text":"その場合も関数の呼び出しコストは 0 にはならないというのが…（考えすぎな気はする）","ts":"1559135140.347700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"87308340-cd54-4dd9-a3c5-1eb6c0777ca5","type":"message","user":"U03C71D7H","text":"そこは Vim script 自体が将来高速化されることを期待しよう(雑)","ts":"1559135258.350000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f48e9c2c-a055-411d-af4d-baea7e9fc53e","type":"message","user":"U0M7GCBPD","text":"本当にそこは期待したい… 誰か…","ts":"1559135284.350600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f08b89c0-16ae-405f-8d8f-6829f7def592","type":"message","user":"U0M7GCBPD","text":"なんだかんだ言って「statusline に表示」が一番頻出なユースケースだとは思うので、そのための項目追加はしたい → statusline の値を取れる関数を作る、ってのが一番シンプルだったのでｗ","ts":"1559135289.350900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eeed2d1c-9615-4fcc-8048-298afa9b44c5","type":"message","user":"U03C6TEAZ","text":"`v:xxx` を引くのもコストなので (言い訳)","ts":"1559135298.351100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"49c3d4dc-a398-46e8-a871-9267b1fb30cb","type":"message","user":"U0M7GCBPD","text":"それは確かに…","ts":"1559135339.352100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e541e9ae-3261-4990-9fbf-b62a381b98d1","type":"message","user":"U0M7GCBPD","text":"関数がコスト言いだしたらそれはそうなりますよね…","ts":"1559135354.352700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"32786092-69a5-4210-b04f-f02f206f6c49","type":"message","user":"U03C71D7H","text":"正直なところ statusline に表示するのは大きなユースケースになりづらいと思っている","ts":"1559135366.353000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1c002eb3-428e-4861-957d-8470fb1b9c26","type":"message","user":"U03C6TEAZ","text":"あー、k-takata さんが言ってた Amiga 壊したってこれかw <https://github.com/vim/vim/pull/4424#issuecomment-496786745>","ts":"1559135443.354700","attachments":[{"fallback":"GitHub: Refactor delete() to use readdir() for fixing #696 by k-takata · Pull Request #4424 · vim/vim","id":1,"title":"Refactor delete() to use readdir() for fixing #696 by k-takata · Pull Request #4424 · vim/vim","title_link":"https://github.com/vim/vim/pull/4424#issuecomment-496786745","text":"This fixes the issue #696 by refactoring delete(). Move the core part of f_readdir() to readdir_core(). (ref: #2439) Stop using gen_expand_wildcards() from delete_recursive(). Use readdir_core() i...","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/pull/4424#issuecomment-496786745","original_url":"https://github.com/vim/vim/pull/4424#issuecomment-496786745"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"92d1b9e6-6805-4ffd-8223-500d7d3ec564","type":"message","user":"U03C71D7H","text":"statusline に表示したい情報はウィンドウ(バッファ)毎に異なる情報になるのだけど、検索って多くの場合は現在のバッファに対してしたい場合がほとんど(プロジェクト横断でしたい場合もあるけど)。statusline に表示すると、現在のバッファでただ検索したいだけなのに表示されているすべてのバッファで検索が走ることになる。嬉しくないケースの方が多いと思う","ts":"1559135485.355500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b1fe1f2f-db0f-4e7b-98d7-54819053d55f","type":"message","user":"U0M7GCBPD","text":"あーなるほど","ts":"1559135681.356300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"244e97ab-fe46-4271-9bd6-4458b20daded","type":"message","user":"UAZ33BKV2","text":"バッファ毎という意味だと行/桁と類似? at statusline","ts":"1559135688.356700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ba73d76e-d95a-42bd-a172-0e8b56b8b016","type":"message","user":"U06BRP8VD","text":"今も別バッファで検索走ってるんすよ。ハイライトするのに。","ts":"1559135706.357100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c21f3f93-d587-4451-8407-9487474a1287","type":"message","user":"U03C71D7H","text":"あーそう言われてみると…","ts":"1559135720.357600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"83a44a74-9a1b-496d-98e8-7b1ce9a733e4","type":"message","user":"U06BRP8VD","text":"それはそれで個別に無効化できるべきではあるけど","ts":"1559135736.358300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"722f331c-9bba-4aff-b8ba-0c074df421a1","type":"message","user":"U03C71D7H","text":"いろんな問題が絡まってきた","ts":"1559135752.359000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"76123531-734f-4d33-ada9-ff7e5d8b7190","type":"message","user":"U0M7GCBPD","text":"例えば Chrome で検索欄が表示されてる時しか件数は表示されないけど、Vim の場合 statusline に含めたら常に表示される事になってしまう","ts":"1559135758.359200","edited":{"user":"U0M7GCBPD","ts":"1559135822.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cfa590e5-3303-4c4e-ae7f-3b3bd9c3eb79","type":"message","user":"U0M7GCBPD","text":"という問題は把握できた","ts":"1559135763.359500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3dc21041-2184-451b-bdc4-1219d22e3855","type":"message","user":"U06BRP8VD","text":"カーソルがあたってないから `[--/&lt;99]` みたいな表示があれば、それはそれで役に立つのかなと。","ts":"1559135777.359800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d2cb87f7-08df-4869-8265-3aef15a6d812","type":"message","user":"U03C71D7H","text":"検索自体を回避できるようにしたら 99 も -- になるかな","ts":"1559135806.360300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4517b20b-70cf-49b0-996f-ab803483f428","type":"message","user":"U06BRP8VD","text":"検索してない場合は消すか `[--/--]` とかね。例えばだけど。","ts":"1559135818.360600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c119f673-919b-44d5-8f10-49dfcdd4db57","type":"message","user":"U03C71D7H","text":"99 を変更できるようにオプションを足す件やろうかな。簡単そう","ts":"1559135838.361100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1c3f4eed-16c5-43a2-9afd-c66de318e68a","type":"message","user":"U03C71D7H","text":"(…グローバルでいいよね…?)","ts":"1559135863.361400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"82e47050-1781-4db1-88b6-206f6cc832c7","type":"message","user":"U06BRP8VD","text":"いまのままなら悪くてもタブごと、くらいの分離度になるかもしれない。","ts":"1559135909.362200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"448892fb-5f48-4e6b-973f-d13167348954","type":"message","user":"U03C71D7H","text":"ハイライトのための検索って実は見えてる範囲だけだったりはしないですかね?","ts":"1559135978.363000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"668bdca8-8c2e-4420-9b6b-a687c0a811b5","type":"message","user":"U03C71D7H","text":"全体検索してるなら 99 という上限があるのは不自然な気がして","ts":"1559136006.363500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"82be467f-faa8-4e4f-8840-e07cd6cbbf84","type":"message","user":"U0M7GCBPD","text":"見間違えてなければ、バッファ先頭から `@/` を検索して 99 超えたら break してるだけだと思います (search_stat() search.c)","ts":"1559136288.364400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"11e9871d-d654-4f7d-aefa-82adda2646f2","type":"message","user":"U0M7GCBPD","text":"単純にファイルサイズが大きい場合 (例えば 20000 行越えの PHP ファイル) の速度を考慮したんじゃないですかね","ts":"1559136353.365400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ec3fe17d-4838-4930-94d5-0566bbbedaea","type":"message","user":"U03C71D7H","text":"ヒット件数の方ではなくてハイライトのための検索ですね","ts":"1559136370.365700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"41ce058d-0734-4691-8c6e-a285f53aa67c","type":"message","user":"U0M7GCBPD","text":"ハイライトの検索でも 99 件なんですか？\nその上限ってどっかに書いてありますか？","ts":"1559136449.366200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"10a98558-44a2-4e8c-b93c-d434155f4ea0","type":"message","user":"U0M7GCBPD","text":"というか\n&gt; 今も別バッファで検索走ってるんすよ。ハイライトするのに。\nは内部的な話だと思ってた","ts":"1559136474.367000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c0821b68-e46d-4d71-8d1c-ef9b1df0846e","type":"message","user":"U03C71D7H","text":"いや、上限はないので、ハイライトの検索ではバッファ全体ではなく見えている範囲だけを検索しているんじゃないかなと思ったんです","ts":"1559136495.367500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9b609879-341d-48bb-a667-8b37ac037a7a","type":"message","user":"U03C71D7H","text":"ハイライトのための検索でバッファ全体を検索しているのであれば stat の方を 99 件に絞る意味がないので","ts":"1559136536.368000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"890de727-ac9f-4444-848d-dc3b2e12281f","type":"message","user":"U0M7GCBPD","text":"あー :naruhodo:","ts":"1559136580.368300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2bc20726-f414-43e3-8e06-c325b95e3201","type":"message","user":"U03C6TEAZ","text":"<@UDDCM376D> ゴリラさん、いまやってるの popup_getoptions です？","ts":"1559136847.368700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ecf4bf5a-e13b-4259-a1fe-a8ebdf42221d","type":"message","user":"U03C6TEAZ","text":"popup_getposition 出来たので送ってしまっていいですか？","ts":"1559136868.369000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"773EB5EC-3F4C-4095-88B2-DA8D4B0A8C35","type":"message","user":"UDDCM376D","text":"optionsの方です！","ts":"1559137393.369800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"91cc78f1-188d-4c71-8be4-d5d3b700bae4","type":"message","user":"U03C6TEAZ","text":"あざます。では getposition の方送ってしまいます。","ts":"1559137412.370300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"857A418A-6B54-48B5-9E9C-973984A365BF","type":"message","user":"UDDCM376D","text":"getposition、参考にします！","ts":"1559137443.371100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"709fb143-1c00-49c2-ad1d-25ef0810d9a3","type":"message","user":"U03C6TEAZ","text":"<https://github.com/vim/vim/pull/4449>","ts":"1559137447.371300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"26A25126-2382-4C5F-A596-9C4A8613EAC4","type":"message","user":"UDDCM376D","text":"今上がったのでこれから電車の中でやります","ts":"1559137472.372000","team":"T03C4RC8V","reactions":[{"name":"trolleybus","count":1,"users":["U03C6TEAZ"]},{"name":"gorilla","count":1,"users":["U03C6TEAZ"]},{"name":"computer","count":1,"users":["U03C6TEAZ"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0708261A-8D08-428E-B3B1-020B43490EAA","type":"message","user":"UDDCM376D","text":"よんだ","ts":"1559137575.372500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"C2970C51-CB96-4962-87DC-B26C703C689D","type":"message","user":"UDDCM376D","text":" ++dict-&gt;dv_refcount;","ts":"1559137608.372800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1F4DBED1-BB2A-46FB-B21F-20589FA7C7EF","type":"message","user":"UDDCM376D","text":"これは何してるんですか？","ts":"1559137620.373200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5872d582-0672-4f80-ac9b-bc2fd9c9b5aa","type":"message","user":"U03C6TEAZ","text":"vim の gc って2つ実装されてて、一つは参照カウント、もう一つは mark&amp;sweep なんですが、その参照カウントの方を1足してます。これをしないと関数から値が返った瞬間に gc されて vim がクラッシュします。","ts":"1559137685.374200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c0256397-358b-409b-ae11-0567d5bf5ae3","type":"message","user":"U03C6TEAZ","text":"ちなみになぜ gc が2つ実装されているかというと","ts":"1559137705.374600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9bbfcd5d-e7e4-4007-b9f6-e00729c2e617","type":"message","user":"U03C6TEAZ","text":"```\nlet a = {}\nlet b = {\"a\": a}\nlet a[\"b\"] = b\n```\nこうすると循環参照して参照カウントでは 0 にならないんです。これを解決する為に mark&amp;sweep があります。","ts":"1559137757.375600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"61b21228-af1a-4e65-830d-82bf73c26694","type":"message","user":"U03C71D7H","text":"とても丁寧な解説","ts":"1559138242.375800","team":"T03C4RC8V","reactions":[{"name":"sasumatsu","count":1,"users":["UEACRCY0Z"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"335b7048-e294-4637-8319-448a487e325b","type":"message","user":"U03C6TEAZ","text":"テストがコケている","ts":"1559138858.376200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c17b8db0-3fc9-4422-afc8-224c2f55d4f3","type":"message","user":"UDDCM376D","text":"ありがとうございます\n参照カウントとmark&amp;weepが全然わからないので調べてみます\n\nひとまず `++dict-&gt;dv_refcount;` は必要なのはわかりました","ts":"1559139165.377600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"48a5323b-fa1d-4e31-9f33-fae2ffb8fdb4","type":"message","user":"UDDCM376D","text":"今直して、ビルド中…","ts":"1559139177.378000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9d127438-f7a1-4659-93a3-d072302c2328","type":"message","user":"UDDCM376D","text":"通るかな","ts":"1559139183.378200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6ea93473-e096-46da-84d0-7ed64cc63316","type":"message","user":"U03C6TEAZ","text":"```\nfunction X()\n  let a = {}\nendfunction\n```\n関数 X を呼び終わると a を格納してるメモリって必要ないので解放できますよね。a が出来た時に参照カウントを +1、関数を終了した際に -1 すれば a の参照カウントは 0 つまり解放してよい事になります。\n```\nfunction X()\n  let a = {}\n  return a\nendfunction\n```\nこの場合、return の際に内部的に +1 がされてて関数を抜けてもメモリを解放しない様にしてあるんです。これが参照カウント。","ts":"1559139357.381400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"49e77de0-e42b-4c5a-8c11-c76f10fb602e","type":"message","user":"U03C6TEAZ","text":"mark&amp;sweepは↑に書いた通り、循環参照が解決できないので他の方法を使って「もう必要ない」を判定しています。","ts":"1559139422.382200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"efda25cb-0979-4350-a609-b1a07708e96d","type":"message","user":"U06BRP8VD","text":"そもそもGCの代表的な実装方式、みたいな概念がないのでは?","ts":"1559139468.383400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"de5d7456-3ac5-4501-b8e1-dc9c64f5fd8a","type":"message","user":"U03C6TEAZ","text":"方法としては「全てのオブジェクトはルートから辿れる」という事から、全てのオブジェクトにフラグを持たせて\n1. 全てのフラグをクリアする\n2. 全てのオブジェクトを辿ってフラグをonにする\n3. フラグがonになっていない物は誰からも参照されてないので解放する","ts":"1559139500.384200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"211df546-0914-4ccc-8208-1141dcfc865e","type":"message","user":"U03C6TEAZ","text":"こうするのが mark&amp;sweep","ts":"1559139508.384700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c5284952-ee16-4f91-b475-5a9425dbf73b","type":"message","user":"U06BRP8VD","text":"# とかいってると「参照カウントをGCと呼んではいけない」オジサンが出てくるかもしれない","ts":"1559139523.385000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4228bd13-74c4-412f-8499-40b68564d6dc","type":"message","user":"U03C6TEAZ","text":"ですねw","ts":"1559139535.385300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"54e69816-2e89-4e76-b32d-24edf88e844f","type":"message","user":"U03C71D7H","text":"collect してないので GC ではない!!111 (?)","ts":"1559139563.386200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7b6a38b9-91dc-4e7f-aa9a-36ac046689bc","type":"message","user":"U03C6TEAZ","text":"続き) で、なぜ全部 mark&amp;sweep でやらないの？という話になるんですが、手順を見て貰うと分かる通り重たいんですね。つまり稀にしか実行できない。よってメモリが増え続ける可能性がある。","ts":"1559139594.386700","edited":{"user":"U03C6TEAZ","ts":"1559139614.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6ded745f-6c8f-4dfe-a572-708f8727a671","type":"message","user":"UDDCM376D","text":"丁寧な説明ありますございますm(_ _)m\n参照カウントについては理解しましたが、mark&amp;sweepはまだ漠然としているので、ちょっと調べます","ts":"1559139725.387800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bc45cc00-1f54-4a1f-86e9-b448989a61f3","type":"message","user":"U03C6TEAZ","text":"この辺は今すぐ覚える必要はないですね。","ts":"1559139776.388300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f455b1fa-40d7-4cba-846d-cec94673e188","type":"message","user":"U06BRP8VD","text":"ちなみにゴリラさんがメインで使ってる言語ってgoですか?","ts":"1559139800.389100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1b502298-d7b0-4d7c-bf37-99b3eda4ef40","type":"message","user":"UDDCM376D","text":"<https://github.com/skanehira/vim/commit/6f8caffe5964a4e7c52408f3bd108ae4b4a69054>\nいま実装直しましたが、やはり `call popup_getoptions` でSEGVになる…","ts":"1559139810.389300","attachments":[{"fallback":"GitHub: add popup_getoptions · skanehira/vim@6f8caff","id":1,"title":"add popup_getoptions · skanehira/vim@6f8caff","title_link":"https://github.com/skanehira/vim/commit/6f8caffe5964a4e7c52408f3bd108ae4b4a69054","text":"The official Vim repository. Contribute to skanehira/vim development by creating an account on GitHub.","thumb_url":"https://avatars0.githubusercontent.com/u/7888591?s=200&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":200,"thumb_height":200,"from_url":"https://github.com/skanehira/vim/commit/6f8caffe5964a4e7c52408f3bd108ae4b4a69054","original_url":"https://github.com/skanehira/vim/commit/6f8caffe5964a4e7c52408f3bd108ae4b4a69054"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d9cd9ece-f190-4ba0-9df0-012bdd1712c4","type":"message","user":"UDDCM376D","text":"メインはGoというより、Goをメインにしたいって感じでGo勉強していますね\nいまはJavaとActionScriptを書いてます","ts":"1559139842.390400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6b502ffa-12da-4812-88e9-4385654b57ff","type":"message","user":"U03C6TEAZ","text":"w_popup_timer が NULL だらかですね。","ts":"1559139845.390500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"adce68e0-11ec-4f56-a566-5c5a85a97b9a","type":"message","user":"UDDCM376D","text":"あれ、timerってまだ実装されていないんですか？","ts":"1559139863.391000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6d726d36-9294-4c11-9649-66479f50fe20","type":"message","user":"U03C6TEAZ","text":"いえ、指定されてない場合は `wp-&gt;w_popup_timer` は NULL です。","ts":"1559139886.391800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4c210c82-b0fc-4682-acb6-200155ab8c6d","type":"message","user":"UDDCM376D","text":"ヘルプを見ると`{not implemented yet}` なかったので","ts":"1559139894.392200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1542ecf3-7f64-4476-a983-8ae10e33beb1","type":"message","user":"UDDCM376D","text":"あー","ts":"1559139900.392600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"08dc903e-fbbd-45a6-9b2d-eb131f4bb696","type":"message","user":"UDDCM376D","text":"なるほど","ts":"1559139904.393100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b3482b31-24c0-4dde-b4b9-709562332c61","type":"message","user":"U03C6TEAZ","text":"```\nif (wp-&gt;w_popup_timer != NULL) {\n  dict_add_number(dict, \"time\", (long)wp-&gt;w_popup_timer-&gt;tr_interval);\n}\n```","ts":"1559139913.393500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0a51bd33-481a-46b7-bffd-f194107cd160","type":"message","user":"UDDCM376D","text":"NULLかを見ないといけないのか","ts":"1559139913.393600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1eba71d3-1682-4c34-8701-2618ffd38b8b","type":"message","user":"UDDCM376D","text":"ありがとうざいます","ts":"1559139926.393800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eda9d5bf-689f-4ed5-9a9b-9689f9e9f50c","type":"message","user":"U03C6TEAZ","text":":ok_hand:","ts":"1559139934.394000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e497b3ba-d7e4-49c3-9c79-8e43f507b794","type":"message","user":"UDDCM376D","text":"ちなみに、参照カウントの話ですが\n`++dict` はどういうときに使うのですか？\n動きは理解しましたが、使う時がわからない。。。。","ts":"1559140070.397200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"47cd3b44-1f73-4afa-946b-5fe2c55c9d0d","type":"message","user":"UBQ2H65JQ","text":"Cはほかの言語以上にNULLチャックしとかないと簡単にSEGVするので、とりあえず入れとけって程度がいい","ts":"1559140081.397400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a5d72bb9-987d-4450-93e9-6ae242d97643","type":"message","user":"UDDCM376D","text":"なるほど","ts":"1559140138.398500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"13985b1d-5de3-45b3-8d18-a30be46bc49c","type":"message","user":"UDDCM376D","text":"NULLチェック、こまめにですね","ts":"1559140143.398800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2ae9bafd-ee50-41f0-82c8-09c941b7392e","type":"message","user":"UDDCM376D","text":"`{'col': 0, 'zindex': 50, 'maxwidth': 0, 'line': 0, 'minwidth': 0, 'minheight': 0, 'maxheight': 0}`\n実行できた","ts":"1559140163.399400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"280a7186-bf5d-455a-b510-7fbc2dd6a017","type":"message","user":"UDDCM376D","text":"あとテスト追加したらPR出せる","ts":"1559140202.400300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3a39549a-7a7a-4e46-a70f-2b471f764506","type":"message","user":"UDDCM376D","text":"タイムオーバー…\n明日か…","ts":"1559140272.401200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8149224c-1a7d-41cb-8103-ad4c736c7314","type":"message","user":"U03C6TEAZ","text":"参照カウントの話をもう一度簡単に説明すると、誰かがそのオブジェクトを見ていれば +1 される、つまり誰も見なくなったら 0 です。この関数 popup_getoptions は戻り値として値を返すので +1 しておく必要があります。\n```\ncall popup_getoptions(x) \" これは 1、そのあと関数を抜けて 0\n```\n```\nlet a = popup_getoptions(x) \" これは 1、a に代入されて 2\n```","ts":"1559140278.401400","thread_ts":"1559140278.401400","edited":{"user":"U03C6TEAZ","ts":"1559140684.000000"},"reply_count":43,"replies":[{"user":"UG6DF6W87","ts":"1559143139.451000"},{"user":"U03C6TEAZ","ts":"1559143158.451500"},{"user":"UG6DF6W87","ts":"1559143174.451800"},{"user":"U03C6TEAZ","ts":"1559143182.452000"},{"user":"U03C71D7H","ts":"1559143287.452300"},{"user":"U03C6TEAZ","ts":"1559143386.452500"},{"user":"U03C71D7H","ts":"1559143510.453900"},{"user":"UG6DF6W87","ts":"1559143615.454200"},{"user":"UG6DF6W87","ts":"1559143637.454400"},{"user":"U03C6TEAZ","ts":"1559143751.454600"},{"user":"U03C6TEAZ","ts":"1559143763.454800"},{"user":"U03C6TEAZ","ts":"1559143781.455000"},{"user":"U03C6TEAZ","ts":"1559143795.455200"},{"user":"UDDCM376D","ts":"1559143865.456000"},{"user":"U03C6TEAZ","ts":"1559143945.457400"},{"user":"UDDCM376D","ts":"1559144028.459000"},{"user":"U03C6TEAZ","ts":"1559144097.459800"},{"user":"U03C6TEAZ","ts":"1559144163.460600"},{"user":"UDDCM376D","ts":"1559144206.461400"},{"user":"UDDCM376D","ts":"1559144222.461700"},{"user":"U03C6TEAZ","ts":"1559144230.461900"},{"user":"U03C6TEAZ","ts":"1559144266.462800"},{"user":"UDDCM376D","ts":"1559144288.463500"},{"user":"U03C6TEAZ","ts":"1559144296.463700"},{"user":"UDDCM376D","ts":"1559144344.464000"},{"user":"UDDCM376D","ts":"1559144361.464500"},{"user":"U03C6TEAZ","ts":"1559144417.465300"},{"user":"U03C71D7H","ts":"1559144425.465500"},{"user":"U03C6TEAZ","ts":"1559144436.465700"},{"user":"UDDCM376D","ts":"1559144463.466200"},{"user":"U03C6TEAZ","ts":"1559144471.466400"},{"user":"UDDCM376D","ts":"1559144482.466900"},{"user":"U03C6TEAZ","ts":"1559144511.467100"},{"user":"UDDCM376D","ts":"1559144524.467500"},{"user":"UDDCM376D","ts":"1559144551.468400"},{"user":"UDDCM376D","ts":"1559144554.468600"},{"user":"U03C6TEAZ","ts":"1559144570.469000"},{"user":"U03C6TEAZ","ts":"1559144594.469800"},{"user":"U03C6TEAZ","ts":"1559144610.470100"},{"user":"UDDCM376D","ts":"1559144727.471200"},{"user":"U03C6TEAZ","ts":"1559144736.471500"},{"user":"UDDCM376D","ts":"1559144742.471900"},{"user":"U03C71D7H","ts":"1559144853.473400"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c13f81ed-d224-47ea-9d78-ceb0a905dde1","type":"message","user":"U03C6TEAZ","text":"```\nlet a = \"foo\" \n```","ts":"1559140377.402300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e109f502-ff76-4549-a27e-409fb45ba7d0","type":"message","user":"U03C6TEAZ","text":"この瞬間に a の中身のオブジェクトの参照カウントが減って 1、その後スコープを抜けて 0","ts":"1559140402.403200","edited":{"user":"U03C6TEAZ","ts":"1559140654.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0106b17d-ef1b-4147-9fd5-13ededf77a41","type":"message","user":"U03C6TEAZ","text":"プログラミング言語ってこういう感じに作られてます。","ts":"1559140440.403600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5987F1CC-2461-4A15-BBDA-78515E6EF5E5","type":"message","user":"UDDCM376D","text":"&gt;この瞬間に a の中身のオブジェクトの参照カウントが減って 1、その後 gc で 0\n\n0になったらgc対象になりgcされるのではなく\ngcで0になるんですか？","ts":"1559140563.404900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2a2b5728-db1c-4c03-8657-df2db7dd4284","type":"message","user":"U03C6TEAZ","text":"変数のスコープによります。関数で作られたオブジェクトなら関数が終了する際に 0 になります。","ts":"1559140616.406500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0c606e21-1508-41ef-94ea-b36461733d64","type":"message","user":"U03C6TEAZ","text":"gc されて、はちょっと間違いを誘導するのでちょっと直しますね。","ts":"1559140637.407000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2160521F-F355-4DD2-BB78-105DB4C754E8","type":"message","user":"UDDCM376D","text":"参照数 = カウント数\nカウント数 = 0 = gcされる対象 = gc\nって理解ですが合ってますか？","ts":"1559140689.408300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e89f2500-d8c7-445a-b08d-d81affb97eca","type":"message","user":"U03C6TEAZ","text":"はい。","ts":"1559140696.408600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e66fc63c-9463-4404-a168-ad145cc398eb","type":"message","user":"U03C6TEAZ","text":"gc と呼んでしまったのは僕の間違いですね。","ts":"1559140719.410100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0baebd4c-3dc0-4af7-92d5-726059218755","type":"message","user":"U06BRP8VD","text":"# だいたいのやつは0になった瞬間に開放するので、0になる→開放する→GCされたことになる、ってのがより正確。","ts":"1559140733.410600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5A22EE8F-70C1-4080-A1DC-F49C554F1B8F","type":"message","user":"UDDCM376D","text":"↑の認識です","ts":"1559140745.411000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7cd0816c-f55d-4ccc-a42a-9104df832ad6","type":"message","user":"U03C71D7H","text":"「a に代入されて 2」1ではない? 一瞬だけ2になる?","ts":"1559140773.412000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8b33f278-ccd2-4597-9217-6e9c09502c61","type":"message","user":"U03C6TEAZ","text":"2 になって `let a = \"foo\"` みたいな再代入で 1 かな。","ts":"1559140814.413000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"67240A01-FB67-44D5-A179-E66429C55205","type":"message","user":"UDDCM376D","text":"```\nfunction X()\n  let a = {}\n  return a\nendfunction\n```\n\n↑の場合、aはカウント+1しないといけないんですよね？","ts":"1559140915.414100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7f20a83f-f998-45be-9674-8c9fa1879059","type":"message","user":"U03C6TEAZ","text":"`let a = {}` で 1、return で 2 かな。","ts":"1559140950.415100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"62E1224A-09EE-462C-B83C-84A647AFC28A","type":"message","user":"UDDCM376D","text":"あ","ts":"1559140957.415300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"AEB1407A-65BF-4DBB-BB12-228D370E0F6A","type":"message","user":"UDDCM376D","text":"そそ","ts":"1559140958.415400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"35ab865c-2803-47a6-ac9a-df32cc609056","type":"message","user":"U03C6TEAZ","text":"で関数を抜ける際に 1 に戻るか。","ts":"1559140971.416000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f567e71f-51f4-4f08-808b-b0ea8db961cb","type":"message","user":"U03C6TEAZ","text":"あ、↑の少し違うな。","ts":"1559140980.416200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1e511947-a69f-4b80-9a32-df2330e029b6","type":"message","user":"U03C6TEAZ","text":"いや、あってる。","ts":"1559140989.416600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"025a0483-054b-41fe-b756-6fc286632427","type":"message","user":"U03C6TEAZ","text":"まぁ参照カウントはまだデバッグが楽ですよ。","ts":"1559141027.417700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"17fd43f1-b28f-4da3-8fbf-10f9ecb770de","type":"message","user":"U03C6TEAZ","text":"落ちたらつまりは +1 が足らないって話です。","ts":"1559141040.418200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5CE0C4CF-3BC2-42E5-ABFE-E16678EA101D","type":"message","user":"UDDCM376D","text":"returnで+1してるのがよく分からなくて\n戻り値を変数に代入しないと参照増えないんですよね？\n増えないのに+1するのがよく分からないです","ts":"1559141093.419500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0f8eef12-3a99-4f10-b48f-0273af7cc5af","type":"message","user":"U03C6TEAZ","text":"消えて欲しくないから意図的に +1 してるんです。","ts":"1559141139.419900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"730903AB-80B0-46D8-93AB-F6F468AB4C7C","type":"message","user":"UDDCM376D","text":"そしたら、どのタイミングで-1されてgcされるんですか？","ts":"1559141200.421500","edited":{"user":"UDDCM376D","ts":"1559141243.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"E50B1783-53C8-4F9D-9375-79DF10C5DE1B","type":"message","user":"UDDCM376D","text":"代入しない時は","ts":"1559141216.422100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"871BBDD1-4683-42B7-8BF6-F107C00CB7F5","type":"message","user":"UDDCM376D","text":"あー、","ts":"1559141348.423600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1f916906-7768-41d3-9787-937270fd4b95","type":"message","user":"UBQ2H65JQ","text":"`{}` で自分自身で保持しているから+1\n`let a =` でaに参照をされるから+1\n`let a = \"...\"` で再代入されると-1\nこんな感じかなぁ","ts":"1559141359.424100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"caad2dfa-ac69-4525-844e-e10d8924f200","type":"message","user":"U03C6TEAZ","text":"はい。","ts":"1559141440.425500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"AF6F5F80-D634-41E5-802E-7D362B956184","type":"message","user":"UDDCM376D","text":"あー、popup_getoptionsの値が消えて欲しくないって作りになってるってことか","ts":"1559141440.425600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c29876bc-61dc-4463-9d45-c918086a6e8c","type":"message","user":"U03C6TEAZ","text":"はい。","ts":"1559141447.425900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bd29867d-5926-4883-8b57-464ab075efb7","type":"message","user":"U03C6TEAZ","text":"もう少し細かい話をすると、プログラミング言語のスコープって辞書みたいな物なんです。","ts":"1559141469.426400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2c383022-3896-4815-b57a-74f2195eaf95","type":"message","user":"U03C6TEAZ","text":"Vim はまだ分かりやすくて `l:` が関数スコープですよね。関数を抜ける際にその `l:` をクリアするんです。クリアする際に `l:obj` が {} だった場合はそのまま消さずに参照カウントを減らしてみる、0 だったらメモリ解放、1 以上だったら `s:` 等から参照されてるか、return されてるから解放しない、という動きです。(お掃除処理)","ts":"1559141555.428200","edited":{"user":"U03C6TEAZ","ts":"1559141799.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3CCF6B6B-733B-4248-B49A-5E7677FAAFD7","type":"message","user":"UDDCM376D","text":"returnされてる場合は基本解放しない理由がよくわからないんですが、vimはそういうお作法ですか？","ts":"1559141703.429400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2E8B7339-6107-4B8D-9132-59C8B868A347","type":"message","user":"UDDCM376D","text":"代入してる可能性があるから？","ts":"1559141718.430000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"29a55546-394d-4d9d-9d46-31d3cebfad76","type":"message","user":"U03C6TEAZ","text":"いえ、参照カウント使ってる言語ならどの言語もです。","ts":"1559141721.430200","edited":{"user":"U03C6TEAZ","ts":"1559141748.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"24AC4666-2B98-419B-BAE5-4F495A4C8A0B","type":"message","user":"UDDCM376D","text":"代入してる可能性があるから解放しない\n代入してない場合カウント1のオブジェクトはどのタイミングで-1され、gcされるんですか？","ts":"1559141805.432700","edited":{"user":"UDDCM376D","ts":"1559141819.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1dba41fe-8e16-4948-aba1-6c3240ed7857","type":"message","user":"U03C6TEAZ","text":"今↑にお掃除処理と書いたんですが、このお掃除処理の際に return する予定だったものが解放されたら困りますよね？","ts":"1559141831.433400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1ff14ab2-3165-4c1f-9a9f-d169bb9481be","type":"message","user":"U03C6TEAZ","text":"なので return で意図的に増やすんです。","ts":"1559141849.433700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9c6d3180-3a6e-4562-8c0d-bc005ad97eba","type":"message","user":"U03C6TEAZ","text":"return って「これを返すぞ」という予約であって、そのあとお掃除が実行される事になります。","ts":"1559141914.434300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"44fca5bd-ff33-4dfd-9c43-b4a9c7800295","type":"message","user":"U03C6TEAZ","text":"予約つまり「消すなよ」という意味で +1","ts":"1559141935.434700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
