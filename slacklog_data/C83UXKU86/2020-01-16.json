[{"client_msg_id":"524fc049-e00b-48d9-923e-c89d327949b0","type":"message","user":"U7H4TJEG0","text":"reduce作ってたらmapのバグ見つけたなう","ts":"1579102097.103200","team":"T03C4RC8V","reactions":[{"name":"goodpoem","count":3,"users":["U0M7GCBPD","UAZ33BKV2","U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ya8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"870cf44c-7b0a-4dac-8be4-57ba9e2c136a","type":"message","user":"U7H4TJEG0","text":"filterもか","ts":"1579102117.103500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5=K5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"USA7ECX51","text":"<@USA7ECX51> has joined the channel","ts":"1579136122.104800","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"010dcc5b-4721-49e3-9406-2c2ba3c147bc","type":"message","user":"U7H4TJEG0","text":"list.c, ListとBlobと似たようなコードが並んでいてつらい…","ts":"1579137741.105500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lp5wF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e0366af2-2310-403a-b680-5fbd5f54a8af","type":"message","user":"U7H4TJEG0","text":"mapのバグは8.2.0121で直しました (対象がblobなのでほとんどの人には関係ないかと)","ts":"1579137817.106200","thread_ts":"1579137817.106200","reply_count":1,"replies":[{"user":"U03C6TEAZ","ts":"1579140171.109700"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DHu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6deb905e-3a17-491e-ac23-df6cb618f101","type":"message","user":"UAZ33BKV2","text":"よかった、使ってなかったので(?)、影響はないや &gt; Blobの map/filter","ts":"1579137886.106700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"f4lz6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d23bf9b2-7293-4837-8f5b-27766632017e","type":"message","user":"UAZ33BKV2","text":"活用したコードが必要そうなのに、実装をさぼってるだけ...な気がするけど","ts":"1579137906.107100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"21Lm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e0eec0b9-8c9b-4f3a-9112-bab4e2aa712a","type":"message","user":"U7H4TJEG0","text":"blobまわり叩いたらまだなんか出てきそうですね","ts":"1579137981.107500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"K+n"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b8054dfb-4e1c-4924-8361-f5f433228f1a","type":"message","user":"U7H4TJEG0","text":"(私も使ったことなくて今回はたまたまコードを読んでいて見つけたのだけど)","ts":"1579138004.108300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gT7T4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6e568e4a-9f87-4d2a-a660-6ab3b5509e55","type":"message","user":"UAZ33BKV2","text":"使う側として、正常に動く方向で実装しようとして、無意識回避してるのもいろいろあるかもしれませんね\nただ、今のところ、愚直に機能使って実装して、テストPassする結果だけなので、当座それはしてない、はず...","ts":"1579138053.109200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0357"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1e6c138a-4f7e-4978-93d3-70e66097cb01","type":"message","user":"UAZ33BKV2","text":"前にこれにあたったくらいか\n<https://github.com/vim-jp/issues/issues/1285>","ts":"1579138278.109500","attachments":[{"fallback":"GitHub: Bug: When blob is coping, flaky failed(probably lock flag uninitialized). · Issue #1285 · vim-jp/issues","id":1,"title":"Bug: When blob is coping, flaky failed(probably lock flag uninitialized). · Issue #1285 · vim-jp/issues","title_link":"https://github.com/vim-jp/issues/issues/1285","text":"不具合の内容 blobのコピーを伴なう動作を行なうと、時々(Flakyに)失敗する 現象・ログ see <https://vim-jp.slack.com/archives/C03C4RC9F/p1562811297091100> <https://travis-ci.com/tsuyoshicho/vital-codec/builds/118704242> Tsuyoshi CHO [11:14]...","thumb_url":"https://avatars2.githubusercontent.com/u/1051958?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/vim-jp/issues/issues/1285","original_url":"https://github.com/vim-jp/issues/issues/1285"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YePXF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"51338042-2fce-4b10-abcf-80210469bd08","type":"message","user":"U03C6TEAZ","text":"あざます。(僕のバグです)","ts":"1579140171.109700","thread_ts":"1579137817.106200","parent_user_id":"U7H4TJEG0","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ruC"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e2949193-d731-4b04-aea5-b31ae471bd1c","type":"message","user":"U7H4TJEG0","text":"blobのfilter高速化できると思ってコードを書いたが、むしろ遅くなることもあったのでコードを捨てた","ts":"1579149520.111100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vatiw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dd5797cc-a1bf-496c-a613-fffd4fb59b9e","type":"message","user":"U7H4TJEG0","text":"filterの引数が `'0'` だと10倍くらい速くなるけど、 `'v:val &lt; 0x0a'` で3割高速化、 `'v:val % 10 &lt; 3'` みたいなケースだとむしろ3倍くらい遅くなる","ts":"1579149823.112800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dL7Q"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1563ce0a-56ee-4fa2-8c08-107ad6bbd375","type":"message","user":"U7H4TJEG0","ts":"1579149868.112900","files":[{"id":"FSQ6JBPLL","created":1579149868,"timestamp":1579149868,"name":"list_blob.diff","title":"list_blob.diff","mimetype":"text/plain","image_exif_rotation":0,"filetype":"diff","pretty_type":"Diff","user":"U7H4TJEG0","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":1750,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FSQ6JBPLL/list_blob.diff","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FSQ6JBPLL/download/list_blob.diff","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U7H4TJEG0/FSQ6JBPLL/list_blob.diff","permalink_public":"https://slack-files.com/T03C4RC8V-FSQ6JBPLL-af8a6ec867","edit_link":"https://vim-jp.slack.com/files/U7H4TJEG0/FSQ6JBPLL/list_blob.diff/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"b7bdde3c-9478-46cc-b1c5-c60ea6c89ba7","type":"message","user":"U06BRP8VD","text":"あーもしここなんとかしたいなら、ビットマップでfilter結果を管理して、最後にまとめてmemmoveするのが正義かも。","ts":"1579150859.113800","edited":{"user":"U06BRP8VD","ts":"1579150875.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"z4O2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"35bc2bc0-7e4f-495d-bc09-01a390256b90","type":"message","user":"U03C6TEAZ","text":"同じ分のメモリがいるので無駄になっちゃいますけどね。","ts":"1579150900.114300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ajtHO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e48352a8-77cb-45f5-9f26-d3b4333e4d22","type":"message","user":"U06BRP8VD","text":"1/8かな","ts":"1579150908.114500","thread_ts":"1579150908.114500","reply_count":1,"replies":[{"user":"U06BRP8VD","ts":"1579151001.116400"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4QVfX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"170332a0-5897-43f5-80cb-4f5fcb4fed15","type":"message","user":"U03C6TEAZ","text":"引数が eval なのか静的なのか分かれば if で分岐するってだけでも簡単そうだけど。","ts":"1579150974.115700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FEX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0ba7aeaf-c807-4ca1-bd8a-65d612fd05e0","type":"message","user":"U03C6TEAZ","text":"静的なら同じ値がある間はすっとばせばいい。","ts":"1579151000.116300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+yB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0788fabf-82ca-4373-8059-1e0f06a6db67","type":"message","user":"U06BRP8VD","text":"メモリ効率気にするならヒットするのがsparseかdenseかでビットマップが動的に切り替わるとかだともっと良いだろうけど…","ts":"1579151001.116400","thread_ts":"1579150908.114500","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FkLd"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c7492b86-84dd-447a-b75a-32d81fe6000d","type":"message","user":"U7H4TJEG0","text":"実際に `'0'` で使う人はいないだろうからこれは元のコードが遅くなるであろうケースですね (こういうケースだけで最適化しても意味なさそう","ts":"1579151572.117500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZEF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"88c83e89-0cdd-43b4-ae47-369a06547a04","type":"message","user":"U7H4TJEG0","text":"実際にやってみたら元のコードでもそんなに遅くないのではとなったのでした (せいぜい500kくらいのblobでしか測ってませんが)","ts":"1579151637.118400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZRq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"349e0b96-3070-4e1b-94b1-cfc62fb1f064","type":"message","user":"UAZ33BKV2","text":"ちゃんとベンチするの大事","ts":"1579151738.118600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"clBgg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
