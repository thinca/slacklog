[{"client_msg_id":"19a3d493-67fb-4fff-bfa1-bb7135bbe8b4","type":"message","user":"U6XP9LZ6V","text":"resolve() のコード、GetVolumeInformationByHandleW() の結果を直接 GetVolumePathNamesForVolumeNameW() に渡せないのかな？ GetVolumeInformationW() は必要？","ts":"1549275792.134700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4bf23e38-376f-4dde-b6aa-a28d6a5826c3","type":"message","user":"U03C6TEAZ","text":"はい。 GetVolumeInformationByHandleW() は guid 付きのが帰るんですよね。","ts":"1549278091.136100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"42326174-eedb-415a-b0f2-796bf21278ba","type":"message","user":"U03C6TEAZ","text":"\\\\volume\\{xxxxxx} みたいのやつ。","ts":"1549278140.136800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"35e29f6a-0002-4c19-929b-25673c2d8f9d","type":"message","user":"U03C6TEAZ","text":"一つのポイントに対して複数のリンク先があるのでそうなってるっぽいです。","ts":"1549278193.137800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e5820466-33b1-4d16-813c-b92f11282e4b","type":"message","user":"U6XP9LZ6V","text":"それは面倒…","ts":"1549278442.138300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"674f371a-03e8-47b7-898c-d1d1f8857099","type":"message","user":"U03C6TEAZ","text":"そもそも GetPath... がハングせずにいてくれたり GetFile... がドライブ付きで返してくれていればこんなことには。。。","ts":"1549278631.140400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3f4dc749-6096-4324-ac82-499494f7fa08","type":"message","user":"U6XP9LZ6V","text":"<http://espresso3389.hatenablog.com/entry/20091006/1254765015>\nこれ見ると、Find{First,Next}VolumeもGUID付きを返してて、そのままGetVolumePathNamesForVolumeName に渡してるような？","ts":"1549278860.142000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eac7e150-b4b4-44d6-a820-91cd2bf34a57","type":"message","user":"U03C6TEAZ","text":"あ、違う。","ts":"1549279063.142300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"95941081-aa92-4fbf-b31e-ffa16fd9b797","type":"message","user":"U03C6TEAZ","text":"GetVolume...ByHandle はシリアル番号が帰ってきて、そのシリアル番号と一致するドライブを Find... で得てる、という感じ。","ts":"1549279158.144900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e9d41de9-22c8-419c-a031-5a315277ee7d","type":"message","user":"U03C6TEAZ","text":"PC 無いので調べられないすが。","ts":"1549279195.145500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a7c235d9-4a21-4d15-afe4-59ac9df27157","type":"message","user":"U6XP9LZ6V","text":"ByHanbleの第2引数でボリューム名を取得できそうですが。","ts":"1549279337.146500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7e621a26-b349-4dc4-bc2f-a7bdc40493ee","type":"message","user":"U03C6TEAZ","text":"おっ。帰ったら見ます。","ts":"1549280033.147100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dfe4b0a0-c082-43a8-8b63-104f6c8fb534","type":"message","user":"U6XP9LZ6V","text":"残念、GetVolumeInformationByHandleW はただのボリュームラベルを返しているみたいでしたｗ\nで、GetVolumeInformationByHandleW も Vista からなので、XPでも動くように動的ロードする必要がありますね。","ts":"1549281435.149000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0612c39e-ff71-4081-9df3-76dbf7dceae3","type":"message","user":"U6XP9LZ6V","text":"CreateFile() の `GENERIC_READ` は `0` にした方がよさそう。 `C:\\Users\\Default User` みたいに読み込みが禁止されたジャンクションのリンク先が開けないので。ただ、これを 0 にしても `C:\\Documents and Settings` のリンク先が開けなかった。なぜだ","ts":"1549283680.151900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2e5021aa-2d68-4d7e-be2f-5a0e4a6cb7ef","type":"message","user":"U6XP9LZ6V","text":"DeviceIoControl() に FSCTL_GET_REPARSE_POINT を指定してリパースポイントの情報をとる方法だと、 `C:\\Documents and Settings` のリンク先も取得できているんだけどなー。","ts":"1549284112.153300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a8a00944-ea19-4554-9ee0-633326324d34","type":"message","user":"U03C6TEAZ","text":"あとで onedrive フォルダも試そうかな。","ts":"1549285656.154200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7db7a4d9-e506-4274-a701-30731638ebc2","type":"message","user":"U03C6TEAZ","text":"CreateFile になんかフラグがいるのかな。","ts":"1549285708.155000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4ecdeb2a-1f2b-4f3b-ba28-3c8b3586d25b","type":"message","user":"U03C6TEAZ","text":"FILE_FLAG_OPEN_REPARSE_POINT ですね。","ts":"1549287423.155300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3e2b0f51-68d7-4eb6-bd5f-16ecacf37d3a","type":"message","user":"U03C6TEAZ","text":"あ、違う。FILE_FLAG_OPEN_REPARSE_POINT はリパースポイントのままのパスで開くためのオプションだ。","ts":"1549287733.155900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"713ced4e-2cea-403a-b6e1-a2a10f012bf9","type":"message","user":"U6XP9LZ6V","text":"DeviceIoControl() を使う方法だとリパースポイント自身のハンドルがいるのでそのフラグが要りますが、今の方法だと不要です。","ts":"1549287897.157600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dacb3391-8108-4b7b-837a-abf75514f5dd","type":"message","user":"U03C6TEAZ","text":"Windows 10 って `C:\\Documents and Settings\\` って開けないのか。","ts":"1549288019.158100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"453532c0-2a25-4117-a402-78d403c1c39b","type":"message","user":"U03C6TEAZ","text":"なので GENERIC_READ を 0 にしても効果の違いが分からない。","ts":"1549288153.158500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d8720528-5b75-480a-958c-1d66e54703e9","type":"message","user":"U03C6TEAZ","text":"あ、いけた。","ts":"1549288197.158700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b05adb35-8e0e-432f-bf15-715570b15a1e","type":"message","user":"U03C6TEAZ","text":"これで行けるかな。","ts":"1549288249.158900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"305075b5-a19a-4e56-af04-afeec5748073","type":"message","user":"U6XP9LZ6V","text":"`C:\\Documents and Settings` と `C:\\Users\\Default User` はファイルのプロパティを開いてもリンク先が表示されない。cmd.exe で dir なら表示されるのに。","ts":"1549288616.160800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ba84aeae-86c2-4e52-817c-732fe7f2ca20","type":"message","user":"U03C6TEAZ","text":"最新のコミットでどちらも開ける事を確認しました。","ts":"1549288773.161400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"878608d7-dc3c-4f0d-9496-a49ef260f764","type":"message","user":"U03C6TEAZ","text":"注意点としては `C:\\Documents and Settings\\` の様に後ろに `\\` を付けない事。","ts":"1549288796.161900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ed806694-ec1e-4b87-85da-458ca03365c6","type":"message","user":"U03C6TEAZ","text":"んー、これはこれでうまく行ってるのだけどプラグインとかがちゃんと動いてないかも。","ts":"1549288948.162600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d6a3fc16-f992-419a-82c9-1c834b165b1f","type":"message","user":"U03C6TEAZ","text":"dirvish っていうプラグイン使ってるんですが `:e C:\\` すると一覧が表示されて `\\Documents and Settings\\` 上で ENTER すると vim 自身は `\\Users` だと認識してるけど dirvish は後ろに `\\` が付いてないからファイルだと思ってる。","ts":"1549289034.164300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7adb5de6-ace7-4e1c-a5ea-04e53ccbfc77","type":"message","user":"U6XP9LZ6V","text":"あっー、自分のところで `C:\\Documents and Settings` がうまくいかなかったの、単にtypoしてたからだったーｗ\nシェアフラグは立ってても 0 でもどちらでもよさげ。","ts":"1549289452.166700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"936807f6-d7b7-41b1-88f0-7e752e10e132","type":"message","user":"U03C6TEAZ","text":"付けていいですか？","ts":"1549289465.166900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7fab881a-4d5e-49a5-a2ed-c86bd53579f3","type":"message","user":"U03C6TEAZ","text":"dirvish どこでおかしくなるんや。","ts":"1549289537.167300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"54632e10-74f8-4e5c-bb9e-14af0382eb7e","type":"message","user":"U03C6TEAZ","text":"いや、 0 じゃないと駄目っぽい。","ts":"1549289650.167500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b11a0ca4-ca55-42c4-a589-fc4738a44600","type":"message","user":"U6XP9LZ6V","text":"`&amp;&amp;` じゃなくて `||` な気が…とあっちにコメントしときました。","ts":"1549289840.168500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d17266e6-c742-4e49-9119-467928bc8d00","type":"message","user":"U03C6TEAZ","text":"```\ndiff --git a/autoload/dirvish.vim b/autoload/dirvish.vim\nindex 5c77dd1..5c416e4 100644\n--- a/autoload/dirvish.vim\n+++ b/autoload/dirvish.vim\n@@ -18,7 +18,7 @@ function! s:sl(path) abort\n endfunction\n \n function! s:normalize_dir(dir, silent) abort\n-  let dir = s:sl(a:dir)\n+  let dir = resolve(s:sl(a:dir))\n   if !isdirectory(dir)\n     \" Fallback for cygwin/MSYS paths lacking a drive letter.\n     let dir = empty($SYSTEMDRIVE) ? dir : '/'.tolower($SYSTEMDRIVE[0]).(dir)\n```\ndirvish はなおった。","ts":"1549290048.168900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1f72db4b-b2c0-400f-adae-5f9cbb8e474c","type":"message","user":"U03C6TEAZ","text":"バグという程ではないんですが","ts":"1549290936.169100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"67b7813a-e85e-4ab3-b608-06bcdcfded0c","type":"message","user":"U03C6TEAZ","text":"UNIX で `ln -s ~/b ~/a` してる状態で `:file ~/b` すると `b` のままなんですが、Windows だと `a` になる。","ts":"1549290983.170200","thread_ts":"1549290983.170200","reply_count":3,"replies":[{"user":"U6XP9LZ6V","ts":"1549325265.173300"},{"user":"U03C6TEAZ","ts":"1549327684.174100"},{"user":"U03C6TEAZ","ts":"1549327699.174300"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"90aa346b-b688-40ab-9ac6-59a7449c066e","type":"message","user":"U03C6TEAZ","text":"なんか色々呼んでるからなぁ。Windows","ts":"1549291015.170600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5e1c0fa8-75d0-48f7-b2d3-8572a81a594a","type":"message","user":"U03C6TEAZ","text":"vim/vim の PR で出て来る coveralls のスコア全く分からない。","ts":"1549255780.133300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
