[{"type":"message","user":"U6XP9LZ6V","text":"8.0.1369で遅くなる件、カーソルをGDIで描くように戻すオプションでも用意した方がいいのだろうか。","ts":"1513090822.000138","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"個人メールで、directxで文字が何も出ないという質問が来て、確認したらenc=utf-8じゃないときに字が出なくなっていることが判明。8.0.1343以降。","ts":"1513136850.000123","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"enc=utf-8じゃないときの動作確認、完璧に忘れてたｗ","ts":"1513136919.000132","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"www","ts":"1513137260.000046","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"簡単に直せる気がしないのでやる気も起きない。","ts":"1513137560.000088","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"あれ? いままでだと 有効化されなかったような…","ts":"1513138096.000183","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"あ、IS_ENABLE_DIRECTX() で utf-8 かどうかもチェックするのが簡単か。","ts":"1513139395.000126","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"カラー絵文字の対応前は、draw_string() で字を書くごとにHDCに書き戻していたので、その中だけでDirectXを使う使わないを切り替えられたが、対応後はその部分だけでの判定ではダメで、他の部分も同調して切り替えないといけない。","ts":"1513144585.000029","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"だとすればencが設定されるタイミングをフックすればよいのかな?","ts":"1513157491.000584","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"上に書いたように、マクロをちょっと変えるだけでよさそう。","ts":"1513158372.000167","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"毎回文字列比較はオーバーヘッドでかいのでは?","ts":"1513158695.000402","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"enc_utf8 をみるだけか","ts":"1513158717.000273","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"です。","ts":"1513158858.000197","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"そういえば、DirectXが本当に有効になっているか、簡単に知る方法がほしいなと思ったり。","ts":"1513160954.000088","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"うーん…","ts":"1513163220.000145","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"`v:xxx` に値を設定します? それとも描画結果に細工する?","ts":"1513163254.000238","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"あとは `has()` に細工","ts":"1513163277.000031","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"どちらかというと、ユーザーがdirectxを有効にしたつもりなのに有効になってなければ気づけるようにしたいなと。","ts":"1513171019.000419","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"vim-jp/vim の gdi-cursor ブランチに、`set rop=type:directx,gdicursor:1` としたら、8.0.1343 と同じように GDI でカーソルや下線等を描く変更を入れてみた。これで例の人の動作速度が元に戻るようなら、ワークアラウンドとして本体に入れてもらうのもありかな…？ あまり気は進まないが、今のところ解決できる見込みも立たないし。","ts":"1513171751.000227","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"vim-jp/vim の 'fix-directx-issues' ブランチに細かい修正を3つほど入れてみた。これだけ先にPR出しちゃおうかな。","ts":"1513174317.000026","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"投げた。 <https://github.com/vim/vim/pull/2440>","ts":"1513175450.000590","attachments":[{"fallback":"GitHub: Fix directx issues by k-takata · Pull Request #2440 · vim/vim","id":1,"title":"Fix directx issues by k-takata · Pull Request #2440 · vim/vim","title_link":"https://github.com/vim/vim/pull/2440","text":"This PR fixes the following issues in the latest directx renderer: Make scroll slightly faster when scrlines:1. Fix y-position of displayed text. I hope that this fixes the issue reported at he...","thumb_url":"https://avatars0.githubusercontent.com/u/840186?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/vim/vim/pull/2440"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
