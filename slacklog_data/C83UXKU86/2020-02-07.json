[{"client_msg_id":"7dc5a0a7-6496-4cc2-9297-d386d9632742","type":"message","user":"U6XP9LZ6V","text":"アンダースコアが2個連続する名前って予約されてませんでしたっけ","ts":"1581001244.438400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VuPO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a5f2f9c5-092f-4cec-8e3a-e19177125572","type":"message","user":"U03C6TEAZ","text":"おうふ。","ts":"1581001305.438700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"o1a"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1f31431e-752c-411a-871d-9e3636e6edf5","type":"message","user":"U6XP9LZ6V","text":"あと、static関数にしておいた方がいいかも","ts":"1581001517.439500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qg4B"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"962e35d3-a1de-4c8b-86dc-cd830df7c2fb","type":"message","user":"U03C6TEAZ","text":"あー、やりたかったの思い出した。gorgonia の翻訳だった。","ts":"1581001583.440400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Z4bP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0638de77-bc7e-4d7b-97e9-9586e665dd26","type":"message","user":"U6XP9LZ6V","text":"readdir、似た処理だけど微妙に違っていて、簡単にはマージできそうになかったので完全に分けちゃいました。","ts":"1581001709.441800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uyAL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4a7c828d-75bf-49bf-9715-c2229508308e","type":"message","user":"U6XP9LZ6V","text":"f_rand() の static を取っているのはなぜでしょう？","ts":"1581002302.442600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"shy96"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6447ff14-8abe-4c08-9c38-200ee8348797","type":"message","user":"U03C6TEAZ","text":"残骸が...","ts":"1581002336.442800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"y7qV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"84ABA9C7-8245-4D85-9B95-09AC5D82D766","type":"message","user":"UDDCM376D","text":"<https://github.com/vim/vim/commit/170fcfcf250954d76fca86e3fed088ddfdb49383|https://github.com/vim/vim/commit/170fcfcf250954d76fca86e3fed088ddfdb49383>","ts":"1581025677.443000","attachments":[{"fallback":"GitHub: patch 8.2.0222: Vim9: optional function arguments don't work yet · vim/vim@170fcfc","id":1,"title":"patch 8.2.0222: Vim9: optional function arguments don't work yet · vim/vim@170fcfc","title_link":"https://github.com/vim/vim/commit/170fcfcf250954d76fca86e3fed088ddfdb49383","text":"Problem: Vim9: optional function arguments don't work yet. Solution: Implement optional function arguments.","thumb_url":"https://avatars1.githubusercontent.com/u/8530623?s=200&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":200,"thumb_height":200,"from_url":"https://github.com/vim/vim/commit/170fcfcf250954d76fca86e3fed088ddfdb49383","original_url":"https://github.com/vim/vim/commit/170fcfcf250954d76fca86e3fed088ddfdb49383"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gCWR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1ABADCC7-D964-4B51-967A-BAC175C5FA66","type":"message","user":"UDDCM376D","text":"引数の初期値設定できるようになった","ts":"1581025765.443800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sEEPX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"884a2bfa-de90-4110-911c-409b3c36c8b7","type":"message","user":"U7986PPFH","text":"<@U03C6TEAZ> <https://github.com/vim/vim/pull/5588>\n`f_rand` で、`argvars[0].v_type == VAR_UNKNOWN` の場合に list を作る必要ないのでは？","ts":"1581065088.445700","attachments":[{"fallback":"GitHub: Fix rand/srand by mattn · Pull Request #5588 · vim/vim","id":1,"title":"Fix rand/srand by mattn · Pull Request #5588 · vim/vim","title_link":"https://github.com/vim/vim/pull/5588","text":"Fixes #5587","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/pull/5588","original_url":"https://github.com/vim/vim/pull/5588"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"M00Ir"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e0d47e96-33ff-41ba-adf7-58c749cf450b","type":"message","user":"U7986PPFH","text":"あと `init_srand` の `dev_urandom_state` の初期値は `NOTDONE` か、OK/FAILやめて自前で状態定義した方がいいと思います","ts":"1581065217.447300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xW3ba"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a46e0282-c8c0-4091-9700-c0a2e034eafc","type":"message","user":"U03C6TEAZ","text":"LIST の所に全部移動しますか。","ts":"1581065270.447900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"t44"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"60bef3a7-76ea-48bd-8f0a-0dbb3fc6b151","type":"message","user":"U7986PPFH","text":"そうですね","ts":"1581065370.448100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JDvk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7c3c69ab-2d12-4e0e-b7ee-179b94dc2442","type":"message","user":"U03C6TEAZ","text":"/dev/random を何回か読んで成功するケースなんてありますかね。","ts":"1581065497.448500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"p94"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a7bcc6cb-0c00-40b7-81cc-2d66c0f044ec","type":"message","user":"UAZ33BKV2","text":"Zenの某不具合みたいなのはあるかもしれませんが、読むの自体が失敗はそうそうなさそう..? まあブートタイム時じゃないので、これ踏むことはないんですが\n<https://cpplover.blogspot.com/2019/07/amdzen-2rdrand-1gnulinux.html>","ts":"1581065590.449500","attachments":[{"fallback":"AMDのZen 2でRDRANDが-1を返すので最近のGNU/Linuxがブートできない問題","id":1,"title":"AMDのZen 2でRDRANDが-1を返すので最近のGNU/Linuxがブートできない問題","title_link":"https://cpplover.blogspot.com/2019/07/amdzen-2rdrand-1gnulinux.html","text":"AMDのZen 2アーキテクチャの新製品が発売されて沸き立っているが悲しいお知らせがある。最近のGNU/Linuxディストロはブートしない。例えばUbuntu 19.04はブートしない。 理由は、ハードウェア乱数を返す命令、RDRANDに不具合があり、常に-1を返すのだ...","blocks":null,"service_name":"cpplover.blogspot.com","service_icon":"https://cpplover.blogspot.com/favicon.ico","from_url":"https://cpplover.blogspot.com/2019/07/amdzen-2rdrand-1gnulinux.html","original_url":"https://cpplover.blogspot.com/2019/07/amdzen-2rdrand-1gnulinux.html"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ub6A"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7222839c-1249-4c1e-ac40-de1b1591a18a","type":"message","user":"U03C6TEAZ","text":"おまけにこれ `/dev/urandom` Windows も読んでるやん？","ts":"1581065719.450000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yziEn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2218fbef-6d3d-43cd-8548-811e32c34dda","type":"message","user":"U03C6TEAZ","text":"`C:\\dev\\urandom` というファイルに 0x00 書いておいたった。","ts":"1581065771.450500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/nY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d85240e7-5b3f-4d44-b182-6b0b360967bb","type":"message","user":"UAZ33BKV2","text":"おうふ","ts":"1581065788.450700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8wR+w"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fe37284e-32f3-4752-9070-8efc70a93375","type":"message","user":"U7986PPFH","text":"Unixでも `/dev/urandom`  がないシステムはありうる？","ts":"1581065899.451600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AwD62"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6e4429d9-ced3-4cf4-a671-5f322c4ff391","type":"message","user":"U03C6TEAZ","text":"あー","ts":"1581065910.451800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Gkp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0192f5c2-b589-45fc-9a54-c611a0963ea3","type":"message","user":"U6XP9LZ6V","text":"Windowsで `/dev/urandom` を読む必要はない気がしますね。`#ifndef MSWIN` か何かで囲っておいた方がよさそう","ts":"1581066115.453300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"roNma"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e3163c53-f63f-4c70-b719-7f08b4e47901","type":"message","user":"U03C6TEAZ","text":"コンパクトになった。","ts":"1581066827.453500","team":"T03C4RC8V","reactions":[{"name":"tada","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/3S"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"de25788c-0963-4a88-b608-1ed48268b3dc","type":"message","user":"U7986PPFH","text":"```\t    gx = SPLITMIX32(gx, gz);\n \t    gy = SPLITMIX32(gx, gz);\n \t    gz = SPLITMIX32(gx, gz);\n \t    gw = SPLITMIX32(gx, gz);```\nこれだとgxとgzが動いていってしまうのでまずくないですか","ts":"1581067282.455300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CBG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b588615b-1e1f-4b87-945d-d39ac2bddb15","type":"message","user":"UAZ33BKV2","text":"vimの乱数はちゃんとテストあるので、かけてみて確認できそう","ts":"1581067363.456800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ox/bH"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"67fb491b-5302-4052-8a27-7ae6f5c7ff5f","type":"message","user":"UAZ33BKV2","text":"vitalに移植したとき転用させてもらった","ts":"1581067424.458100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RZKj"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ec90aed1-d7f0-4c25-b623-2f7aab55fa07","type":"message","user":"U7986PPFH","text":"ランダムな初期シードなので確認できないと思います","ts":"1581067576.458900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cGk9K"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"baec75d1-d68d-4e3d-820f-ded5bae131d3","type":"message","user":"U03C6TEAZ","text":"なおしed","ts":"1581067707.459300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XPSC"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"afa2f92a-9219-4354-a727-dd80daa7ab2b","type":"message","user":"U03C6TEAZ","text":"ローカルではテストパスしました。(123456789 な seed 使ったやつ)","ts":"1581067792.459700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eP/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8dd195ea-9c6f-4e8e-874b-288fad16c7e8","type":"message","user":"U7986PPFH","ts":"1581068208.459800","files":[{"id":"FTDBPUDS5","created":1581068207,"timestamp":1581068207,"name":"Untitled","title":"Untitled","mimetype":"text/plain","image_exif_rotation":0,"filetype":"c","pretty_type":"C","user":"U7986PPFH","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":646,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FTDBPUDS5/untitled","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FTDBPUDS5/download/untitled","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U7986PPFH/FTDBPUDS5/untitled","permalink_public":"https://slack-files.com/T03C4RC8V-FTDBPUDS5-c9679268ed","edit_link":"https://vim-jp.slack.com/files/U7986PPFH/FTDBPUDS5/untitled/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"47d986ca-0040-45f1-a4f8-c5c09d9fee9a","type":"message","user":"U7986PPFH","text":"更新されてた","ts":"1581068290.460500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jyQ+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"940e3b52-a314-41ce-8a06-c820f17d8727","type":"message","user":"U03C6TEAZ","text":"最新のコミットで x と z は更新しない様になってたと思います。","ts":"1581068548.461800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dPkb8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"27c9e60f-1817-4e44-871a-6084488f0f8a","type":"message","user":"U7986PPFH","text":"`SPLITMIX32(gx, gz)` の中で `gx` , `gz` 変化しますよ\n`f_srand` の方は\n```    list_append_number(rettv-&gt;vval.v_list, (varnumber_T)SPLITMIX32(x, z));\n    list_append_number(rettv-&gt;vval.v_list, (varnumber_T)SPLITMIX32(x, z));\n    list_append_number(rettv-&gt;vval.v_list, (varnumber_T)SPLITMIX32(x, z));\n    list_append_number(rettv-&gt;vval.v_list, (varnumber_T)SPLITMIX32(x, z));```\nこうなので、temporaryな変数で `gx,gy,gz,gw` 設定しないと動作が異なってくる\n```init_srand(&amp;u1);\ngx = SPLITMIX32(u1, u2);\ngy = SPLITMIX32(u1, u2);\ngz = SPLITMIX32(u1, u2);\ngw = SPLITMIX32(u1, u2);```","ts":"1581069047.465100","edited":{"user":"U7986PPFH","ts":"1581069071.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ej0a5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b11628fd-d269-4ec3-b7b6-d1aaed13a4ac","type":"message","user":"U03C6TEAZ","text":"```\tif (initialized == FALSE)\n\t{\n\t    // Initialize the global seed list.\n\t    init_srand(&amp;gx);\n\n\t    x = SPLITMIX32(gx, gz);\n\t    y = SPLITMIX32(gx, gz);\n\t    z = SPLITMIX32(gx, gz);\n\t    w = SPLITMIX32(gx, gz);\n\t    gx = x; gy = y; gz = z; gw = w;\n\t    initialized = TRUE;\n\t}\n\n\tSHUFFLE_XOSHIRO128STARSTAR(result, gx, gy, gz, gw, t);```\nこうかな。","ts":"1581069369.465700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NKkkW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fc32ccc6-5b30-455d-8ba2-3365423a3901","type":"message","user":"U7986PPFH","text":"ですね","ts":"1581069530.466100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UAi"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"892a6c6a-743e-42ef-8a6b-2fc1e0a2e361","type":"message","user":"U7986PPFH","text":"いやx経由する必要ないか","ts":"1581069544.466700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1oE1V"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"851713d3-7d54-4db4-a5a8-436661735de7","type":"message","user":"UAZ33BKV2","text":"あ、乱数シードはそうですねー","ts":"1581069589.468100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Zd/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"81e9cb45-aa94-4636-920f-63a753253cb1","type":"message","user":"U03C6TEAZ","text":"テスト書かないとダメすね。","ts":"1581069635.469100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Zo3DU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0a74d8b9-9bdf-45ce-b38e-69de27706080","type":"message","user":"U7986PPFH","text":"そっちのブロックだとx~w使ってないので `init_srand(&amp;x);` で `gx = SPLITMIX32(x, z);` とかで","ts":"1581069647.469400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nOkYW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5f89a1f0-43f3-4bc8-a1fd-88b84cc1091e","type":"message","user":"U03C6TEAZ","text":"```:echo rand([1,2,3,4])      \n11520```\nテストはこれで十分すかね。","ts":"1581069679.469800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+TB77"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d2f6b59e-2da2-41c7-81dc-34254b56c0b5","type":"message","user":"U03C6TEAZ","text":"あれなんでテスト通ってるんだ？","ts":"1581069755.471000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"L1U"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"535695b3-75e9-46ac-a019-b07956e52780","type":"message","user":"U7986PPFH","text":"引数なしの `rand()` がテストできない","ts":"1581069758.471200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"k/U"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b77a46c9-72e6-4b01-b081-a4560879c457","type":"message","user":"U6XP9LZ6V","text":"`init_srand()` ポインタを取るのではなく、値を返せばいいような気がした","ts":"1581069760.471300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"c/oM"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4888255b-6dce-4e16-b96a-e74e49274efa","type":"message","user":"U03C6TEAZ","text":"init_srand のは1か所 close がいやらしい個所があったのでポインタにしました。","ts":"1581069858.471800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UYM5I"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6e642b99-2076-475a-886b-9fa774f7aa0e","type":"message","user":"U03C6TEAZ","text":"戻り値でもいいんだけど。","ts":"1581069869.472000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qPu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f439b15c-0ff1-4b35-a175-7847c0c7a672","type":"message","user":"U03C6TEAZ","text":"シードの方はこんなすか？","ts":"1581070003.472300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2AhZa"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0a91b145-a714-4d83-8428-284dd6f30f83","type":"message","user":"U03C6TEAZ","text":"```    {\n\t// When no argument is given use the global seed list.\n\tif (initialized == FALSE)\n\t{\n\t    // Initialize the global seed list.\n\t    init_srand(&amp;gx);\n\n\t    t = SPLITMIX32(gx, gz);\n\t    y = SPLITMIX32(gx, gz);\n\t    t = SPLITMIX32(gx, gz);\n\t    w = SPLITMIX32(gx, gz);\n\t    gy = y; gw = w;\n\t    initialized = TRUE;\n\t}\n\n\tSHUFFLE_XOSHIRO128STARSTAR(result, gx, gy, gz, gw, t);\n    }```","ts":"1581070011.472600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"p8B"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c4242b3f-ba14-4aeb-a389-18f633fd04bf","type":"message","user":"U03C6TEAZ","text":"t 使ってるみたいに見えてモヤ感あるw","ts":"1581070045.473000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hFBFD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a87113c8-0ad1-4652-8a6b-d23bcc2f7f88","type":"message","user":"U7986PPFH","text":"いやf_srandと等価にするなら\n```init_srand(&amp;x);\ngx = SPLITMIX32(x, z);\ngy = SPLITMIX32(x, z);\ngz = SPLITMIX32(x, z);\ngw = SPLITMIX32(x, z);```","ts":"1581070135.474000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zLCeX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"506ba928-499a-4001-be8a-ea80b55a8ed4","type":"message","user":"U03C6TEAZ","text":":ok_hand:","ts":"1581070173.474500","team":"T03C4RC8V","reactions":[{"name":"+1::skin-tone-5","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HxdR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cf2e832b-b05c-4d44-952f-0a2b3443561b","type":"message","user":"U03C6TEAZ","text":"static だし 0 いらんな。","ts":"1581070288.474800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MbxJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"94b2dea9-0ebf-4b2b-ab45-a2b78d583bc9","type":"message","user":"U6XP9LZ6V","text":"ローカル変数を使って、`SPLITMIX32`と `SHUFFLE_XOSHIRO128STARSTAR`を計算してから、結果を gx,gy,gz,gw に書き戻した方が高速かなと思ったけど、まー誤差の範囲かな","ts":"1581070739.476700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=bI"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a9906a62-c75a-42bb-aaff-206b9b9688d2","type":"message","user":"U7986PPFH","text":"Test_Rand\n```  call srand()\n  let v = rand()\n  call assert_notequal(v, rand())```\nこれnot-equalとは限らないのでは","ts":"1581071960.477700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0DaS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5fc45c4b-ce83-46d0-bcf0-69aff2ad523c","type":"message","user":"U03C6TEAZ","text":"1個 != になる値で srand した方がいいかもですね。","ts":"1581072048.478700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3ln"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7697eb18-4222-47a8-b2c9-b2b715efae9b","type":"message","user":"U7986PPFH","text":"これ、引数ない `rand()` は事前に `srand()` 呼ぶ意味ないですね","ts":"1581072289.480100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"02A"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"abea8d74-529d-4556-b284-afaa6244b270","type":"message","user":"U03C6TEAZ","text":"あ、これもともとの設計と違ってきてますね。","ts":"1581072329.480800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4zR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ab264ab4-09f2-492e-a161-acbc93cbcf5c","type":"message","user":"U03C6TEAZ","text":"`call srand()` は `rand()` の宣言にある `gx, gz` を初期化するための動作にしたかった。","ts":"1581072356.481400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"S2Vp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4aa996a5-148c-4e0c-9c6b-78911a415785","type":"message","user":"U03C6TEAZ","text":"グローバル変数しかないかー。","ts":"1581072392.481600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bAY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"69c78556-017e-475e-9e17-3b3cafe916c1","type":"message","user":"U7986PPFH","text":"srand不要でもそれはそれでよくないですか？","ts":"1581072519.482100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kYl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cf7e7f9d-5015-4807-b05e-da1fe28ed1b1","type":"message","user":"U03C6TEAZ","text":"このテストを消す感じでですか？","ts":"1581072532.482500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0HDJT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8e6032b4-77c9-4ee8-a897-786e88389ad9","type":"message","user":"U03C6TEAZ","text":"例えば5回、回してみるとか","ts":"1581072551.482800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+Ay7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"74509cbd-7f26-4a8c-9f32-067deeadc36a","type":"message","user":"U03C6TEAZ","text":"```  let [v, c] = [rand(), 0]\n  for i in range(5)\n    if v == rand()\n      let c += 1\n\tendif\n  endfor\n  \" at least, rand() should return different values in 5 times.\n  call assert_notequal(5, c)```\nこんな","ts":"1581072711.483100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"V9OE"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8385c089-c19a-4aea-9553-66c7dc0b70c1","type":"message","user":"U03C6TEAZ","text":"もし5回同じ値出たら奇跡として喜びましょうか。","ts":"1581072753.483700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hXM"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3ef8a9e4-b6e2-4e41-a15b-8539004d7002","type":"message","user":"U03C6TEAZ","text":"以前に比べて vim のテスト結果だいぶ見やすくなった。","ts":"1581072946.484000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZO2K"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5176d71c-e623-4468-9e6a-13def04d909e","type":"message","user":"U03C6TEAZ","text":"(以前は本当に本当に酷かった)","ts":"1581072958.484300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IBJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ccfcfbef-ea89-435c-8db2-2b4a57c7017f","type":"message","user":"U7986PPFH","text":"それだと乱数アルゴリズム自体の評価みたいで、試験のスコープと違う気がします","ts":"1581073445.487700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zRS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f5799d11-f5a5-4aaf-bc60-55861c443134","type":"message","user":"U7986PPFH","text":"意図した（具体的な）数列が得られる、以上の確認はできないのではないかと","ts":"1581073498.488500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"F7yV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9600949b-354a-4bb4-b68c-a1cf0ef4fb8f","type":"message","user":"U7986PPFH","text":"init_srand の中で、/dev/urandom の代わりに値を与える `test_setseed()` のようなテスト用関数があるとよさそう","ts":"1581073605.489800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jox8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"858d28cb-bcfa-4f17-8392-ea0c8c65c063","type":"message","user":"U7986PPFH","text":"```EXTERN UINT32_T srand_seed_for_testing INIT(= 0);\nEXTERN int srand_seed_for_testing_is_used INIT(= FALSE);\n\n    void\nf_test_srand_seed(typval_T *argvars, typval_T *rettv UNUSED)\n{\n    if (argvars[0].v_type == VAR_UNKNOWN)\n        srand_seed_for_testing_is_used = FALSE;\n    else\n    {\n        srand_seed_for_testing = (UINT32_T)tv_get_number(&amp;argvars[0]);\n        srand_seed_for_testing_is_used = TRUE;\n    }\n}\n\n    static void\ninit_srand(UINT32_T *x)\n{\n#ifndef MSWIN\n    static int dev_urandom_state = NOTDONE;  // FAIL or OK once tried\n#endif\n\n    if (srand_seed_for_testing_is_used)\n        *x = srand_seed_for_testing;\n    else\n#ifndef MSWIN\n    if (dev_urandom_state != FAIL)```","ts":"1581074953.490400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hcJLV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7e097173-9f7d-42be-b9a2-714812ae95d7","type":"message","user":"U03C6TEAZ","text":"夜やってみます。","ts":"1581075045.490800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WGa"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0fc98b54-7ad6-4cc3-8fab-940e4e947ce1","type":"message","user":"U03C6TEAZ","text":"既に夜説。","ts":"1581075054.491100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MTH"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
