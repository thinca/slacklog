[{"client_msg_id":"8425c11a-a807-43f1-a42f-98ea72dd26a2","type":"message","user":"U0M7GCBPD","text":"vim のソースで clangd のオプションを `compile_flags.txt` か `compile_commands.json` に書くと思いますが、vim をいじっている方はどんなオプションを指定しているでしょうか。\n自分は手で `compile_flags.txt` を書いてたんですが自動生成してくれるツールを見つけた所です <https://github.com/nickdiego/compiledb>\nただ手で書いても自動生成しても同じエラーが起きてて、 `#include &lt;limits.h&gt;` とか `#include &lt;stdio.h&gt;` とか標準ヘッダーを見てくれない現象に悩んでいます…","ts":"1585124434.000300","attachments":[{"fallback":"GitHub: nickdiego/compiledb","id":1,"title":"nickdiego/compiledb","title_link":"https://github.com/nickdiego/compiledb","text":"Tool for generating Clang's JSON Compilation Database files for make-based build systems. - nickdiego/compiledb","thumb_url":"https://avatars3.githubusercontent.com/u/1189757?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":293,"thumb_height":293,"from_url":"https://github.com/nickdiego/compiledb","original_url":"https://github.com/nickdiego/compiledb"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6JaE"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fa889a9b-b898-462c-934c-33ebf3e1106d","type":"message","user":"U0M7GCBPD","text":"compile_flags.txt はこれです","ts":"1585124471.000700","thread_ts":"1585124471.000700","reply_count":3,"replies":[{"user":"U7986PPFH","ts":"1585144151.026100"},{"user":"U7986PPFH","ts":"1585144335.026300"},{"user":"U0M7GCBPD","ts":"1585171564.026500"}],"files":[{"id":"F010Q7CLARJ","created":1585124469,"timestamp":1585124469,"name":"compile_flags.txt","title":"compile_flags.txt","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"Plain Text","user":"U0M7GCBPD","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":219,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F010Q7CLARJ/compile_flags.txt","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F010Q7CLARJ/download/compile_flags.txt","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U0M7GCBPD/F010Q7CLARJ/compile_flags.txt","permalink_public":"https://slack-files.com/T03C4RC8V-F010Q7CLARJ-7522eac655","edit_link":"https://vim-jp.slack.com/files/U0M7GCBPD/F010Q7CLARJ/compile_flags.txt/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8dAzI"}]},{"client_msg_id":"ce5428b1-08b1-49ab-8f2a-0a18ca412e85","type":"message","user":"UAZ33BKV2","text":"まえにmattnさんがツールを列挙してましたが","ts":"1585124473.001100","edited":{"user":"UAZ33BKV2","ts":"1585124497.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"p4rrz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9fc3c719-0f5c-4223-aecd-29ff8d630a0f","type":"message","user":"UAZ33BKV2","text":"<https://mattn.kaoriya.net/software/vim/20181225235003.htm>","ts":"1585124488.001400","attachments":[{"fallback":"Big Sky: Big Sky :: clangd を使う時に便利なコマンド compiledb","id":1,"title":"Big Sky :: clangd を使う時に便利なコマンド compiledb","title_link":"https://mattn.kaoriya.net/software/vim/20181225235003.htm","text":"システム開発屋がひっそり語るぼやき","thumb_url":"https://mattn.kaoriya.net/images/logo.png","blocks":null,"service_name":"Big Sky","service_icon":"https://mattn.kaoriya.net/favicon.ico","thumb_width":113,"thumb_height":113,"from_url":"https://mattn.kaoriya.net/software/vim/20181225235003.htm","original_url":"https://mattn.kaoriya.net/software/vim/20181225235003.htm"}],"team":"T03C4RC8V","reactions":[{"name":"sasumatsu","count":1,"users":["U0M7GCBPD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/7QOj"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ad0535f1-dcc7-445a-a4e4-22c6a8580e2a","type":"message","user":"UAZ33BKV2","text":"自分はcompiledbが死んでしまうことあるのでbear","ts":"1585124513.002200","team":"T03C4RC8V","reactions":[{"name":"eyes","count":1,"users":["U0M7GCBPD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jOL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3b723aec-9765-4d31-a915-360a1fd51b13","type":"message","user":"UAZ33BKV2","text":"<https://github.com/rizsotto/Bear>","ts":"1585124529.002600","attachments":[{"fallback":"GitHub: rizsotto/Bear","id":1,"title":"rizsotto/Bear","title_link":"https://github.com/rizsotto/Bear","text":"Bear is a tool that generates a compilation database for clang tooling. - rizsotto/Bear","thumb_url":"https://avatars2.githubusercontent.com/u/1200425?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/rizsotto/Bear","original_url":"https://github.com/rizsotto/Bear"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vsLv6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"66525b3b-9f24-4946-89cd-237f37b9164e","type":"message","user":"U0M7GCBPD","text":"ふむふむ、いくつかあるんですね","ts":"1585124558.003300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SLW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d754cc89-51fd-437e-8f5c-a70217edb903","type":"message","user":"U0M7GCBPD","text":"標準ヘッダーの関数とか参照できてますか？","ts":"1585124574.003700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"n1qh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"76cde578-70a7-4373-8284-0397ee4de41d","type":"message","user":"UAZ33BKV2","text":"なんか特定のフォルダのヘッダが見えない状態にはなります...\n標準ヘッダーについては、実は作業環境的に特殊で見える状態になるかはちょっと材料になりそうにないですね...","ts":"1585124640.004800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xHMka"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2609ab4b-5352-4f8b-b0d2-014d338c25d3","type":"message","user":"UAZ33BKV2","text":"大体見えてるのでオッケーくらい","ts":"1585124654.005200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zL9Wr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7e51d8dd-70ad-4c1e-b360-1f219d9f5831","type":"message","user":"UAZ33BKV2","text":"(compiledbが完了してくんなかったり、死んだりすることと、環境の特殊さと量があるため妥協するしかなく)","ts":"1585124700.006000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5zfz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f40957cd-fcde-4c92-acf3-678b8be8a7fe","type":"message","user":"U03C6TEAZ","text":"clangd の LS は若干変な動きしてて LspDefinition で proto の方を見に行ったりしますね。","ts":"1585124739.006500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oAe"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a3130ab9-4c18-4dd5-b47e-3003aaeb98db","type":"message","user":"UAZ33BKV2","text":"なおjsonには定義がちゃんとあるのは確認していて、それで見える見えないに差があるので、clangdが変なんじゃないか疑惑がある","ts":"1585124773.006900","edited":{"user":"UAZ33BKV2","ts":"1585124795.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AdK/R"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a72a0b4e-c277-4ee0-a4e1-1167f95de151","type":"message","user":"U0M7GCBPD","text":"clangd むずかしい","ts":"1585124956.007200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4o0yg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b9d7a92a-3d5c-4c6f-bafd-b25ca20bbeb2","type":"message","user":"U9S4G0LJW","text":"僕はclangd切ってますね、ctagsでどうにかなりますし","ts":"1585125483.009600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UkkQD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"74a90fdb-6453-4d04-93bb-03924d857b1f","type":"message","user":"U0M7GCBPD","text":"本当それで vim/vim だと現状 ctags のが快適なんだよなぁ… 無理に使うことはないし使い分けでいいか","ts":"1585125726.010600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"erTi"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"45913b89-9a3b-41cb-99be-70f0d76a3639","type":"message","user":"U03C6TEAZ","text":"ctags 結構マッチするし、速いし、うまいし、やすいですね。","ts":"1585125775.011400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tz5+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"02f28443-ed96-4e3e-89fb-1832369c6e40","type":"message","user":"U06ECBRTJ","text":"ctags はファーストフードだった…！？","ts":"1585125800.012000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rGv6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"383ce9c8-824a-4740-bef3-9dfc0e74e8d5","type":"message","user":"U03C6TEAZ","text":"gopls くらいちゃんとジャンプできると使う価値あるけど clangd なんか変。","ts":"1585125801.012100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1ftwV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"736f7eba-4568-4fd3-a70b-2c8ec6b39450","type":"message","user":"U03C71D7H","text":"C か C++ かで変わりそう? (流れを何も追ってないが)","ts":"1585125840.012400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AXE"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"72c127be-f30e-4af3-a189-b2fbc4a1ac80","type":"message","user":"U0M7GCBPD","text":"リポジトリ = vim/vim ですね。まぁ C でもあの規模は時間かかるかも…","ts":"1585125872.012900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uS+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8b0a932b-ca6a-45f0-9380-e2fbe7980620","type":"message","user":"UAZ33BKV2","text":"C++でC的だったり変だとより挙動がアテにならんかもしれません、ただれを除いてもclangdはサーバ的部分(パーサじゃなく)がちょっと変","ts":"1585125915.013800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bU1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e5fdc120-4f9b-4441-adc5-44f705c31181","type":"message","user":"U03C6TEAZ","text":"プロトタイプと実装の区別がついてないのが残念。","ts":"1585125956.014100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DL8J"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"060d1176-51f7-42b0-8f8a-1ab748ffe6ac","type":"message","user":"UAZ33BKV2","text":"C/C++、ヘッダに実装が置けるというのがありますしね...大変そうではある","ts":"1585126000.014600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"i0C"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6cd863ba-270e-457e-88ed-2f4468ff7ebc","type":"message","user":"U03C6TEAZ","text":"compiler_flags.txt から -Iproto 消せばいいんかな。","ts":"1585126013.014900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"J9m"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b2113dda-5921-487e-a9f1-52f5ff48dca4","type":"message","user":"U03C6TEAZ","text":"もしくは一番最後に持ってく。","ts":"1585126050.015300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"g3Jf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7ba892f5-2842-4b3d-8acd-559287ff0a8d","type":"message","user":"UD73ZNZAP","text":"Xubuntu 18.04 ですが、以下のような compile_flags.txt で `src/main.c` の`#include &lt;limits.h&gt;` が見つからない的なエラーはないですねぇ\n```-DHAVE_CONFIG_H\n-I.\n-Isrc\n-Isrc/proto```","ts":"1585126510.017300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8qt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"47b86d6b-a348-4260-a5ad-b8871be8c1d2","type":"message","user":"U03C6TEAZ","text":"clangd、その名の通り clang でビルドされてるので gcc のヘッダが見えない事があったりしましたね。昔は。","ts":"1585126578.017900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xCgpd"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b815eae7-4f7c-436a-ab01-6fa33ec13bfd","type":"message","user":"UD73ZNZAP","text":"あ、参照の話だったのか…","ts":"1585126601.018300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eqg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"33c52418-4fc3-4172-b2e4-fe1d2ef36dfc","type":"message","user":"U03C6TEAZ","text":"あ、原因がそれかどうかは分からないですが。","ts":"1585126619.018600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GY9a6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"910e2568-f057-4204-ad78-0b19d7b00e3c","type":"message","user":"U0M7GCBPD","text":"<@UD73ZNZAP> あ、まさに `#include &lt;limits.h&gt;` とかの話です。\nうーん見せてもらったやつ全部列挙してあるな","ts":"1585129583.019500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HswDB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4b93fdbe-3e42-4dfc-ab84-3195f0a83ade","type":"message","user":"UD73ZNZAP","text":"`limits.h` とか`stdio.h` とかコンパイラの標準のInclude pathに依存しそうなので、そのあたりですかねぇ… (そのあたりもちゃんと指定してるっぽいのですけど）\n自分のところは Xubuntu なので llvm clang の repogitory から clangd 入れてるのですが、この辺りでハマったことはないんですよね","ts":"1585132462.023800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"I=20"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8baf6327-9379-4900-9c9f-485764a5ce16","type":"message","user":"U7HFY4HFY","text":"大抵のMakefileプロジェクトはBear使えばなんとかなるのでは\nというおきもち","ts":"1585136970.025700","edited":{"user":"U7HFY4HFY","ts":"1585137021.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MTj/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e02055d7-d893-4088-8f17-9a5b0ef0aa94","type":"message","user":"U9S4G0LJW","text":"熊じゃないのか… <https://github.com/rizsotto/Bear>","ts":"1585137065.026000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hTVbO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f75bc176-c6cc-4a4e-9935-646a85e5ec05","type":"message","user":"U7986PPFH","text":"5行目をHomebrewのllvmのパスに変えた以外はこのまま vim/src/compile_flags.txt に置いて試してみましたが、標準ヘッダも探せてます","ts":"1585144151.026100","thread_ts":"1585124471.000700","parent_user_id":"U0M7GCBPD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SfJTr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ff91f4df-8dcb-45a4-9c29-2931c465a1d5","type":"message","user":"U7986PPFH","text":"6行目は `-I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include` で `usr/include` 必要では (現象とは関係なさそうですが)","ts":"1585144335.026300","thread_ts":"1585124471.000700","parent_user_id":"U0M7GCBPD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ju6y"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ed0ada79-3283-4d76-8ea5-1146785ede01","type":"message","user":"U9S4G0LJW","text":"`misc2.c#mch_parse_cmd`まで行き着いた","ts":"1585062056.426500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vgTOe"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
