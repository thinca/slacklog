[{"client_msg_id":"d639661a-ea85-49f2-9812-7dfc239609a6","type":"message","user":"U6XP9LZ6V","text":"この前買ったマシンでまだVimのテスト流したことなかったので流してみたらハマった。","ts":"1595091729.063900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/OUP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"884bd734-505d-4c11-8f09-c19b0ea9d725","type":"message","user":"U6XP9LZ6V","text":"test_channelが全部failしていたので見ると、test_channel.py の起動に失敗してた。py.exe 経由でレジストリに登録された python3 を起動するはずだと思っていたが、shebang に python と書いてあったせいで、%PATH% から python.exe を起動してた。","ts":"1595091989.066800","team":"T03C4RC8V","reactions":[{"name":"sweat_smile","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+mmQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"af4e0a1e-a363-4313-a233-ed00c584afeb","type":"message","user":"U6XP9LZ6V","text":"で、%PATH% に入っていた python.exe は実は `C:\\Users\\&lt;user&gt;\\AppData\\Local\\Microsoft\\WindowsApps\\python.exe` にあった Microsoft Store を起動する偽物python。","ts":"1595092203.068300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7=W/R"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d16d6708-0ae3-40a7-b488-37951d0410d4","type":"message","user":"U6XP9LZ6V","text":"py.exe を使っていれば偽物の影響は受けないと思っていたのに…","ts":"1595092309.069200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Nq0SX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2516340e-e797-4773-9497-112013022532","type":"message","user":"U6XP9LZ6V","text":"あと、winptyではなくConPTYを使ったら、Test_terminal_eof_arg でハングしてしまった。何かバグがありそう。","ts":"1595092908.070600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=v9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"331f2603-aea3-491c-956d-d405d6ab52d7","type":"message","user":"U06BRP8VD","text":"msys2 の /usr/bin/more にパスが通ってて失敗してたw","ts":"1595093823.071100","files":[{"id":"F017Q4YB6TT","created":1595093820,"timestamp":1595093820,"name":"Untitled","title":"Untitled","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"Plain Text","user":"U06BRP8VD","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":412,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F017Q4YB6TT/untitled","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F017Q4YB6TT/download/untitled","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F017Q4YB6TT/untitled","permalink_public":"https://slack-files.com/T03C4RC8V-F017Q4YB6TT-d4236cb475","edit_link":"https://vim-jp.slack.com/files/U06BRP8VD/F017Q4YB6TT/untitled/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"j4Ig"}]},{"client_msg_id":"97c12581-9ca3-4e3f-8bb3-a82aa2f813e3","type":"message","user":"U06BRP8VD","text":"Test_menu の失敗は日本語翻訳が効いちゃうからっぽい。","ts":"1595094160.071800","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["U6XP9LZ6V"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nHk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2d992d0d-3d6d-41f8-9f55-9526af6d9e88","type":"message","user":"U6XP9LZ6V","text":"さっきのpy.exeの挙動は仕様だった。\n<https://docs.python.org/3/using/windows.html#shebang-lines>","ts":"1595094741.072500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3lS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"188e03b5-6096-4b91-8e29-a01cef9cb173","type":"message","user":"U6XP9LZ6V","text":"shebangに `/usr/bin/env` が書いてあると、インストールされているPythonを探す前にPATHから探すらしい。","ts":"1595094805.073600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AUMLz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ea892776-4a62-4125-b4b6-d44f760bf5d7","type":"message","user":"U6XP9LZ6V","text":"偽物python.exeは、Microsoft Store経由でPythonをインストールする予定は一切無いので、削除した。エクスプローラからだと削除できないが、コマンドプロンプトからなら普通にdelコマンドで削除できた。","ts":"1595095046.075600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9hU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4301280b-69db-4864-a3fb-2e82368abf45","type":"message","user":"U06BRP8VD","text":"… test_undo.vim の失敗はいきなり再現できなくなった…","ts":"1595096768.076000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PL2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5e7f0967-849b-4523-8d94-35d4e75425fe","type":"message","user":"U06BRP8VD","text":"winbarの失敗も日本語関連かもな…","ts":"1595098113.076300","thread_ts":"1595098113.076300","reply_count":1,"replies":[{"user":"U06BRP8VD","ts":"1595098928.077800"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aeL7/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"df209ed6-eba8-4010-a454-5ffe1af5242e","type":"message","user":"U06BRP8VD","text":"test_undo は test_settime() の問題かもしれない。1秒間隔にするとダメになる場合があるのかな?","ts":"1595098329.077300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xQM"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3084d0aa-f877-49fa-96de-fe165053ab1c","type":"message","user":"U06BRP8VD","text":"これやっぱ日本語メニューだったっぽい。","ts":"1595098928.077800","thread_ts":"1595098113.076300","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EZB"}],"root":{"client_msg_id":"5e7f0967-849b-4523-8d94-35d4e75425fe","type":"message","user":"U06BRP8VD","text":"winbarの失敗も日本語関連かもな…","ts":"1595098113.076300","thread_ts":"1595098113.076300","reply_count":1,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aeL7/"}]}},{"client_msg_id":"b9563d01-d618-4869-ac1e-bec437d3b455","type":"message","user":"U06BRP8VD","text":"test_netbeans.vim が失敗する理由を調べてたら2つの問題が見つかった。\n\n1. Windows GUIだとウィンドウの位置が変わった際に netbeans へそのことを知らせる `0:geometry=...` メッセージが飛び、通信ログが意図しないものを含んで失敗してしまう。\n\n2. flaky test がいったん失敗した後、再実行で成功した場合にそれを記録したり、エラーログを回復する手段がないためそれが起こったことがわからない。","ts":"1595128747.081000","thread_ts":"1595128747.081000","reply_count":1,"replies":[{"user":"U06BRP8VD","ts":"1595130776.081100"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0N/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"04133d70-26f2-4d78-8314-4e72a2f2d961","type":"message","user":"U06BRP8VD","text":"とりあえず1のほうは対応した。\n\n<https://github.com/vim/vim/pull/6487>","ts":"1595130776.081100","thread_ts":"1595128747.081000","attachments":[{"fallback":"GitHub: stabilize netbeans test on GUI env by koron · Pull Request #6487 · vim/vim","id":1,"title":"stabilize netbeans test on GUI env by koron · Pull Request #6487 · vim/vim","title_link":"https://github.com/vim/vim/pull/6487","text":"netbeans.c sends &amp;quot;0:geometry=...&amp;quot; messages when window&amp;#39;s position, size, or Z order are changed on Windows GUI. It adds unexpected lines in &amp;quot;Xnetbeans&amp;quot; file, and causes fai...","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/pull/6487","original_url":"https://github.com/vim/vim/pull/6487"}],"subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"boh3"}],"root":{"client_msg_id":"b9563d01-d618-4869-ac1e-bec437d3b455","type":"message","user":"U06BRP8VD","text":"test_netbeans.vim が失敗する理由を調べてたら2つの問題が見つかった。\n\n1. Windows GUIだとウィンドウの位置が変わった際に netbeans へそのことを知らせる `0:geometry=...` メッセージが飛び、通信ログが意図しないものを含んで失敗してしまう。\n\n2. flaky test がいったん失敗した後、再実行で成功した場合にそれを記録したり、エラーログを回復する手段がないためそれが起こったことがわからない。","ts":"1595128747.081000","thread_ts":"1595128747.081000","reply_count":1,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0N/"}]}},{"client_msg_id":"a01020f6-1c10-4160-b4b6-f2cf90cb2ff0","type":"message","user":"U06BRP8VD","text":"terminalのテストが遅いのもflaky testで失敗したと、4回再実行してpassするからやろうな。","ts":"1595132076.082200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0/IgE"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"84bca81e-aea5-4fd8-a342-317f0b76a337","type":"message","user":"U6XP9LZ6V","text":"travis ciが落ちてますねぇ","ts":"1595140274.082700","team":"T03C4RC8V","reactions":[{"name":"syobon","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"m8PzU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7dfb97cf-8b95-45e3-9908-f21ac69ee40c","type":"message","user":"U06BRP8VD","text":"netbeans のテストが止まってる感じ?","ts":"1595140632.083100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Jehr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"490f8d47-a8ce-4a35-b0da-dab759ab32a6","type":"message","user":"U06BRP8VD","text":"つーかなんでこの修正で netbeans テストが終わらなくなるん?","ts":"1595140726.083500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XID"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b302067c-c94a-4ea0-8598-f630f9a60902","type":"message","user":"U06BRP8VD","text":"わかんないやw","ts":"1595140849.083700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aOWp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"039e9a19-49b9-4a21-8754-787f097f8148","type":"message","user":"U06BRP8VD","text":"あとでLinuxで動かしてみるべ","ts":"1595142243.083900","edited":{"user":"U06BRP8VD","ts":"1595142252.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ekYw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
