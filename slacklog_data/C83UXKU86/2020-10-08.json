[{"client_msg_id":"49a0a92f-bdc4-4ad4-9b81-9d2dbc3ed7e3","type":"message","user":"U6XP9LZ6V","text":"しばらくこのパッチで様子見てみるか\n\u003chttps://osdn.net/users/k_takata/pf/vim-ktakata-mq/scm/blobs/46589e0f86f409007adfd5d095276b6e31e2ba92/fix-python3-stdin.patch\u003e","ts":"1602162963.255800","attachments":[{"fallback":"File Details: /fix-python3-stdin.patch (46589e0f86f409007adfd5d095276b6e31e2ba92) - vim-ktakat...","id":1,"title":"File Details: /fix-python3-stdin.patch (46589e0f86f409007adfd5d095276b6e31e2ba92) - vim-ktakat...","title_link":"https://osdn.net/users/k_takata/pf/vim-ktakata-mq/scm/blobs/46589e0f86f409007adfd5d095276b6e31e2ba92/fix-python3-stdin.patch","text":"File Details: /fix-python3-stdin.patch (46589e0f86f409007adfd5d095276b6e31e2ba92) - vim-ktakata-mq (hg) #osdn","thumb_url":"https://static.osdn.net/OSDN_icon_125x125.png","blocks":null,"service_name":"osdn.net","service_icon":"https://osdn.net/favicon.ico","thumb_width":125,"thumb_height":125,"from_url":"https://osdn.net/users/k_takata/pf/vim-ktakata-mq/scm/blobs/46589e0f86f409007adfd5d095276b6e31e2ba92/fix-python3-stdin.patch","original_url":"https://osdn.net/users/k_takata/pf/vim-ktakata-mq/scm/blobs/46589e0f86f409007adfd5d095276b6e31e2ba92/fix-python3-stdin.patch"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"03o"}]},{"client_msg_id":"766406bf-9c5a-4113-9b7a-d3de1df63ee7","type":"message","user":"U6XP9LZ6V","text":"dup() の実装を見ると、クローズされてるとエラーが返ってきそうなんだけど","ts":"1602159795.255400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hhmVY"}]},{"client_msg_id":"9d9acb02-ea91-4359-b0cf-4e2cd84816b7","type":"message","user":"U6XP9LZ6V","text":"Win32 API レベルで、`CloseHandle()` されたハンドルかどうかを判別する方法があればそれでもいいけど、これも難しそう","ts":"1602159522.254500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SYC6"}]},{"client_msg_id":"784618dd-0903-4e6e-989e-589db28a7806","type":"message","user":"UAZ33BKV2","text":"まあ、stdinというデカいグローバルオブジェクト管理だから...というところ?","ts":"1602159466.253800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ka3A/"}]},{"client_msg_id":"f463f42c-25ce-4d41-a1cc-be4794593c0d","type":"message","user":"U6XP9LZ6V","text":"やっぱり close(0) したところでフラグを立てるのが一番簡単か。あまりグローバル変数増やしたくないけど。","ts":"1602159339.252800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RKvrD"}]},{"client_msg_id":"838ad7d9-b924-486d-af07-a61ccf94de62","type":"message","user":"U6XP9LZ6V","text":"fstat も成功してしまいました…","ts":"1602159282.252000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Vwt"}]},{"client_msg_id":"b3058e06-496e-4627-b7e5-7aa1e457cd51","type":"message","user":"U7986PPFH","text":"`dup(0)` がエラーにならないのなら `fstat` も同じか","ts":"1602159222.251500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"r0ktf"}]},{"client_msg_id":"022041b3-3d95-4869-af74-0a1643700441","type":"message","user":"U7986PPFH","text":"`fstat(0, ...)` のエラーで確認できませんか","ts":"1602158992.250500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jDCm"}]},{"client_msg_id":"1e423345-8e26-412f-99a7-a06ed4ba9643","type":"message","user":"U6XP9LZ6V","text":"python のコード見てたら dup() してみるという方法を使っていたけど、close(0) しても dup(0) は成功してしまう…","ts":"1602158965.249900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WsOdj"}]},{"client_msg_id":"162ee82f-5ad4-4759-9dab-c573e213cce6","type":"message","user":"U9S4G0LJW","text":"難しそう…","ts":"1602158715.248400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wC3"}]},{"client_msg_id":"4f89dbc7-3fbf-4038-bb22-cd74ce3690ad","type":"message","user":"U9S4G0LJW","text":"あ、読み終わらないケースですか","ts":"1602158713.248100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"58Lj"}]},{"client_msg_id":"3f637cbe-fc97-46cd-8be7-e3ed5f0554b2","type":"message","user":"U6XP9LZ6V","text":"`-` が含まれているときに、stdin から読んで、読み終わったら close(0) されてしまうわけですが、読み終わったかどうかで処理を分けたいので。","ts":"1602158682.247700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Zcem"}]},{"client_msg_id":"01d775e7-3184-4611-af87-127ef30bd499","type":"message","user":"U9S4G0LJW","text":"Vimのargsに`-`が含まれているかチェックしたらいい話ではない？","ts":"1602158463.245200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ADGp"}]},{"client_msg_id":"57516ee8-2a55-49a6-9d5c-f88808e81bbc","type":"message","user":"U6XP9LZ6V","text":"です。Windowsで使えるやつ。","ts":"1602158290.243900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hHD"}]},{"client_msg_id":"317ccc4e-f537-46a1-b5ed-2cfa69e60634","type":"message","user":"U7986PPFH","text":"`0` が有効なfile descriptorかどうかを確認するという話ですか？","ts":"1602158237.243200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8t8u"}]},{"client_msg_id":"5ecb9a4c-d156-44f9-afa1-87000a0a6041","type":"message","user":"U6XP9LZ6V","text":"直接的な方法がなさそうだし、フラグを追加するか？","ts":"1602157395.241200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"saePa"}]},{"client_msg_id":"d998d42b-431c-4044-9f3f-100e3c855440","type":"message","user":"U6XP9LZ6V","text":"close(0) されたかどうかをチェックするにはどうしたらいいだろう？","ts":"1602157357.240600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"a=d"}]},{"client_msg_id":"6f8d88fc-5b34-4be0-9f90-e071b4f88a9d","type":"message","user":"U03C6TEAZ","text":"なるほどな。read でブロックするから close(0) せなあかんのか。","ts":"1602151189.240000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ao1XW"}]},{"client_msg_id":"dfcc6471-29b4-4db9-9d70-959b092042dc","type":"message","user":"U03C6TEAZ","text":"あー","ts":"1602151166.239600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"l6K"}]},{"client_msg_id":"5557b6e7-d5d8-411e-a12e-449f09295455","type":"message","user":"U6XP9LZ6V","text":"あー、`vim -` で起動すると、fileio.c と main.c で `close(0);` されてる。これが原因か","ts":"1602150164.239300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kJlD"}]},{"client_msg_id":"1dc2cf0e-29f4-4af2-a8c4-0bb8e2a1d319","type":"message","user":"U03C6TEAZ","text":"isatty が 1 ならやらなくていいはず。","ts":"1602147602.238100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GFBF"}]},{"client_msg_id":"5b6796e0-6a09-4631-8910-20d63396ef3d","type":"message","user":"U6XP9LZ6V","text":"gvim はまた動作が違うな…","ts":"1602147527.237600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8619+"}]},{"client_msg_id":"2e26aee3-8fe5-4b44-b940-2ebf7460637d","type":"message","user":"U6XP9LZ6V","text":"vim を `-` を指定して起動すると、stderr からキー入力するようになるけど、それで python がおかしなことになっているのだろうか？","ts":"1602147369.237100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fEFR"}]},{"client_msg_id":"bfebb0b2-b5a9-46f9-8f0f-c7f57524d1ca","type":"message","user":"U7JL1UKKL","text":"deoplete使うと落ちるのは多分そういうことだと思うのだけど","ts":"1602146965.235800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7xS"}]},{"client_msg_id":"d8888f55-0ffc-4d71-b3bd-623e64eed84d","type":"message","user":"U7JL1UKKL","text":"Python remote pluginも標準入出力使ってやりとりしてなかったかな","ts":"1602146936.235000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3lit"}]},{"client_msg_id":"4dd920bc-534a-4aef-9cd1-155953018904","type":"message","user":"UAZ33BKV2","text":"入力が標準入力からだとNG?","ts":"1602146901.233800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"j98"}]},{"client_msg_id":"5ed9222b-edfb-4da1-9473-cb7bddb05ce5","type":"message","user":"U6XP9LZ6V","text":"```\u0026gt;vim -c \"py3 print(1)\" -\nVim: 標準入力から読込中...\naaa\n^Z```\nこれをやっただけで落ちる。\n```\"-stdin-\" 2L, 8B Fatal Python error: init_sys_streams: can't initialize sys standard streams\nPython runtime state: core initialized\nValueError: Cannot open console output buffer for reading\n\nCurrent thread 0x000070f4 (most recent call first):\n\u0026lt;no Python frame\u0026gt;```","ts":"1602146701.233300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"I4fvQ"}]},{"client_msg_id":"2ea18d0c-0b8e-41bc-9a03-c104881dfb9d","type":"message","user":"U6XP9LZ6V","text":"ん？もしかしてリダイレクトが原因じゃない？","ts":"1602146606.232200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cni"}]},{"client_msg_id":"a6ab9dc5-2ce7-4747-8757-4dffb4f3d3fb","type":"message","user":"U6XP9LZ6V","text":"freopen 以外の手段でそれを救えないかなとか考えて python のコードを眺めてるけど全然わからない","ts":"1602146373.231600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zM8i"}]},{"client_msg_id":"0af4e999-d18c-41ae-a3e6-3291d7a840ab","type":"message","user":"U03C6TEAZ","text":"もどすというのも1つの判断だけどなぁ。\n```$ ls | vim -```\nはまず救いたい。","ts":"1602146158.230000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"D=L"}]},{"client_msg_id":"00f266a7-8324-4c05-82d5-b2804d430ef0","type":"message","user":"U03C6TEAZ","text":"ぐぬぬ","ts":"1602146090.229300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pk9"}]},{"client_msg_id":"4a2a0861-cfc1-4826-a5ee-adbd6bfe191a","type":"message","user":"U6XP9LZ6V","text":"python 3 が abort さえしなければ freopen とか余計な事しなくてすむのに。ぐぬぬ","ts":"1602146079.229100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"d+G"}]},{"client_msg_id":"68b04bec-44bb-43cb-ae58-e2fd2f8dbf91","type":"message","user":"U6XP9LZ6V","text":"とりあえずreopenした","ts":"1602145951.227900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ms1"}]},{"client_msg_id":"b482d9f9-4274-4445-97a8-d0edbd7a1b7d","type":"message","user":"U03C6TEAZ","text":"まだ再現するって言ってるな。","ts":"1602143852.227600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ckOm"}]},{"client_msg_id":"2345c66f-9512-4e8c-be69-0dcf8a1b03ae","type":"message","user":"U03C6TEAZ","text":"\u003chttps://github.com/vim/vim/issues/7053\u003e","ts":"1602143848.227300","attachments":[{"fallback":"GitHub: python3 crash related to stdin being redirected on Windows · Issue #7053 · vim/vim","id":1,"title":"python3 crash related to stdin being redirected on Windows · Issue #7053 · vim/vim","title_link":"https://github.com/vim/vim/issues/7053","text":"gVim started with NUL for standard input is aborted by Python3 on Windows. To Reproduce Only know how to reproduce it using Vifm 0.11 (source): Execute :!gvim \u0026amp; in vifm Execute :pythonx print(\u0026amp;...","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/issues/7053","original_url":"https://github.com/vim/vim/issues/7053"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"r1xc"}]},{"client_msg_id":"73614c40-7c61-4afb-86ea-77de462c490d","type":"message","user":"U03C6TEAZ","text":"なぜだー！再現しない \u003chttps://vim-jp.slack.com/archives/C83UXKU86/p1602133079221100\u003e","ts":"1602141176.226900","attachments":[{"fallback":"[October 7th, 2020 9:57 PM] k-takata: お、8.2.1812 で再現した。昨日は再現しなかったのに。\n`vim --clean -c \"py3 print(1)\"`","id":1,"author_id":"U6XP9LZ6V","author_name":"Ken Takata","author_subname":"Ken Takata","author_link":"https://vim-jp.slack.com/team/U6XP9LZ6V","author_icon":"https://secure.gravatar.com/avatar/7817559eedcf07a777dbf9dd734cc0b1.jpg?s=48\u0026d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-48.png","text":"お、8.2.1812 で再現した。昨日は再現しなかったのに。\n`vim --clean -c \"py3 print(1)\"`","mrkdwn_in":["text"],"blocks":null,"footer":"Posted in #dev","ts":1602133079.221100,"from_url":"https://vim-jp.slack.com/archives/C83UXKU86/p1602133079221100","original_url":"https://vim-jp.slack.com/archives/C83UXKU86/p1602133079221100"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/PO+g"}]},{"client_msg_id":"ea42c12d-5e98-4958-8261-dcad30b7dd32","type":"message","user":"UAZ33BKV2","text":"いっそ、runtime file base UTF-8rize 的なのでてきそう","ts":"1602138449.226600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VXUR"}]},{"client_msg_id":"c917ea2f-f364-4a58-b294-e6c2229edcb6","type":"message","user":"U7JL1UKKL","text":"latin1つらい","ts":"1602137837.226100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EN1c8"}]},{"client_msg_id":"51fa47a0-d8e6-457a-885e-7a878458f2af","type":"message","user":"U03C6TEAZ","text":"まぁ latin-1 はやく滅びてって話ならまぁ、言いたい気持ちは分かる。","ts":"1602137807.225800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1zCeC"}]},{"client_msg_id":"1477940d-1543-4ded-8bb6-9eee6cb9dcf2","type":"message","user":"U9S4G0LJW","text":"polyglotの人","ts":"1602137728.225300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OvS"}]},{"client_msg_id":"38ae8eaf-46cd-48bc-8084-256dd66706d1","type":"message","user":"U06ECBRTJ","text":"精力的に活動されてる方ですね Githubの草もいっぱい生えてる","ts":"1602137715.225100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TDVB"}]},{"client_msg_id":"8881a61b-e55e-4e8c-b2e2-713726d87a63","type":"message","user":"U03C6TEAZ","text":"latin-1 で開く → 保存しようとしたらエラー → なんやねん！","ts":"1602137627.224000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HtKw5"}]},{"client_msg_id":"77e40c75-e960-4992-9198-9bad9eb20771","type":"message","user":"U03C6TEAZ","text":"runtime の下にある latin-1 なコメントが書かれたファイルを vim で弄ってギョッとしたんでしょうね。","ts":"1602137587.223300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bXR"}]},{"client_msg_id":"0ed3bdda-ffee-4ead-8fbb-de4b8b8850f3","type":"message","user":"UAZ33BKV2","text":"(Tシャツ終ったの知らないとか?)","ts":"1602137540.222700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"E4N6F"}]},{"client_msg_id":"d370a8c1-74eb-40ee-90ed-ba018a656a07","type":"message","user":"U03C6TEAZ","text":"やたらこの方からの pull-req 来てるな。","ts":"1602137514.222400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Wra"}]},{"client_msg_id":"9fd34b72-d104-4381-b1ee-1edab46ad4e0","type":"message","user":"U03C6TEAZ","text":"だめです。fileencoding を弄るのは駄目です。","ts":"1602137451.222100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"axH"}]},{"client_msg_id":"0d1c6f25-65de-422c-bf0b-45536ae5cecd","type":"message","user":"U03C6TEAZ","text":"\u003chttps://github.com/vim/vim/pull/7091\u003e","ts":"1602137442.221700","attachments":[{"fallback":"GitHub: Use encoding= instead of fileencoding= by sheerun · Pull Request #7091 · vim/vim","id":1,"title":"Use encoding= instead of fileencoding= by sheerun · Pull Request #7091 · vim/vim","title_link":"https://github.com/vim/vim/pull/7091","text":"fileencoding=utf-8 has unfortunate sideeffect of setting buffer state to changed. To reproduce bug: vim -u DEFAULTS :set ft=falcon :q currently vim warns: E37: No write since last change (add ! to...","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/pull/7091","original_url":"https://github.com/vim/vim/pull/7091"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ytg"}]},{"client_msg_id":"2c2a6574-c136-4985-8e5f-ce1c4c865f61","type":"message","user":"U6XP9LZ6V","text":"なんかミスってたのかな？","ts":"1602133107.221500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=x5J"}]},{"client_msg_id":"ccefd801-eec6-4fdd-8d0b-784645747399","type":"message","user":"U6XP9LZ6V","text":"お、8.2.1812 で再現した。昨日は再現しなかったのに。\n`vim --clean -c \"py3 print(1)\"`","ts":"1602133079.221100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3X5/"}]},{"client_msg_id":"3a902db9-84b4-484b-a398-092dd55470ca","type":"message","user":"U03C6TEAZ","text":"k-takata さんもまだ再現できてないんでしたっけ。","ts":"1602132632.220300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"z/WZT"}]},{"client_msg_id":"ed7c8383-1f85-4ae0-ba79-7a5b5cfb046a","type":"message","user":"UGH7U3SF2","text":"vim 8.2.1812 python 3.8.6 win10 2004\ncmd pwsh WindowsTerminal+cmd WindowsTerminal+pwsh\nで発生\n同バージョンgvimでは発生していない","ts":"1602132062.219600","edited":{"user":"UGH7U3SF2","ts":"1602132097.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rSO"}]},{"client_msg_id":"aee69723-ba7f-4d6c-a74c-238968a86ba3","type":"message","user":"UAZ33BKV2","text":"(せっかく実bisec向けなasdf-vimつくってもwindowsだとどうにもならん...)","ts":"1602131878.217500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NAC0H"}]},{"client_msg_id":"8cfcc431-1b9a-416b-9e4d-b3c4b02f8be3","type":"message","user":"U03C6TEAZ","text":"なので再現してない。","ts":"1602131746.217000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mDx"}]},{"client_msg_id":"b4968c6f-10ca-4b14-bf22-832411737627","type":"message","user":"U03C6TEAZ","text":"いや、僕の再現したのは僕の vim が 8.2.1801 だからだ。","ts":"1602131742.216800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fKnl"}]},{"client_msg_id":"cd8f3457-63b6-4bec-ae1c-5afa3d68fbd5","type":"message","user":"U6XP9LZ6V","text":"\u003chttps://vim-jp.slack.com/archives/CLKR04BEF/p1602084738152800\u003e","ts":"1602131652.216100","attachments":[{"fallback":"[October 7th, 2020 8:32 AM] k-takata: ちょっと原点に戻ってみるか。\n\u003chttps://github.com/vim-jp/issues/issues/1250\u003e\n\u0026gt; 調査の結果 `Py_Initialize` の中で `io.py` が呼ばれ、Windows 専用のロジックで標準入力オブジェクトが初期化できずに Py_FatalError が呼ばれる。そこで abort してしまいクラッシュ。\n標準入力オブジェクトが初期化できないってのは何の API(?) がエラーになってるのだろう？ freopen 以外の手段は何かあるだろうか。","id":1,"author_id":"U6XP9LZ6V","author_name":"Ken Takata","author_subname":"Ken Takata","author_link":"https://vim-jp.slack.com/team/U6XP9LZ6V","author_icon":"https://secure.gravatar.com/avatar/7817559eedcf07a777dbf9dd734cc0b1.jpg?s=48\u0026d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-48.png","text":"ちょっと原点に戻ってみるか。\n\u003chttps://github.com/vim-jp/issues/issues/1250\u003e\n\u0026gt; 調査の結果 `Py_Initialize` の中で `io.py` が呼ばれ、Windows 専用のロジックで標準入力オブジェクトが初期化できずに Py_FatalError が呼ばれる。そこで abort してしまいクラッシュ。\n標準入力オブジェクトが初期化できないってのは何の API(?) がエラーになってるのだろう？ freopen 以外の手段は何かあるだろうか。","mrkdwn_in":["text"],"blocks":null,"footer":"Posted in #plugins","ts":1602084738.152800,"from_url":"https://vim-jp.slack.com/archives/CLKR04BEF/p1602084738152800","original_url":"https://vim-jp.slack.com/archives/CLKR04BEF/p1602084738152800"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=1A"}]},{"client_msg_id":"386de5ae-80bf-403b-bbba-74c2af5d0594","type":"message","user":"U03C6TEAZ","text":"\u003chttps://vim-jp.slack.com/archives/CLKR04BEF/p1602130815180300\u003e","ts":"1602131536.215800","attachments":[{"fallback":"[October 7th, 2020 9:20 PM] mattn: いったん纏めると\n* いまの現象はパイプは関係ない (`echo 1 | vim ...` でなくても再現する)\n* vim 起動後に `py3` コマンドを実行すると数回に1回固まる\n* 8.2.1381 があやしい \u003chttps://github.com/vim/vim/commit/56b8dc331dc7f499c8221ed7d1c7795ad5e3bdeb\u003e\nで良いですか？","id":1,"author_id":"U03C6TEAZ","author_name":"mattn","author_subname":"mattn","author_link":"https://vim-jp.slack.com/team/U03C6TEAZ","author_icon":"https://avatars.slack-edge.com/2018-07-31/407982080133_30e238cd92e6c88883f9_48.png","text":"いったん纏めると\n* いまの現象はパイプは関係ない (`echo 1 | vim ...` でなくても再現する)\n* vim 起動後に `py3` コマンドを実行すると数回に1回固まる\n* 8.2.1381 があやしい \u003chttps://github.com/vim/vim/commit/56b8dc331dc7f499c8221ed7d1c7795ad5e3bdeb\u003e\nで良いですか？","mrkdwn_in":["text"],"blocks":null,"footer":"Posted in #plugins","ts":1602130815.180300,"from_url":"https://vim-jp.slack.com/archives/CLKR04BEF/p1602130815180300","original_url":"https://vim-jp.slack.com/archives/CLKR04BEF/p1602130815180300"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8EFHW"}]}]
