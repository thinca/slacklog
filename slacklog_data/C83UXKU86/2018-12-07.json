[{"client_msg_id":"5244f9cd-c330-4332-8ea0-59cebf87a4b3","type":"message","user":"U06BRP8VD","text":"まず簡単そうなコピーでやっちゃって、できたら破壊的にやるほうほう考える、ってのもありですよ?","ts":"1544108497.054000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d2dc22e1-c248-4e39-b3b1-8be2d44ca8c4","type":"message","user":"U7EEZ4LMR","text":"今そんな感じです :woman-gesturing-ok:","ts":"1544108515.054400","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U06BRP8VD"]},{"name":"69b9bbe795f19442","count":2,"users":["U06BRP8VD","U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8ed21de3-9874-458f-a035-b4ee7bd3cee5","type":"message","user":"U7EEZ4LMR","text":"他のコードを参考に破壊的に変更してみてます","ts":"1544108554.055000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f603575c-5608-4268-91a2-346cf3e07da3","type":"message","user":"U7EEZ4LMR","text":"_ 変数名ってなんか気配を合わせて短い感じにしたほうがいいんでしょうか… _","ts":"1544108708.056100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bb040db9-5e51-4099-81aa-36380683773d","type":"message","user":"U06BRP8VD","text":"まぁ、あんま最初は気にしなくてもよいのでは?","ts":"1544111719.056600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b73dd226-c1f9-47bd-ab5d-6db0af811909","type":"message","user":"U7EEZ4LMR","text":"破壊的にできたぽい","ts":"1544112703.056900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c40b9cd7-70d6-480a-9d96-1dc18b69cca2","type":"message","user":"U7EEZ4LMR","text":"テストを多く書いてみよう","ts":"1544112726.057200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0ce7ee04-cf1a-4914-9d29-6b107be04fea","type":"message","user":"U03C6TEAZ","text":"いいですね。","ts":"1544113076.057500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"56a602cf-d657-4a72-904f-6b380e214721","type":"message","user":"U03C6TEAZ","text":"ちなみに flatten() を呼び出したあとで call garbasecollect() を1発呼んどくと参照カウンタのバグがあるか確かめられます。","ts":"1544113128.058500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"70031298-0a42-4bfe-ae13-3c617857179e","type":"message","user":"U03C6TEAZ","text":"バグがあると落ちるはず。","ts":"1544113138.058700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"06598da8-c320-43d7-8696-9a0d83efa6f9","type":"message","user":"U03C6TEAZ","text":"```\nlet x = flatten(v)\ncall garbagecollect()\necho x\n```","ts":"1544113178.059400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0dbc48a1-069c-49a2-8ff5-aed9d5904661","type":"message","user":"U03C6TEAZ","text":"まずってると `echo x` で落ちます。","ts":"1544113189.059700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c25e3d90-756a-4d7b-8415-6b8e27e53de4","type":"message","user":"U7EEZ4LMR","text":"おお、やってみます","ts":"1544113211.060100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"83dcb4d6-9b98-413c-82c4-fee74d3df58d","type":"message","user":"U7EEZ4LMR","text":"落ちない！！！","ts":"1544113268.060300","team":"T03C4RC8V","reactions":[{"name":"subara","count":2,"users":["U03C6TEAZ","U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3b32e55b-e68f-46be-ab1c-2560056bb61f","type":"message","user":"U03C6TEAZ","text":"あとは一部を参照するパターンですね。","ts":"1544113678.060800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9df9dccd-d5fa-4880-9dd3-d5e87f8dd50a","type":"message","user":"U03C6TEAZ","text":"```\nlet x = {\"foo\": \"bar\"}\nlet y = [1, [2, x], 3]\nlet z = flatten(y)\ncall garbagecollect()\necho z\n```","ts":"1544113713.061600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"48e5437a-9421-4261-89e8-4848335c2717","type":"message","user":"U03C6TEAZ","text":"その後 `echo x.foo` とか動けばよさげ。","ts":"1544113730.062100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e7e987d0-6691-47f0-ae4b-40fcf6558f51","type":"message","user":"U7EEZ4LMR","text":"ありがとうございます :pray:","ts":"1544113813.062500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"87530766-4516-4d95-b2de-e07341da9794","type":"message","user":"U7EEZ4LMR","text":"動いてます！","ts":"1544113821.062900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8e90fcb3-9d37-40bf-bff6-968a9128a044","type":"message","user":"U7EEZ4LMR","text":"<https://github.com/mopp/vim/commits/add_flatten>\nテスト追加してpushしました","ts":"1544113865.063200","attachments":[{"fallback":"GitHub: mopp/vim","id":1,"title":"mopp/vim","title_link":"https://github.com/mopp/vim/tree/add_flatten","text":"The official Vim repository. Contribute to mopp/vim development by creating an account on GitHub.","thumb_url":"https://avatars0.githubusercontent.com/u/1330045?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/mopp/vim/tree/add_flatten","original_url":"https://github.com/mopp/vim/tree/add_flatten"}],"edited":{"user":"U7EEZ4LMR","ts":"1544113895.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ef23408e-c2b7-4629-80af-8879cc505325","type":"message","user":"U03C71D7H","text":"flatten() は他の関数と違って再帰的に作用するので、破壊的にした場合どの階層まで破壊されるのかが不明確になってわかりづらくなってしまうイメージがある","ts":"1544149646.064500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7e16b80d-e240-41e5-93b4-ec78ed749140","type":"message","user":"U06BRP8VD","text":"直感的には一番表面のやつ、ですけどね。","ts":"1544149738.065100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2ddd954f-f93e-4505-b95d-83a8f28aae08","type":"message","user":"U06BRP8VD","text":"そういえば dict は破壊的な flatten できないか…","ts":"1544149756.065800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a2011917-b0ec-44c5-ac90-737fbc4ebded","type":"message","user":"U03C71D7H","text":"折り畳まれた関数全部が破壊されてしまうイメージがあります","ts":"1544149762.066200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e9d9801d-946e-4ebb-80c3-1abd8ec5faf8","type":"message","user":"U03C4RC8X","text":"```function! s:f() abort\n  let l:xs = []\n  call add(l:xs, l:xs)\n  echo l:xs \"=&gt; [[...]]\n  echo flatten(l:xs) \" !?\nendfunction\n\ncall s:f()```","ts":"1544149784.067000","thread_ts":"1544149784.067000","edited":{"user":"U03C4RC8X","ts":"1544149786.000000"},"last_read":"1544156492.072400","subscribed":true,"reply_count":1,"replies":[{"user":"U7EEZ4LMR","ts":"1544156492.072400"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"da315e8f-ab1e-4b62-ae1a-2ed7803fdadb","type":"message","user":"U03C4RC8X","text":"これってどうなります?","ts":"1544149789.067400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4aa8d63a-df36-4260-ad8b-194808124443","type":"message","user":"U03C71D7H","text":"つまり人によって「直感的な動作」が異なるのでそこには直感的な動作など存在しないと言えそう","ts":"1544149794.067700","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":4,"users":["U06BRP8VD","U0M7GCBPD","U7EEZ4LMR","U7D5LRRQD"]},{"name":"sorena","count":2,"users":["U0M7GCBPD","U7D5LRRQD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2ece5eb0-82aa-43bd-b2aa-e811d34f5154","type":"message","user":"U03C4RC8X","text":"無限再帰リスト、vim scriptでは合法です","ts":"1544149795.067900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"167759b4-6909-4afa-bff0-4e173471ee10","type":"message","user":"U03C4RC8X","text":"`l:xs[0][0][0][0][0][0][0][0][0][0] == l:xs`","ts":"1544149824.068200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bb0dc20f-722e-433d-8073-27c641d45a7d","type":"message","user":"U03C6TEAZ","text":"dict で循環参照してる奴とか死にそう。","ts":"1544149880.068600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e140e707-eaf9-4611-bb90-a90856347014","type":"message","user":"U03C6TEAZ","text":"ruby はどうなるんだろ。","ts":"1544149888.068800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e0861f1c-c901-4695-a53d-55d0ce53cdf4","type":"message","user":"U03C4RC8X","text":"```xs = []\nxs &lt;&lt; xs\np xs #=&gt; [[...]]\np xs.flatten # `flatten': tried to flatten recursive array (ArgumentError)\n```","ts":"1544149926.069100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f036a1c7-9108-4c47-ba62-157f1108a1d3","type":"message","user":"U03C4RC8X","text":"ArgumentErrorになる :goodpoem:","ts":"1544149936.069500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ce8b7691-ef95-43ea-b094-633f10b7fb6e","type":"message","user":"U03C6TEAZ","text":"```\na = {:foo=&gt;\"bar\"}\na[:bar] = a\np a.flatten\n```\nならん","ts":"1544149944.069700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c3eaa7d3-9064-4687-9640-d00640ccfd87","type":"message","user":"U03C4RC8X","text":"hashの方は位置段階しかflattenしないぽい","ts":"1544149989.070100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fadf35a5-8655-4182-810c-de79079081aa","type":"message","user":"U03C4RC8X","text":"一段階","ts":"1544149992.070300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5bab3642-ef92-445e-81c8-aeb016b50ab7","type":"message","user":"U03C4RC8X","text":"むう <https://apidock.com/ruby/Hash/flatten>","ts":"1544150008.070500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"46e5e8a1-ecd9-448e-bbcd-6deec83dd47b","type":"message","user":"U03C4RC8X","text":"&gt; Unlike Array#flatten, this method does not flatten recursively by default.","ts":"1544150022.070700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b1c7e9e8-da5b-49e7-93bb-eab0a3ad200a","type":"message","user":"U7EEZ4LMR","text":"mattnさんがブランチのコミットにコメントしてくれてたの今気づいた","ts":"1544156295.071800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b8e3bdc4-0d4b-4487-8ace-f60b3665e33d","type":"message","user":"U7EEZ4LMR","text":"ありがとうございます :pray:","ts":"1544156300.072000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"53e3170c-d156-403d-a887-6207c0b1ebc4","type":"message","user":"U03C6TEAZ","text":"エラー番号振らないとですね。最後でいいと思いますが。","ts":"1544156450.072300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"424ac99d-4e61-485f-a04c-06b46c792f45","type":"message","user":"U7EEZ4LMR","text":"こうなりました\nよさそう？\n```\n[[...]] \n[]\n```","ts":"1544156492.072400","thread_ts":"1544149784.067000","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":null,"root":{"client_msg_id":"e9d9801d-946e-4ebb-80c3-1abd8ec5faf8","type":"message","user":"U03C4RC8X","text":"```function! s:f() abort\n  let l:xs = []\n  call add(l:xs, l:xs)\n  echo l:xs \"=&gt; [[...]]\n  echo flatten(l:xs) \" !?\nendfunction\n\ncall s:f()```","ts":"1544149784.067000","thread_ts":"1544149784.067000","edited":{"user":"U03C4RC8X","ts":"1544149786.000000"},"last_read":"1544156492.072400","subscribed":true,"reply_count":1,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null}},{"client_msg_id":"7a9de44e-efbc-4efa-8831-3c6e36bea925","type":"message","user":"U7EEZ4LMR","text":"エラー番号！","ts":"1544156511.073200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"75f164f6-f620-4795-9538-50973db2689a","type":"message","user":"U7EEZ4LMR","text":"そういうのもあるのか…","ts":"1544156516.073500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"908230dd-b618-484c-9035-e6afef5dac02","type":"message","user":"U03C6TEAZ","text":"echo は再帰を表示しないんですよね確か。","ts":"1544156520.073600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d4008997-2e77-402d-b804-36626d7439c8","type":"message","user":"U03C6TEAZ","text":"E666 みたいな。","ts":"1544156529.073900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a8867ebf-836c-4f65-b791-cdd468707488","type":"message","user":"U7EEZ4LMR","text":"`EMSG2` とかを適当にコピペしてました\nこのあたりですね","ts":"1544156557.074400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"afc845e4-16b5-40fb-a955-974aa9c18f26","type":"message","user":"U03C6TEAZ","text":"既にあるものは再利用します。","ts":"1544156668.074900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d3b39f73-09e9-4c04-986d-34ab6d79b9cf","type":"message","user":"U7EEZ4LMR","text":"`:echo flatten([], \"abc\")` が動いてしまったので後でなおす","ts":"1544156669.075000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"58b36cd7-19fb-4c81-b9f1-2ce94dad0386","type":"message","user":"U03C6TEAZ","text":"get_tv_number_check の方を使います。","ts":"1544156687.075300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b7e78514-133e-4bad-9cd7-968135447c68","type":"message","user":"U7EEZ4LMR","text":"<https://github.com/mopp/vim/commit/6c1aae9#diff-8b45c2119adf39fb1ea787e5b46cd3e4R3864>","ts":"1544156742.075700","edited":{"user":"U7EEZ4LMR","ts":"1544156816.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ca3baefc-234b-4a82-9b50-3e6b21184c45","type":"message","user":"U7EEZ4LMR","text":"`get_tv_number_chk` を使ってました","ts":"1544156766.076300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7358a488-0811-43b2-808c-00ece6db69d7","type":"message","user":"U7EEZ4LMR","text":"何処か間違ってると思うので見直します","ts":"1544156777.076700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f1888764-07d4-4b42-bbc1-fbb334f05750","type":"message","user":"U03C6TEAZ","text":"おろ、なんだろ。","ts":"1544156780.077100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e23131e4-e3dd-4193-8aa3-92f173eefd5a","type":"message","user":"U7EEZ4LMR","text":"あと、エラー番号ですが、<https://github.com/mopp/vim/commit/6c1aae9#diff-340bc614d1652dad89def0c5224f7648R3> のように テスト書いたときにそれっぽい表示だからいいかなと思ってました","ts":"1544156809.077600","edited":{"user":"U7EEZ4LMR","ts":"1544156813.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a39402bf-75a2-487b-928e-8f2d1c2b62d9","type":"message","user":"U7EEZ4LMR","text":"ここはドキュメントを書くときに一緒にやろうと思います","ts":"1544156839.078500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4f337f4e-cc8e-45ae-9e4f-3440038b7b1e","type":"message","user":"U03C6TEAZ","text":"あぁ、必要なさげですね。","ts":"1544156928.079000","team":"T03C4RC8V","reactions":[{"name":"woman-gesturing-ok","count":1,"users":["U7EEZ4LMR"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"73a693d4-28d1-4303-afce-dd89b4e7f5b3","type":"message","user":"U7EEZ4LMR","text":"無限再帰リスト、厄介かもしれない","ts":"1544157105.079700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"831c05ff-069a-446a-b0b8-75d65b56dfd1","type":"message","user":"U7EEZ4LMR","text":"うじひささんのを拡張するとこうなる\n```\nfunction! s:f() abort\n  let l:xs = [1]\n  call add(l:xs, l:xs)\n  echo l:xs\n  \" =&gt; [1, [...]]\n  echo l:xs[0]\n  \" =&gt; 1\n  echo l:xs[1]\n  \" [1, [...]]\n  echo flatten(l:xs)\n  \" =&gt; [1, 1]\nendfunction\n\ncall s:f()\n```","ts":"1544157120.080100","edited":{"user":"U7EEZ4LMR","ts":"1544157180.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"006d6a5e-6700-4b4a-9097-e0f127f7497a","type":"message","user":"U7986PPFH","text":"テスト中にGC走らせるなら `test_garbagecollect_now()`","ts":"1544157275.081200","thread_ts":"1544157275.081200","reply_count":1,"replies":[{"user":"U7EEZ4LMR","ts":"1544157450.082300"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f1df4147-5b5c-42ef-92f3-4027dddcb8d8","type":"message","user":"U03C4RC8X","text":"一つの手は、無限再帰リストは一旦はじく","ts":"1544157364.081500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8c141b9b-2fe5-4fdb-adbb-1c80475411e5","type":"message","user":"U03C4RC8X","text":"引数のlistに無限再帰リストがあると即エラーとかはアリ","ts":"1544157378.081900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7af68754-ab9b-4e1b-b3a0-6e7836bdf885","type":"message","user":"U03C4RC8X","text":"ただし将来の拡張を許すみたいな","ts":"1544157400.082200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"319c26d5-d653-4839-a3ab-5050db7717bf","type":"message","user":"U7EEZ4LMR","text":"ありがとうございます","ts":"1544157450.082300","thread_ts":"1544157275.081200","parent_user_id":"U7986PPFH","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cf99130e-993e-453b-a4fb-8ccfd789986f","type":"message","user":"U7EEZ4LMR","text":"ふむふむ、今見てるリストポインタが、要素にあったらエラー、とかはすぐにできそう","ts":"1544157621.083000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"59466bd8-f2eb-4a8f-9fae-92bff2ead923","type":"message","user":"U7EEZ4LMR","text":"入れ子になったときを考えると何処かに値を持たないといけないきがしています","ts":"1544157657.083500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7c42b96f-bd40-4001-b977-c29e40a0834c","type":"message","user":"U7EEZ4LMR","text":"あー","ts":"1544157749.084000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a2cd56d6-ed87-46f9-8433-f84c733a3126","type":"message","user":"U7EEZ4LMR","text":"```\n  let y = [1]\n  let z = [2]\n  call add(y, z)\n  echo y\n  \" =&gt; [1, [2]]\n  call add(z, y)\n  echo z\n  \" =&gt; [2, [1, [...]]]\n  echo z[0]\n  \" =&gt; 2\n  echo z[1]\n  \" =&gt; [1, [2, [...]]]\n\n  let aaa = flatten(z)\n  echo aaa\n  \" =&gt; [2, 1, 2, 1, 2, 1, 2, 1, 2, 中略 2, 1, 2, 1, 2, [...]]]\n  echo len(aaa)\n  \" =&gt; 2552\n\n  let aaa = flatten(z, 10)\n  echo len(aaa)\n  \" =&gt; 642652\n```","ts":"1544157857.084300","edited":{"user":"U7EEZ4LMR","ts":"1544157939.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"35de013f-4032-4a2a-a84f-1a1d4aaa81f8","type":"message","user":"U7EEZ4LMR","text":"これはアカン","ts":"1544157861.084600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"217dec98-ed6b-4401-8087-5811dcdea9b8","type":"message","user":"U7EEZ4LMR","text":"少し考えます","ts":"1544157981.085000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c6a83cfa-ef72-43a5-818d-90820f0a8c8f","type":"message","user":"U7EEZ4LMR","text":"めっちゃプロの指摘がもらえて感謝 :pray:","ts":"1544157992.085300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"30ea3585-80fc-4e95-ae62-947301cb8e1f","type":"message","user":"U03C4RC8X","text":":goodpoem:","ts":"1544158162.085500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8f2439eb-3282-42fa-8baf-ef5912a64dda","type":"message","user":"U7D5LRRQD","text":"残念……","ts":"1544158915.085700","thread_ts":"1544096944.043200","parent_user_id":"U7EEZ4LMR","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"02ca99a8-c0d8-4a4b-95bf-1f1c4f14a8cf","type":"message","user":"U7986PPFH","text":"細かいこと言うと `list_flatten(list, maxdepth, current_depth)` って、現状 `maxdepth` は `current_depth` と比較しているだけなので\n`list_flatten(list, maxdepth)` でいいですよね","ts":"1544166625.087800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f8d4f253-3d94-43f8-a8be-f1bb6cd6da59","type":"message","user":"U7EEZ4LMR","text":"あ、確かに引き算していくだけでよさそうでしたね\nありがとうございます","ts":"1544166665.088200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b4fbebec-0334-42aa-a168-ec1d9017bfb8","type":"message","user":"U7EEZ4LMR","text":"直しました","ts":"1544167075.089100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8e60a1a3-c9c3-4a40-925c-4c8d97748c65","type":"message","user":"U7986PPFH","text":"`maxdepth &lt;= 0` でないとマズいです","ts":"1544167797.090300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0047bf78-e4f2-47ed-8c10-76c3dc53680b","type":"message","user":"U7EEZ4LMR","text":"ア、入力で負が入るとまずいですね","ts":"1544167846.091200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"80ce8da9-3b89-43a7-add3-5acf161ea3be","type":"message","user":"U7EEZ4LMR","text":"というか、負の場合はエラーを上げてしまってもいいかもですね","ts":"1544167858.091600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"885e13b7-1308-4809-aa2d-65f282f62efd","type":"message","user":"U7986PPFH","text":"そうですね","ts":"1544167866.091900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e032ef12-1db3-4ccb-b9da-0088eec60d55","type":"message","user":"U7EEZ4LMR","text":"`list_flatten` 関数としては  `&lt;= 0`  に直します","ts":"1544167883.092300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"15766d94-4f63-482d-8dea-c2dfdacb0624","type":"message","user":"U7EEZ4LMR","text":"`uchar` にしてもいいかも","ts":"1544167898.092900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"63a04711-bf5e-47a2-bc45-4389ebb86560","type":"message","user":"U03C71D7H","text":"無限にやりたい場合は 0?","ts":"1544167900.093000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1b2f4ced-2675-496c-8228-78626f750e40","type":"message","user":"U7EEZ4LMR","text":"無限にはできるようになってないです","ts":"1544167931.093600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5a56cac2-84c2-4e0c-bdc3-ea87f6b8ad0f","type":"message","user":"U7EEZ4LMR","text":"明示的に指定するか、デフォルト `maxfundepth`  か","ts":"1544167948.094300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"aa3944e6-2915-484d-8019-f6e6da233c7d","type":"message","user":"U03C71D7H","text":"そうなのか","ts":"1544167948.094400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3a8b2d74-14cb-40d1-b83c-d3ac1629a47a","type":"message","user":"U7EEZ4LMR","text":"上限を `maxfuncdepth` にしてもいいのかも","ts":"1544167962.094800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0b0a2130-d856-4496-8e12-d73721ff5dde","type":"message","user":"U03C71D7H","text":"maxfundepth は関係ないのでは?","ts":"1544167964.094900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fc40d3b4-f9ce-4be6-b7ac-3f523e53c060","type":"message","user":"U7EEZ4LMR","text":"<https://vim-jp.slack.com/archives/C83UXKU86/p1543852949016500>","ts":"1544168073.096200","attachments":[{"fallback":"[December 3rd, 2018 8:02 AM] tyru: あーいやフラグより max のネスト回数を渡せた方が良いのかな (省略時は `maxfuncdepth` オプションの値？)","id":1,"author_id":"U0M7GCBPD","author_name":"tyru","author_subname":"tyru","author_link":"https://vim-jp.slack.com/team/U0M7GCBPD","author_icon":"https://secure.gravatar.com/avatar/5fdf83c448b8503add52517c7de0e3cc.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2F272a%2Fimg%2Favatars%2Fava_0026-48.png","text":"あーいやフラグより max のネスト回数を渡せた方が良いのかな (省略時は `maxfuncdepth` オプションの値？)","mrkdwn_in":["text"],"blocks":null,"footer":"Posted in #dev","ts":1543852949.016500,"from_url":"https://vim-jp.slack.com/archives/C83UXKU86/p1543852949016500","original_url":"https://vim-jp.slack.com/archives/C83UXKU86/p1543852949016500"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b653687f-c76c-446c-ba00-4eb2500b6416","type":"message","user":"U03C6TEAZ","text":"viml の値なので使わない方がいいかな","ts":"1544168073.096300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5f8847f1-3117-48a2-b81a-c8ffeacb8efe","type":"message","user":"U7EEZ4LMR","text":"ここで言われて、よさそうだったので追加してましたが、ここも直したほうがよさげですか","ts":"1544168098.097000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3a23b533-3c23-4528-abc2-866509f40e63","type":"message","user":"U7EEZ4LMR","text":"深さ0が指定されたら何もしない、を想定しています","ts":"1544168139.097900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"661413b9-47b9-46e6-989c-d3b59e53437c","type":"message","user":"U03C6TEAZ","text":"これは聞いてみないと分からないけど Bram の趣味だとデフォルト値が無限は嫌って思いそう。","ts":"1544168295.098500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bdf709c8-7206-4527-9b19-8894fa744013","type":"message","user":"U03C6TEAZ","text":"あと got_int のチェックってありましたっけ。","ts":"1544168308.098800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"66aa5519-b6b7-4de9-b4f2-d56e0458ec5c","type":"message","user":"U03C6TEAZ","text":"list_flatten の頭で if (got_int) return; を入れた方がいいかな。","ts":"1544168380.099200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"19f302f6-7a26-4214-9eb9-85984f9fff3b","type":"message","user":"U03C6TEAZ","text":"ui_breakcheck か。","ts":"1544168393.099400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"812b09c6-bc0a-4804-b87c-d13e0f4d204e","type":"message","user":"U03C6TEAZ","text":"```\n\tui_breakcheck();\n\tif (got_int)\n\t    return;\n```","ts":"1544168463.100000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3fa5055a-58ca-4ece-a6a2-cd4baed00aef","type":"message","user":"U7EEZ4LMR","text":"割り込みフラグですか","ts":"1544168465.100100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4a281e75-fd9c-469f-bb4f-6c7bed02e6ee","type":"message","user":"U03C6TEAZ","text":"これ入れるなら無限でもいいかも。","ts":"1544168477.100600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9f8e1407-d262-4daf-9b5e-2a2440ce241c","type":"message","user":"U7EEZ4LMR","text":"確かに長過ぎたときに途中で中断できたほうが良さそう","ts":"1544168478.100700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"38a48cd5-1680-4600-bc08-cfc02c7b922b","type":"message","user":"U7986PPFH","text":"depth無限だとスタック溢れて落ちるのでよろしくない","ts":"1544168609.101700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"415ccb96-eebb-464a-b890-f0d57dbe9c89","type":"message","user":"U7986PPFH","text":"無限再帰リストを渡した場合","ts":"1544168663.102300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7b236b57-9041-4fa3-a3d8-3da8b063a7e9","type":"message","user":"U03C6TEAZ","text":"デフォルト値 255 とかにしとくのがいいのかな。","ts":"1544168740.103100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"52294c8d-5998-4d2c-981d-ecbdc4c6db7d","type":"message","user":"U03C6TEAZ","text":"255 大きすぎるな。","ts":"1544168751.103400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"91094439-d855-458b-897e-521e7fec77b3","type":"message","user":"U7EEZ4LMR","text":"オプションを追加とかせずにハードコードOKなんですか？","ts":"1544168768.103700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"130d9c3f-62ae-4b50-9099-e0ba2ad6d61e","type":"message","user":"U03C6TEAZ","text":"引数で変えられる、コメントがある、ならいいかなというのが僕の感想。(異論はあると思う)","ts":"1544168807.104300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a15293d1-a85f-4297-b66c-713b750dc210","type":"message","user":"U03C6TEAZ","text":"今見るとマージして欲しい PR 結構あるなー。","ts":"1544168831.104800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7fc50742-b840-476a-a73e-902e0a2b52eb","type":"message","user":"U03C71D7H","text":"パッチ全然見てなかったけど、再帰で実装してるのか。まあその方が圧倒的に楽そうだしそりゃそうか","ts":"1544168861.106000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9c5cc314-a231-455d-b5f0-414c5a1894f6","type":"message","user":"U7EEZ4LMR","text":"であれば、16くらいで十分そうな気がしました","ts":"1544168865.106100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bde88422-c9bd-417a-a441-b2806470cd5a","type":"message","user":"U03C71D7H","text":"デフォルト値、無限がよくないならいっそ1でもいい気もする","ts":"1544168888.106500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"573ce8e7-4467-4c3b-af4a-d9344464b0c0","type":"message","user":"U7EEZ4LMR","text":"あー、あいやさんが言ってたやつですね","ts":"1544168900.106900","team":"T03C4RC8V","reactions":[{"name":"parrot","count":1,"users":["U7D5LRRQD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1d264f3e-7124-42af-9005-f85f7e29b6a2","type":"message","user":"U7EEZ4LMR","text":"そうか、こういう議論の結果1になったのかも…","ts":"1544168908.107200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7549f5d8-5b6b-4ad0-a190-4e1ea7076230","type":"message","user":"U7EEZ4LMR","text":"他の実装でも1があるって言うとそれっぽい理由にはなるので1でもいい気がしてきた","ts":"1544168943.107800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4d66db4a-b63a-43b7-bcae-af2e02a99075","type":"message","user":"U7EEZ4LMR","text":"でも、1ではたまに不便な気がする\nオプションがあるから十分大きな値を入れればいいんですけど。","ts":"1544169011.109000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"92c46a46-1b24-4e87-88d7-dabb17be1acb","type":"message","user":"U03C71D7H","text":"十分大きな値を考えるのが面倒なので無限が欲しいのだよな。個人的には","ts":"1544169045.109500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"abfbfe33-983e-46be-9158-7471a321b5b6","type":"message","user":"U03C71D7H","text":"どうしてもスタック溢れ気にするならループで実装するかな…面倒そうだけど","ts":"1544169065.110100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"71438593-059b-41fb-9bc7-792cf424a5c0","type":"message","user":"U03C6TEAZ","text":"一方向じゃないのでループでは難しい(配列がいる)かも","ts":"1544169107.110700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9a0af5dc-0789-4a25-97f5-8393d4c644f6","type":"message","user":"U03C71D7H","text":"配列はいると思います","ts":"1544169128.111000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"17ce51b6-fd25-4877-a060-9b108896cb09","type":"message","user":"U03C6TEAZ","text":"```\n<https://github.com/vim/vim/pull/2834>\n<https://github.com/vim/vim/pull/2875>\n<https://github.com/vim/vim/pull/3612>\n<https://github.com/vim/vim/pull/3638>\n<https://github.com/vim/vim/pull/3639>\n```\n僕のマージして欲しいリスト","ts":"1544169139.111300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"807e12fb-3bfe-407b-80e1-06c7a4ec8aeb","type":"message","user":"U03C71D7H","text":"めっちゃたくさんある","ts":"1544169146.111600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"af46d54b-743d-4acc-8d1d-f72b88286afc","type":"message","user":"U7EEZ4LMR","text":"すごい","ts":"1544169148.111700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"da6afcee-6de0-498f-af4c-96cab6ae6556","type":"message","user":"U03C6TEAZ","text":"completepath は今すぐ欲しい。","ts":"1544169195.112300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"97c66c4c-ca84-45b3-8f92-09f10d1e4fa6","type":"message","user":"U03C6TEAZ","text":"ま、でもポインタの配列が一度 alloc 出来ればループの場合は以降落ちる心配ないので良いかもですね。","ts":"1544169327.112900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0af018c8-6402-401a-b648-5645b48cca93","type":"message","user":"U03C6TEAZ","text":"あと速い。","ts":"1544169351.113100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"44d50f7d-4a71-41c3-9c7f-5a839918ea49","type":"message","user":"U03C71D7H","text":":sokudo:","ts":"1544169375.113300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"19f455d0-32f4-49da-9699-6156f4aab893","type":"message","user":"U7EEZ4LMR","text":":sokudo:","ts":"1544169391.113500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f8e9469f-773f-4835-b4f9-ce61dd1a1672","type":"message","user":"U7EEZ4LMR","text":"最初はthincaさんの言うように無限展開してほしかったけど、実装してるときにtyruさんに言われたのを思い出して上限を付けた (なお、スタック溢れのことは忘れてた)\nでも、再帰ではなくてループでやれば無限でもよさそうだし(割り込み確認はいれる)、速度もはやい、でも実装が難しそう、という流れ","ts":"1544169516.115700","edited":{"user":"U7EEZ4LMR","ts":"1544170004.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"99257297-758d-42d3-9b8c-b02a1e70039e","type":"message","user":"U03C71D7H","text":"mopp「ループで実装するの勉強になりそうなのでやってみます」","ts":"1544169545.116100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"65af4ee2-7fef-4615-9859-33b59634d87b","type":"message","user":"U7EEZ4LMR","text":"一体誰なんだ…","ts":"1544169570.116600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"817d0591-78fe-446a-bcf6-9eb59f4217dc","type":"message","user":"U06ECBRTJ","text":"<https://twitter.com/mopp_jp/status/321972713759571968>","ts":"1544169781.116800","attachments":[{"fallback":"<https://twitter.com/Mopp_jp|@Mopp_jp>: ふぁぼられの数だけVimのプラグイン書きます！","id":1,"author_name":"もぷり","author_subname":"@Mopp_jp","author_link":"https://twitter.com/Mopp_jp/status/321972713759571968","author_icon":"https://pbs.twimg.com/profile_images/919125609283969025/3F2-erNZ_normal.jpg","text":"ふぁぼられの数だけVimのプラグイン書きます！","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1365599251,"service_name":"twitter","from_url":"https://twitter.com/mopp_jp/status/321972713759571968","original_url":"https://twitter.com/mopp_jp/status/321972713759571968"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a1613167-389f-4ae3-a4b3-9f727522f511","type":"message","user":"U06ECBRTJ","text":"この人だと思う","ts":"1544169789.117100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6caa3347-83d1-44c6-aa31-4a822f1aeada","type":"message","user":"U7EEZ4LMR","text":"はい、キレました","ts":"1544169821.117400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3ea8868f-0de1-44d9-a5da-174500f76321","type":"message","user":"U7EEZ4LMR","text":"5年も前の乗っ取りツイートを晒さない","ts":"1544169843.118000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e4a5778f-b42f-460e-8458-41e231cde4a4","type":"message","user":"U06ECBRTJ","text":"ブラウザに、mopp って入れたら、これが最初に出てくるんで…w","ts":"1544169863.118500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9c05046d-a8aa-4485-a207-8086dd642172","type":"message","user":"U03C6TEAZ","text":"1日1個作っても1年以上かかる。","ts":"1544169869.118800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c27bcb12-fb15-42ae-adf3-89331a77ec1c","type":"message","user":"U7EEZ4LMR","text":"ひどすぎる…","ts":"1544169870.118900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a9ba6d85-21ee-45a6-9c92-f195582af622","type":"message","user":"U7EEZ4LMR","text":"なんかもう400とかになってた気がする","ts":"1544169878.119300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7f8188aa-0a0c-4f1d-9ac5-43762cbd655e","type":"message","user":"U06ECBRTJ","text":"377","ts":"1544169883.119600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a197148c-1132-4c09-96b0-671389ebeb14","type":"message","user":"U7EEZ4LMR","text":"死ぬまでに終わるかどうか","ts":"1544169890.119900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"64ffa019-abdd-4e3b-8444-6d8913f56026","type":"message","user":"U03C71D7H","text":"mattn さんなら地味にそのうち達成できそう","ts":"1544169897.120200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6722d0c6-82fa-4e9b-9dff-60e2a7d92dab","type":"message","user":"U7EEZ4LMR","text":"わかる","ts":"1544169901.120500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"44a32002-f0ab-4ad0-ab69-c5feaa2a04ea","type":"message","user":"U03C6TEAZ","text":"unfav して fav するとさらに増えると聞きました。","ts":"1544169903.120600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"64b20e1a-7174-4dea-a9a3-4a79b6976731","type":"message","user":"U7EEZ4LMR","text":"だめです","ts":"1544169912.121200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5c7a2d58-6e28-46d0-b3cc-46f1435805c8","type":"message","user":"U782D5DF1","text":"増やそうとしたらもう fav してた","ts":"1544169919.121600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"62bbfc7d-e916-4a53-9e70-d653a3b05d3f","type":"message","user":"U06ECBRTJ","text":"vim 自体に関数追加したら、10個分くらい消費でいいよ","ts":"1544169930.122000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"be96cb81-4d4a-4223-ac56-83d110984005","type":"message","user":"U03C4RC8X","text":"`thincaさんの言うように`, `tyruに言われた`","ts":"1544169938.122200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1d38d856-a959-4dd2-a218-f9965f4aa9a0","type":"message","user":"U06ECBRTJ","text":"何だこの上から目線…","ts":"1544169946.122500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cb9e8c9f-1503-4f19-83a6-3e7b9cee03a0","type":"message","user":"U7EEZ4LMR","text":"とくにそういう意図はないんです…","ts":"1544169974.122900","team":"T03C4RC8V","reactions":[{"name":"goodpoem","count":1,"users":["U03C4RC8X"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0b34df5b-d038-4fd1-9cce-d98058066632","type":"message","user":"U7EEZ4LMR","text":"普通にさん付け忘れていただけです…","ts":"1544169995.123500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7762de79-c2d3-4f96-86e0-88d96ef610a0","type":"message","user":"U7EEZ4LMR","text":"editしておいた","ts":"1544170012.123900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c118ba7e-b6ad-4042-b7d5-14711b8bf393","type":"message","user":"U03C71D7H","text":"話が逸れたけどひとまずループでの実装にチャレンジすると言う話だったかな","ts":"1544170030.124700","team":"T03C4RC8V","reactions":[{"name":"goodpoem","count":1,"users":["U03C4RC8X"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c91a2bb3-3586-4cfb-8f8a-6145dcb6bfd0","type":"message","user":"U7EEZ4LMR","text":"とりあえず考えては見ますけど、再帰をループに直すの苦手","ts":"1544170052.125300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c59e5de7-609b-4842-8e3d-6e9bb80fe45f","type":"message","user":"U03C71D7H","text":"わかる","ts":"1544170065.125600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3d900461-a2a6-45ad-862c-7f1b78f5222d","type":"message","user":"U03C71D7H","text":"実際面倒なのでやってみて無理そうだったら諦めるのも手","ts":"1544170079.126100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d99ba4f5-4e88-4dbe-b6a8-df413c9d02a6","type":"message","user":"U7EEZ4LMR","text":"あと、 list_extendを使ってたんですがこれ、内部でlistitemのメモリ確保して、コピーしているような気がする","ts":"1544170090.126400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"08e665f5-6346-4096-8707-00c2caf60463","type":"message","user":"U03C6TEAZ","text":"それでいいと思います。","ts":"1544170785.126900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3fdb300f-fab0-4b3d-9954-526df4499779","type":"message","user":"U03C6TEAZ","text":"```\nlet x = [1]\nlet y = [x]\nlet z = flatten(y)\nlet x[0] = 2\necho z\n```\nこれをどうするか問題。","ts":"1544170847.127200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b633cbea-37c9-45cc-9ae2-0c897df670b6","type":"message","user":"U03C6TEAZ","text":"ruby も `[1]` ね。","ts":"1544170901.127600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9d7b3712-878c-434d-b6b3-4baad403e020","type":"message","user":"U03C71D7H","text":"全部コピーがシンプルっちゃシンプル。他の関数はコピーしないと言われるとまあそうなのだけど…他の関数と違って再帰的に適用されるので別扱いでもいいかな派です","ts":"1544170971.128700","edited":{"user":"U03C71D7H","ts":"1544170980.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8f7ef00e-0bed-44a9-b2f9-e1a3606d0dc6","type":"message","user":"U03C6TEAZ","text":"copy_tv はプリミティブはコピーだけど、list/dict/func などはリファレンスカウンタを増やすだけなので大丈夫。","ts":"1544171033.129200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d6232873-29ee-4d01-a23b-7571aec86c73","type":"message","user":"U03C6TEAZ","text":"flatten の場合はループにするの簡単そうだけどね。もっかい同じ位置を処理すれば良さそうだし。","ts":"1544171996.131100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"184cf1de-97bb-4693-b4d0-278e51773f52","type":"message","user":"U03C6TEAZ","text":"で、もっかいの回数がmaxで毎回カウントリセット。","ts":"1544172045.132300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"53ecd23c-98bf-4d90-9bef-838bad46bec3","type":"message","user":"U7D5LRRQD","text":"どうでもいいことなんですが、折角のCなので末尾再帰に直すとループに最適化されそう（最適化オプションによるだろうけど）","ts":"1544179834.133500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c2c29e39-692e-4208-8da6-5dec6be23b29","type":"message","user":"U03C6TEAZ","text":"こんな感じでループに出来る気がしますがどうでしょ？\n```\n    void\nlist_flatten(list_T *list, long maxdepth)\n{\n    listitem_T\t*item;\n    int\t\tn;\n\n    n = 0;\n    item = list-&gt;lv_first;\n    while (item != NULL &amp;&amp; !got_int)\n    {\n\tline_breakcheck();\n\n\tif (item-&gt;li_tv.v_type == VAR_LIST)\n\t{\n\t    listitem_T  *tmp = item-&gt;li_next;\n\n\t    vimlist_remove(list, item, item);\n\t    list_extend(list, item-&gt;li_tv.vval.v_list, tmp);\n\n\t    if (item-&gt;li_prev == NULL)\n\t\titem = list-&gt;lv_first;\n\t    else\n\t\titem = item-&gt;li_prev-&gt;li_next;\n\n\t    if (++n &gt;= maxdepth)\n\t    {\n\t\tn = 0;\n\t\titem = tmp;\n\t    }\n\t}\n\telse\n\t{\n\t    n = 0;\n\t    item = item-&gt;li_next;\n\t}\n    }\n}\n```","ts":"1544191353.135300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c6508b58-d9d5-4479-b93f-1f6638cb8f63","type":"message","user":"U03C6TEAZ","text":"タブ崩れ感","ts":"1544191370.135600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0fb005fe-b1ac-413e-81a6-5d5754311b5a","type":"message","user":"U03C6TEAZ","text":"```\necho flatten([[0,[1]],2,[[3],4]], 1)\nlet x = [1]\nlet y = [x]\nlet z = flatten(y)\nlet x[0] = 2\necho z\n```\nこれ動いてそう。","ts":"1544191872.135900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
