[{"client_msg_id":"14630092-150f-4adb-a360-c4fba34373f6","type":"message","user":"U06BRP8VD","text":"ターミナルにキーを送り込んでコマンドの結果を見るんだけど、結果が2行目に表示されてることを決め打ちで期待してる。なのでPROMPTが2行になってると結果は3行目に表示されるから…\n\nそのことに気が付いて笑ってしもうた。","ts":"1595257229.087100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EdMhQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"baeb5941-4ceb-4fe1-9761-aa95e155a03e","type":"message","user":"U06BRP8VD","text":"<https://mattn.kaoriya.net/software/why-i-use-cmd-on-windows-2020.htm>\n\n今日のmattnさんの記事にもあったようにAutorunでバッチ読み込んでて、PROMPTを2行とかに書き換えてるようなときVimのテストが失敗する。さらにmsys2 の more などにパスが通っていても不可。\n\nそれを良い感じに制御する必要がある…","ts":"1595257816.088900","attachments":[{"fallback":"Big Sky: Big Sky :: Windows ユーザは cmd.exe で生きるべき 2020年版","id":1,"title":"Big Sky :: Windows ユーザは cmd.exe で生きるべき 2020年版","title_link":"https://mattn.kaoriya.net/software/why-i-use-cmd-on-windows-2020.htm","text":"システム開発屋がひっそり語るぼやき","thumb_url":"https://mattn.kaoriya.net/images/logo.png","blocks":null,"service_name":"Big Sky","service_icon":"https://mattn.kaoriya.net/favicon.ico","thumb_width":113,"thumb_height":113,"from_url":"https://mattn.kaoriya.net/software/why-i-use-cmd-on-windows-2020.htm","original_url":"https://mattn.kaoriya.net/software/why-i-use-cmd-on-windows-2020.htm"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2irI"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UV2PFNP0B","text":"<@UV2PFNP0B> has joined the channel","ts":"1595262058.089200","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"446920d1-71cb-499f-8c3c-7c3f190976ac","type":"message","user":"U06BRP8VD","text":"Test_classes_re1 &amp; 2 直した。\n<https://github.com/vim/vim/pull/6502>","ts":"1595267512.089600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tFz/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"be25da2e-b110-4d4d-8b24-6319a6e85ab6","type":"message","user":"U06BRP8VD","text":"あとは Test_undofile_earlier が flaky に失敗する件だけなんとかすれば、ローカルのWinでテストをぜんぶ通す目途が立ちそう。","ts":"1595267578.090300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oH1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f53e3572-7814-4e11-8cc1-ccf93842d731","type":"message","user":"U06BRP8VD","text":"うーん…Winで enc=utf-8 のとき、iskeyword のデフォルトをUNIXとかその他のやつに合わせたほうが良いかもなぁ。","ts":"1595267931.091500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3vxZ4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"db912b7c-446e-4971-8289-6a92ca047bfa","type":"message","user":"U6XP9LZ6V","text":"`[[:keyword:]]` がfailするのに `\\k` はfailしないのはなぜだろう。","ts":"1595270181.092800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RWEY/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"300d4348-c46b-4ade-a1c9-ee2fa532b0bf","type":"message","user":"U06BRP8VD","text":"enc=utf-8じゃないから、とか?","ts":"1595293031.093000","edited":{"user":"U06BRP8VD","ts":"1595293046.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zMA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bd7f40cb-8e33-4983-b92c-a9d37f2f0ac1","type":"message","user":"U06BRP8VD","text":"flaky test の失敗条件は5回とも全部失敗するか同じエラーで続けて失敗するかなんだけど、どうも lambda のなかでassert_xxxが失敗するとエラーメッセージが別物(ラムダ関数には実行毎に別のIDが振られる)になって同じエラーとして見なされないみたいなんだよね。","ts":"1595294174.094500","edited":{"user":"U06BRP8VD","ts":"1595294232.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cpp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cf6e46b9-fc4f-4265-8b9f-cc0d860ea772","type":"message","user":"U06BRP8VD","text":"そのせいでこういうエラーチェックは flaky が期待通り機能しないっぽ\n\n```call WaitForAssert({-&gt; assert_equal(a:value, getline(2))})```","ts":"1595294262.095100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kJutC"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7c9c4b17-b6ab-4dee-b922-f49c6db06894","type":"message","user":"U06BRP8VD","text":"`PROMPT` 鬼門だわ…","ts":"1595296522.095500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AQx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b12d0ef2-a41e-4055-bc19-14c1b73bf42c","type":"message","user":"U06BRP8VD","text":"PROMPTの設定値って、子のcmdに引き継がれるみたいなんだけど、どうやって引き継いでるんだろう?","ts":"1595296545.096000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5Ytl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"80644b02-c517-4e87-b9fd-2bd5994c9ee7","type":"message","user":"UAZ33BKV2","text":"子プロセスへの環境変数継承と同じという意味で環境変数として、じゃなく?","ts":"1595296675.096700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RDDkV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"968de51d-b5f0-4878-96b5-4300c6396bc5","type":"message","user":"U03C6TEAZ","text":"AutoRun の2重起動チェックしとくと設定されないかも。","ts":"1595296802.097100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dmsY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8ab384eb-a6fa-4bd1-aab5-222036b65775","type":"message","user":"U03C6TEAZ","text":"cmd.exe から `start` で開いた cmd.exe も AutoRun 実行されますし。","ts":"1595296835.097500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Uo3d"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c24a0195-18d0-4b8d-bdd6-906de7535a88","type":"message","user":"U06BRP8VD","text":"どうも AutoRun じゃないっぽいのよ。 コマンドプロンプトの中から`cmd /d` (AutoRun読まない)で子cmd起動したときに、親側の PROMPT の状態が引き継がれるので。","ts":"1595296931.098700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5iR1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e8adf805-02be-4bb7-a6c3-bf8d658f896a","type":"message","user":"U06BRP8VD","text":"これ UNIX のプロンプトも2行にしてるとテスト落ちるんかな。いや落ちるはずだな。","ts":"1595296971.099100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+ulbB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2d460b0d-cda1-4169-9f99-73c77c8061ca","type":"message","user":"U03C6TEAZ","text":"テストの時だけ PROMPT / PS1 設定して回避？","ts":"1595297035.099800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gNq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e572a8be-f583-4fa0-8488-b73aeaf61d29","type":"message","user":"U06BRP8VD","text":"その必要あるかも。","ts":"1595297356.100100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=QE"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5bb33678-3291-40ef-93c1-988d10f16ff9","type":"message","user":"U06BRP8VD","text":"もしくは実行結果のチェックの方法を行数固定じゃなくて相対位置で取るようにするか。","ts":"1595297387.100700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1Ezz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a8101e3f-78b3-45a2-842a-1bd95809aa73","type":"message","user":"U06BRP8VD","text":"一応一部のテストが相対位置によるチェックで解決できることは確認できた。","ts":"1595297408.101200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Y8rk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a288d828-f0f1-457d-9e78-67a9d577c51b","type":"message","user":"U06BRP8VD","text":"あとUNIXでも落ちることを確認w","ts":"1595297418.101500","thread_ts":"1595297418.101500","reply_count":1,"replies":[{"user":"U06BRP8VD","ts":"1595297575.101700"}],"team":"T03C4RC8V","reactions":[{"name":"tiken","count":2,"users":["UAZ33BKV2","U06ECBRTJ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/ByO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"857d99ea-913b-4474-8283-30a2ac3982ed","type":"message","user":"U06BRP8VD","text":"落ちるってことばはよくないね。\n\n複数行のプロンプトを設定しているとテストが失敗するw","ts":"1595297575.101700","thread_ts":"1595297418.101500","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SX9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0965ae06-1e55-4b11-a096-bb0c97492c65","type":"message","user":"U06BRP8VD","text":"そしてPS1 の書き換えがうまくいかん。なんか他にもいろいろ表示されてる感がある…","ts":"1595297976.102300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bAzIF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"55993e83-076d-4aa2-a7dd-3987fa93c657","type":"message","user":"U06BRP8VD","text":"…","ts":"1595298340.102600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6NsVQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7e9eb0a0-59e1-4b1b-98ae-dcc7cee42f2a","type":"message","user":"U06BRP8VD","text":"UNIX、複数行かどうか以前に\n\n```To run a command as administrator (user \"root\"), use \"sudo &lt;command&gt;\".\nSee \"man sudo_root\" for details.```\nっていうメッセージがプロンプトの前に表示されてて `getline(2)` が全然仕事してないよ…","ts":"1595298419.104000","thread_ts":"1595298419.104000","reply_count":1,"replies":[{"user":"U06BRP8VD","ts":"1595298835.105900"}],"team":"T03C4RC8V","reactions":[{"name":"fuita","count":2,"users":["UAZ33BKV2","U06ECBRTJ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"f8c"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"abb76412-4087-4931-a02b-3ba71e85aa87","type":"message","user":"U06BRP8VD","text":"`set shell?` が `/bin/bash` になってるんだけど、これを環境変数 SHELL から `/bin/sh` に変えてあげて、さらに PS1 を `$ ` に設定してあげたら出力が綺麗になった。","ts":"1595298744.105400","team":"T03C4RC8V","reactions":[{"name":"+1::skin-tone-5","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"usLO+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0cb35078-51a4-4b41-b216-caf5832d9192","type":"message","user":"U06BRP8VD","text":"=ちゃんとうごいた","ts":"1595298760.105700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rfU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"82d02f98-e61d-4b2d-8e07-a70c784a2032","type":"message","user":"U06BRP8VD","text":"ていうかこのメッセージはどういうときにでてくるの… vim で term_start() しても再現しない…","ts":"1595298835.105900","thread_ts":"1595298419.104000","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"f+8we"}],"root":{"client_msg_id":"7e9eb0a0-59e1-4b1b-98ae-dcc7cee42f2a","type":"message","user":"U06BRP8VD","text":"UNIX、複数行かどうか以前に\n\n```To run a command as administrator (user \"root\"), use \"sudo &lt;command&gt;\".\nSee \"man sudo_root\" for details.```\nっていうメッセージがプロンプトの前に表示されてて `getline(2)` が全然仕事してないよ…","ts":"1595298419.104000","thread_ts":"1595298419.104000","reply_count":1,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"f8c"}]}},{"client_msg_id":"1a0bed82-39cc-46b3-942a-bdac44a3f44e","type":"message","user":"U06BRP8VD","text":"もはやテストの実行環境を正規化するよりも、チェック方法をフレキシブルにするほうが楽かもしれない…","ts":"1595299167.106900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MqO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"01ab366b-322c-403e-9fea-cf7a724196fd","type":"message","user":"UAZ33BKV2","text":"sudoはちょっと謎ですね...\nそれはそれとして、チェック方法は両方(環境を規格化する、チェックは影響を受けにくくする)すすめないといけない気はしますが、現状やりやすいように良くしていくくらいがよいのではないかと(労力的に)","ts":"1595299463.108400","edited":{"user":"UAZ33BKV2","ts":"1595299480.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AJ0c"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8f100673-8b70-48e2-a48b-c9355dc50e35","type":"message","user":"U6XP9LZ6V","text":"sudoのは、`~/.sudo_as_admin_successful` が無いときに出るメッセージじゃないですか？","ts":"1595307825.109500","thread_ts":"1595307825.109500","reply_count":1,"replies":[{"user":"U06BRP8VD","ts":"1595309347.110300"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Tbr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0825dffc-0235-4c3e-bf0c-189d2f0c3da5","type":"message","user":"U7H4TJEG0","text":"<https://vim-jp.slack.com/archives/C83UXKU86/p1594638091040200> この件は8.2.1211で修正されていました (closesがなかったので気がついてなかった)","ts":"1595308907.110100","attachments":[{"fallback":"[July 13th, 2020 4:01 AM] itchyny: ```set ls=2\nfor i in range(winheight(0)*2) | call setline(i, i &lt; winheight(0) - 10 ? i : i + 10) | endfor\nvnew\nfor i in range(winheight(0)*2 + 10) | call setline(i, i &lt; winheight(0) - 10 ? 0 : i) | endfor\ndiffthis\nwincmd p\ndiffthis\nexecute 'normal ' . winheight(0) . \"\\&lt;C-d&gt;\"```\nこの手順で `E315: ml_get: invalid lnum` が発生しますが再現する人いますか","id":1,"author_id":"U7H4TJEG0","author_name":"itchyny","author_subname":"itchyny","author_link":"https://vim-jp.slack.com/team/U7H4TJEG0","author_icon":"https://secure.gravatar.com/avatar/e374ddea34651a9a43de332bfcba64a3.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0009-48.png","text":"```set ls=2\nfor i in range(winheight(0)*2) | call setline(i, i &lt; winheight(0) - 10 ? i : i + 10) | endfor\nvnew\nfor i in range(winheight(0)*2 + 10) | call setline(i, i &lt; winheight(0) - 10 ? 0 : i) | endfor\ndiffthis\nwincmd p\ndiffthis\nexecute 'normal ' . winheight(0) . \"\\&lt;C-d&gt;\"```\nこの手順で `E315: ml_get: invalid lnum` が発生しますが再現する人いますか","mrkdwn_in":["text"],"blocks":null,"footer":"Posted in #dev","ts":1594638091.040200,"from_url":"https://vim-jp.slack.com/archives/C83UXKU86/p1594638091040200","original_url":"https://vim-jp.slack.com/archives/C83UXKU86/p1594638091040200"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"t6="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"621925f9-355c-47c9-a89a-686414c2c633","type":"message","user":"U06BRP8VD","text":"手動で term_start(&amp;shell) したときは出なくて、テストでだけでてるっぽいんですよね。$HOMEが書き換えられてるとかあるのかな?","ts":"1595309347.110300","thread_ts":"1595307825.109500","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0meB"}],"root":{"client_msg_id":"8f100673-8b70-48e2-a48b-c9355dc50e35","type":"message","user":"U6XP9LZ6V","text":"sudoのは、`~/.sudo_as_admin_successful` が無いときに出るメッセージじゃないですか？","ts":"1595307825.109500","thread_ts":"1595307825.109500","reply_count":1,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Tbr"}]}},{"client_msg_id":"bd9a2d0b-fcc0-4bc1-ae39-d672ab7db798","type":"message","user":"U06BRP8VD","text":"`Test_terminal_scrollback` がWindowsで失敗してる現象を把握した。\n\n`line('$')` がスクロールバッファ(最大 `termwinscroll`) + `term_rows` を返してる。UNIXではスクロールバッファのみの計上っぽい。","ts":"1595317027.112600","thread_ts":"1595317027.112600","reply_count":1,"replies":[{"user":"U06BRP8VD","ts":"1595320942.120600"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4sAcV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ea0bd47a-e8cc-41a4-9c7b-167298a53602","type":"message","user":"U7986PPFH","text":"FreeBSDだと `fopen(dir, \"rb\")` でオープンしたディレクトリを `fgets` で読み込んでもエラーにならない...\nそのせいでTest_viminfo_permが失敗する","ts":"1595319691.115100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XV6EB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"96cdc336-f072-4341-a69f-5faf7bf886f5","type":"message","user":"U06BRP8VD","text":"あれ? 読めること自体は正しいんちゃうの? なんかエラーってあったっけ?","ts":"1595320244.116000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IoiMH"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2c505d9f-5098-4bd2-8bde-c1cb078de871","type":"message","user":"U7986PPFH","text":"macやlinuxだと `fgets`はnullになりますね","ts":"1595320322.116400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TW5=G"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"106460d0-e99f-465e-a4f9-27fa086ddc8f","type":"message","user":"U7986PPFH","text":"エラーとしては `EISDIR`","ts":"1595320367.117000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"R5VzU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9ce1fa9c-0344-4b0a-a1c0-b52009e17bfd","type":"message","user":"U06BRP8VD","text":"ああ読めるのはfreadか","ts":"1595320388.117400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2HR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d9b1281f-62a8-4d25-a34b-26595eee3a03","type":"message","user":"U7986PPFH","text":"POSIX的には `fgets` にも特にエラーの規定はないようなので、エラーにならなくても問題はなさそう？","ts":"1595320608.118600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"o7+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"274b48c2-e4bf-4b88-9032-8fb39c759d79","type":"message","user":"U06BRP8VD","text":"だと思うんですけどね。ディレクトリエントリの生データが読めちゃうだけで問題とは言えないんちゃうかなと。あえて言えば改行記号がでてこないことが考えられるからバッファ全部埋めちゃうこともあるだろうな、みたいな。","ts":"1595320699.120100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"a=Xl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d18b98fd-c23e-40fb-bb2d-ba093ef6200a","type":"message","user":"U06BRP8VD","text":"これぜんぜんわかんないや～\n\nterminal の scrollback buffer の ga のサイズが memline_<http://T.ml|T.ml>_line_count にどうやってつながってるかがぱっとみわかんない。","ts":"1595320942.120600","thread_ts":"1595317027.112600","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tr0"}],"root":{"client_msg_id":"bd9a2d0b-fcc0-4bc1-ae39-d672ab7db798","type":"message","user":"U06BRP8VD","text":"`Test_terminal_scrollback` がWindowsで失敗してる現象を把握した。\n\n`line('$')` がスクロールバッファ(最大 `termwinscroll`) + `term_rows` を返してる。UNIXではスクロールバッファのみの計上っぽい。","ts":"1595317027.112600","thread_ts":"1595317027.112600","reply_count":1,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4sAcV"}]}},{"client_msg_id":"f9732787-8839-4140-ba97-0f72d2c06e2c","type":"message","user":"U06BRP8VD","text":"あー この ml_delete() で繋がってんのか。","ts":"1595321094.121100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sVO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"56a27bb1-8b95-420d-8aba-fc8e83c80fc8","type":"message","user":"U06BRP8VD","text":"一生懸命、複数行PROMPTに対応するコード書いたけど、テスト実行時は戻すほうがはるかに楽という事実…","ts":"1595342181.122200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Gvg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
