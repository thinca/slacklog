[{"client_msg_id":"09edf716-ecf1-46b3-ada5-ceb26b218a23","type":"message","user":"U03C71D7H","text":"割といい加減。まあいいんですけどね","ts":"1601731620.201400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0cbA"}]},{"client_msg_id":"db39c6f5-5b50-49a7-a4b8-ce83acbc18d8","type":"message","user":"U03C6TEAZ","text":"昔は載ったのに","ts":"1601731550.201100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"H2Yl"}]},{"client_msg_id":"453ac1f3-f8cb-4709-bda5-d27c47e5bc52","type":"message","user":"U03C71D7H","text":"+mzscheme の例のパッチ入った。パッチに名前は載らなかったけどw","ts":"1601729537.200500","team":"T03C4RC8V","reactions":[{"name":"thinca","count":3,"users":["UAZ33BKV2","U9S4G0LJW","U6XP9LZ6V"]},{"name":"+1::skin-tone-5","count":1,"users":["UAZ33BKV2"]},{"name":"sasu_manbou","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+nGB"}]},{"client_msg_id":"ee08e217-a112-4944-ae6f-bf5a53d866a6","type":"message","user":"U03C6TEAZ","text":"\u003chttps://github.com/vim/vim/pull/7067\u003e","ts":"1601725012.199800","attachments":[{"fallback":"GitHub: Show \"xxx is a directory\" if the last is pathsep. by mattn · Pull Request #7067 · vim/vim","id":1,"title":"Show \"xxx is a directory\" if the last is pathsep. by mattn · Pull Request #7067 · vim/vim","title_link":"https://github.com/vim/vim/pull/7067","text":"When Vim opens a directory path, the messages are different depending on whether it ends with \u0026amp;quot;/\u0026amp;quot;. If it doesn\u0026amp;#39;t end with \u0026amp;quot;/\u0026amp;quot;, it\u0026amp;#39;s \u0026amp;quot;is a directory\u0026amp;quot;. if it do...","thumb_url":"https://avatars0.githubusercontent.com/u/11618545?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":48,"thumb_height":48,"from_url":"https://github.com/vim/vim/pull/7067","original_url":"https://github.com/vim/vim/pull/7067"}],"team":"T03C4RC8V","reactions":[{"name":"+1::skin-tone-5","count":2,"users":["U9S4G0LJW","UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9dm"}]},{"client_msg_id":"1c80c2c9-aed5-435a-ae8f-998415590cf9","type":"message","user":"U03C6TEAZ","text":"なんか通りそう。 \u003chttps://travis-ci.org/github/mattn/vim/builds/732489961\u003e","ts":"1601724388.199500","attachments":[{"fallback":"Travis CI - Test and Deploy Your Code with Confidence","id":1,"title":"Travis CI - Test and Deploy Your Code with Confidence","title_link":"https://travis-ci.org/github/mattn/vim/builds/732489961","text":"Travis CI enables your team to test and ship your apps with confidence. Easily sync your projects with Travis CI and you'll be testing your code in minutes.","blocks":null,"service_name":"travis-ci.org","service_icon":"https://cdn.travis-ci.org/favicon-b4e438ec85b9ae88d26b49538bc4e5ce.png","from_url":"https://travis-ci.org/github/mattn/vim/builds/732489961","original_url":"https://travis-ci.org/github/mattn/vim/builds/732489961"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Fbv"}]},{"client_msg_id":"196265f5-bbef-49da-be88-4a9d2b7cf35a","type":"message","user":"U03C6TEAZ","text":"ひとまず CI 流してみよう。","ts":"1601723910.198800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3oO"}]},{"client_msg_id":"2010fbc4-4cf2-4ded-b79c-d602577b2e45","type":"message","user":"UAZ33BKV2","text":"なるほどw","ts":"1601723819.198500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nDNP"}]},{"client_msg_id":"e2a66b20-cddf-4f9b-8bd0-9f2a4cd6db88","type":"message","user":"U03C6TEAZ","text":"てかこのチェックいらんのとちゃうか。","ts":"1601723814.198300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MJ3og"}]},{"client_msg_id":"89bc6272-4e94-4f97-91b1-6e4dd048b8fa","type":"message","user":"U03C6TEAZ","text":"あとあるとすると `:e http://` とか本当に変なパスの場合。","ts":"1601723797.197900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nUjU"}]},{"client_msg_id":"d3bc2c14-40b4-40b1-b3c6-b2672ad3035a","type":"message","user":"U03C6TEAZ","text":"なのでそこと合わせたい","ts":"1601723757.197300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AvF="}]},{"client_msg_id":"4d24a9cf-2a94-4d0e-bc4d-cd400adafba2","type":"message","user":"U03C6TEAZ","text":"その場合、この if がすり抜けて、その下の個所で stat されて ISDIR(st) されて `xxx is a directory` が出ます。","ts":"1601723738.197000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UBCe"}]},{"client_msg_id":"4e48090f-77aa-4fe8-8146-616257eaa84d","type":"message","user":"UAZ33BKV2","text":"ちなみに。`~/tmp`  みたいなので、ディレクトリしかないときはどうなります? (前段階で正規化されてる?)","ts":"1601723688.196100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xrEg"}]},{"client_msg_id":"fe2fd697-504c-45d1-82a6-762afd24bbad","type":"message","user":"U03C6TEAZ","text":"つまり `/` で終わる場合は `xxx is a directory` で統一。","ts":"1601723628.195400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qcG"}]},{"client_msg_id":"dc9b3363-1cea-44c7-9037-15b8de737b73","type":"message","user":"U03C6TEAZ","text":"```diff --git a/src/fileio.c b/src/fileio.c\nindex aa6596df6..f93677e30 100644\n--- a/src/fileio.c\n+++ b/src/fileio.c\n@@ -318,14 +318,21 @@ readfile(\n      */\n     if (fname != NULL \u0026amp;\u0026amp; *fname != NUL)\n     {\n-\tp = fname + STRLEN(fname);\n-\tif (after_pathsep(fname, p) || STRLEN(fname) \u0026gt;= MAXPATHL)\n+\tif (STRLEN(fname) \u0026gt;= MAXPATHL)\n \t{\n \t    filemess(curbuf, fname, (char_u *)_(\"Illegal file name\"), 0);\n \t    msg_end();\n \t    msg_scroll = msg_save;\n \t    return FAIL;\n \t}\n+\tp = fname + STRLEN(fname);\n+\tif (after_pathsep(fname, p))\n+\t{\n+\t    filemess(curbuf, fname, (char_u *)_(\"is a directory\"), 0);\n+\t    msg_end();\n+\t    msg_scroll = msg_save;\n+\t    return FAIL;\n+\t}\n     }\n \n     if (!read_stdin \u0026amp;\u0026amp; !read_buffer \u0026amp;\u0026amp; !read_fifo)```\nこのパッチ送ってみようと思いますがどうでしょう。","ts":"1601723603.194900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ncWrq"}]},{"client_msg_id":"b0f2a1d7-93a5-4da1-b944-00cd01d4e488","type":"message","user":"U03C6TEAZ","text":"ディレクトリを開いた時に `Illegal file name` って出たり `xxx is a directory` って出たり、なんか気持ち悪いなと思ってるんですが","ts":"1601723589.194500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YQ6"}]}]
