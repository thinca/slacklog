[{"type":"message","user":"U6XP9LZ6V","text":"しかし、これだけチューニングしても1行単位のスクロールは（環境にも寄るが）GDIの方が速いのでくやしい。","ts":"1512618388.000039","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"条件にも寄ると思うんですが、波線みたいなのの描画はおもすぎますよね。","ts":"1512618904.000083","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"あと描画コマンド投げすぎ感もある。","ts":"1512618921.000182","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"加えてGDIの裏っかわも昔に比べれば進歩してますから、完全DirectXでフォローバックなし ＆ WM_PAINT での一括描画まで行ければ、GDIを凌駕できる目がでてきそうな気がします。","ts":"1512619006.000109","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"波線の速度はもう十分だと思うんですよね。\nGDIに比べて遅いと感じるのは `:ver` とか、マウスホイールで上下スクロールしたり、スクロールバーの上下ボタンをクリックしてスクロールしたり…。","ts":"1512628648.000016","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"波線なんですが、本質的に発行されるコマンドが多いんです。CPUからGPUに渡るコマンドの数が狭い領域を扱ってる割には多いので、スクロールで全面書き換えする際に負担になるだろうなと。","ts":"1512628929.000014","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"逆にコマンドが少なくできれば、全面書き換えで1行だけスクロールさせても、もっと速くなりうるんじゃないかってのが、僕の考えです。","ts":"1512629025.000039","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"だいたいゲームとか60FPSで書き換えられるわけだし。","ts":"1512629047.000029","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"そんでゲームとの違いを考えると、毎回CPU側からコマンド郡を送りつけてるそうだなって。ゲーム的な描画だと、予めストアドプロシージャみたいな描画コマンド郡をGPU側に投げておいて、それを実行したよなぁ、と思い至った次第。","ts":"1512629187.000037","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"<https://github.com/vim-jp/issues/issues/1126>","ts":"1512631531.000272","attachments":[{"fallback":"GitHub: Ambiguous width character の直後に文字が残ることがある · Issue #1126 · vim-jp/issues","id":1,"title":"Ambiguous width character の直後に文字が残ることがある · Issue #1126 · vim-jp/issues","title_link":"https://github.com/vim-jp/issues/issues/1126","text":"<https://teratail.com/questions/103195> 以前から気になっていたので、調べました。 再現手順 ファイル 1.txt , 2.txt を作成する。 $ vim --clean :e 1.txt :normal! izzzzzz :w :e 2.txt :exe \"normal!\" \"iab\\u03bbef\" :w \\u03BB は λ ambiguous ...","thumb_url":"https://avatars2.githubusercontent.com/u/943423?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/vim-jp/issues/issues/1126"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"絵文字、関連しないですかね","ts":"1512631537.000303","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"マウスホイールとか、スクロールバーの上下ボタンでスクロールすると、カーソルが一瞬変なところに表示されることがあるんだが、何なのだろう。","ts":"1512632358.000004","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"この部屋の名前、変える? #development-room みたいな感じで、color-emoji に限定しない感じに。","ts":"1512634572.000024","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"+1","ts":"1512634967.000204","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"+1","ts":"1512635589.000275","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"<@U06BRP8VD> has renamed the channel from \"color-emoji\" to \"dev\"","ts":"1512636688.000376","subtype":"channel_name","name":"dev","old_name":"color-emoji","replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U06BRP8VD","text":"変えました。短いほうが良いだろうってことで `#dev` にしました。","ts":"1512636703.000053","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"<@U06BRP8VD> set the channel topic: Vim本体の開発室","ts":"1512636748.000123","subtype":"channel_topic","topic":"Vim本体の開発室","replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U03C71D7H","text":"<@U03C71D7H> has joined the channel","ts":"1512636784.000238","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U6XP9LZ6V","text":"GDIに比べて遅いというのは、波線等が全くなくても遅いですし、文字のレンダリングのコマンドに比べたら波線なんて大したことないのではと思うのですが、GPUは分かってないので分かりません。","ts":"1512637804.000133","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"それよりも、カーソルが変なところに表示されたりすることから、まだ余計な描画やflushが行われているのではと疑っています。","ts":"1512637924.000224","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U7986PPFH","text":"<@U7986PPFH> has joined the channel","ts":"1512638605.000009","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U06ECBRTJ","text":"<@U06ECBRTJ> has joined the channel","ts":"1512639881.000238","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U06ECBRTJ","text":"デブがやってきました。","ts":"1512639894.000049","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06ECBRTJ","text":"←メタボ予備軍診断を毎年されてるマンです","ts":"1512639963.000162","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"Direct2D というかGDI+の癖として、DrawLineがめっちゃ重いってのがあったんですよね。だいたいポリゴン描くほうが速い。","ts":"1512640347.000379","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U782D5DF1","text":"おっチャンネル名変わりましたね","ts":"1512644470.000095","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"<https://groups.google.com/d/msg/vim_dev/2AaZMN1T6K8/x4QxC_XbBQAJ>\n遅くなったという報告が来ているんですが、遅くなる原因に全く心当たりがない…","ts":"1512652822.000149","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"Radeonで、1行ずつのスクロールで","ts":"1512653700.000303","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"scrlines=0 相当とか?","ts":"1512653711.000394","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"とりあえず scrlines:1 でどうなるかは聞いてみていますが、描画全般が遅くなったと言っているように見えますね。","ts":"1512653889.000041","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"どころか速くなるつもりだったんですけどね。マシンスペック低いのかな。","ts":"1512654453.000127","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"AMD Radeon R9 M370X 積めるくらいだからそこそこのマシンか","ts":"1512654494.000319","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"たぶんドライバの作りで違ってくるんじゃないですかね。","ts":"1512654836.000596","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"僕のところ(Radeon 7700)だとやっぱ `scrlines:1` で `:hi` とか遅くなりますから。","ts":"1512654902.000149","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"明日、オフィスの GTX750Tiで計測してみよう。","ts":"1512654945.000133","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
