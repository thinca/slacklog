[{"type":"message","user":"U03C6TEAZ","text":"<@U03C6TEAZ> pinned a message to this channel.","ts":"1511347499.000189","attachments":[{"fallback":"[November 21st, 2017 9:19 AM] koron: とりあえず差分、ココに置いときます。あとは任せた <https://github.com/koron/vim/pull/1/files>","author_id":"U06BRP8VD","author_name":"KoRoN","author_subname":"KoRoN","author_link":"https://vim-jp.slack.com/team/U06BRP8VD","author_icon":"https://secure.gravatar.com/avatar/4b5a6f711a4e22e617b74058239ade53.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-48.png","text":"とりあえず差分、ココに置いときます。あとは任せた <https://github.com/koron/vim/pull/1/files>","mrkdwn_in":["text"],"blocks":null,"ts":1511284769.000151}],"subtype":"pinned_item","item_type":"C","replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U06BRP8VD","text":"文字の色も落ちてそう。","ts":"1511347640.000270","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"一括描画で部分的に色が欠けるって変ですね。","ts":"1511348355.000341","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"たぶん絵文字の色がないのはCicaがあかんのだとおもう。","ts":"1511349035.000244","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"文字の色が堕ちるのは、ブラシに色設定してないから。","ts":"1511349047.000293","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"うーんw 古いコードにはいろいろおかしな箇所がおおいぞw","ts":"1511349137.000284","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"←新・旧→","ts":"1511350523.000482","files":[{"id":"F8589JJR5","created":1511350521,"timestamp":1511350521,"name":"compare.png","title":"compare.png","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"U06BRP8VD","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":356516,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F8589JJR5/compare.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F8589JJR5/download/compare.png","original_h":514,"original_w":1019,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F8589JJR5-ce6a03882f/compare_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F8589JJR5-ce6a03882f/compare_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F8589JJR5-ce6a03882f/compare_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F8589JJR5-ce6a03882f/compare_360.png","thumb_360_gif":"","thumb_360_w":360,"thumb_360_h":182,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-F8589JJR5-ce6a03882f/compare_480.png","thumb_480_w":480,"thumb_480_h":242,"thumb_720":"https://files.slack.com/files-tmb/T03C4RC8V-F8589JJR5-ce6a03882f/compare_720.png","thumb_720_w":720,"thumb_720_h":363,"thumb_960":"https://files.slack.com/files-tmb/T03C4RC8V-F8589JJR5-ce6a03882f/compare_960.png","thumb_960_w":960,"thumb_960_h":484,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F8589JJR5/compare.png","permalink_public":"https://slack-files.com/T03C4RC8V-F8589JJR5-dca5935c90","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"thumb_800":"https://files.slack.com/files-tmb/T03C4RC8V-F8589JJR5-ce6a03882f/compare_800.png","thumb_800_h":404,"thumb_800_w":800,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U06BRP8VD","text":"EndDraw が D2DERR_RECREATE_TARGET を返すことがあるのか。デバイスが変わったときとかで、その場合は RenderTarget 自体を作り直さないといけないみたい。","ts":"1511351084.000358","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"`type:directx` のときは旧来のレンダラで動くようにして `type:directx2` のときは 新しいレンダラで動くようにした。","ts":"1511352994.000427","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"やっぱね、BeginDraw ～ EndDraw をなんとかしないと、劇的には速くならなそう。","ts":"1511353426.000253","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"gui_w32.c でHDCを使ってるGDI関数の一覧と、おおよその解説。おもったよりも多くない。","ts":"1511354488.000016","files":[{"id":"F84845XQC","created":1511354487,"timestamp":1511354487,"name":"gdi.txt","title":"gdi.txt","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"Plain Text","user":"U06BRP8VD","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":1682,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F84845XQC/gdi.txt","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F84845XQC/download/gdi.txt","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F84845XQC/gdi.txt","permalink_public":"https://slack-files.com/T03C4RC8V-F84845XQC-f76eb24f76","edit_link":"https://vim-jp.slack.com/files/U06BRP8VD/F84845XQC/gdi.txt/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U06BRP8VD","text":"↑を置き換えれば完全 DirectX 化ができる目処がたつ。","ts":"1511354528.000114","edited":{"user":"U06BRP8VD","ts":"1511354559.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"あと BeginDraw &amp; EndDraw の問題が残るけど。","ts":"1511354546.000167","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"うーん…なんとかしたいなぁ","ts":"1511354906.000479","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"今って color-emoji ブランチでいいですか？","ts":"1511355986.000306","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"renderoptions=type:directx2 にすればいいのかな","ts":"1511356072.000012","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"ちょっとまってね","ts":"1511356074.000255","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"あ、出た出た","ts":"1511356087.000243","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"いま color-emoji に push -f しちゃった。","ts":"1511356102.000291","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"`gvim -u emoji.vim -U NONE --noplugins` でいままでの。\n`gvim -u emoji2.vim -U NONE --noplugins` で新しいのでレンダリングします。","ts":"1511356168.000198","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"MeiryoKe_Console が良い感じだ","ts":"1511356297.000100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"今僕が気にしているのは速度で、BeginDrawから EndDrawまでのレンダリングコマンドがトランザクション的に一度に実行されるらしく、逆に言うとトランザクションを大きくとれればオーバーヘッドが減って速くなるだろうと。","ts":"1511356302.000088","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"<https://go-gyazo.appspot.com/9ad3b494b26934d6.png>","ts":"1511356411.000098","attachments":[{"fallback":"282x246px image","id":1,"image_url":"https://go-gyazo.appspot.com/9ad3b494b26934d6.png","blocks":null,"from_url":"https://go-gyazo.appspot.com/9ad3b494b26934d6.png"}],"team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U06BRP8VD"]},{"name":"beer","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"いいね","ts":"1511356414.000064","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"ちょっとフォントのサイズが違うんかな","ts":"1511356464.000058","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"Cica は色付きじゃない:beer:が含まれてるけど、他のフォントは含まれてないので Segui Emoji にフォールバックされて逆に色が出てる。","ts":"1511356617.000085","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"そう。Segoe の Emoji ちょっと大きく出てるみたい。","ts":"1511356784.000343","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"ただ旧レンダラでも大きく出てるので、そもそもサイズの計算に手を入れたほうが良さそう。","ts":"1511356819.000468","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"なるほど fontSize に小数点があるので (int) したら落ち着いた。","ts":"1511356875.000298","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"いやまだ微妙","ts":"1511356899.000224","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"計算では辛そうだなー。","ts":"1511357044.000180","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"グリフごとにサイズが違う。","ts":"1511357071.000516","team":"T03C4RC8V","reactions":[{"name":"scream","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"<@U03C6TEAZ> pinned a message to this channel.","ts":"1511357170.000241","attachments":[{"fallback":"[November 21st, 2017 4:19 PM] koron: 1. BindDC のタイミング変更/毎回やるのは遅くなる原因では?\n2. 描画位置の計算方法の変更/1を修正すると必然的に必要になる\n3. 各種 render option の動作確認/これはスキップしてあとでやっても良いかも\n4. hiDPI環境での動作確認\n5. GlyphRun が担ってた僕の認識してない何かの機能がないか/4の派生と言っても良いかも\n\nざっと思いつくのはこのくらい。","author_id":"U06BRP8VD","author_name":"KoRoN","author_subname":"KoRoN","author_link":"https://vim-jp.slack.com/team/U06BRP8VD","author_icon":"https://secure.gravatar.com/avatar/4b5a6f711a4e22e617b74058239ade53.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-48.png","text":"1. BindDC のタイミング変更/毎回やるのは遅くなる原因では?\n2. 描画位置の計算方法の変更/1を修正すると必然的に必要になる\n3. 各種 render option の動作確認/これはスキップしてあとでやっても良いかも\n4. hiDPI環境での動作確認\n5. GlyphRun が担ってた僕の認識してない何かの機能がないか/4の派生と言っても良いかも\n\nざっと思いつくのはこのくらい。","mrkdwn_in":["text"],"blocks":null,"ts":1511309977.000042}],"subtype":"pinned_item","item_type":"C","replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U06BRP8VD","text":"フォールバック発生時の、フォントサイズが設定できれば良いのにねぇ。","ts":"1511358125.000028","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"ねぇ","ts":"1511358221.000236","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"Windows10 って Segoe UI Mono って入ってます？","ts":"1511359367.000620","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"僕の手元は入ってる…","ts":"1511359569.000035","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"どこから入ったのかはわからないけど","ts":"1511359578.000359","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"… Creators Update?","ts":"1511359587.000586","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"それはまっつんさんも使ってるか。","ts":"1511359595.000332","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"やった","ts":"1511359609.000262","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"爆速になった。","ts":"1511359613.000651","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"もっかいちぇっくしたら push します。","ts":"1511359623.000100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"これは革命的に速くなりそう。","ts":"1511359679.000521","edited":{"user":"U06BRP8VD","ts":"1511359690.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"push した。是非試してみて。","ts":"1511359698.000408","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"コミットとしてはこれ。\n<https://github.com/koron/vim/pull/1/commits/58c4cab4c6fdd57e4e4a174d6f88c23ff96fb304>","ts":"1511359732.000463","attachments":[{"fallback":"GitHub: WIP: color emoji! by koron · Pull Request #1 · koron/vim","id":1,"title":"WIP: color emoji! by koron · Pull Request #1 · koron/vim","title_link":"https://github.com/koron/vim/pull/1/commits/58c4cab4c6fdd57e4e4a174d6f88c23ff96fb304","text":"vim - The official Vim repository","thumb_url":"https://avatars0.githubusercontent.com/u/468368?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/koron/vim/pull/1/commits/58c4cab4c6fdd57e4e4a174d6f88c23ff96fb304"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"ただバグってるなw GDI 側とぶつかってるっぽい","ts":"1511359775.000421","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"これは…ツライ","ts":"1511359869.000388","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"www","ts":"1511359900.000120","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"確かに速くなった","ts":"1511359911.000336","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"つまり、ちゃんと作ればこのくらいの速度がでるってことで","ts":"1511359942.000536","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"EndDraw まではバッファされてる感じかな","ts":"1511360062.000024","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"ですです","ts":"1511360078.000297","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"`type:directx3` としてバグあり高速モードを実装します…","ts":"1511360121.000103","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"くやしい…","ts":"1511360202.000115","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"描画したけど `gui_mch_flush` が呼ばれないケースがあるんだろうな。ただそれでもいくつか説明のつかないことがある…","ts":"1511360873.000216","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"あと絵文字部分は InvertRect() (カーソル) で反転しないんですよね。英数字は反転するのに… 描画されているレイヤーが違うのかなぁ。","ts":"1511360928.000170","edited":{"user":"U06BRP8VD","ts":"1511360939.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"背景色があるのでもうちょっと細かい単位でトランザクションしないと GDI と被ってるみたいですね。","ts":"1511361081.000161","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"…背景色の描画も、DirectXに倒す?","ts":"1511361763.000013","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"IDWriteBitmapRenderTarget はその名前に反して IDWriteRenderTarget を継承してない","ts":"1511276535.000780","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"ダメだ…なんもうまくいかねぇw","ts":"1511278029.000236","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"とりあえず `s_textArea` に対して CreateHwndRenderTarget して描いてみようとしたけど、でねぇ。背景のクリアすら…できひん","ts":"1511278403.000364","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"これは根本的なところをまちがえているくさい","ts":"1511278419.000291","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"`ID2D1DCRenderTarget::DrawText` どころか `Clear` すら動いている気配がない。いやこれ前も見たきはする。","ts":"1511279056.000195","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"ちょっとアプローチを変えてみるか…","ts":"1511279247.000443","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","ts":"1511280043.000358","files":[{"id":"F84Q7QMAT","created":1511280042,"timestamp":1511280042,"name":"sample_dc_cpp.cpp","title":"sample+dc.cpp","mimetype":"text/plain","image_exif_rotation":0,"filetype":"cpp","pretty_type":"C++","user":"U06BRP8VD","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":13067,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F84Q7QMAT/sample_dc_cpp.cpp","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F84Q7QMAT/download/sample_dc_cpp.cpp","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F84Q7QMAT/sample_dc_cpp.cpp","permalink_public":"https://slack-files.com/T03C4RC8V-F84Q7QMAT-4f2e5aa675","edit_link":"https://vim-jp.slack.com/files/U06BRP8VD/F84Q7QMAT/sample_dc_cpp.cpp/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U06BRP8VD","text":"<http://www.wabiapp.com/WabiSampleSource/windows/d2d_color_emoji.html> このサンプルを ID2D1DCRenderTarget に変えてみた。ちゃんと動くな…","ts":"1511280095.000770","attachments":[{"fallback":"Direct2Dでカラー絵文字を表示する - わびさびサンプルソース","id":1,"title":"Direct2Dでカラー絵文字を表示する - わびさびサンプルソース","title_link":"http://www.wabiapp.com/WabiSampleSource/windows/d2d_color_emoji.html","text":"わびさびサンプルソースのWindowsについてのサンプルコードを提供しているサイトです。プログラミング初心者の方や、サンデープログラマーのプログラミングの参考となれれば幸いです。","thumb_url":"http://www.wabiapp.com/WabiSampleSource/image/tw_icon.jpg","blocks":null,"service_name":"wabiapp.com","service_icon":"http://www.wabiapp.com/WabiSampleSource/image/icon.png","thumb_width":128,"thumb_height":128,"from_url":"http://www.wabiapp.com/WabiSampleSource/windows/d2d_color_emoji.html"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"なんで Vim の ID2D1DCRenderTarget は描画されねぇんだ?","ts":"1511280110.000055","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"完全にバグってるんだけど","ts":"1511280634.000287","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"<https://go-gyazo.appspot.com/90bfbc56cca03011.png>","ts":"1511280639.000287","attachments":[{"fallback":"417x385px image","id":1,"image_url":"https://go-gyazo.appspot.com/90bfbc56cca03011.png","blocks":null,"from_url":"https://go-gyazo.appspot.com/90bfbc56cca03011.png"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"なんか出たw","ts":"1511280644.000470","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"なんでw","ts":"1511280649.000522","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"僕の手元では動いてる","ts":"1511280653.000710","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"あ、koron さんなんか進展あったの？","ts":"1511280675.000592","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"ID2D1DCRenderTarget で描画できることは確認した。Vimで使ってる ID2D1DCRenderTarget では描画できないのがおかしい。","ts":"1511280721.000267","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"BindDC してから BeginDraw しないとダメなこともわかった。","ts":"1511280745.000537","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"ふむ。","ts":"1511280754.000402","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"僕の↑は一応 vim です。","ts":"1511280764.000591","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"とりあえず出せなくはない事は分かった。","ts":"1511280802.000014","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"あとサイズが em ぽいので metrics から計算せなあかんのも分かった。","ts":"1511280818.000656","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"あとこれは直接関係ないけど","ts":"1511280872.000888","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"なんか、SetFont が描画毎に呼ばれてるのだけど、遅いのこれのせいかなーと思った。","ts":"1511280876.000843","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"一応SetFontはGDIのほうでは SelectFontしててそれとの対応を取るためなんですよね。ハイライトでフォント指定できちゃうからだったかな?","ts":"1511281066.000673","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"あー、部分 bold とか出来ますからねー。","ts":"1511281092.000899","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"まっつんさんのほうは BitmapRenderTarget 使ってます?","ts":"1511281220.000248","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"はい。","ts":"1511281316.000200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"```\n\tDWRITE_GLYPH_OFFSET glyphOffset;\n\tglyphOffset.advanceOffset = 0;\n\tglyphOffset.ascenderOffset = 0;\n\n\tDWRITE_GLYPH_RUN glyphRun;\n\tFLOAT glyphAdvance = 0.0;\n\tUINT16 glyphIndex = 1;\n\tglyphRun.fontFace = mDWriteFontFace;\n\tglyphRun.fontEmSize = 22;\n\tglyphRun.glyphCount = 20; //mDWriteFontFace-&gt;GetGlyphCount();\n\tglyphRun.glyphIndices = &amp;glyphIndex;\n\tglyphRun.glyphAdvances = &amp;glyphAdvance;\n\tglyphRun.isSideways = false;\n\tglyphRun.bidiLevel = 0;\n\tglyphRun.glyphOffsets = &amp;glyphOffset;\n\n\tIDWriteColorGlyphRunEnumerator\t*enumerator = NULL;\n\thr = mDWriteFactory-&gt;TranslateColorGlyphRun(\n\t    0,\n\t    0,\n\t    &amp;glyphRun,\n\t    NULL,\n\t    DWRITE_MEASURING_MODE_GDI_NATURAL,\n\t    NULL,\n\t    0,\n\t    &amp;enumerator);\n```\nで enumerator 取ってきて","ts":"1511281340.000656","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"```\n\t    BOOL hasRun = TRUE;\n\t    enumerator-&gt;MoveNext(&amp;hasRun);\n\t    while (hasRun)\n\t    {\n\t\tconst DWRITE_COLOR_GLYPH_RUN* colorGlyphRun;\n\t\tenumerator-&gt;GetCurrentRun(&amp;colorGlyphRun);\n\t\tCOLORREF rgb = (colorGlyphRun-&gt;paletteIndex == 0xFFFF) ? color : \n\t\t    RGB(\n\t\t\t    (BYTE)(colorGlyphRun-&gt;runColor.r * 255.0f),\n\t\t\t    (BYTE)(colorGlyphRun-&gt;runColor.g * 255.0f),\n\t\t\t    (BYTE)(colorGlyphRun-&gt;runColor.b * 255.0f)\n\t\t\t    /*, (uint8_t)(a * 255.0f)*/);\n\n\t\tbmpRT-&gt;DrawGlyphRun(\n\t\t\tcolorGlyphRun-&gt;baselineOriginX,\n\t\t\tcolorGlyphRun-&gt;baselineOriginY,\n\t\t\tDWRITE_MEASURING_MODE_GDI_NATURAL,\n\t\t\t&amp;colorGlyphRun-&gt;glyphRun,\n\t\t\tmRenderingParams,\n\t\t\trgb);\n\n\t\tenumerator-&gt;MoveNext(&amp;hasRun);\n\t    }\n```","ts":"1511281353.000217","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"カラーグリフ分ぐるぐる回すと絵が出ました。","ts":"1511281368.000171","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"なるほどなるほど","ts":"1511281382.000282","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"僕は色々試した結果、そもそもHDCに直接描画できないのがおかしいってところに至りました。","ts":"1511281406.000373","edited":{"user":"U06BRP8VD","ts":"1511281416.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"ただ安定してなくて、たまに TranslateColorGlyphRun が DWRITE_E_NOCOLOR を返す。","ts":"1511281433.000334","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"「たまに」w","ts":"1511281445.000550","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"たぶん SetFont のタイミング issue かなーと。","ts":"1511281457.000730","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"いま壊し中のソースだけど","ts":"1511281501.000076","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","ts":"1511281505.000534","files":[{"id":"F83LAHR6F","created":1511281503,"timestamp":1511281503,"name":"gui_dwrite.cpp","title":"gui_dwrite.cpp","mimetype":"text/plain","image_exif_rotation":0,"filetype":"cpp","pretty_type":"C++","user":"U03C6TEAZ","mode":"snippet","editable":true,"is_external":true,"external_type":"unknown","size":22928,"url":"","url_download":"","url_private":"https://gist.github.com/5b3c7500a8817435a29b08fa62ac53de#file-gui_dwrite-cpp","url_private_download":"https://gist.github.com/5b3c7500a8817435a29b08fa62ac53de#file-gui_dwrite-cpp","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U03C6TEAZ/F83LAHR6F/gui_dwrite.cpp","permalink_public":"","edit_link":"https://vim-jp.slack.com/files/U03C6TEAZ/F83LAHR6F/gui_dwrite.cpp/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U03C6TEAZ","text":"slack、gist 展開されるの使いづらいなー。","ts":"1511281537.000501","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"あ、SetFont、前回と同じハンドルならやらないようになってるな。","ts":"1511281587.000822","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"あと、cica でやると絵文字でないです。原因分からない。","ts":"1511281633.000226","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"まじで","ts":"1511281639.000602","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"あ、カラーがでないってこと?","ts":"1511281652.000274","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"です。","ts":"1511281659.000045","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"んじゃむりくりMeiryo有効にするのが良いか。","ts":"1511281675.000041","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"ちょっと、えっ？と思ったのが","ts":"1511281929.000634","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"今指定してる glyphIndx が 1 固定にしてるんですが、これ本来","ts":"1511281978.000387","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"```\n[HRESULT]GetGlyphIndicesA(const UINT32 *codePoints, UINT32 codePointCount, UINT16 *glyphIndices)\n```\nからコードポイント毎に取らないといけないっぽい。","ts":"1511281991.000331","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"遅そう","ts":"1511282004.000398","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"まーじかー","ts":"1511282029.000668","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"まぁ絵文字の領域決まってるからそっちは既存の描画にフォールバックすればいいか。","ts":"1511282030.000039","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"まぁ想定通りなんですが一括で描画できないみたいすね。","ts":"1511282068.000593","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"bmpRT には DrawText が無い。","ts":"1511282088.000233","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"ん。だから mRT の DrawText で書くのを模索してます。","ts":"1511282242.000124","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"そろそろ寝ますー。","ts":"1511282367.000375","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"おやすみなさーい","ts":"1511282374.000318","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"Vimが ID2D1DCRenderTarget  で描けない理由が判明した…","ts":"1511284357.000718","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"端的にいうと BindDC もBeginDraw もして無いタイミングで DrawTextが呼ばれていたよ…","ts":"1511284389.000086","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"(ﾟ∀ﾟ)ｷﾀｺﾚ!!","ts":"1511284461.000252","files":[{"id":"F84RTB4S3","created":1511284458,"timestamp":1511284458,"name":"vim+emoji.png","title":"vim+emoji.png","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"U06BRP8VD","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":130361,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F84RTB4S3/vim_emoji.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F84RTB4S3/download/vim_emoji.png","original_h":502,"original_w":447,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F84RTB4S3-9940199b87/vim_emoji_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F84RTB4S3-9940199b87/vim_emoji_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F84RTB4S3-9940199b87/vim_emoji_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F84RTB4S3-9940199b87/vim_emoji_360.png","thumb_360_gif":"","thumb_360_w":321,"thumb_360_h":360,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-F84RTB4S3-9940199b87/vim_emoji_480.png","thumb_480_w":427,"thumb_480_h":480,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F84RTB4S3/vim_emoji.png","permalink_public":"https://slack-files.com/T03C4RC8V-F84RTB4S3-d5d63ff802","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U06BRP8VD","text":"とりあえず差分、ココに置いときます。あとは任せた <https://github.com/koron/vim/pull/1/files>","ts":"1511284769.000151","attachments":[{"fallback":"GitHub: WIP: color emoji! by koron · Pull Request #1 · koron/vim","id":1,"title":"WIP: color emoji! by koron · Pull Request #1 · koron/vim","title_link":"https://github.com/koron/vim/pull/1/files","text":"vim - The official Vim repository","thumb_url":"https://avatars0.githubusercontent.com/u/468368?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/koron/vim/pull/1/files"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"フォントを無理やりメイリオにするとこんな感じ。","ts":"1511285097.000096","files":[{"id":"F834ED7DE","created":1511285093,"timestamp":1511285093,"name":"vim+emoji+meiryo.png","title":"vim+emoji+meiryo.png","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"U06BRP8VD","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":222142,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F834ED7DE/vim_emoji_meiryo.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F834ED7DE/download/vim_emoji_meiryo.png","original_h":718,"original_w":840,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F834ED7DE-5b0e40db3c/vim_emoji_meiryo_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F834ED7DE-5b0e40db3c/vim_emoji_meiryo_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F834ED7DE-5b0e40db3c/vim_emoji_meiryo_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F834ED7DE-5b0e40db3c/vim_emoji_meiryo_360.png","thumb_360_gif":"","thumb_360_w":360,"thumb_360_h":308,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-F834ED7DE-5b0e40db3c/vim_emoji_meiryo_480.png","thumb_480_w":480,"thumb_480_h":410,"thumb_720":"https://files.slack.com/files-tmb/T03C4RC8V-F834ED7DE-5b0e40db3c/vim_emoji_meiryo_720.png","thumb_720_w":720,"thumb_720_h":615,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F834ED7DE/vim_emoji_meiryo.png","permalink_public":"https://slack-files.com/T03C4RC8V-F834ED7DE-eb6dced1b1","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"thumb_800":"https://files.slack.com/files-tmb/T03C4RC8V-F834ED7DE-5b0e40db3c/vim_emoji_meiryo_800.png","thumb_800_h":684,"thumb_800_w":800,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U06BRP8VD","text":"BindDC の呼び出しを減らすと幾分速くはなりそう。あとは1文字ずつ描くんじゃなくてまとめて、か。","ts":"1511285342.000703","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"絵文字とは関係なく、memDCに書いてBitBltという無駄なことは止められる目処がたった。GlyphRunを使うかどうかも関係なく。","ts":"1511285510.000596","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"おお！たまたま目が覚めたら！","ts":"1511286635.000545","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"差分ちさ！w","ts":"1511286674.000182","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"そして寝る","ts":"1511286701.000049","team":"T03C4RC8V","reactions":[{"name":"grinning","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"後で会社の win7 でレグレッション確認しますわー。","ts":"1511305630.000030","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"GlyphRunまるまる落とした 1 の方法なんで、まだまだ道程は長いです。hiDPI環境の話とか、 <@U6XP9LZ6V> さんに思い出して見てもらわないといけないこともかなりありそう。","ts":"1511308157.000032","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"表示が欠けるとか表示されない等の問題はないですね。 &gt; win7","ts":"1511309137.000097","edited":{"user":"U03C6TEAZ","ts":"1511309143.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"今見えてる TODO ってなんでしょう。","ts":"1511309279.000267","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"1. BindDC のタイミング変更/毎回やるのは遅くなる原因では?\n2. 描画位置の計算方法の変更/1を修正すると必然的に必要になる\n3. 各種 render option の動作確認/これはスキップしてあとでやっても良いかも\n4. hiDPI環境での動作確認\n5. GlyphRun が担ってた僕の認識してない何かの機能がないか/4の派生と言っても良いかも\n\nざっと思いつくのはこのくらい。","ts":"1511309977.000042","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"あとはいらなくなったコードのお掃除、か。","ts":"1511309999.000179","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"下手したら 60％ くらいは要らなくなる。","ts":"1511310022.000119","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"あざます。取れるものから取っていきます。","ts":"1511310154.000226","team":"T03C4RC8V","reactions":[{"name":"cat-salute","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"あ、見るブランチ間違ってた","ts":"1511310415.000314","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"win7/mingw だと落ちますね。","ts":"1511311083.000230","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"原因はDrawTextのところしか考えられないけど…","ts":"1511311804.000213","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"今回の差分、書いたコードよりも消したコードのが多いくらいだし","ts":"1511311823.000042","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","ts":"1511311837.000232","files":[{"id":"F83EYF14H","created":1511311837,"timestamp":1511311837,"name":"gistfile1.diff","title":"gistfile1.diff","mimetype":"text/plain","image_exif_rotation":0,"filetype":"diff","pretty_type":"Diff","user":"U03C6TEAZ","mode":"snippet","editable":true,"is_external":true,"external_type":"unknown","size":2086,"url":"","url_download":"","url_private":"https://gist.github.com/e97545b1f55ae56901221e7d2e0f62b3#file-gistfile1-diff","url_private_download":"https://gist.github.com/e97545b1f55ae56901221e7d2e0f62b3#file-gistfile1-diff","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U03C6TEAZ/F83EYF14H/gistfile1.diff","permalink_public":"","edit_link":"https://vim-jp.slack.com/files/U03C6TEAZ/F83EYF14H/gistfile1.diff/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U03C6TEAZ","text":"フォールバックするコードです","ts":"1511311845.000161","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"あ、ちょっと直しがいる","ts":"1511311878.000247","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","ts":"1511311919.000065","files":[{"id":"F83EYRMUH","created":1511311918,"timestamp":1511311918,"name":"gistfile1.diff","title":"gistfile1.diff","mimetype":"text/plain","image_exif_rotation":0,"filetype":"diff","pretty_type":"Diff","user":"U03C6TEAZ","mode":"snippet","editable":true,"is_external":true,"external_type":"unknown","size":2076,"url":"","url_download":"","url_private":"https://gist.github.com/c26407b794a0ba2e56a60ec306e80cb0#file-gistfile1-diff","url_private_download":"https://gist.github.com/c26407b794a0ba2e56a60ec306e80cb0#file-gistfile1-diff","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U03C6TEAZ/F83EYRMUH/gistfile1.diff","permalink_public":"","edit_link":"https://vim-jp.slack.com/files/U03C6TEAZ/F83EYRMUH/gistfile1.diff/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U03C6TEAZ","text":"BeginDraw でクラッシュするんす。","ts":"1511311931.000008","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"エラーが戻るでもなくw","ts":"1511311940.000326","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"うえぇ","ts":"1511311942.000187","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"なして?","ts":"1511311958.000315","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"<https://social.msdn.microsoft.com/Forums/ja-JP/20b4da3a-6f04-4d74-8fb5-d8b359ab37e6/direct2dcomerror?forum=vcgeneralja>","ts":"1511311992.000147","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"BindDCで失敗しているのか…","ts":"1511312146.000144","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"と思うでしょw","ts":"1511312159.000022","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"SUCCEEDED(hr) == TRUE","ts":"1511312166.000261","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"うひょ?w","ts":"1511312178.000059","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"ひどいわー","ts":"1511312193.000076","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"しかも mingw だけなんですよね? わけわかんない。","ts":"1511312199.000338","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"あと","ts":"1511312321.000269","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"`&amp;D2D1::RectF` の `&amp;` を外さないとビルド通らなかった。","ts":"1511312339.000211","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"RECT&amp; なので &amp; 無いのが正しいかな。","ts":"1511312424.000231","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"あーそうか。っていうかVCはなんで通すんだ?w 自動で変換できんの?","ts":"1511313582.000199","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
