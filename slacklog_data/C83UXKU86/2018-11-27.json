[{"type":"message","user":"U06BRP8VD","text":"private な部屋で話題にしてしまったけど、こっちのがふさわしいのでスクショで共有しときます。","ts":"1543258613.018500","files":[{"id":"FEDM9LFD4","created":1543258609,"timestamp":1543258609,"name":"image.png","title":"Pasted image at 2018-11-27, 3:56 AM","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"U06BRP8VD","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":91145,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FEDM9LFD4/image.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FEDM9LFD4/download/image.png","original_h":509,"original_w":801,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-FEDM9LFD4-f31ad6cfa6/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-FEDM9LFD4-f31ad6cfa6/image_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-FEDM9LFD4-f31ad6cfa6/image_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-FEDM9LFD4-f31ad6cfa6/image_360.png","thumb_360_gif":"","thumb_360_w":360,"thumb_360_h":229,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-FEDM9LFD4-f31ad6cfa6/image_480.png","thumb_480_w":480,"thumb_480_h":305,"thumb_720":"https://files.slack.com/files-tmb/T03C4RC8V-FEDM9LFD4-f31ad6cfa6/image_720.png","thumb_720_w":720,"thumb_720_h":458,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/FEDM9LFD4/image.png","permalink_public":"https://slack-files.com/T03C4RC8V-FEDM9LFD4-fe725f219f","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"thumb_800":"https://files.slack.com/files-tmb/T03C4RC8V-FEDM9LFD4-f31ad6cfa6/image_800.png","thumb_800_h":508,"thumb_800_w":800,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"47375059-86a0-4504-ba11-e388a7d78cef","type":"message","user":"U06BRP8VD","text":"Vim script はプログラム言語の実装としては相当に脳筋な形になってます。\n\nだから全体をうまく計測する(=Vim scriptの実行が遅い原因を計測する)冴えたやり方ってちょっと考えにくいです。","ts":"1543258810.020800","team":"T03C4RC8V","reactions":[{"name":"pokemon-psyduck","count":1,"users":["UEA8T80GY"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U7GE3T3H6","text":"<@U7GE3T3H6> has joined the channel","ts":"1543280521.021100","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U7GE3T3H6","text":"<@U7GE3T3H6> has left the channel","ts":"1543280615.021300","subtype":"channel_leave","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"a886159f-fa37-4bd4-97e5-5b48998e1f27","type":"message","user":"U7EEZ4LMR","text":"luaの議論を読んだ\nころんさんの意見は前にも聞いた\nそして、上で書いているように脳筋実装をなんとかするよりもガバッと別なのに変えたほうがいい\nその理由は大幅な高速化の見込み、過去の資産も救える可能性、とかかなと理解","ts":"1543288707.024800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"90402293-545b-418a-a431-c79167ceb21f","type":"message","user":"U7EEZ4LMR","text":"しかし、Bramの先日の発言的にはVimだけでなんとかしたい(他のものに強く依存したくない)という感じがした\nAST知らない、と言ってたので単に分野が違ってただけ、なんだろうか","ts":"1543288786.026800","edited":{"user":"U7EEZ4LMR","ts":"1543288814.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"135a45db-76de-4483-8519-4c766133e1bc","type":"message","user":"U03C6TEAZ","text":"たぶん分野が違ってたけどパワーありすぎて言語作っちゃえる人。","ts":"1543289310.027700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"98270ef2-65ec-4367-bcd5-ec9531d178d3","type":"message","user":"U06BRP8VD","text":"そう。たぶん作っちゃえる。ただanother JIT 作られても困る感じw","ts":"1543289517.028100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e3afec18-df4a-4709-8c82-f259e4e637a9","type":"message","user":"U03C6TEAZ","text":"リンク貼っておきます。 <https://qiita.com/wholekeik/items/e9b528c240d15c714aa4>","ts":"1543290118.028300","attachments":[{"fallback":"Qiita: Vim scriptを処理系レベルから高速化しようとしている話 - Qiita","id":1,"title":"Vim scriptを処理系レベルから高速化しようとしている話 - Qiita","title_link":"https://qiita.com/wholekeik/items/e9b528c240d15c714aa4","text":"# TL; DR Vim scriptをパースしてASTを作り、高速化を図ります。リポジトリはこちら→[wholekeik/vim](<https://github.com/wholekeik/vim/tree/feature/vim>...","thumb_url":"https://cdn.qiita.com/assets/qiita-fb-2887e7b4aad86fd8c25cea84846f2236.png","blocks":null,"service_name":"Qiita","service_icon":"https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-f9a6afad761ec2306e10db2736187c8b.png","thumb_width":200,"thumb_height":200,"from_url":"https://qiita.com/wholekeik/items/e9b528c240d15c714aa4","original_url":"https://qiita.com/wholekeik/items/e9b528c240d15c714aa4"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f52f741b-7978-41a1-a596-39d776be80b0","type":"message","user":"U03C6TEAZ","text":"AST 化で高速化できてない様に見えるのはテストが小さすぎるからだと思う。","ts":"1543290308.028900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"25de4c70-7fe7-446f-af21-a8004c5a4eab","type":"message","user":"U03C6TEAZ","text":"```\nfunction! F()\n    return 1 + 5 * 4 / 10 - 7 + 9 % 5\nendfunction\n\nfor i in range(1000)\n    for j in range(1000)\n        call F()\n    endfor\nendfor\n\nquit\n```\nこれで差が出るのは `function` とか `endfunction` とか `range` みたいなキーワードを strcmp するコストくらいしかない。","ts":"1543290350.029700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7b088615-2398-4f80-a84b-2611c12d5cb6","type":"message","user":"U03C6TEAZ","text":"あとこの計算だと元々そんなに遅くないと思う。","ts":"1543290394.030500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"75992052-7d1a-4b72-b17f-38d0a7d1d0d3","type":"message","user":"U03C6TEAZ","text":"と思ったらまぁまぁ遅かった。","ts":"1543290852.030900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bad7e278-bc32-4b3a-a56e-0a4908bbcc58","type":"message","user":"U03C6TEAZ","text":"まず\n```\nfor i in range(1000)\n    for j in range(1000)\n       call F()\n    endfor\nendfor\n```\nは Windows 7 64bit Core i5 で実行するとおよそ4秒。これを\n```\nfor i in range(1000)\n    for j in range(1000)\n       let a = 1 + 5 * 4 / 10 - 7 + 9 % 5\n    endfor\nendfor\n```\nインラインにして実行すると2.5秒。関数呼び出しが大きい。","ts":"1543291000.032400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c04960fe-024d-4546-aca1-9d97bc945bae","type":"message","user":"U7EEZ4LMR","text":"パワーがすごい…","ts":"1543292184.032700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8c31b914-d646-4d1f-8d9d-d587ca6b23a3","type":"message","user":"U7EEZ4LMR","text":"&gt; another JIT 作られても困る\nこれは独自のを作られると、そのメンテも大変って意味ですか？","ts":"1543292234.033200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bc7829ad-c044-43ff-915b-afa2ecf1bd01","type":"message","user":"U7EEZ4LMR","text":"&gt; テストが小さすぎるから\nこれもなるほど、という感じ、関数呼び出しってそんなに遅かったんですね","ts":"1543292258.033600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b999e6d3-617a-4f5a-83ce-09e202485651","type":"message","user":"U03C6TEAZ","text":"メンテも大変そうですが、過去の偉人たちが作ってきたセオリーが通らないの辛そうですね。","ts":"1543292290.034200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"494a4774-12e3-4b6d-9657-aab66e56726b","type":"message","user":"U03C6TEAZ","text":"「こうすればうまく行く」が使えない。","ts":"1543292314.034600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9d2076a1-ee5f-429b-86d0-2c7a5807f248","type":"message","user":"U06BRP8VD","text":"mattnさんの言うとおりです～","ts":"1543292366.035100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"634b4b92-7b57-44de-b7e6-0d7d460a11b8","type":"message","user":"U7EEZ4LMR","text":"セオリーというとJITを開発/研究してきた知見、という意味です？","ts":"1543292390.035600","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d6992777-d228-4654-8bc5-dbb6960ed080","type":"message","user":"U7EEZ4LMR","text":"この辺りの話がぜんぜん知識ないのでピンと来なくて申し訳無さ","ts":"1543292408.036100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2089b0de-50aa-4ee4-b220-3413581be2cf","type":"message","user":"U06BRP8VD","text":"僕が luajit だ、っていったのは当時手軽に使えるのがそれしかなかったからなんですが、今はもうちょい良いのがあるかもしれない。で、その巨人の肩にノリたい(=時間を節約したい)なぁってのがあります。","ts":"1543292640.037500","team":"T03C4RC8V","reactions":[{"name":"goodpoem","count":1,"users":["U7EEZ4LMR"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"034ce966-4e73-4ae3-abf4-5fbc46f85fe7","type":"message","user":"U06BRP8VD","text":"僕が把握しているJIT周りの動きだと、LLVMに何か合ったのと、あとPostgreSQLの11にもなにがしかのJITが乗ったらしい。","ts":"1543292728.038200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4969325a-90f7-48a8-8989-ce87c01aa828","type":"message","user":"U06BRP8VD","text":"使えるかどうかわからんけど。","ts":"1543292738.038400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"64b543b2-9b43-4883-a554-0fe034feb28c","type":"message","user":"U03C4RC8X","text":"mjitとかもありますね","ts":"1543293205.038600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fb70bc39-7218-4c67-8fee-4b34c4827d8c","type":"message","user":"U06BRP8VD","text":"rubyのは…Vimに使うには色が付きすぎてない?w","ts":"1543293530.039100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"73081040-d77d-4e0b-aec5-b15ea1658cfa","type":"message","user":"U06BRP8VD","text":"いや、印象だけで言ってるんだけど。","ts":"1543293542.039400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"85dd283c-468f-4f95-a6f4-28cd7842fbb5","type":"message","user":"U03C4RC8X","text":":sorena:","ts":"1543293598.039600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1b52f1c2-59c1-4ab9-a4f1-0ef74e654400","type":"message","user":"U03C6TEAZ","text":"まぁなにより vim ってパフォーマンス改善で手が入ったことあまり無いからなぁ。","ts":"1543295417.041300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9800c09f-696e-47bf-a5e1-f292c8a32b95","type":"message","user":"U03C6TEAZ","text":"書く時に気をつけて書いたからそのままなコードが多い。","ts":"1543295479.042800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8fe2d9b9-de87-424e-8463-32676e4a827a","type":"message","user":"U03C6TEAZ","text":"見直せる箇所たくさんある。","ts":"1543295498.043400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"067730e5-bc19-4f5c-bf14-41b7d3753a28","type":"message","user":"U03C71D7H","text":"気をつけて脳筋で書いたコード","ts":"1543295504.043600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7c2413c9-7ec4-4bb5-8cb5-bfbec64e7cfe","type":"message","user":"U782D5DF1","text":"慎重な脳筋コード","ts":"1543297846.044600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
