[{"client_msg_id":"4d30ca07-a6a7-4740-b687-07db95e83d4d","type":"message","user":"U03C6TEAZ","text":"いま vim-lsp で signature help 対応をやってるのだけど","ts":"1567056276.000700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5b8193d5-080d-416b-9296-af097e6bac2a","type":"message","user":"U03C6TEAZ","text":"language server から signature help を出すときのキーはこれだ、というのが返ってくる仕組みで、多くの言語の language server は `(` と `.` を返してくるんですが","ts":"1567056322.001700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"91065481-0b45-40e9-87e5-334ec43fedca","type":"message","user":"U03C6TEAZ","text":"vim-lsp としてはそれを mapping して signature help を出すアクションを取りたい訳です。","ts":"1567056347.002300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"20fa6291-5821-42ef-80c6-1fc84dfbc47d","type":"message","user":"U03C6TEAZ","text":"で、現状は","ts":"1567056367.002500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"91512663-9ed9-43cf-b278-912c77ae5598","type":"message","user":"U03C6TEAZ","text":"```\nfunction! lsp#ui#vim#signature_help#setup() abort\n    let l:buf = bufnr('%')\n    for l:server_name in lsp#get_whitelisted_servers(l:buf)\n        let l:keys = lsp#capabilities#get_signature_help_trigger_characters(l:server_name)\n        for l:key in l:keys\n            if maparg(l:key, 'i') ==# ''\n                let l:action = l:key . '&lt;c-o&gt;:LspSignatureHelp&lt;cr&gt;'\n                exe 'inoremap' '&lt;buffer&gt;' l:key l:action\n            endif\n        endfor\n    endfor\nendfunction\n```\nこういう風に実装したんですが","ts":"1567056375.002800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"aa15f41b-1d7f-47ea-99f5-54c4a4751772","type":"message","user":"U03C6TEAZ","text":"これだと inoremap なので lexima と併用できない問題があるんです。","ts":"1567056392.003200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6c88d931-c820-4837-b49f-baf0562bcea5","type":"message","user":"U03C6TEAZ","text":"```\nlet l:action = l:key . '&lt;c-o&gt;:LspSignatureHelp&lt;cr&gt;'\nexe 'inoremap' '&lt;buffer&gt;' l:key l:action\n```\nこの `l:key` だけは map 扱い、続く `&lt;c-o&gt;...` は noremap 扱いみたいな事がやりたいんですが、なんかいい方法ないですかね。","ts":"1567056445.004100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"960d77b8-85ab-4fd0-bdf0-848be9759bc7","type":"message","user":"U03C6TEAZ","text":"ﾁﾗｯ (<@U03C71D7H>)","ts":"1567056462.004400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"81f8c010-b2a8-4732-bb20-87df9fb795b7","type":"message","user":"U03C71D7H","text":"`InsertCharPre` ?","ts":"1567056543.004900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"386c15da-98b7-455c-8099-98ea6438aad4","type":"message","user":"U03C6TEAZ","text":"なお、signature help は位置が大事で先に `(` が挿入されてないと困る問題があって、なので `InsertCharPre` も使えないというアレ。","ts":"1567056562.005300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"49d171ba-0471-4a73-9542-bf2c8eca6f55","type":"message","user":"U03C6TEAZ","text":"InsertCharPre で feedkeys するという手もあるな。","ts":"1567056590.005700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"77c40de6-ce87-4473-9432-eeec8b368c65","type":"message","user":"U03C6TEAZ","text":"もしくは timer","ts":"1567056604.005900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ac5b2c57-4d6b-4924-bc71-e7378bfdfa25","type":"message","user":"U03C6TEAZ","text":"なんか出来そうな気がしてきました。あざます。","ts":"1567056805.006300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f39eb07c-3cba-4135-a5b2-6492df92151f","type":"message","user":"U03C71D7H","text":"自己解決してた","ts":"1567057451.006500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9350881D-8B33-47BD-A594-4D0DED63FE3C","type":"message","user":"UDDCM376D","text":":sasumatsu: ","ts":"1567057556.006800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dc777e85-04a8-4e23-9e80-9d7eca1ce56b","type":"message","user":"U03C6TEAZ","text":"できた。","ts":"1567057745.007000","team":"T03C4RC8V","reactions":[{"name":"sasumatsu","count":2,"users":["UAZ33BKV2","UDDCM376D"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"19d0ce98-e7e3-434a-a94b-4bda6dfeafce","type":"message","user":"U8CC7MDCL","text":":sokudo:","ts":"1567057816.007500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d56366ac-a21c-4ea3-a5f6-8af56a7c1bdd","type":"message","user":"U03C6TEAZ","text":"lexima と併用","ts":"1567057994.007700","files":[{"id":"FMGHG05QS","created":1567057990,"timestamp":1567057990,"name":"terminal7.gif","title":"terminal7.gif","mimetype":"image/gif","image_exif_rotation":1,"filetype":"gif","pretty_type":"GIF","user":"U03C6TEAZ","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":271284,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FMGHG05QS/terminal7.gif","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FMGHG05QS/download/terminal7.gif","original_h":356,"original_w":717,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-FMGHG05QS-7bbe8d0afb/terminal7_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-FMGHG05QS-7bbe8d0afb/terminal7_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-FMGHG05QS-7bbe8d0afb/terminal7_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-FMGHG05QS-7bbe8d0afb/terminal7_360.png","thumb_360_gif":"https://files.slack.com/files-tmb/T03C4RC8V-FMGHG05QS-7bbe8d0afb/terminal7_360.gif","thumb_360_w":360,"thumb_360_h":179,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-FMGHG05QS-7bbe8d0afb/terminal7_480.png","thumb_480_w":480,"thumb_480_h":238,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U03C6TEAZ/FMGHG05QS/terminal7.gif","permalink_public":"https://slack-files.com/T03C4RC8V-FMGHG05QS-ed429e87ad","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"deanimate_gif":"https://files.slack.com/files-tmb/T03C4RC8V-FMGHG05QS-7bbe8d0afb/terminal7_deanimate_gif.png","display_as_bot":false,"has_rich_preview":false,"thumb_480_gif":"https://files.slack.com/files-tmb/T03C4RC8V-FMGHG05QS-7bbe8d0afb/terminal7_480.gif","username":""}],"upload":true,"reactions":[{"name":"+1::skin-tone-5","count":3,"users":["UAZ33BKV2","U72TB62UF","UGMLBL4NN"]}],"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"2bf08c24-23ed-4dae-a6d2-11b22a8d227e","type":"message","user":"U03C6TEAZ","text":"もうテキストエディタの域を超えてしまってるな。。。","ts":"1567058023.008200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"adf1443b-43cd-4e19-a134-9898dea4d5e2","type":"message","user":"U03C71D7H","text":"これぞテキストエディタのあるべき姿","ts":"1567058659.008700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"35b15a19-edb0-43c7-a812-6118538de0b8","type":"message","user":"U03C6TEAZ","text":"coc.nvim が signature help を実現できてるのでどうしても vim-lsp でやりたかった。","ts":"1567058977.009100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0554b8b4-65a9-4121-8afc-5e3da8985914","type":"message","user":"UAZ33BKV2","text":"競争相手がいることは大事\n\n- OSSは停滞と戦うために\n- プロプラなら独占的優位の腐敗防止のために\n\nでも使うのは最善アイテムになって、えてして先鋭化する...","ts":"1567060877.010600","edited":{"user":"UAZ33BKV2","ts":"1567064062.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f1e85daa-81f6-47cd-b568-ff09c2d22ab7","type":"message","user":"U7D5LRRQD","text":"うおおおお、すごい！","ts":"1567063921.010900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"276c559d-a79d-4e97-8ac2-d84ce99e3cc2","type":"message","user":"U7D5LRRQD","text":"なんかこんな状態になってるのは、僕だけでしょうか （？）\n\nOK\n\n```\nlet x = 'a|b'\nput!=x\n```\n\nNG (missing quote)\n\n```\nput!='a|b'\n```\n\n（あるとすれば、|の解釈ミスっぽいけど！）","ts":"1567064062.011200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"79b4382d-3ca3-4f65-ba7e-5c1a1aa13b3a","type":"message","user":"U03C6TEAZ","text":"コマンドラインの中では `|` はエスケープする必要があります。","ts":"1567064943.011500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"472462fb-6f6e-4492-a862-07a8bab448e3","type":"message","user":"U03C6TEAZ","text":"とはいえバグっぽい。","ts":"1567064965.011800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6b233b15-1e8b-49f0-988c-69894183fbe7","type":"message","user":"U0M7GCBPD","text":"`:put` が -bar なの地味にハマるやつ","ts":"1567065025.012300","thread_ts":"1567065025.012300","reply_count":1,"replies":[{"user":"U7D5LRRQD","ts":"1567073867.019300"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"939db6cc-e6dc-44de-a9e7-2631ebb722b4","type":"message","user":"U03C6TEAZ","text":"<#C03C4RC9F|random> から話派生で <#C83UXKU86|dev> に引越し。\n\nVim に undo の API がほしい。","ts":"1567065687.012600","team":"T03C4RC8V","reactions":[{"name":"laughing","count":1,"users":["U7B4ZD49X"]},{"name":"wakaru","count":1,"users":["U0M7GCBPD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e02122de-3852-413e-9c90-e21a51dcd800","type":"message","user":"U03C6TEAZ","text":"そもそも setline は repeatable な操作じゃないので undo も repeat もされないのが当然すね。","ts":"1567065716.013100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"ULV7CMKTK","text":"<@ULV7CMKTK> has joined the channel","ts":"1567066044.013400","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"585d1d8c-89cb-4764-8a87-392ffcc5b559","type":"message","user":"U0M7GCBPD","text":":totemo: :wakaru:","ts":"1567066171.013900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"aa2d01d5-073f-42b9-9b73-b6556022229e","type":"message","user":"UAZ33BKV2","text":"<https://github.com/mbbill/undotree>\nゴリゴリやってるなあ...","ts":"1567068586.014200","attachments":[{"fallback":"GitHub: mbbill/undotree","id":1,"title":"mbbill/undotree","title_link":"https://github.com/mbbill/undotree","text":"The undo history visualizer for VIM. Contribute to mbbill/undotree development by creating an account on GitHub.","thumb_url":"https://avatars2.githubusercontent.com/u/841602?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/mbbill/undotree","original_url":"https://github.com/mbbill/undotree"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fb9782d5-99ef-4660-88d3-a8e4e1f4573d","type":"message","user":"U03C71D7H","text":"undo はツリー情報を取得する API はあります。操作するのがない","ts":"1567068640.014900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a8777276-ad2c-4ed7-a306-4d4f86f38a03","type":"message","user":"UAZ33BKV2","text":"なるほど...(まだそこまで見れてなかった)","ts":"1567068682.015200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4b2eacbb-47e1-4cbf-b5b2-c5af2b10e6f8","type":"message","user":"UAZ33BKV2","text":"その意味では、featureの大義名分がありますね、「undo treeが見れるんだし、そこまでundoするAPIを(作ったよ)」と","ts":"1567068730.016000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b18110fe-0e2d-498f-bc74-9eec7856a543","type":"message","user":"U03C71D7H","text":"あー、そのポイントまで undo もできるはず。undo を結合したりとかができないはず","ts":"1567068762.016500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b176c080-31bc-422f-9042-552490658476","type":"message","user":"UAZ33BKV2","text":"おっと...","ts":"1567068776.016700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"127c3464-cb78-44ba-95a9-d0c744a8803f","type":"message","user":"U0M7GCBPD","text":"API 決めるの難しそう","ts":"1567069954.017000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"002c90f6-e29e-4e0a-b43d-8b316283ea0d","type":"message","user":"U0M7GCBPD","text":"`undoamend()`, `undo([{'action': 'amend', seq: [from, to]}])`","ts":"1567070043.018000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5400d15b-8225-4ab1-99f2-cb0a21a24e79","type":"message","user":"U0M7GCBPD","text":"`:undojoin` あるんだから join か","ts":"1567070060.018300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c8d910f2-b977-46c9-8f9b-f0685433ad13","type":"message","user":"U03C71D7H","text":"あと、結局 undo tree は取れるけど内容が取れないので、API があってもどれとどれを結合すれば期待した形になるのかがわからんってのがありそうではある","ts":"1567070242.019200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"66a46d42-b0f8-4d09-a0fc-3064f20d33bb","type":"message","user":"U7D5LRRQD","text":"あ、そうだ。\nVim scriptには-barがあったのでした……:sob:","ts":"1567073867.019300","thread_ts":"1567065025.012300","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":null,"root":{"client_msg_id":"6b233b15-1e8b-49f0-988c-69894183fbe7","type":"message","user":"U0M7GCBPD","text":"`:put` が -bar なの地味にハマるやつ","ts":"1567065025.012300","thread_ts":"1567065025.012300","reply_count":1,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null}},{"client_msg_id":"1d27da48-8c3f-49e7-b988-d1650c411333","type":"message","user":"U7D5LRRQD","text":"なんか雑にzipper構造が辞書で欲しいかもしれない","ts":"1567073926.020200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"675a7eb3-634e-44de-a785-831e7c2e18e1","type":"message","user":"U7D5LRRQD","text":"zipperに代入したら本体のツリーもかわってほしい（理想）","ts":"1567073961.020900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"693334a9-4258-4d65-a6c7-aed0e0dd5c12","type":"message","user":"U0M7GCBPD","text":"<@U03C71D7H> それは元々 :undojoin とかも同じなのでは？","ts":"1567074244.021500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6b3a370a-f308-48e2-95ce-e05bbfef85b1","type":"message","user":"U03C71D7H","text":"実際 `:undojoin` の動作難しすぎる","ts":"1567074310.022400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"238fa720-3632-422b-a540-0116c5005e5e","type":"message","user":"U0M7GCBPD","text":":wakaru:","ts":"1567074322.022600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9a6830f8-35df-4d88-9be2-b351a22a471d","type":"message","user":"U0M7GCBPD","text":"(あ、一応 `seq: [from, to]` で `undotree()` の `seq` の開始と終了の番号を指定するイメージです)","ts":"1567074328.022900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
