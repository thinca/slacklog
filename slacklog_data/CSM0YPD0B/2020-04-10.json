[{"client_msg_id":"145e16fe-a34c-4cec-9732-782e8a22e7d4","type":"message","user":"UEACRCY0Z","text":"docker-compose.yml 使うと勝手にネットワーク周りの解決は認識ですけど、何か変わりました？","ts":"1586486837.009800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jYyB9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9a9be0d1-9ac2-4d0e-86c2-aafda6fe02dc","type":"message","user":"U06ECBRTJ","text":"手で、トップレベルの `networks` を定義して、何かしてたんですかね？","ts":"1586486977.010400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XADQt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4abcf3aa-8fbe-4fe4-85a0-4f9218190b8f","type":"message","user":"U06ECBRTJ","text":"```version: '3'\nservices:\n  web:\n    image: seikacenter\n    build:\n      context: .\n    networks:\n      app_net:\n        ipv4_address: 172.40.0.2\n    ports:\n      - 19000-19002:19000-19002\n    volumes:\n      - .:/home/node/app\n    environment:\n      - EXPO_DEVTOOLS_LISTEN_ADDRESS=172.40.0.2\n    command: 'yarn start'\nnetworks:\n  app_net:\n    driver: bridge\n    ipam:\n      driver: default\n      config:\n        - subnet: 172.40.0.0/24```\n最近、コンテナを固定IPにしたくて、こんな設定書きました","ts":"1586487067.011100","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UEACRCY0Z"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dhh2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4b83473c-231b-4dc3-bd45-711875611bb5","type":"message","user":"UDDCM376D","text":"自分の場合\nnetworksの名前が\n```networks:\n  gorilla```\nで、gorillaになると思ったらそうではなく\n```networks:\n  name: gorilla```\nでやらないとだめだった","ts":"1586487560.012000","edited":{"user":"UDDCM376D","ts":"1586487564.000000"},"team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UEACRCY0Z"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+Gw86"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"127bfd63-7216-4312-b7f5-cf9aaec1457f","type":"message","user":"UNJ2DANJC","text":"基本的に人はyamlにハマりがち","ts":"1586488103.012900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gTjYV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f74e515f-6fd0-454e-981c-5e4952649450","type":"message","user":"UNJ2DANJC","text":"そういえば最近composeの仕様を標準化する動きがありますね\n<https://www.publickey1.jp/blog/20/compose_specificationdockeraws.html|https://www.publickey1.jp/blog/20/compose_specificationdockeraws.html>","ts":"1586488348.014300","attachments":[{"fallback":"マルチコンテナ環境を構成するためのオープン仕様「Compose Specification」登場。Docker、AWS、マイクロソフトらが協力して仕様拡張へ","id":1,"title":"マルチコンテナ環境を構成するためのオープン仕様「Compose Specification」登場。Docker、AWS、マイクロソフトらが協力して仕様拡張へ","title_link":"https://www.publickey1.jp/blog/20/compose_specificationdockeraws.html","text":"Docker社は、同社がDocker Composeとして提供してきた複数のDockerコンテナをまとめて構成する機能の仕様を「Compose Specification」としてオープンな仕様とし、Amazon Web Services（A...","image_url":"https://www.publickey1.jp/2020/compose_specification.gif","blocks":null,"service_name":"publickey1.jp","service_icon":"https://www.publickey1.jp/favicon.ico","from_url":"https://www.publickey1.jp/blog/20/compose_specificationdockeraws.html","original_url":"https://www.publickey1.jp/blog/20/compose_specificationdockeraws.html"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tiW/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ece04125-254f-4a37-867c-76d7c231697f","type":"message","user":"U03C6TEAZ","text":"coc.nvim か vim-lsp-settings を使っていたら、きっとゴリラさんの yaml は赤字で表示されてたはず。","ts":"1586488639.015500","team":"T03C4RC8V","reactions":[{"name":"angxing","count":4,"users":["UNJ2DANJC","U9S4G0LJW","UEACRCY0Z","U0119AFDQMN"]},{"name":"banjaku","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lUCxs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c2c44415-a5ec-4312-b2d4-de18fd2dfe36","type":"message","user":"U8CC7MDCL","text":"compose手軽でいいよなー\n正直composeにオートヒーリングついたくらいのやつがノンクリティカルのシステムには丁度良さそう…\n(k8sはtoo muchすぎる)","ts":"1586488718.018000","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":1,"users":["UEACRCY0Z"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mTf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fc51e442-4f8b-425b-9f95-792b4d8d8265","type":"message","user":"UNJ2DANJC","text":"確かにLSP経由でjson schemaでバリデーションするようになってからハマること減った","ts":"1586488725.018200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9SR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fe68c12b-c8cb-405d-b887-c0b2f6d761c1","type":"message","user":"UNJ2DANJC","text":"restart: alwaysでvm上で本番運用してますが、まあなんとかなってますね。\nログはちょっと工夫しないといけないですけど。\nlogging driverをsyslogにするのが1番手軽でしょうかね","ts":"1586489305.023200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9vii"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"995f1bd3-6744-4bb0-ba84-330d03a4147e","type":"message","user":"U06ECBRTJ","text":"正直、dockerコマンドでオプション書きたくないから、docker-compose 使ってるのある","ts":"1586491789.024500","team":"T03C4RC8V","reactions":[{"name":"tiken","count":1,"users":["UAZ33BKV2"]},{"name":"wakaru","count":2,"users":["UNJ2DANJC","U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bT/="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d74b6cd7-f046-4d1a-92aa-2fa71cdf0187","type":"message","user":"U06BRP8VD","text":"docker-composeに初回のupのときだけ適用される何かを書きたい…","ts":"1586491876.025200","thread_ts":"1586491876.025200","reply_count":7,"replies":[{"user":"U06ECBRTJ","ts":"1586494744.029000"},{"user":"U06BRP8VD","ts":"1586494828.029300"},{"user":"U06ECBRTJ","ts":"1586495171.029500"},{"user":"U06ECBRTJ","ts":"1586495208.029700"},{"user":"U06ECBRTJ","ts":"1586495240.030000"},{"user":"U06BRP8VD","ts":"1586495251.030200"},{"user":"U06BRP8VD","ts":"1586495310.030400"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ptya"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e20b78c0-1e25-47c6-b5ed-545e4841e639","type":"message","user":"U03C6TEAZ","text":"ﾄﾞｯｶｰｺﾝﾎﾟｰｽﾞ ｱｯﾌﾟ って喋らせるんですね？わかります","ts":"1586492081.025900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SBD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7efed1a4-6329-4dc9-8913-45ae7d980310","type":"message","user":"UNJ2DANJC","text":"bashでやれと\n<https://github.com/docker/compose/issues/1510|https://github.com/docker/compose/issues/1510>","ts":"1586492237.026300","attachments":[{"fallback":"GitHub: Proposal: docker-compose events · Issue #1510 · docker/compose","id":1,"title":"Proposal: docker-compose events · Issue #1510 · docker/compose","title_link":"https://github.com/docker/compose/issues/1510","text":"There have been a few requests for supporting some form of &amp;quot;hooks&amp;quot; system within compose (#74, #1341). A feature which runs commands on the host would add a lot of complexity to compose a...","thumb_url":"https://avatars2.githubusercontent.com/u/5429470?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/docker/compose/issues/1510","original_url":"https://github.com/docker/compose/issues/1510"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Yye5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e56719fc-ac2e-4937-b542-92df8b241785","type":"message","user":"UNJ2DANJC","text":"長くて全部読む気になれない","ts":"1586492278.027100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qxeI9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a2672fd5-8059-4fd5-bea9-54bd63419b1c","type":"message","user":"U06ECBRTJ","text":"mysql だと、mysql,init.d だかにファイル置くと、初回だけやってくれるので、それを参考にしてみるとかですかね","ts":"1586494744.029000","thread_ts":"1586491876.025200","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7xUAl"}],"root":{"client_msg_id":"d74b6cd7-f046-4d1a-92aa-2fa71cdf0187","type":"message","user":"U06BRP8VD","text":"docker-composeに初回のupのときだけ適用される何かを書きたい…","ts":"1586491876.025200","thread_ts":"1586491876.025200","reply_count":7,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ptya"}]}},{"client_msg_id":"76dddc6f-299b-4a66-8f66-77ff76cf3dd9","type":"message","user":"U06BRP8VD","text":"そういうイメージ作るしか無いんですよね。それがめんどう","ts":"1586494828.029300","thread_ts":"1586491876.025200","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Oqx9R"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4fde9557-ec6f-4017-a7f4-b47dbe21696b","type":"message","user":"U06ECBRTJ","text":"ちなみに、mysql のイメージだと、`/var/lib/mysql` にディレクトリが無い場合だけ、 `/docker-entrypoint-initdb.d` のファイルを処理するようです","ts":"1586495171.029500","thread_ts":"1586491876.025200","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JJL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3a4fcc17-2822-4814-802c-676edf14dce7","type":"message","user":"U06ECBRTJ","text":"<https://github.com/docker-library/mysql/blob/master/5.6/docker-entrypoint.sh#L53-L69>","ts":"1586495208.029700","thread_ts":"1586491876.025200","attachments":[{"fallback":"GitHub: docker-library/mysql","id":1,"title":"docker-library/mysql","title_link":"https://github.com/docker-library/mysql/blob/master/5.6/docker-entrypoint.sh#L53-L69","text":"Docker Official Image packaging for MySQL Community Server - docker-library/mysql","thumb_url":"https://avatars0.githubusercontent.com/u/7739233?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/docker-library/mysql/blob/master/5.6/docker-entrypoint.sh#L53-L69","original_url":"https://github.com/docker-library/mysql/blob/master/5.6/docker-entrypoint.sh#L53-L69"}],"parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Zmp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7852942e-bbdb-4db6-9878-d9786add2380","type":"message","user":"U06ECBRTJ","text":"まぁ、仕組みづくりは面倒ですよね","ts":"1586495240.030000","thread_ts":"1586491876.025200","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OSkjs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5f0c4b3d-829a-40d7-a1c4-23addfaf66d0","type":"message","user":"U06BRP8VD","text":"dbはポスグレもそうなんですよね〜","ts":"1586495251.030200","thread_ts":"1586491876.025200","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dhQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0bb7d14e-1163-4ddf-9f4c-d89243eaeff0","type":"message","user":"U06BRP8VD","text":"本番の運用環境考えると本体に組み込むのは危険だし、別イメージ作るのはだるいし。","ts":"1586495310.030400","thread_ts":"1586491876.025200","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WhMKL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"120f200e-237e-4ec7-b171-d1b8c1bcb83b","type":"message","user":"UDDCM376D","text":"yamlも、導入するかー","ts":"1586497838.030800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aAVyB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
