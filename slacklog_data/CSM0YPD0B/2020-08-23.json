[{"client_msg_id":"1a815838-cb88-40f5-8f0d-f40221f3a4a3","type":"message","user":"U03C71D7H","text":"GitHub 側も消せるようになってほしい。private リポジトリなら消せるのだけど、そのために一時的に private にすると star がすべて吹っ飛ぶので star してくれた人に申し訳なさ","ts":"1598159647.060100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pdock"}]},{"client_msg_id":"ace0880e-e80a-4ff0-ba87-0b9ab769a01b","type":"message","user":"U03C71D7H","text":"ああー、いや、Docker Hub の方は普通に tag 消せそう。リポジトリ分けんでもいいか","ts":"1598159602.059200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tij7u"}]},{"client_msg_id":"10590341-b63a-4666-befc-889042321d88","type":"message","user":"U03C71D7H","text":"で、キャッシュ用のイメージはどこに push しておこうかなーと。まあ現時点では Docker Hub 一択なので、いつでも消せるように独立したキャッシュ用のイメージに置いとこうかな","ts":"1598159453.058600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3Bshb"}]},{"client_msg_id":"f6df79f3-d874-4b0e-8a09-af926eb71b76","type":"message","user":"U03C71D7H","text":"上書きは可能だけど削除はできないので test は消せないんですよねw","ts":"1598159400.057500","team":"T03C4RC8V","reactions":[{"name":"gunnyari","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XJ5Wy"}]},{"client_msg_id":"7f43b97f-58ed-41f4-b7e0-4f5a2130f7de","type":"message","user":"U9S4G0LJW","text":"上書きするしか(しても履歴残ってたような)","ts":"1598159382.057100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uU=uS"}]},{"client_msg_id":"76df81d1-1ce4-4823-ad5b-94dd57e522b2","type":"message","user":"U03C71D7H","text":"すでに一度、 test とか言う tag を push してしまって、ぐぬぬ～ん、となっている","ts":"1598159353.056100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WIO51"}]},{"client_msg_id":"88ff0877-1e39-48b1-bd56-92d0c414ccab","type":"message","user":"U03C71D7H","text":"色々やってて知ったのだけど、Docker って一度 push したイメージはレジストリサービス側で別途 UI を提供していない限り削除できないんですよね","ts":"1598159336.055600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5NpSY"}]},{"client_msg_id":"be150566-2411-4021-b9cc-251d678ef516","type":"message","user":"U9S4G0LJW","text":":naruhodo:","ts":"1598159282.054800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ERU"}]},{"client_msg_id":"5938dc60-d758-4cf2-ba1c-ecf14af5d636","type":"message","user":"U03C71D7H","text":"送れますよー。なのでそれをやろうと思ってます","ts":"1598159266.054600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NgU7"}]},{"client_msg_id":"ef3830b7-89ad-4ac8-b96f-9c008032b47d","type":"message","user":"U03C71D7H","text":"それはさておき、この件は私が今やろうとしていることとはまったく関係ないのであった","ts":"1598159258.054300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VNTFH"}]},{"client_msg_id":"fffd3cdb-0e52-49a8-aa9f-2f1f945a9f36","type":"message","user":"U9S4G0LJW","text":"ActionsからDocker Hubに送れないもの？","ts":"1598159253.054200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WECT2"}]},{"client_msg_id":"5dc5bc92-6b4b-4084-a339-644113ff03d6","type":"message","user":"U03C71D7H","text":"public な image の pull に認証が必要なの、色々ともったいないなぁと思うので改善されてほしいところ","ts":"1598159240.053500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"98zu"}]},{"client_msg_id":"6f7df70b-8721-425f-b673-026140599017","type":"message","user":"U03C71D7H","text":"\u003chttps://qiita.com/yoichiwo7/items/dcea47782a5189d1c1c9\u003e ふーむ","ts":"1598159159.052800","attachments":[{"fallback":"Qiita: GitHub Package RegistryのDockerイメージは認証無しではPullできない (2020/01/12時点) - Qiita","id":1,"title":"GitHub Package RegistryのDockerイメージは認証無しではPullできない (2020/01/12時点) - Qiita","title_link":"https://qiita.com/yoichiwo7/items/dcea47782a5189d1c1c9","text":"ハマる人がいるかもしれないのでMEMOです。 2020/01/12時点ではGitHub PackagesのDockerレジストリ(\u003chttp://docker.pkg.github.com|docker.pkg.github.com\u003e)に登録されているDockerイメージはdocker log...","image_url":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-1.2.2\u0026w=1200\u0026mark=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D380%26txt%3DGitHub%2520Package%2520Registry%25E3%2581%25AEDocker%25E3%2582%25A4%25E3%2583%25A1%25E3%2583%25BC%25E3%2582%25B8%25E3%2581%25AF%25E8%25AA%258D%25E8%25A8%25BC%25E7%2584%25A1%25E3%2581%2597%25E3%2581%25A7%25E3%2581%25AFPull%25E3%2581%25A7%25E3%2581%258D%25E3%2581%25AA%25E3%2581%2584%2520%25282020%252F01%252F12%25E6%2599%2582%25E7%2582%25B9%2529%26txt-color%3D%2523333%26txt-font%3DHiragino%2520Sans%2520W6%26txt-size%3D54%26txt-clip%3Dellipsis%26txt-align%3Dcenter%252Cmiddle%26s%3D79247042df1821e61fa0712bd2c24de1\u0026mark-align=center%2Cmiddle\u0026blend=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D500%26txt%3D%2540yoichiwo7%26txt-color%3D%2523333%26txt-font%3DHiragino%2520Sans%2520W6%26txt-size%3D45%26txt-align%3Dright%252Cbottom%26s%3Dbc1881776cea3b1d7fb90b9be03ebfc9\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=16f87f26a2690cceed7cec008667155b","blocks":null,"service_name":"Qiita","service_icon":"https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png","from_url":"https://qiita.com/yoichiwo7/items/dcea47782a5189d1c1c9","original_url":"https://qiita.com/yoichiwo7/items/dcea47782a5189d1c1c9"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"J/qi1"}]},{"client_msg_id":"e8b55767-a59e-4654-bdc8-50d293654529","type":"message","user":"UAZ33BKV2","text":"エンタープライズの認証系そのままで、処理共通にして開発コスト(含む品質のためのコスト)を抑えてるとか?","ts":"1598159024.052600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BSm4z"}]},{"client_msg_id":"1e205f12-8410-49ab-9ae4-4af4e8ff7778","type":"message","user":"U03C71D7H","text":"そういえば GitHub のパッケージレジストリは、単に pull するだけの場合でも認証が必要になるのはなんでなんだろうなぁ","ts":"1598158896.051600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bWmFR"}]},{"client_msg_id":"772b9094-c76b-42e8-8a40-14f1ddab08ab","type":"message","user":"U03C71D7H","text":"ちゃんと調べるか、もうどうでもいいので Docker Hub にキャッシュを置いておくことにして先に進むか","ts":"1598158775.050900","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6sHNY"}]},{"client_msg_id":"4297ec44-e439-4c91-9e08-516bfa5091fb","type":"message","user":"U03C71D7H","text":"で、ビルドする時にキャッシュしたいよねって話があって、Docker Hub に push したやつからは --cache-from が効いたけど GitHub Packages に push したやつだと効かない、というのが前回までのあらすじ","ts":"1598158741.050300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zCD5"}]},{"client_msg_id":"981c6718-c6d6-4cb9-8736-f999b1d1551d","type":"message","user":"U03C71D7H","text":"Docker Hub は GitHub のリポジトリと連携して、GitHub に push があったら自動でビルドをするって機能があるのだけど、これがなぜかこの 1,2 ヶ月くらいで止まってしまっている。原因不明。\nDocker Hub 自体のビルド周りが最近不安定で、ビルドのログとかも一切見れなくなってしまったし、もうダメそうって感じなので、GitHub Actions でビルドして push する作戦に切り替える。ビルド速度もたぶんこっちの方が速い。GitHub ありがたい…。","ts":"1598158682.049200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dIKt"}]},{"client_msg_id":"2e737862-42b6-4980-bb6b-cc43d90bc327","type":"message","user":"UAZ33BKV2","text":"長い旅路...というか大変な手順だ...","ts":"1598158517.046900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3Y8ek"}]},{"client_msg_id":"9e43416b-4df3-4a6c-835f-1f5023a693e9","type":"message","user":"U03C71D7H","text":"さて、Vim の最新でバグが直ったので、ここで「なぜか Docker Hub の thinca/vim の自動更新が止まっていて、CI がこのイメージを使っているので最新版でテストできない」と言う問題に帰着したぞ","ts":"1598157997.046500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zJl"}]}]
