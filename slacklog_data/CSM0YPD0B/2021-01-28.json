[{"client_msg_id":"fbd550a0-57fe-4a7b-a968-3d187c2b6b2e","type":"message","user":"U06BRP8VD","text":"ああstart \u0026amp; stopでどのくらいかかるか見るってのもありますねぇ","ts":"1611841305.030900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lX5l"}]},{"client_msg_id":"f987c5ee-e776-4567-8fb0-21e35a19fae6","type":"message","user":"UNJ2DANJC","text":"そういえばdocker-composeのv1.28.0で `COMPOSE_DOCKER_CLI_BUILD=1` がデフォルトになったらしい。\n\u003chttps://github.com/docker/compose/blob/master/CHANGELOG.md#1280-2021-01-20\u003e","ts":"1611839832.030200","attachments":[{"fallback":"GitHub: docker/compose","id":1,"title":"docker/compose","title_link":"https://github.com/docker/compose/blob/master/CHANGELOG.md#1280-2021-01-20","text":"Define and run multi-container applications with Docker - docker/compose","thumb_url":"https://avatars.githubusercontent.com/u/5429470?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/docker/compose/blob/master/CHANGELOG.md#1280-2021-01-20","original_url":"https://github.com/docker/compose/blob/master/CHANGELOG.md#1280-2021-01-20"}],"team":"T03C4RC8V","reactions":[{"name":"hee","count":2,"users":["U7B4ZD49X","U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pMv"}]},{"client_msg_id":"59103E7D-BA9E-4379-8C66-FCA2D2D0504D","type":"message","user":"U011FTGJ3SN","text":"1分って書いちゃったけどちゃんと測定したわけではないので盛ってしまってる感もあります","ts":"1611839289.028300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0T8ZN"}]},{"client_msg_id":"ADFB46D6-7B81-483C-81CD-AA45BCD0E208","type":"message","user":"U011FTGJ3SN","text":"logs -f すると普通にApacheの起動に時間がかかってる感じでしたー\n\nなので、Apacheのモジュールを疑ったんですが、デフォルトで余計なもの読み込んでる感じでは無かったのです","ts":"1611838959.027300","edited":{"user":"U011FTGJ3SN","ts":"1611839064.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ygfOm"}]},{"client_msg_id":"393effc6-2ecb-4632-912b-a4d61bf99373","type":"message","user":"UDDCM376D","text":"up する祭のlogで何が時間かかっているのか見れそうな気がしなくもない","ts":"1611838174.026200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bZSk"}]},{"client_msg_id":"6479a9b4-1d2a-4d7b-a874-e84a1fc3cdc5","type":"message","user":"UDDCM376D","text":"1分掛かるのはしんどい","ts":"1611838118.025500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fIL="}]},{"client_msg_id":"beeff424-9756-4ff9-8997-e660c6dd4771","type":"message","user":"UEACRCY0Z","text":"docker-compose up 遅いから docker-compose down するのやめました (for Mac)","ts":"1611837985.025300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KO/Hu"}]},{"client_msg_id":"1f6b42c1-181a-453f-ab6d-ee694fb31d6e","type":"message","user":"U9S4G0LJW","text":"というか割とOSに近い層なのでOSの話題になるのは仕方なさそう","ts":"1611836992.023800","team":"T03C4RC8V","reactions":[{"name":"sorena","count":2,"users":["UAZ33BKV2","U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RrN1w"}]},{"client_msg_id":"4084cee2-2225-4410-9c5c-f201d2168c19","type":"message","user":"U9S4G0LJW","text":"まあこのSlackはいつも脱線してるのでw","ts":"1611836950.023400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eFk"}]},{"client_msg_id":"9E74D6D9-0A5B-4D66-91C3-670C690A07BC","type":"message","user":"U011FTGJ3SN","text":"ありがとうございます！\n\u003c#C011WE9V2R1|os-windows\u003eみのあるトピックになってしまって恐縮です","ts":"1611836926.023100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"i/6w4"}]},{"client_msg_id":"cdccbf49-d46b-4970-bd72-b845c7c22076","type":"message","user":"U06BRP8VD","text":"できればProでHyper-Vのほうも試してみることをお勧めしますよ。","ts":"1611836317.022200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"L90UE"}]},{"client_msg_id":"4bb9e179-76c9-4750-b9ac-b8b1a1d02486","type":"message","user":"U06BRP8VD","text":"考えられるのはdisk i/oかしら…docker-composeでbuildが走ると遅くなるってのは考えられますが、それも最初の1回だけって感じもします。.dockerignoreで不要なものをコンテナに見せないってことも大事だとは思いますが…","ts":"1611836293.021700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"z51"}]},{"client_msg_id":"98f65e98-2158-4273-9798-eb9452fdd8fe","type":"message","user":"U06BRP8VD","text":"ああなるほどぉ","ts":"1611836195.020100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EAU"}]},{"client_msg_id":"F3EA1FF1-26E6-427B-92F9-49C40952997F","type":"message","user":"U011FTGJ3SN","text":"WSL2は使ってないですー\n\nHyper-VなのかWSL2なのか自分の中で認識が間違ってる気がするのでちょっと確認します。。\n\nWindows 10 HOMEなのでWSL2でした","ts":"1611834616.019500","edited":{"user":"U011FTGJ3SN","ts":"1611835562.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xK5"}]},{"client_msg_id":"0c7b3a93-4348-4b19-8df7-485fc24ce204","type":"message","user":"U06BRP8VD","text":"ちなみに Docker は Docker Desktop for Windows を WSL2 で動かしていたりします?","ts":"1611833901.018600","edited":{"user":"U06BRP8VD","ts":"1611833975.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"62Wuj"}]},{"client_msg_id":"ee8135f2-ff51-4f7e-9d81-9deb1a44f1ea","type":"message","user":"U06BRP8VD","text":"うちの構成だと一瞬だな。もちろんvolumeがもうできてる前提でpostgresqlを2個、redisを2個、redashを1個起動して10秒かかんない感じ。\n\n(Hyper-V + Docker Desktop for Windows)","ts":"1611833873.018000","edited":{"user":"U06BRP8VD","ts":"1611833970.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YqsEH"}]},{"client_msg_id":"5fdbca12-0b5e-499e-afcf-e3f5d3c6142a","type":"message","user":"UAZ33BKV2","text":"なんかdocker用の問題点確認ベンチイメージみたいなのあればいいんですけどねえ(くわしくない)","ts":"1611832763.016900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6OHY3"}]},{"client_msg_id":"E207D0EA-98A7-4F40-B8B8-C3EBBC423B3B","type":"message","user":"U011FTGJ3SN","text":"ホストのせいってことで一旦諦めますー","ts":"1611832723.016300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DNYeY"}]},{"client_msg_id":"af850681-9ec7-454f-9fc0-729f429f6e90","type":"message","user":"U06ECBRTJ","text":"このPCクソ古いので、ちょっといいサーバー機レベル","ts":"1611832408.015500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"o17CA"}]},{"client_msg_id":"d1e7b789-4dd2-481c-b519-892d2bbcd2b6","type":"message","user":"U7B4ZD49X","text":"計測大事。6倍くらいの差だとするとありえそうな気がする・・・","ts":"1611832376.015000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tf6PN"}]},{"client_msg_id":"5cd6692f-97e5-4d00-81f1-e67e5ed8ad94","type":"message","user":"U06ECBRTJ","text":"Linux だと、素の php:7.0-apache にcurl できるようになるまで、10秒くらいだった\n```[Thu Jan 28 11:09:52.276771 2021] [mpm_prefork:notice] [pid 1] AH00163: Apache/2.4.25 (Debian) PHP/7.0.33 configured -- resuming normal operations\n[Thu Jan 28 11:09:52.276842 2021] [core:notice] [pid 1] AH00094: Command line: 'apache2 -D FOREGROUND'\n[Thu Jan 28 11:10:04.604979 2021] [autoindex:error] [pid 17] [client 172.17.0.1:53610] AH01276: Cannot serve directory /var/www/html/: No matching DirectoryIndex (index.php,index.html) found, and server-generated directory index forbidden by Options directive\n172.17.0.1 - - [28/Jan/2021:11:10:04 +0000] \"GET / HTTP/1.1\" 403 447 \"-\" \"curl/7.68.0\"```","ts":"1611832293.014200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"N3Tlm"}]},{"client_msg_id":"3fbb6491-dc5c-49ba-8312-8e5bc08f1ab0","type":"message","user":"UAZ33BKV2","text":"まあ、仮想化はメモリやCPUや速度とかを多少犠牲にすることで利便性と安全性取ってるみたいなところあるし、ある程度は金で殴るのがいいでしょうねえ","ts":"1611832226.013300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SXpd"}]},{"client_msg_id":"3c24e70f-0d0d-46f1-8c9f-cb6230139f1b","type":"message","user":"U7B4ZD49X","text":"結局起動速度とか気にし始めるとdocker-composeの範疇から外れて行く気はしてるんですよね。おとなしくk8sとかな気がします。","ts":"1611832180.012400","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["U011FTGJ3SN"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vqIs4"}]},{"client_msg_id":"0a4962d0-a72f-40d9-bc93-a4d5290a6a0f","type":"message","user":"UAZ33BKV2","text":"Windowsは本体機能連携が長いから揉まて+WSL2のこともあって、わりと良くなった印象があるけど、さてどうなんだろう?","ts":"1611832059.011500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wvbGG"}]},{"client_msg_id":"1ff8d7a4-7529-4f08-a11d-6baf5a5f7b25","type":"message","user":"U9S4G0LJW","text":"大体Docker for Macの悪評のせいだけど","ts":"1611832010.010600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"u33"}]},{"client_msg_id":"287cddad-f1b0-40ac-9ec3-9df3c293d643","type":"message","user":"U9S4G0LJW","text":"Linux以外のDockerって性能が出ないイメージがある","ts":"1611831991.009700","team":"T03C4RC8V","reactions":[{"name":"sorena","count":2,"users":["U7B4ZD49X","U06ECBRTJ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"h=/x7"}]},{"client_msg_id":"58fa01d5-57fa-41db-84c2-3780bf619862","type":"message","user":"U7B4ZD49X","text":"がくぶる","ts":"1611831983.009300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xqihO"}]},{"client_msg_id":"92C68180-208F-49B7-A732-10A819178A21","type":"message","user":"U011FTGJ3SN","text":"Windowsですー","ts":"1611831937.008500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QEc58"}]},{"client_msg_id":"3eab1e0c-78a6-43ac-a7ec-4d40b2a78b0e","type":"message","user":"U06ECBRTJ","text":"ちなみに、ホストOSは何使ってますか？","ts":"1611831764.008300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"X9X"}]},{"client_msg_id":"99DAA1E3-7A9F-496E-BABE-4A4FEC597D94","type":"message","user":"U011FTGJ3SN","text":"なるほどー","ts":"1611831702.007800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4Lc=b"}]},{"client_msg_id":"be18b9f8-e6f3-4d15-a20c-f15252dac1c3","type":"message","user":"U7B4ZD49X","text":"php使ってないんであれですけど、私の感覚では普通にdbとwebサーバー立てる感じでも40秒くらいかかるんでそんなもんなんじゃないかなーっては思います。","ts":"1611831414.007400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dLzw"}]},{"client_msg_id":"CD534EB0-E71B-4950-B2F3-EC01166A9943","type":"message","user":"U011FTGJ3SN","text":"docker-compose up -dした時にコンテナの起動が遅くて悩んでいるのですが、どなたか良いプラクティスをご存知の方いらっしゃいませんか？php:7.0-apacheで立てたコンテナアプリケーションにアクセスできるようになるまで1分以上くらいかかってます。/vendorをトップレベルボリューム使ってマウントするとか、Apacheのモジュールを削るとか試しましたが今のところ効果ありませんでした","ts":"1611831097.005800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"s9c"}]}]
