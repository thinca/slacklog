[{"client_msg_id":"7e6e6404-0766-4b6a-96b7-4b229b6683c9","type":"message","user":"UAZ33BKV2","text":"確認しました。\n例のものでエラーはなし、既存動作(簡単にですが)も大丈夫でした","ts":"1588247294.128000","thread_ts":"1588220490.127300","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XYWD"}],"root":{"client_msg_id":"6acef877-ff7f-4d83-a48b-ee80c72ff2ef","type":"message","user":"U03C6TEAZ","text":"```diff --git a/autoload/lsp/utils.vim b/autoload/lsp/utils.vim\nindex 005e398..e5b47a4 100644\n--- a/autoload/lsp/utils.vim\n+++ b/autoload/lsp/utils.vim\n@@ -22,6 +22,9 @@ endfunction\n function! s:encode_uri(path, start_pos_encode, default_prefix) abort\n     let l:prefix = s:get_prefix(a:path)\n     let l:path = a:path[len(l:prefix):]\n+    if a:start_pos_encode &gt; len(l:path) - 1\n+       return a:path\n+    endif\n     if len(l:prefix) == 0\n         let l:prefix = a:default_prefix\n     endif```\nこれでどうなりますかね。","ts":"1588220490.127300","thread_ts":"1588220490.127300","reply_count":7,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"w5D3"}]}},{"client_msg_id":"b2580caa-6eba-4117-a5c5-875520263b1d","type":"message","user":"U03C6TEAZ","text":"あざます。 <https://github.com/prabirshrestha/vim-lsp/pull/809>","ts":"1588251335.128300","thread_ts":"1588220490.127300","attachments":[{"fallback":"GitHub: Fix lsp#utils#path_to_uri by mattn · Pull Request #809 · prabirshrestha/vim-lsp","id":1,"title":"Fix lsp#utils#path_to_uri by mattn · Pull Request #809 · prabirshrestha/vim-lsp","title_link":"https://github.com/prabirshrestha/vim-lsp/pull/809","text":"This should accept URI since the buffer name possibly be like URI.","thumb_url":"https://avatars1.githubusercontent.com/u/287744?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/prabirshrestha/vim-lsp/pull/809","original_url":"https://github.com/prabirshrestha/vim-lsp/pull/809"}],"parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Gt9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6a48fe1b-aa7a-47c8-abb3-1fd269a00f28","type":"message","user":"UAZ33BKV2","text":"最新版に更新してもう1度確認してみますね。","ts":"1588251636.128600","thread_ts":"1588220490.127300","parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SeATT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"98bf2749-d46f-4da7-8b80-0182c748c8d9","type":"message","user":"UAZ33BKV2","text":"こちらこそありがとうございます。","ts":"1588251644.128800","thread_ts":"1588220490.127300","parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5csg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fd9dd9d5-3484-4f79-a116-b543792418b9","type":"message","user":"UAZ33BKV2","text":"大丈夫ですね","ts":"1588253629.129000","thread_ts":"1588220490.127300","parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YuVy"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c8fa3785-d6e4-405a-9309-ec772d6edd30","type":"message","user":"UAZ33BKV2","text":"確認中の動作でちょっと気になったので質問させてください。\nLspHover(やそのmap)をvimのソースのisalpha()の上で実行したとき(server clangd)、引数とかの説明がpopupするんですが、なぜかあわせてechoには「No hover infomation found」と出るんですが、なぜなんでしょう?\nといかHoverしてるわけじゃなくて、他の機能が誘発されてるだけ?","ts":"1588253773.131500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6CwN"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2520667c-4d8c-4b9a-b8f2-df8d1a2626c9","type":"message","user":"U03C6TEAZ","text":"YATTA","ts":"1588254452.131600","thread_ts":"1588220490.127300","parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZWc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"69249ccd-c223-4a0b-8ae1-2d694e80ae7a","type":"message","user":"UAZ33BKV2","text":"ただ、どれだけのパターンをやればいいかはわからないので、例のやつで誤爆しないかと普通のファイルで動くか、くらいですので、ご注意のほどを...","ts":"1588254530.131800","thread_ts":"1588220490.127300","parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6s7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"550c2a36-cfc9-4cbd-bfa4-3dd7f402f82b","type":"message","user":"UEB17JJJE","text":"signatureHelpじゃないでしょうか？","ts":"1588255747.132600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VUeF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"12d634c3-430a-4e4b-af5d-b58687fc57f2","type":"message","user":"UAZ33BKV2","text":"あ、そうか..","ts":"1588256146.133000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"U7U"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d5f56ab0-6326-4d39-94a5-991ffbf8bbc2","type":"message","user":"UAZ33BKV2","text":"efm-langserverが全filetypeで起動する設定で、\n<https://github.com/y0za/vim-reading-vimrc>\nのReadingVimrcNext の説明バッファを生成すると\n```function &lt;SNR&gt;494_float_diagnostics_under_cursor[1]..lsp#ui#vim#diagnostics#get_diagnostics_under_cursor[3]..&lt;SNR&gt;420_get_all_buffer_diagnostics[3]..lsp#utils#get_buffer_uri[1]..lsp#utils#path_to_uri[12]..&lt;SNR&gt;69_encode_uri の処理中にエラーが検出されました:\n行    9:\nE727: 開始位置が終了位置を越えました\nfunction &lt;SNR&gt;494_float_diagnostics_under_cursor[1]..lsp#ui#vim#diagnostics#get_diagnostics_under_cursor[3]..&lt;SNR&gt;420_get_all_buffer_diagnostics[3]..lsp#utils#get_buffer_uri[1]..lsp#utils#path_to_uri[12]..&lt;SNR&gt;69_encode_uri の処理中にエラーが検出されました:\n行    9:\nE714: リスト型が必要です```\nのエラー類が出るなあ...","ts":"1588216361.123600","attachments":[{"fallback":"GitHub: y0za/vim-reading-vimrc","id":1,"title":"y0za/vim-reading-vimrc","title_link":"https://github.com/y0za/vim-reading-vimrc","text":"file loading tool for vimrc読書会. Contribute to y0za/vim-reading-vimrc development by creating an account on GitHub.","thumb_url":"https://avatars3.githubusercontent.com/u/16757772?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/y0za/vim-reading-vimrc","original_url":"https://github.com/y0za/vim-reading-vimrc"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hIo+z"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d29b8f44-8a21-4119-a98d-f24dade595cc","type":"message","user":"UAZ33BKV2","text":"カーソル移動しても出る...どこのなにが原因か考えないとだな","ts":"1588216410.124400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ULhzl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b75be76e-f795-414d-8981-2e6473fb0f8d","type":"message","user":"UAZ33BKV2","text":"```  2 %a-  \"<readingvimrc://next>\"          行 1```\nバッファがこれだけど、これからencode_uriがコケるのかな?","ts":"1588216440.124900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7tZG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a1e893b6-6b0c-439e-81ab-e50622b75a5a","type":"message","user":"UAZ33BKV2","text":"(自分の修正が入る前はNextの表示自体が出なかったのはあるが、たぶん関係はなさそう)","ts":"1588216492.125400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1p9Je"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3fd55436-fd93-4f11-9ba8-5f414c343830","type":"message","user":"U03C6TEAZ","text":"vim-lsp も URL-like をチェックしてた気がします。","ts":"1588219707.125800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HtvXO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"54af669b-172f-4f78-8f2e-5701b1314ebd","type":"message","user":"U03C6TEAZ","text":"これがエラー","ts":"1588219837.126100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JqD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"aed2c354-c597-4e31-9136-722901372f69","type":"message","user":"U03C6TEAZ","text":"```:echo lsp#utils#path_to_uri('<http://bar>')```","ts":"1588219841.126400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2ugF+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c7648f1a-903a-4ec5-b044-c35a94656e72","type":"message","user":"UAZ33BKV2","text":"なるほど\nちなみにfiletypeは空","ts":"1588219843.126500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0Um"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"654a2bea-96a1-4162-9d43-62d71047a05a","type":"message","user":"UAZ33BKV2","text":"やっぱそうぽいですね","ts":"1588220015.127000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YRWj="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6acef877-ff7f-4d83-a48b-ee80c72ff2ef","type":"message","user":"U03C6TEAZ","text":"```diff --git a/autoload/lsp/utils.vim b/autoload/lsp/utils.vim\nindex 005e398..e5b47a4 100644\n--- a/autoload/lsp/utils.vim\n+++ b/autoload/lsp/utils.vim\n@@ -22,6 +22,9 @@ endfunction\n function! s:encode_uri(path, start_pos_encode, default_prefix) abort\n     let l:prefix = s:get_prefix(a:path)\n     let l:path = a:path[len(l:prefix):]\n+    if a:start_pos_encode &gt; len(l:path) - 1\n+       return a:path\n+    endif\n     if len(l:prefix) == 0\n         let l:prefix = a:default_prefix\n     endif```\nこれでどうなりますかね。","ts":"1588220490.127300","thread_ts":"1588220490.127300","reply_count":7,"replies":[{"user":"UAZ33BKV2","ts":"1588247294.128000"},{"user":"U03C6TEAZ","ts":"1588251335.128300"},{"user":"UAZ33BKV2","ts":"1588251636.128600"},{"user":"UAZ33BKV2","ts":"1588251644.128800"},{"user":"UAZ33BKV2","ts":"1588253629.129000"},{"user":"U03C6TEAZ","ts":"1588254452.131600"},{"user":"UAZ33BKV2","ts":"1588254530.131800"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"w5D3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7746ec7a-66bc-4049-953f-45c2e816dad7","type":"message","user":"UAZ33BKV2","text":"いまちょっといじれないので、後で確認します","ts":"1588220739.127800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jsOh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
