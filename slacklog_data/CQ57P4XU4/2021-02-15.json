[{"client_msg_id":"3d745dab-67b1-4ece-bcfc-025b4df556e4","type":"message","user":"U78A6ESHM","text":"\u003chttps://github.com/denoland/deno/blob/master/cli/lsp/capabilities.rs#L73-L75\u003e\nまだ実装されてないから deno lsp 単体では動かないのは当然でした","ts":"1613391326.127200","attachments":[{"fallback":"GitHub: denoland/deno","id":1,"title":"denoland/deno","title_link":"https://github.com/denoland/deno/blob/master/cli/lsp/capabilities.rs#L73-L75","text":"A secure JavaScript and TypeScript runtime. Contribute to denoland/deno development by creating an account on GitHub.","thumb_url":"https://avatars.githubusercontent.com/u/42048915?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/denoland/deno/blob/master/cli/lsp/capabilities.rs#L73-L75","original_url":"https://github.com/denoland/deno/blob/master/cli/lsp/capabilities.rs#L73-L75"}],"team":"T03C4RC8V","reactions":[{"name":"totemoturai","count":2,"users":["U01BY3SDBRS","U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mybKi"}]},{"client_msg_id":"72ef7630-8c9f-4a5b-a1a7-40f7f927334c","type":"message","user":"U7TMPGWJ0","text":"deno lsp のサブコマンド自体に食わせられるオプションでもあればよさそうですがそんなのなさそうでした","ts":"1613366527.126400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RQUou"}]},{"client_msg_id":"786a10e7-e8b0-4ccf-90e3-757a25ec4bfd","type":"message","user":"U7TMPGWJ0","text":"ちなみに npm で入る typescript-deno-plugin は古いやつで VSCodeの拡張の中の typescript-deno-plugin が現在更新されてるものっぽいですが...このあたりもそろそろ整えてほしいお気持ちかもですね \u003chttps://github.com/denoland/vscode_deno/tree/main/typescript-deno-plugin\u003e","ts":"1613366488.125600","attachments":[{"fallback":"GitHub: denoland/vscode_deno","id":1,"title":"denoland/vscode_deno","title_link":"https://github.com/denoland/vscode_deno/tree/main/typescript-deno-plugin","text":"Visual Studio Code plugin for Deno. Contribute to denoland/vscode_deno development by creating an account on GitHub.","thumb_url":"https://avatars.githubusercontent.com/u/42048915?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/denoland/vscode_deno/tree/main/typescript-deno-plugin","original_url":"https://github.com/denoland/vscode_deno/tree/main/typescript-deno-plugin"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+K9"}]},{"client_msg_id":"2eff3d88-67f3-484d-8c22-73055dbaf077","type":"message","user":"U7TMPGWJ0","text":"deno の LS 本体自体が今後、よくなってくんじゃないですかね。VSCode や coc の拡張は 拡張の中に typescript-deno-plugin があって。それを読み込めるように立ち上がってるみたいになってるのでプロジェクト内になくてもイケてるっぽいです。","ts":"1613366306.124800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hEybH"}]},{"client_msg_id":"3252965A-1C16-407C-8A19-099505580F01","type":"message","user":"U78A6ESHM","text":"うーむ。辛い…","ts":"1613366055.123200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ofFKe"}]},{"client_msg_id":"904a4ac8-6a59-47d2-912e-325737b45136","type":"message","user":"U8R597E9H","text":"nvim-lsp はコールバックスタイルになってて、複数 LS はまだうまいこと扱えてないという認識ですね。","ts":"1613366036.122900","thread_ts":"1613366036.122900","reply_count":1,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"glx"}]},{"client_msg_id":"19058272-1314-4cb8-9f1d-40b80197da72","type":"message","user":"U7TMPGWJ0","text":"vim-lsp はなんとか上記で大丈夫でしたが Neovim のだと途中でエラー出ちゃってる関係か定義ジャンプ先がおかしい感じ( `\u0026lt;C-o\u0026gt;` で戻ったりすると空のバッファが挟まってたり、そもそも空バッファが表示されて `\u0026lt;C-o\u0026gt;` で正常のが表示されたり)","ts":"1613365681.122000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"160Qe"}]},{"client_msg_id":"ccf7b4ba-2f6a-4c83-92c2-3531386e605c","type":"message","user":"U7TMPGWJ0","text":"とりあえず僕の手元で vim-lsp で定義ジャンプできた方法(denoのキャッシュディレクトリに飛んだりも認識して飛んだ)だと\n\n1. プロジェクトに typescript-deno-plugin と typescript を入れる\n2. tsconfig.json の compilerOptions で typescript-deno-plugin の設定を追加する\n3. deno の LS だけではなく `typescript-language-server` も一緒に起動させる\n\nといった感じでした。","ts":"1613365474.121800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"y0Q1"}]},{"client_msg_id":"9c51c8e2-a9c1-44ac-99fa-8be14bca1519","type":"message","user":"U7TMPGWJ0","text":"うーん...早くスッキリするといいですね。。","ts":"1613364997.121600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vqdm"}]},{"client_msg_id":"56525676-f3c3-4e8c-9fa6-0901a352a656","type":"message","user":"U78A6ESHM","text":"node_modules があると deno 動かなくしてるんですよね \u0026gt; vim-lsp-settings の deno","ts":"1613361053.121000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"opvKX"}]},{"client_msg_id":"58595f53-1bc9-4857-8116-4022372cf79a","type":"message","user":"U78A6ESHM","text":"`first npm install --save-dev typescript-deno-plugin typescript` うーむ。","ts":"1613361028.120500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Zng9"}]},{"client_msg_id":"ecf4cc98-aee0-4881-ada4-b95d681d2d63","type":"message","user":"U7TMPGWJ0","text":"Denoの公式ドキュメントのEmacsさんの例だとプロジェクトに入れるみたいなフローにはなってますね (情報が更新されてないのかもしれませんが) \u003chttps://deno.land/manual@v1.7.4/getting_started/setup_your_environment#emacs\u003e","ts":"1613360963.120100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"S6VR"}]},{"client_msg_id":"705dd282-639a-41c2-a029-4eca668d2241","type":"message","user":"U78A6ESHM","text":"あ、ひょっとして tsconfig の compilerOptions に deno 設定したら見えるようになるのかな…。","ts":"1613360090.119500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"80fv"}]},{"client_msg_id":"dc7b2440-f3ab-4136-a9d5-48a99d5533aa","type":"message","user":"U7TMPGWJ0","text":"VSCode の deno の拡張も2系統(2系とCanary)があって。機能も違う？のもあったりで過渡期なのかもしれませんね","ts":"1613359823.118800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7JrH"}]},{"client_msg_id":"873b37bf-887f-46c8-90fe-3938b52b81fc","type":"message","user":"U78A6ESHM","text":"今 古い方式から LSP への移行が過渡期なのかなぁ。","ts":"1613359700.118600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2YF"}]},{"client_msg_id":"69fd9b67-ce53-467c-9cba-c23ee1249a63","type":"message","user":"U7TMPGWJ0","text":"うーん、でもこれだと普通にプロジェクトの node_modules 見に行ってて。denoの意味ないな。古いやり方？なのかもしれないです。","ts":"1613359623.118000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tZ07"}]},{"client_msg_id":"f6137851-8c6f-4370-814e-4230155c639c","type":"message","user":"U78A6ESHM","text":"ってどこにあるんだろう。","ts":"1613359587.117800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AHab"}]},{"client_msg_id":"b8d972f1-0f7b-4b7b-ba9d-d0f1b6bce3dc","type":"message","user":"U7TMPGWJ0","text":"coc (vscode) の拡張だと typescript-deno-plugin も同梱してるようなんですが。プロジェクトに typescript-deno-plugin を入れて。 tsconfig.json を plugins に設定すると飛べてそうではありました。\n```    \"plugins\": [\n      {\n        \"name\": \"typescript-deno-plugin\",\n        \"enable\": true,\n        \"importmap\": \"import_map.json\"\n      }\n    ],```","ts":"1613359580.117600","edited":{"user":"U7TMPGWJ0","ts":"1613359675.000000"},"team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["U8R597E9H"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"V=F4q"}]},{"client_msg_id":"9bf8d9ad-5d65-42c1-b174-44d920861108","type":"message","user":"U78A6ESHM","text":"asset/lib.deno.ns.d,","ts":"1613359579.117300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bT3"}]},{"client_msg_id":"d4fd584d-d419-4870-a785-09acd174cb66","type":"message","user":"U9S4G0LJW","text":"denoは型定義を抱え込んでるからね","ts":"1613359568.116900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"65B"}]},{"client_msg_id":"ecb577bc-d0c5-495a-8330-5a2cae9ea665","type":"message","user":"UAZ33BKV2","text":"パスがproject root相対パスじゃないのか...","ts":"1613359552.116400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ojBPx"}]},{"client_msg_id":"f1e5a875-b15d-4fb8-8bf9-d51ebf217874","type":"message","user":"U78A6ESHM","text":"これ割と困ってるのでなんとかしたい","ts":"1613359059.115800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zz8XL"}]},{"client_msg_id":"9fe577fc-af30-4737-93df-afc84de5cd7b","type":"message","user":"U78A6ESHM","text":"coc だとできるんですね…","ts":"1613359051.115500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1btX"}]},{"client_msg_id":"04864858-07f7-4c72-9a34-fdc2d9a4bca6","type":"message","user":"U78A6ESHM","text":"なんと。","ts":"1613359036.115200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/bhc"}]},{"client_msg_id":"8b0a1288-2b1a-42ae-915b-3f70aeffc0b7","type":"message","user":"U7TMPGWJ0","text":"deno の lsp ですが vim-lsp や neovim の built-in の LSP のでは定義ジャンプできないのですね。coc で拡張使ってる場合は定義ジャンプできたりしてるようですが、定義ジャンプ後のバッファの名前が `deno:///asset//lib.deno.ns.d.ts` とかなっててそういう関係なのですかね...。","ts":"1613358911.114900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"S+zZ"}]},{"client_msg_id":"9f3d0fec-df20-43c0-97f4-b6e62623a783","type":"message","user":"U7TMPGWJ0","text":"なるほどです！！","ts":"1613366614.126500","thread_ts":"1613366036.122900","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Uz6Fr"}]}]
