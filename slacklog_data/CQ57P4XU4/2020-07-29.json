[{"client_msg_id":"b973d0ee-491c-4d8f-a6b7-8f820bc75cee","type":"message","user":"U03C6TEAZ","text":"angular の条件ってそんな難しいのでしたっけ。","ts":"1596008103.359600","thread_ts":"1596008103.359600","reply_count":3,"replies":[{"user":"U7TMPGWJ0","ts":"1596022467.370400"},{"user":"U03C6TEAZ","ts":"1596023936.372900"},{"user":"U78A6ESHM","ts":"1596025327.378700"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0FkB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3129bb6b-aaaf-4fbf-9d8e-cc2d871b4abb","type":"message","user":"U03C6TEAZ","text":"<@U8R597E9H> これレビューお願いしていいですか。 <https://github.com/prabirshrestha/vim-lsp/pull/873>","ts":"1596010140.360200","thread_ts":"1596010140.360200","attachments":[{"fallback":"GitHub: Trigger didOpen for buffers already loaded by mattn · Pull Request #873 · prabirshrestha/vim-lsp","id":1,"title":"Trigger didOpen for buffers already loaded by mattn · Pull Request #873 · prabirshrestha/vim-lsp","title_link":"https://github.com/prabirshrestha/vim-lsp/pull/873","text":"When using -p flag, BufReadPost events are not triggered since those are already triggered. $ vim -p * :bnext","thumb_url":"https://avatars1.githubusercontent.com/u/287744?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/prabirshrestha/vim-lsp/pull/873","original_url":"https://github.com/prabirshrestha/vim-lsp/pull/873"}],"reply_count":3,"replies":[{"user":"U8R597E9H","ts":"1596010159.360600"},{"user":"U8R597E9H","ts":"1596022371.370200"},{"user":"U03C6TEAZ","ts":"1596024008.373400"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"H0xX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"171d82e4-dcc6-4be7-864d-dc4935663c61","type":"message","user":"U8R597E9H","text":"みます！","ts":"1596010159.360600","thread_ts":"1596010140.360200","parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"O/Q"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b80c055b-a305-4ad3-97f0-f9479cd4dd95","type":"message","user":"U03C71D7H","text":"`autocmd User lsp_buffer_enabled` で `setlocal signcolumn=yes` とかすると、プラグインのバッファとかで signcolumn が設定されてしまって、 calendar.vim とかで右端が切れてしまって困るんですけど、皆さんどうしてるんでしょう?","ts":"1596010981.361800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Dso"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8bffce09-7f28-4cb0-8255-413f3e18ea49","type":"message","user":"U03C6TEAZ","text":"その1行上で ft とかチェックしてます。","ts":"1596011072.362100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UKP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1caa6ed8-786a-4b20-9085-a55c119f27bb","type":"message","user":"U03C6TEAZ","text":"twitvim とか quickfun 見てる。","ts":"1596011107.362700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kuLAM"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9ce3dd97-1d7d-479c-b86e-f65b54ee09dd","type":"message","user":"U03C71D7H","text":"buftype チェックしてるんですけど、 `lsp_buffer_enabled` が発動したタイミングだと設定されてないっぽいんですよね","ts":"1596011118.363000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dfD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"412aacc9-0f29-47f2-9fd7-2c2484143302","type":"message","user":"U03C6TEAZ","text":"ちなみにどんなプラグインですか。","ts":"1596011153.363300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7zH"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0bd86090-a15e-4282-85dc-f66c2957ca3f","type":"message","user":"U03C71D7H","text":"calendar.vim です。mattn って人が作者です。","ts":"1596011176.363600","team":"T03C4RC8V","reactions":[{"name":"warau","count":3,"users":["UNJ2DANJC","UGH7U3SF2","UL6CFN8NR"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QEc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d68513ff-9964-453c-bc1a-8ef7ca843bd0","type":"message","user":"U7JL1UKKL","text":"草","ts":"1596011212.363800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PXW3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0d4635f7-c13b-4793-a2dd-b1d11cbd833e","type":"message","user":"U7JL1UKKL","text":"autocmdの発動タイミングはなかなか難しいものがあるよね","ts":"1596011242.364400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hnlk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8f40e93f-e055-4d64-ab4a-b569b86fe6f4","type":"message","user":"U03C71D7H","text":"プラグインによってまちまちなのと、だからといってプラグインがおかしいとも言えないので難しいですね…","ts":"1596011280.364900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IKC9z"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b0eb7363-79fb-4140-b04a-50bc6e35e111","type":"message","user":"U03C6TEAZ","text":"もはやインストールすらしてなかった作者。","ts":"1596011401.365200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IUK1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7b79e059-5048-48f1-94fe-db21c5cabe58","type":"message","user":"U03C6TEAZ","text":"ほんまや。ft 設定される前に発火してる。","ts":"1596011501.365700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XjLAJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"14408f8e-bb64-45e1-a44a-b6e8916bf9a3","type":"message","user":"U03C71D7H","text":"ちょっとカレンダーを見たい時に重宝している","ts":"1596011519.365900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VBtlt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b12fc472-88b0-4f4f-ac66-7b55d0411510","type":"message","user":"U03C6TEAZ","text":"あー、BufNewFile に当たってしまってるの。","ts":"1596011568.366200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rzGly"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9391ca42-768e-4b2d-8930-b8bf748adba2","type":"message","user":"U03C6TEAZ","text":"ちがう。","ts":"1596011574.366500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xQ4zz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9113ba1d-a4a7-43de-a90d-9e6714ab4437","type":"message","user":"U03C6TEAZ","text":"いや、たぶんそう。 `:file` で当たった？","ts":"1596011594.366900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lcx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f7a9b88d-23a4-40f2-a810-ffe7b3e84afb","type":"message","user":"U03C6TEAZ","text":"BufNewFile だった。そりゃ ft 設定されてないな。","ts":"1596012104.367400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ATcU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"15f18611-d931-4c0a-8e03-203deb023b76","type":"message","user":"U03C71D7H","text":"プラグインが作るバッファは作った直後は BufNewFile になっちゃいますよね。その直後で buftype=nofile とかするのだけど、BufNewFile の処理中にはそんなことはわからず。難しい","ts":"1596012822.368400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+x+R2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6dff1880-1f06-4af7-9012-53d75f04f9e3","type":"message","user":"UAZ33BKV2","text":"`new ++buftype=hoge` が必要なのかもしれない...(他に方法がないなら)","ts":"1596013173.369100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Kx2N"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3e289f65-78dd-4f69-9d6e-a3b7b4fc1915","type":"message","user":"U03C6TEAZ","text":"scratch buffer として使う人だと `:new` しっぱなしだけど、でも LS 使いたい人はいるかもしれない。","ts":"1596013395.370000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FmJZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a6ff8c08-3d80-4f0d-9e27-40e5176bf8a2","type":"message","user":"U8R597E9H","text":"動作確認して、問題がないことがわかりましたのでマージしました。","ts":"1596022371.370200","thread_ts":"1596010140.360200","parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5gk6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"52621861-4084-4959-a197-03f8640a3cf0","type":"message","user":"U7TMPGWJ0","text":"angular の language server を動かすこと自体は問題ないのですが allowlist が html でして。angularのプロジェクト以外(例えばVueプロジェクトとかまっさらなHTML含むプロジェクトとか)でhtml開いた場合にも angular の LS が立ち上がってしまう状況になってしまうんですね...。","ts":"1596022467.370400","thread_ts":"1596008103.359600","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KtC"}],"root":{"client_msg_id":"b973d0ee-491c-4d8f-a6b7-8f820bc75cee","type":"message","user":"U03C6TEAZ","text":"angular の条件ってそんな難しいのでしたっけ。","ts":"1596008103.359600","thread_ts":"1596008103.359600","reply_count":3,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0FkB"}]}},{"client_msg_id":"24f93b45-61d8-466c-a16a-f358082b9308","type":"message","user":"U7TMPGWJ0","text":"angular のプロジェクトは angular.json ファイルが存在するので。そのファイルがある場合のみ angular の LS を立ち上げられたらなと思いましたが vim-lsp でその設定はない状況です。","ts":"1596022557.371800","edited":{"user":"U7TMPGWJ0","ts":"1596023657.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"j0zDL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"955e8762-d398-4ba7-8ea5-153e2d390df0","type":"message","user":"U7TMPGWJ0","text":"少し、深堀りして VSCode の angular の拡張での事情もみてみました。VSCode でもそれいれちゃったら全部のhtmlで有効になっちゃう？ような雰囲気でした。angular.jsonがあればLS起動したいってissueがopenなままなのを見つけました <https://github.com/angular/vscode-ng-language-service/issues/481>","ts":"1596022637.372100","attachments":[{"fallback":"GitHub: [feature] Optimize activation events · Issue #481 · angular/vscode-ng-language-service","id":1,"title":"[feature] Optimize activation events · Issue #481 · angular/vscode-ng-language-service","title_link":"https://github.com/angular/vscode-ng-language-service/issues/481","text":"Is your feature request related to a problem? Please describe. The vscode-ng-language-service is activated if html or js files are part of the workspace. This corresponds to nearly all projects. De...","thumb_url":"https://avatars2.githubusercontent.com/u/139426?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":200,"thumb_height":200,"from_url":"https://github.com/angular/vscode-ng-language-service/issues/481","original_url":"https://github.com/angular/vscode-ng-language-service/issues/481"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cBnf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0453839e-dd3f-4a53-9a05-e3fe762fb711","type":"message","user":"U7TMPGWJ0","text":"ちなみに coc.nvim の拡張の `coc-angular` はLSの起動の際に見に行く設定ので。 angular.json の存在有無で起動判定をしてるようでした <https://github.com/iamcco/coc-angular/blob/master/package.json#L22-L25>","ts":"1596022832.372500","attachments":[{"fallback":"GitHub: iamcco/coc-angular","id":1,"title":"iamcco/coc-angular","title_link":"https://github.com/iamcco/coc-angular/blob/master/package.json#L22-L25","text":"Angular Language Service coc extension for (neo)vim - iamcco/coc-angular","thumb_url":"https://avatars1.githubusercontent.com/u/5492542?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/iamcco/coc-angular/blob/master/package.json#L22-L25","original_url":"https://github.com/iamcco/coc-angular/blob/master/package.json#L22-L25"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pdx/N"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4c043866-ab28-40ad-be2c-122adfcd0481","type":"message","user":"U03C6TEAZ","text":"angular 詳しくないんですが何かルートマーカーになるような物がない？","ts":"1596023936.372900","thread_ts":"1596008103.359600","parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CgLa"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"509c32d9-77f4-40bf-b5d5-98254c2879c5","type":"message","user":"U03C6TEAZ","text":"あー、なるほど。","ts":"1596023982.373300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kjAA9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"31930a4d-9c23-4ed1-a8f1-066bad961278","type":"message","user":"U03C6TEAZ","text":"あざます。","ts":"1596024008.373400","thread_ts":"1596010140.360200","parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AP4b"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"13a7b5d6-16eb-4cd0-8c7b-6e4a99ce1fcd","type":"message","user":"UAZ33BKV2","text":"でも1プロジェクト内で混在してたら(それもどうなんだ)、すでにLS起動後はどうしようもないとかはありそう?","ts":"1596024284.374600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"N3a"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"362ff7ba-fdcc-4157-8eb2-870b6cd8b874","type":"message","user":"U7TMPGWJ0","text":"プロジェクトルートのマーカーとして root_uri を設定するのに angular.json を指定するまでは良いのですがあくまで root_uri を決めるための話なだけで。なくても起動はしてしまいますね。","ts":"1596024351.375600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"O+Rb+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3cfa6f5e-7ff6-4485-9003-8e42abf9896d","type":"message","user":"UAZ33BKV2","text":"中のファイルの具合を見て、動く/動かないを決めてくれないでしょうし...\nなんかその手の命令があるなら、なんか手が打てる?","ts":"1596024503.376700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GanjI"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"02b39ba9-4af9-4fc0-8f6a-f161a093a762","type":"message","user":"U7TMPGWJ0","text":"インストール自体は npm オンリーで入りますし、バージョン上げたければ再インストールすれば良いしで。そのあたりは取り回しは問題なさそうです。例: <https://github.com/yaegassy/vim-lsp-settings/blob/check-add-angular-language-server/installer/install-angular-language-server.sh|https://github.com/yaegassy/vim-lsp-settings/blob/check-add-angular-language-server/installer/install-angular-language-server.sh>","ts":"1596024516.377000","attachments":[{"fallback":"GitHub: yaegassy/vim-lsp-settings","id":1,"title":"yaegassy/vim-lsp-settings","title_link":"https://github.com/yaegassy/vim-lsp-settings/blob/check-add-angular-language-server/installer/install-angular-language-server.sh","text":"Auto configurations for Language Server for vim-lsp - yaegassy/vim-lsp-settings","thumb_url":"https://avatars3.githubusercontent.com/u/188642?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/yaegassy/vim-lsp-settings/blob/check-add-angular-language-server/installer/install-angular-language-server.sh","original_url":"https://github.com/yaegassy/vim-lsp-settings/blob/check-add-angular-language-server/installer/install-angular-language-server.sh"}],"edited":{"user":"U7TMPGWJ0","ts":"1596024847.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HKkK"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"08E3F27C-39F5-4652-838A-7BC7DF5AF8F3","type":"message","user":"U7TMPGWJ0","text":"（ちなみに僕、angular書きませんw）","ts":"1596024966.378600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XPEQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cfb1eadf-e406-48ad-a43c-717aeee7ccc1","type":"message","user":"U78A6ESHM","text":"angular.json ですね。","ts":"1596025327.378700","thread_ts":"1596008103.359600","parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Gp82"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"117be51d-5e31-4eed-8662-18ca382232f9","type":"message","user":"U78A6ESHM","text":"vim-lsp で angular の ls 使って html 書いてるの私くらいなんだろうなw\n多分他の人はみんな VSCode 使ってそう。","ts":"1596025387.379700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mi4Bs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"639cbb58-96ad-46a3-8571-2739f8067dc2","type":"message","user":"U7TMPGWJ0","text":"coc の人は coc-angular でしょうね。一応公式にもリストアップはされてます。emacsも書いてありますがemacsはwikiをみて自分で入れてねみたいな感じで書いてましたi <https://github.com/angular/vscode-ng-language-service#angular-language-service-for-other-editors>","ts":"1596025497.381000","attachments":[{"fallback":"GitHub: angular/vscode-ng-language-service","id":1,"title":"angular/vscode-ng-language-service","title_link":"https://github.com/angular/vscode-ng-language-service#angular-language-service-for-other-editors","text":"Angular extension for Visual Studio Code. Contribute to angular/vscode-ng-language-service development by creating an account on GitHub.","thumb_url":"https://avatars2.githubusercontent.com/u/139426?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":200,"thumb_height":200,"from_url":"https://github.com/angular/vscode-ng-language-service#angular-language-service-for-other-editors","original_url":"https://github.com/angular/vscode-ng-language-service#angular-language-service-for-other-editors"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZCV+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5a511f5e-13a9-4601-b15c-e2235aa3175f","type":"message","user":"U03C6TEAZ","text":"vim-lsp に入れるとすれば\n```function! s:ensure_start(buf, server_name, cb) abort```\nここで server_info.check_project みたいな属性の関数でユーザさんに angular.json をチェックしてもらう仕組みにして、vim-lsp-settings がその関数を提供すればいいのかな？","ts":"1596025934.383500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9Pk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f466f64f-0e62-409e-bb55-56a0c9f60962","type":"message","user":"UAZ33BKV2","text":"HTMLで複数LSを並存と考えると、ファイル単位でlsをon/offしたいけど、次善は上のとかですかねえ\nむずかしい","ts":"1596026016.384700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"m9bE"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c360f50d-34ae-4b9c-953d-36b00f178490","type":"message","user":"U7TMPGWJ0","text":"anguar の LS 入ってたら html-langserver をサジェスチョンしないとかもありそうですしね","ts":"1596026071.385300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"p0V"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fcf97f3c-aaa5-4fe8-9a0f-53a2f97de233","type":"message","user":"U7TMPGWJ0","text":"linter 専用な LS があったとして。そういうので設定ファイルが見つからなかったらLS立ち上げないってことにも使えるかもですね。","ts":"1596026111.385700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"t5JQS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"067b2248-22a3-4977-a13f-0d5d4ae0ed13","type":"message","user":"UAZ33BKV2","text":"サジェスチョンはともかく入れる人は複数入れると思うw","ts":"1596026130.385900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Es5Pz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"10672d53-04c3-4bec-b44f-c00373fe3b31","type":"message","user":"UAZ33BKV2","text":"たしかにlint専用は反応させるのを選びたいですね","ts":"1596026146.386300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"F59/Z"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"795eb7e9-5764-40fb-aacd-f7691489b30f","type":"message","user":"U7TMPGWJ0","text":"coc.nvim では LS の登録の設定でそういうのがあるのでできるんですよね。","ts":"1596026237.387200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"y2B"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ea53cb28-6925-4265-a57b-96498b8fd178","type":"message","user":"U03C6TEAZ","text":"一応 vim-lsp-settings には\n```let g:lsp_settings_filetype_typescript = ['typescript-language-server', 'eslint-language-server']```\nみたいな事ができるので、これをプロジェクト毎に設定できればいいんだけど。","ts":"1596026895.387800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VzOm9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"200db603-0d97-4f8b-97fb-a5bbb6abd49f","type":"message","user":"U03C6TEAZ","text":"これを `:LspSettingsEditLocal` で弄れればいいのか？","ts":"1596026923.388400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"P0E7H"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1b821891-b15b-4486-9b1d-34ea0b7205e9","type":"message","user":"UAZ33BKV2","text":"ああ、それはアリですねえ","ts":"1596027052.389000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+f/ja"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b739a5a2-3532-46ad-9760-889a078beddc","type":"message","user":"U7TMPGWJ0","text":"なるほどです。たしかにその設定でもできるかもですね。","ts":"1596027061.389100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gxn2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ad08e4ac-d478-42be-8f1f-2ddf9557d347","type":"message","user":"U7TMPGWJ0","text":"あれ、なんかできそうな気がしたんですが、できないですかね","ts":"1596027633.389500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8hOCG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"feb201d8-ba06-4fb9-9019-a9fbdba65e19","type":"message","user":"U7TMPGWJ0","text":"このようにvimrcでは設定して。\n```let g:lsp_settings_filetype_html = ['html-languageserver', 'angular-language-server']```\nAngularのプロジェクト以外のすべてで毎回プロジェクトローカル用の .vim-lsp-settings/settings.json を作ってこれを書けばできるっちゃできましたが...うーん。\n```{\n  \"angular-language-server\": {\n    \"disabled\": true\n  }\n}```","ts":"1596028569.390100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"F9QS1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a8fa022f-2c31-4608-8085-7a8da610ef1c","type":"message","user":"U8R597E9H","text":"allowlist に関数が渡せる感じだと最も柔軟なんですかねー。。。うーむ。。。","ts":"1596028689.391600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AqRx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6bc436e3-3a38-4d40-9cd8-907e0385a445","type":"message","user":"U7TMPGWJ0","text":"僕が設定方法を勘違いしてるのですかね...。上記のだとangularを無効にするために毎回プロジェクトローカルな設定を追加するという苦行","ts":"1596028757.392500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xLg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e5ff1604-5cab-41a8-9f61-becaf1ec8c79","type":"message","user":"U03C6TEAZ","text":"なるほどー。","ts":"1596028804.393300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AEvS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"31eb6a2b-c493-4c36-a9c7-cc105a0b36dd","type":"message","user":"U78A6ESHM","text":"毎度設定するのはちょっと辛そうなイメージが。","ts":"1596028807.393500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+d0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a7092801-b19e-41b8-9071-8564c3124663","type":"message","user":"U8R597E9H","text":"vim-lsp の `get_allowed_servers` には bufnr(‘%’) が *基本的には* 渡るようなので、allowlist が関数の場合は bufnr 渡して何でも判定可能。という状況は作れそうです。","ts":"1596028842.394500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3Nve0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"effe8bab-7615-4777-8a7f-719e8f263511","type":"message","user":"U8R597E9H","text":"filetype が渡ってきた場合は流石に厳しいですね。（vim-lsp 内部で filetype 渡してるケースはほぼない気はしていますが）","ts":"1596028871.395100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dypaL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6872e462-f515-4098-975d-74e383220a90","type":"message","user":"U8R597E9H","text":"この場合、angular な html ファイルを開いて、html-language-server + angular-language-server が起動したあとに、プレーンな html ファイルを編集する場合にも\nget_allowed_servers が angular-language-server を返さないので、補完が暴発したりするというのは防げそうです。","ts":"1596028950.396600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hHz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a2a8bd88-5abd-4857-bb19-e436c9e0a111","type":"message","user":"U7TMPGWJ0","text":"coc.nvim で coc-html(html-languageserver相当) + coc-angular(AungularのLSの) な環境で確認すると Angular のプロジェクトでは両方立ち上がってました。ただ、cocは補完候補に重複があるとユニークにするんですが vim-lsp だともしかしたら二重で表示されてしまうかも？","ts":"1596029013.397000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HZFP/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ebdb1a48-7aff-430a-897a-48eb4cb35832","type":"message","user":"U8R597E9H","text":"おそらく、angular な環境で両方が走るのは意図してる気がしますし、正常だと思います。\nプレーンな html を開いて angular-language-server が立ち上がるのは、かなり微妙だなあと思いました。","ts":"1596029069.397800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qE7M"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"db6216de-fe1f-4364-88ad-b0234e3dccbd","type":"message","user":"U7TMPGWJ0","text":"はい、やはりそこが僕も気になるポイントです","ts":"1596029104.398900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"97BU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1c976fe3-8749-4df3-a89e-1bbbe8117322","type":"message","user":"U8R597E9H","text":"allowlist が関数を許容すると親ディレクトリの構造なんかも全部チェックできるので angular-language-server に設定する場合はそういう関数を設定する。みたいにできるかなと。。。","ts":"1596029157.399900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Nixe"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ada0d16d-ee02-4e98-9c35-844fa30529c1","type":"message","user":"U8R597E9H","text":"ただ、補完のたびに親ディレクトリたどるんかい。という気もするので、キャッシュ機構なんかもいりそうですね。","ts":"1596029172.400300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"spGj"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ce3a33ff-ea81-4bd1-bc67-1eeec02283dd","type":"message","user":"U8R597E9H","text":"vim-lsp はかなり万人が使っているのでこの機構自体はあってもいいかもと思い始めました。\nただ、allowlist の中身がシリアライズ不能な値になる。というのは vim-lsp-settings 的には許容可能なんだろうか。ちょっとみてみます。","ts":"1596029269.401500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=Vib2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"aedfe385-091a-4a46-a1de-17ee7032bb3a","type":"message","user":"U7TMPGWJ0","text":"あれ、そういえばなのですがかなり昔に mattn さんが allowlist (当時whitelist) に null を渡すと止まる？みたいな話があったような記憶が。記憶違いかもですが。","ts":"1596029410.402700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"O2Bnx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e21d6808-b990-460d-b2f5-80eaaefbbb12","type":"message","user":"U7TMPGWJ0","text":"(別件の裏技的な話だったかもですが)","ts":"1596029442.403000","edited":{"user":"U7TMPGWJ0","ts":"1596029463.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FlJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6b4190f0-2178-4c8f-9c42-53477cdef107","type":"message","user":"U8R597E9H","text":"allowlist は毎回チェックしてるのでたしかに止められそうですｗ","ts":"1596029495.403400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NtaJJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"22cee0a2-1eeb-4ed3-b400-5dfebcac71b4","type":"message","user":"U7TMPGWJ0","text":"⇡のはallowlistじゃなくてroot_uriの話だったかもです。","ts":"1596029607.404000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aU4To"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5a55f319-e1b0-4252-8a5c-cd957622f970","type":"message","user":"U8R597E9H","text":"やっぱり allowlist もシリアライズ可能な値のほうがよさそうだ。とコードを読んで思いました。","ts":"1596029868.404600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1/Q"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"82dcb074-d874-4f7c-92a0-f8d5eb2f827a","type":"message","user":"U8R597E9H","text":"やはり “起動するしない” よりも “LSP に通信するしない” の段階で止めるほうが良さそうな気がしますね。（angular プロジェクト開いたあとに普通の html 開くケースを考慮すると）","ts":"1596030051.405400","edited":{"user":"U8R597E9H","ts":"1596030070.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hZrJ0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5145c3f1-533f-4fc6-a343-98d57e6c994e","type":"message","user":"U8R597E9H","text":"そうなると get_allowed_servers で止めるほうがよくなるが、シリアライズ可能な範囲でどう表現するか。というのが少しむずかしいですね。","ts":"1596030105.406100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vLTji"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b8800214-bbbb-4699-b613-91a7ae5c4864","type":"message","user":"U8R597E9H","text":"せっかく allowlist/blocklist で 2 種類定義できるのだし、allowlist/blocklist 双方が `['typescript', { 'pattern': '**/tsconfig.json' }]` みたいな表現できるようにすべきなのだろうか。。。","ts":"1596030219.408000","edited":{"user":"U8R597E9H","ts":"1596030254.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"v9OIc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"17d911b0-ac60-4bd9-8fa5-b72bd4ee106c","type":"message","user":"U7TMPGWJ0","text":"(nullがっていうの勘違いでした...失礼)","ts":"1596030341.408500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZEzxx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5A4E160F-129C-424A-8BF4-E70BB8473027","type":"message","user":"U7TMPGWJ0","text":"*.component.htmlはangularってファイルタイプを独自で作っちゃって。それをallowlistにっていうようなのがシンプルでいいんですかね...。他のファイル名の形式でもangularテンプレートってあるのかどうかもわかりませんが。","ts":"1596031324.413600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8/T"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d547c147-1162-422b-9d29-5a24f3ac938a","type":"message","user":"UAZ33BKV2","text":"問題は ft=html で angular なミニプラグインとの連携がぶった切れてしまうこと... とか","ts":"1596031406.414300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bucr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1cf9ae15-f514-4c70-8949-e8d4a36b1f65","type":"message","user":"U03C6TEAZ","text":"ちなみに vim-lsp-settings の変数での設定は closure 書けるのでなんか判定する事は可能ですね。","ts":"1596032253.414900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nxzfQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2c5e30ad-7c4e-4026-bf9f-908ac6156924","type":"message","user":"U8R597E9H","text":"おお。 closure 記載できるなら allowlist に関数を設定できるようにするのが一番まるそうな気がします。","ts":"1596032354.415700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vxosF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8a3594e7-6a3f-4ca7-89ed-df872c11aee6","type":"message","user":"U8R597E9H","text":"PR つくってみようかな。","ts":"1596032387.416500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"plQg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6a3211c5-064e-4e08-bc40-53095ef5a3be","type":"message","user":"U7TMPGWJ0","text":"vim-lsp で root_uri に指定したファイルが見つからない場合には LS を起動しないってできましたでしょうか？","ts":"1595992014.330200","team":"T03C4RC8V","reactions":[{"name":"eyes","count":1,"users":["UEACRCY0Z"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pibVq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f568fc2a-ff13-4b8c-b842-57a134901dd9","type":"message","user":"U7JL1UKKL","text":"そこまでやってくれるのあるだろうか？","ts":"1595993715.330900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zDfb"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e6f5147e-bdbe-40bd-b534-99e52d6311b9","type":"message","user":"U7JL1UKKL","text":"そもそも後から追加した場合はどうなるという話もあるだろうし","ts":"1595993731.331500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6to"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9e616f6f-0818-44ca-a1da-81e60ab9bcd5","type":"message","user":"U8R597E9H","text":"現状だとできないはずです。","ts":"1595993847.331700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QjA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"292988e0-fc2f-47c9-bfe4-b526f19278bb","type":"message","user":"U7TMPGWJ0","text":"なるほど。やはりそうでしたよね.。","ts":"1595993908.332100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tZib"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"43382457-1d90-40f8-888f-d1118e0df945","type":"message","user":"U7TMPGWJ0","text":"coc.nvim だとLSの設定でルートのパターンファイルがない場合は起動しないって設定がありますね\n```      \"... snip\n      \"rootPatterns\": [\"ファイル\"],\n      \"requireRootPattern\": true,\n      \"... snip```","ts":"1595993943.332400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uPEA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"14720362-c112-45d4-b5f8-12000d298b75","type":"message","user":"U7TMPGWJ0","text":"Angular の Language server を vim-lsp-settings にもと思って仮で準備してみたのですが対象がhtmlファイルに対してなので。インストールするとAngularとは関係ない普通のhtmlファイルでも起動してしまうんですよね。(おそらく以前もこれ試してそこでやめたかも)\n<https://github.com/yaegassy/vim-lsp-settings/tree/check-add-angular-language-server>","ts":"1595994148.332700","attachments":[{"fallback":"GitHub: yaegassy/vim-lsp-settings","id":1,"title":"yaegassy/vim-lsp-settings","title_link":"https://github.com/yaegassy/vim-lsp-settings/tree/check-add-angular-language-server","text":"Auto configurations for Language Server for vim-lsp - yaegassy/vim-lsp-settings","thumb_url":"https://avatars3.githubusercontent.com/u/188642?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/yaegassy/vim-lsp-settings/tree/check-add-angular-language-server","original_url":"https://github.com/yaegassy/vim-lsp-settings/tree/check-add-angular-language-server"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Nwm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e906c43d-cab0-4267-9bb5-9568377f2c67","type":"message","user":"U7TMPGWJ0","text":"Angular自体の専用のファイルタイプがないのがいけないところでもあるのですが...。","ts":"1595994189.333600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XKLp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"BA795BB7-4D3A-46F2-8072-062897443509","type":"message","user":"U78A6ESHM","text":"自分の vimrc で angular.json 有無で判定かけてます。","ts":"1595994249.334800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rpCT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"edf96760-695e-48f7-873b-f41c5c4b5ea2","type":"message","user":"U7TMPGWJ0","text":"heavenshell さんが現状でもご利用されてるってことだと Angular の Language server バッチリ動くんですね。なるほど。","ts":"1595994584.335700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bDBL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"D9391974-4F98-4B47-B0DA-5AA08D90D193","type":"message","user":"U78A6ESHM","text":"html だけですけどねー。これないとだいぶキツいっす。","ts":"1595995084.337800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SyYH"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"A5C10D73-7FC4-418C-99C6-A820345A5042","type":"message","user":"U78A6ESHM","text":"特に定義ジャンプ。","ts":"1595995092.338200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WySyV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7ffef5d0-d324-4262-8aee-2a5f0ebe352e","type":"message","user":"U8R597E9H","text":"heavenshell さんは vim-lsp 利用中で、↑ の機能はあるほうがよい。という感じでしょうか？","ts":"1595995142.340200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fuMGZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1EA170DB-D99F-41A1-9F9D-FA4B0A258877","type":"message","user":"U7TMPGWJ0","text":"僕も軽く試したら補完やジャンプ、ホバー、リントとちゃんとできてるのでいいなと。VueがあるのにAngularがないのは不公平だなと。","ts":"1595995171.341400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ToB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"684d4895-4b37-4b48-aa76-c67398add466","type":"message","user":"U78A6ESHM","text":"いや、なくていいと思います。html は汎用的すぎるので。なので PR 作ってないです。Angular の事情を汎用的な vim-lsp-settings に押し付けるのなら、自分で作れだと思います。","ts":"1595995195.342400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5C8h4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1970da78-3c88-4379-9e26-e0190758b9a1","type":"message","user":"U78A6ESHM","text":"ft が angular の html と判定する何かが出てきたらでいいんじゃないでしょうか。","ts":"1595995232.343900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+8zp+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"02740036-fe06-42a4-913a-d34481ce18d5","type":"message","user":"U8R597E9H","text":"了解です。にっちもさっちもいかないケースがあれば、対応してもいいかなと思いましたが、機能が増える系なので少し慎重に。。。","ts":"1595995253.345000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sci"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"D78A8A2D-B124-482B-8697-02C1F12AFBDC","type":"message","user":"U7TMPGWJ0","text":"起動に必要なパラメータはvim-lsp-settingsでいれたやつらをデフォで指定して。プロジェクトローカルなの起動したかったらcmdまるまる設定で書き換えてって想定です","ts":"1595995292.346800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"m46XO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a95fe1c9-4861-46a7-b427-3eefc8d76077","type":"message","user":"U78A6ESHM","text":"html の LS と共存できるのなら入れていいと思いますけど、できるんでしょうか？","ts":"1595995354.348600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jppsw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2C1331E2-9ECC-488D-B4A6-513A61610870","type":"message","user":"U7TMPGWJ0","text":"vim-vueみたいにvim-angularが、ないようなので。","ts":"1595995379.349300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vT1co"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"E665A277-A2AB-4B0A-A5B7-93202399DE27","type":"message","user":"U7TMPGWJ0","text":"htmldjangoなファイルタイプみたいにあればいいんですけどね...","ts":"1595995426.351300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+7p"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"deaf7fb2-85d1-4314-8a8e-3128b4584fa6","type":"message","user":"U78A6ESHM","text":"そうですねー。","ts":"1595995435.351700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DccG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"21a74815-ac4a-4aa2-a1dd-77030934cc59","type":"message","user":"U8R597E9H","text":"html-languageserver は `filetype: ['html']` 指定になっていて\nangular-language-server は `filetype: ['html'], 'root_uri': ['.angular?'], 'root_uri_required': v:true` になるというイメージです。","ts":"1595995455.352100","edited":{"user":"U8R597E9H","ts":"1595995472.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"coU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"47979388-8b58-4419-8c4b-fd8177c8224a","type":"message","user":"U8R597E9H","text":"これで、ただの html ファイルを開いた時には `html-languageserver` だけが立ち上がって\nangular プロジェクト下の html ファイルを開いた時は「両方が立ち上がる」という感じです。","ts":"1595995509.353000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"V+JNQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"94ad6886-b8bb-4e42-86db-0d08aac58b5a","type":"message","user":"U8R597E9H","text":"_必要かどうかは不明ですが、イメージです。_","ts":"1595995523.353600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xbh="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7d599a5f-a999-4895-88c9-70701391b58c","type":"message","user":"U78A6ESHM","text":"server_info が割とめんどいんですよねw","ts":"1595995533.353700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"C7vx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"15b6b912-b2dc-46de-b8c1-5f3ea3cc4967","type":"message","user":"U78A6ESHM","text":"```augroup Angular\n  let g:lsp_async_completion = 0\n\n  let base = expand(printf('~/.vscode/extensions/%s', 'angular.ng-template-0.901.7'))\n  let node_modules = printf('%s/node_modules/', base)\n  let ng = printf('--ngProbeLocations %s/server', base)\n  let ts = printf('--tsProbeLocations %s', node_modules)\n  let logger = '--logVerbosity normal'\n  let s:server = printf('%s/server %s %s %s --stdio', base, ng, ts, logger)\n\n  autocmd User lsp_setup call lsp#register_server({\n    \\ 'name': 'Angular Language Service',\n    \\ 'cmd': {server_info -&gt; [&amp;shell, &amp;shellcmdflag, printf('node %s', s:server)]},\n    \\ 'root_uri':{server_info -&gt; lsp#utils#path_to_uri(lsp#utils#find_nearest_parent_file_directory(lsp#utils#get_buffer_path(), 'angular.json'))},\n    \\ 'whitelist': ['html'],\n    \\ })\naugroup END```\nこんなん書いてます。","ts":"1595995544.354100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iTh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"01453261-0c54-4031-b897-1d88c32cefcf","type":"message","user":"U78A6ESHM","text":"ちなみにバージョン忘れたんですけど、途中で書き方変わりました(BCBreak)。","ts":"1595995599.355100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hGP7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b1fa79a7-cf37-409f-a57b-4ad6e7649d4c","type":"message","user":"U8R597E9H","text":"普通の html ファイルを開いた時に angular の LS を立ち上げなくする必要があるかどうかという感じですね。","ts":"1595995612.355400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4Z/dT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"11a74aef-e5a2-4bd6-9e01-80df46c433b5","type":"message","user":"U78A6ESHM","text":"そうですね。","ts":"1595995620.355600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"B/lmw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5AA27E90-60EB-4B4E-96E6-0F7C9C042D5D","type":"message","user":"U7TMPGWJ0","text":"僕は server info めんどいので vim-lsp-settings 流にシェルスクリプトやバッチで包んじゃいました","ts":"1595995709.357600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Qa=L"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e61ad4a4-2202-4630-9fbb-06c34e44b6ef","type":"message","user":"U78A6ESHM","text":"なるほど","ts":"1595995727.357800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ejW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1b1655d2-fdd7-46e0-8512-40090b2176fa","type":"message","user":"U7TMPGWJ0","text":"それでプロジェクトローカルなのを入れてって場合はcmdまるまる上書きしてって感じですね。まるまる上書きしたらそもそも普通にvim-lspレベルで設定すればwって感じになっちゃいますがw","ts":"1595995921.358800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"n9OjS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"485463a6-19bb-4d6a-b5b0-77fa6187e23c","type":"message","user":"U7TMPGWJ0","text":"よく Angular 書かれてる方のお話が聞けたのでとりあえずこの件はこのまま、このへんで。","ts":"1595996042.359100","team":"T03C4RC8V","reactions":[{"name":"pray","count":1,"users":["U78A6ESHM"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"naR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
