[{"client_msg_id":"8a4e0369-5eff-453e-9b92-b2c1898fae58","type":"message","user":"U80CX6XDZ","text":"手元でLSのレスポンス解析してやっと合点がいきました `additionalTextEdits` の内容を解析して展開するようになってるんですね。","ts":"1582297245.438100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fT/a6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a96b7d5d-1a44-4193-9410-ab5aaf71fff0","type":"message","user":"U80CX6XDZ","text":"ただ単純にitemの中身を `call map(l:result, 'lsp#omni#get_vim_completion_item(v:val, a:server_name)')` してやるだけではだめな気がしますね(とりあえずやったけどだめだった。)ちょっと考えます。","ts":"1582297686.439100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CEzA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9e4ec4b9-6437-4449-b99e-1d0fbc0d5bca","type":"message","user":"U8R597E9H","text":"その結果を加工せずにそのまま deoplete に返すようにすれば一応動くはずではあります…！","ts":"1582298263.440200","edited":{"user":"U8R597E9H","ts":"1582298273.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"g+Ap"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"049eddbc-5032-4a0d-aea2-272bc7b67dd6","type":"message","user":"U80CX6XDZ","text":"ようはget_vim_completion_itemでcompletion_itemをuser_dataに登録させて、あとはcompletion doneでuser_dataから引っ張ってadditionalTextEditsがあれば展開というわけですね。","ts":"1582298503.441400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TZW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0145e38e-f390-422d-b884-2cb765c54173","type":"message","user":"U80CX6XDZ","text":"だから極端な話補完がuser_dataにはいれすればよいと","ts":"1582298525.441800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6uGs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5b2bc903-930c-4dbb-b5c3-3d399f4853aa","type":"message","user":"U8R597E9H","text":"ですです。","ts":"1582299315.442300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Sq6vJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7a34a618-b322-445b-bb23-06affc15e584","type":"message","user":"U80CX6XDZ","text":"ぐぬぬ渡すのは成功したが、動いていない...vim-lsp側でデバッグするか。","ts":"1582300320.442900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ljwr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"809a2764-2fc7-4ed4-8748-3eec9d3cd1be","type":"message","user":"U80CX6XDZ","text":"お。deoplete-vim-lspでuser_dataうごきました。","ts":"1582300789.443200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Su08z"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"23b28c80-14cd-461a-ac9c-7e793d181484","type":"message","user":"U80CX6XDZ","text":"<@U8R597E9H> ご協力ありがとうございました。変更プッシュしときました。","ts":"1582301051.444000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LQ5F="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"008aa5ed-3bf7-4400-9e61-14a1738ef8d3","type":"message","user":"U8R597E9H","text":"<@U80CX6XDZ>これで補完後の自動インポート動きましたでしょうか。個人的には CompleteDone で user_data が取れないような気がしました。","ts":"1582301940.447200","thread_ts":"1582301940.447200","reply_count":8,"replies":[{"user":"U80CX6XDZ","ts":"1582302652.452500"},{"user":"U80CX6XDZ","ts":"1582302718.452700"},{"user":"U8R597E9H","ts":"1582302795.452900"},{"user":"U80CX6XDZ","ts":"1582343016.467400"},{"user":"U80CX6XDZ","ts":"1582359423.047600"},{"user":"U80CX6XDZ","ts":"1582359474.047800"},{"user":"U80CX6XDZ","ts":"1582359558.048000"},{"user":"U8R597E9H","ts":"1582359890.048200"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XJth="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1eaaf658-fced-4dff-9d8b-724a58ecd268","type":"message","user":"U80CX6XDZ","text":"あれ、vim-lsp側でなにか変更されてません？更新したあとasyncompleteでも動いていないきが。","ts":"1582302008.447900","edited":{"user":"U80CX6XDZ","ts":"1582302029.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"b0Hjo"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bbaaeef0-6ffd-48d7-9a42-ab3274201251","type":"message","user":"U80CX6XDZ","text":"いや私の環境のもんだいか。","ts":"1582302069.448600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+t2+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8476028e-94a2-425d-a2e3-4280dbe4d6f1","type":"message","user":"U03C6TEAZ","text":"<https://github.com/lighttiger2505/sqls/pull/7>","ts":"1582302209.448800","attachments":[{"fallback":"GitHub: Fix panic by mattn · Pull Request #7 · lighttiger2505/sqls","id":1,"title":"Fix panic by mattn · Pull Request #7 · lighttiger2505/sqls","title_link":"https://github.com/lighttiger2505/sqls/pull/7","text":"When typing immediately until didChangeConfiguration arrival, completion method make panic.","thumb_url":"https://avatars1.githubusercontent.com/u/417232?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/lighttiger2505/sqls/pull/7","original_url":"https://github.com/lighttiger2505/sqls/pull/7"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YTyr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e8ff64c0-ea4a-489c-8009-ee1bbce3613c","type":"message","user":"U03C6TEAZ","text":"すいません。workspace_config が来る前に速くタイプすると panic が起きていた様です。","ts":"1582302228.449500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"u44LR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d698966a-dbd5-4ef9-ad45-c4c510670770","type":"message","user":"U80CX6XDZ","text":"<@U03C6TEAZ> ありがとうございます。databaseのconnectionの持ち方は見直さなきゃなと思っていたところでした。","ts":"1582302548.451500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CpY8f"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4be0174e-a4b2-49d9-a134-520fd529bc43","type":"message","user":"U80CX6XDZ","text":"handlerに渡したあとでパニック起こすと無言で落ちてるので、エラーチェック回りちゃんとしないと。","ts":"1582302605.452400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"101Fx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a21ae436-6b03-4d6a-bcc0-eeab599466ff","type":"message","user":"U80CX6XDZ","text":"少なくとも数度は動くことを確認したのですが、PUSHしたあとで私の方で確認しても動きませんね...","ts":"1582302652.452500","thread_ts":"1582301940.447200","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6OzI"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"94ea813e-5936-4eb2-8d34-86be5217bb52","type":"message","user":"U80CX6XDZ","text":"すみません。眠くなってきたので、また明日見てみます。","ts":"1582302718.452700","thread_ts":"1582301940.447200","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WZaF7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"50e9f6e3-1922-4747-af2a-99d29609b182","type":"message","user":"U8R597E9H","text":"自分も明日時間作れたら PR 作ろうかと思います！","ts":"1582302795.452900","thread_ts":"1582301940.447200","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OcT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"96abcee5-53c9-4f4a-b4b0-cc2e436e15f7","type":"message","user":"U03C6TEAZ","text":"asyncomplete の↑の PR 出してるけど prabir は好きじゃないだろうな。イベント捕まえてその時だけしか処理しなくないだろうし。","ts":"1582303117.453700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vng"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"14ee63e2-415b-47f6-ad9c-80d5d618d703","type":"message","user":"U03C6TEAZ","text":"solargraph、コマンド起動できる様にしておきました。(要再インストール)","ts":"1582306320.454300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jiu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bd872163-5f01-405e-8884-50e72f09417b","type":"message","user":"UFZL441S8","text":"カレントフォルダが低速メディアだと CursorMoved が発火するたびに秒単位でフリーズがかかる状況になっています、\nうちの環境だと UNC パス下のネットワークドライブにドライブ名を割り当てて (Z:とか) いるんですが\nネットトラフィックが上下完全にふさがってしまう程度の転送量が vim.exe から発生しておりまして\nプロファイルでも Vim script の lsp 部がフリーズの大半のように見えるので何かファイルシステムに依存していますか？\nパイプかなとも思ったりはしています(根拠は薄い)、NPFS の仕様が非公開なのでちょっと HoldUp 状態です…","ts":"1582307913.464500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eVUN"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e00ea6e6-0d99-469f-9bdb-aaac6d96fdca","type":"message","user":"UFZL441S8","text":"vim-lsp-settings から入れた clangd のみの運用です","ts":"1582308349.465000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IsP7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"52db4c64-fac4-4993-8e59-93e7c28d4584","type":"message","user":"UEB0VGD7E","text":"clangdの場合、デフォルトでworkspace直下に.clangdフォルダを作ります。\nこれはclangdのキャッシュなので、これのアクセスに時間がかかっているとか無いですかね？","ts":"1582331649.466600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PZm4c"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5f1e6933-212b-430b-a7d2-4f01212034b3","type":"message","user":"U03C6TEAZ","text":"以前からでしょうか？それとも最近でしょうか？","ts":"1582338365.467300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Q+Xz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3fcb340d-9443-4d59-90ad-48162f6e40d8","type":"message","user":"U80CX6XDZ","text":"多分コメント頂いた内容でわかったかと思います。user_dataをdeoplete.nvimのインタフェースで使えるのかがわからんのでそこのとこ検証してみます。","ts":"1582343016.467400","thread_ts":"1582301940.447200","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0w6i3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"14252952-757e-4dea-8913-99044a3c6471","type":"message","user":"U03C6TEAZ","text":"カーソルの移動にともなって何かするとすれば signature help かなと思うのですが、いかんせんディスクが遅くないので再現が難しいです。","ts":"1582346689.468600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VD+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6f97c478-ef41-42bc-9085-1e387c1db8ec","type":"message","user":"U03C6TEAZ","text":"<@UFZL441S8> ひとまずこれでサクサク動くか確認頂きたいです。\n```let g:lsp_diagnostics_echo_cursor = 0\nlet g:lsp_diagnostics_float_cursor = 0\nlet g:lsp_highlight_references_enabled = 0```","ts":"1582346894.469600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5UD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3397bb2e-f738-4059-ae09-d6a26ff4c9b7","type":"message","user":"U03C6TEAZ","text":"vimrc に書いておく必要があります。","ts":"1582346909.469800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ef3aS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"19db5ace-a5fb-4947-b3a5-e5bc9d916501","type":"message","user":"U03C6TEAZ","text":"この diagnostics のラッシュはなんとかならんかなぁ。","ts":"1582349989.470000","files":[{"id":"FU0QT6ACB","created":1582349969,"timestamp":1582349969,"name":"screenshot.gif","title":"screenshot.gif","mimetype":"image/gif","image_exif_rotation":1,"filetype":"gif","pretty_type":"GIF","user":"U03C6TEAZ","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":177832,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FU0QT6ACB/screenshot.gif","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FU0QT6ACB/download/screenshot.gif","original_h":526,"original_w":790,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-FU0QT6ACB-a112cc8ca4/screenshot_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-FU0QT6ACB-a112cc8ca4/screenshot_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-FU0QT6ACB-a112cc8ca4/screenshot_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-FU0QT6ACB-a112cc8ca4/screenshot_360.png","thumb_360_gif":"https://files.slack.com/files-tmb/T03C4RC8V-FU0QT6ACB-a112cc8ca4/screenshot_360.gif","thumb_360_w":360,"thumb_360_h":240,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-FU0QT6ACB-a112cc8ca4/screenshot_480.png","thumb_480_w":480,"thumb_480_h":320,"thumb_720":"https://files.slack.com/files-tmb/T03C4RC8V-FU0QT6ACB-a112cc8ca4/screenshot_720.png","thumb_720_w":720,"thumb_720_h":479,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U03C6TEAZ/FU0QT6ACB/screenshot.gif","permalink_public":"https://slack-files.com/T03C4RC8V-FU0QT6ACB-1af27e7bd0","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"deanimate_gif":"https://files.slack.com/files-tmb/T03C4RC8V-FU0QT6ACB-a112cc8ca4/screenshot_deanimate_gif.png","display_as_bot":false,"has_rich_preview":false,"thumb_480_gif":"https://files.slack.com/files-tmb/T03C4RC8V-FU0QT6ACB-a112cc8ca4/screenshot_480.gif","thumb_tiny":"AwAfADClzjqfzpPxNJRQAv4mkzRRQAZozRRQAUU8+X23/jim8e9ACUUvHvSjZ33fhigQ2injy887/wBKd+4/6a/pQM//2Q==","username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FW1J"}]},{"client_msg_id":"ad44236f-3d2f-4968-9112-921d14d5200c","type":"message","user":"U03C6TEAZ","text":"textchanged に delay 持ってるはずなんだけどな。","ts":"1582349997.470500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"X0wJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a08baa0a-c63c-4b5a-ac41-52f6efb67159","type":"message","user":"U03C6TEAZ","text":"一応ちゃんと動いてそう\n```2020/02/22 14:41:59:[\"s:send_didchange_queue() will be triggered\"]\n2020/02/22 14:42:03:[\"s:send_event_queue()\"]\n2020/02/22 14:42:07:[\"s:send_didchange_queue() will be triggered\"]\n2020/02/22 14:42:11:[\"s:send_event_queue()\"]\n2020/02/22 14:42:15:[\"s:send_didchange_queue() will be triggered\"]\n2020/02/22 14:42:19:[\"s:send_event_queue()\"]```","ts":"1582350306.473300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KtJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"acb80fb2-734b-4802-af42-fc0d830ccb73","type":"message","user":"U03C6TEAZ","text":"これ asyncomplete-lsp だな。","ts":"1582350363.473500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0VwWl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"74992b80-e32f-489c-b02d-9c3f189e02a7","type":"message","user":"U03C6TEAZ","text":"補完送りすぎ問題？","ts":"1582350372.473700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zcN"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"81e143f6-c534-4ed2-a026-52c395f64030","type":"message","user":"U03C6TEAZ","text":"`g:asyncomplete_popup_delay` デフォが 30 とかやんw","ts":"1582350484.474000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"G7d"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3123d9e7-76b0-4b52-9a88-df997d26c3ff","type":"message","user":"U03C6TEAZ","text":"そうか。asycomplete の検出が短い、asyncomplete-lsp が lsp#client#send を使う、それと同時に vim-lsp にせっかく delay 付きでためられていた event queue が揮発する → タイプ毎に changed イベントが送られる。","ts":"1582350603.475300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FniX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8ee97296-f17a-4f91-866f-469617c6b531","type":"message","user":"U03C6TEAZ","text":"なるほどー。","ts":"1582350607.475500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ibJf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"72dce5d5-b6c3-465e-b769-8e86ea6be6f6","type":"message","user":"U03C6TEAZ","text":"まぁ整合性は合ってるので正しいっちゃぁ正しいんだけど。","ts":"1582350655.475900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Y3H"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5ea768ed-259b-43de-80ff-b1c7f10d0db7","type":"message","user":"U03C6TEAZ","text":"`let g:asyncomplete_popup_delay = 300` した。","ts":"1582350710.476200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hM=T0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cbc6b3b8-08bf-49e1-a885-7e3e37828406","type":"message","user":"U03C6TEAZ","text":"いや、あかんな。","ts":"1582350794.476500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eTjC4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"19d9fbaf-ff4e-4a4f-a7de-e827cfabd675","type":"message","user":"U03C6TEAZ","text":"asyncomplete のこの変数はポップアップを更新する為の delay だ。s:trigger の更新を抑制する為の変数じゃない。","ts":"1582350828.477100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Nx1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f51a892e-6947-44fe-9269-5c46ee5c7f89","type":"message","user":"U03C6TEAZ","text":"なので毎タイプ `lsp#send_request` されてるけどポップアップの更新は穏やかになってるだけ。","ts":"1582350926.477600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EoxxE"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"83a312cb-8c5f-47bd-adcc-8ca529f21584","type":"message","user":"U78A6ESHM","text":"つまりタイプするたびにサーバーに問い合わせ行ってる感じですか？","ts":"1582350973.478100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8mH"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"43740644-efdb-41bf-95ff-95911ec7353d","type":"message","user":"U03C6TEAZ","text":"いまそうぽいです。","ts":"1582350980.478300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Da8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e4a145ea-3f8a-4752-ae0e-2b0303857cac","type":"message","user":"U8R597E9H","text":"毎タイプ毎に send_request はやばく重そう","ts":"1582351008.479300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4U3qP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7d54cbc6-4f41-43fc-8675-b791f32dc54f","type":"message","user":"U03C6TEAZ","text":"テキストの更新として送ってるんじゃないんですが、vim-lsp の作り上、ためられたイベントを flush する作りになってるので必然的に textchange も送られてますね。","ts":"1582351034.479700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RM="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9483f3a6-2e6e-449c-af4c-c11d6582932b","type":"message","user":"U78A6ESHM","text":"`.` とかそういう明示的なタイミングじゃ無いんですねー。ほえー。","ts":"1582351072.480200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Dvu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5bd88efd-b8c3-493f-b1df-eff075f68993","type":"message","user":"U03C6TEAZ","text":"補完プラグインとしては単に補完のリクエスト飛ばしてるだけのつもりなんですが、それに伴ってテキストの更新(差分検知も含めて)が飛んでます。","ts":"1582351220.481100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pLZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3bb6653d-6551-4375-9621-0ca8c10bfbd1","type":"message","user":"U03C6TEAZ","text":"それは重たいわ。","ts":"1582351225.481300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hQf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"75fd545c-499e-4d42-bc09-e137d152fb6e","type":"message","user":"U03C6TEAZ","text":"ちなみに ntak さんの件とは違う気がします。","ts":"1582351241.481800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cABOR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4f3a4e93-e127-4b50-bd2c-91d1f6c50207","type":"message","user":"U03C6TEAZ","text":"```diff --git a/autoload/asyncomplete.vim b/autoload/asyncomplete.vim\nindex 32e79ef..44bc8cc 100644\n--- a/autoload/asyncomplete.vim\n+++ b/autoload/asyncomplete.vim\n@@ -302,8 +302,11 @@ function! s:on_change() abort\n         call s:disable_popup_skip()\n     endif\n \n-    call s:trigger(l:ctx)\n-    call s:update_pum()\n+    if exists('s:trigger_timer')\n+        call timer_stop(s:trigger_timer)\n+        unlet s:trigger_timer\n+    endif\n+    let s:trigger_timer = timer_start(200, {timer -&gt; [s:trigger(l:ctx), s:update_pum()]})\n endfunction\n \n function! s:trigger(ctx) abort\n@@ -381,8 +384,11 @@ function! asyncomplete#_force_refresh() abort\n         let s:matches[l:source_name] = { 'startcol': l:startcol, 'status': 'idle', 'items': [], 'refresh': 0, 'ctx': l:ctx }\n     endfor\n \n-    call s:trigger(l:ctx)\n-    call s:update_pum()\n+    if exists('s:trigger_timer')\n+        call timer_stop(s:trigger_timer)\n+        unlet s:trigger_timer\n+    endif\n+    let s:trigger_timer = timer_start(200, {timer -&gt; [s:trigger(l:ctx), s:update_pum()]})\n     return ''\n endfunction\n ```","ts":"1582351422.482100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"q5nI1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0a22ec10-941d-4cfd-b234-f92edaa7cea6","type":"message","user":"U03C6TEAZ","text":"これで頻発は無くなった。","ts":"1582351429.482400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uywck"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c0493577-3d18-4841-8fce-95d7ebadbdd3","type":"message","user":"U03C6TEAZ","text":"ただ l:ctx が immutable なの？問題がありそう。","ts":"1582351455.482900","edited":{"user":"U03C6TEAZ","ts":"1582351477.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0ndf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ad7c9e16-0ce2-4351-b9d3-dc3e00d9d594","type":"message","user":"U03C6TEAZ","text":"UI としては若干機敏な感じがなくなったけど、これたぶん修正としてはこれが正解じゃないんだろうな。","ts":"1582351656.483700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uW0P6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3eca352c-f322-45d6-9f40-2058659281ef","type":"message","user":"U03C6TEAZ","text":"送信中は送らない、が正解ぽい気がする。","ts":"1582351671.484000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Gh44G"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"38d735f5-c86b-4831-bb8d-c5f7b16effc3","type":"message","user":"U03C6TEAZ","text":"そうすると最後のイベントが逃げるからなぁ。難しい。","ts":"1582351700.484900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QIn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"20c825a2-dd31-4edc-a248-bde75d719a44","type":"message","user":"U03C6TEAZ","text":"最大で1個しかたまらないキューにすればいいか。","ts":"1582351785.486300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"96s92"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"145ec849-84bc-4d33-a1b4-8a50f8ef0f94","type":"message","user":"U03C6TEAZ","text":"今まで良く頑張ってたな、gopls ごめんな、という気持ちになってきた。","ts":"1582351842.486700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"StAMm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"557b8e2e-23da-4d5a-a5b2-830d9af5c5cd","type":"message","user":"U78A6ESHM","text":"w","ts":"1582351849.486900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"K8I"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6350cb52-8253-427e-b55d-d727113478d1","type":"message","user":"U78A6ESHM","text":"ちなみにこれ vim-lsp の問題じゃなくて asyncomplete.vim の方の問題ですよね？","ts":"1582351893.487400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LUp2N"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ab344295-4645-4fd4-ae4b-99312ec64373","type":"message","user":"U03C6TEAZ","text":"そうですね。asyncomplete と asyncomplete-lsp の問題です。","ts":"1582351927.487800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8FHMi"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"523e5481-e78d-40bd-b6a2-ef5fb4b01aed","type":"message","user":"U78A6ESHM","text":"タイプごとのある意味 DoS に耐えた gopls すごい。","ts":"1582351965.489000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lPtw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2ecb04e5-de3a-4265-b42e-dc9bac85e41e","type":"message","user":"U03C6TEAZ","text":"`lsp#send_request` を毎回読んでる補完クライアントがあるなら問題です。","ts":"1582351975.489400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LQZVE"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b8b67c3f-15ea-4b52-9e33-05e1c0516713","type":"message","user":"U8R597E9H","text":"今の vim-lsp の diagnostics は debounce ではなく throttle ですね（1sec）\n好みはあるにしろ、問題ではないですね。","ts":"1582352015.490700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WzO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"94310b2c-f6ea-49fa-a811-154be477f673","type":"message","user":"U8R597E9H","text":"正確には didChange 送信のタイミングの話か。","ts":"1582352035.491200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"y3zuH"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4b974a91-4f74-4584-b48c-f8373325606c","type":"message","user":"U78A6ESHM","text":"`lsp#omni#complete`  はただの omni だからユーザーが明示的に送ってるから問題ないのか。","ts":"1582352116.492900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+6xH"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"85d8853a-f617-4a22-b9c0-56f6749fb9fc","type":"message","user":"U03C6TEAZ","text":"1. タイプする → didchange キューに溜まる(vim-lsp としては後で送るつもり)\n2. asyncomplete がタイプを検出して s:trigger を呼ぶ\n3. asyncomplete-lsp が問答無用に `lsp#send_request` を呼ぶ\n4. vim-lsp に貯められたキューが送信される\n5. 補完リクエストが飛ぶ","ts":"1582352136.493700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3Q=JH"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6c08bf66-f191-49e6-8037-dd9fa9832fde","type":"message","user":"U8R597E9H","text":"lsp#omni#complete などのリクエストを送信すると、それは即座に didChange を送信します。","ts":"1582352159.494400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"r9zwV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0e0617ac-17bf-492e-b49b-c5787cb830eb","type":"message","user":"U8R597E9H","text":"これはやらなくてはならない。","ts":"1582352177.494800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1eRm4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c5d6c1a2-0fe3-4cb9-8d3f-d8b903573904","type":"message","user":"U03C6TEAZ","text":"補完クライアントが送信抑制しないと解決しないですね。","ts":"1582352186.495000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tNsQr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2f669e9a-6e81-4052-be21-ad89029f087f","type":"message","user":"U03C6TEAZ","text":"整合性保つためにはこれは必要ですね。","ts":"1582352215.495500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MQDnZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d6f7856d-cfeb-47d1-821a-835a4e1b6e55","type":"message","user":"U03C6TEAZ","text":"`g:asyncomplete_popup_delay` はそのタイマーだと思ってたんですが、単にポップアップの更新の為だけでしかなかった。","ts":"1582352259.497300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pis"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f458fe7c-6aad-4cab-80aa-dce41177a61b","type":"message","user":"U78A6ESHM","text":"補完プラグインがタイプごとに送ってるって簡単にわかったりするもんでしょうか？例えばどっかにデバッグ仕込んで、ダンプしてみるとか。","ts":"1582352307.499200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mrom5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6d694228-9781-4410-91e9-0bc52eb26988","type":"message","user":"U8R597E9H","text":"あれ、でも自分の理解では asyncomplete は補完結果をキャッシュしている（コンテキストベースのキャッシュ）なので、ガンガンリクエストを送らないようになっている理解ではありますね。","ts":"1582352313.499400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"L9prs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d539bd19-f76f-44fa-877b-f456902c0a30","type":"message","user":"U03C6TEAZ","text":"asyncomplete の中に s:trigger を呼んでる場所が2か所あって","ts":"1582352382.000000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=Imfl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6b314eba-f644-4c77-b844-66da730ccb92","type":"message","user":"U03C6TEAZ","text":"1か所がその抑制が入ってる force_refresh、もう一つは on_change で強制で呼び出してる箇所です。","ts":"1582352401.000500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"P60"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e2bdc48e-7d0a-4e83-811d-d60ad082b390","type":"message","user":"U03C6TEAZ","text":"後者がひどい。","ts":"1582352405.000800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LNUH"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9b582292-7224-415e-bd0a-00dee0ca32d4","type":"message","user":"U03C6TEAZ","text":"forec_refresh の方は `\\k` のマッチ状態が変わらない限りは呼ばれてなかったと思います。","ts":"1582352441.001300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Vj="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2afbcdf8-7ea6-49da-b96f-b27532e6f42e","type":"message","user":"U8R597E9H","text":"s:trigger を叩いても、ソースのキャッシュ状態が status=idle でない場合は呼ばないので、on_change で\n- \\k にマッチしている and\n- キャッシュの startcol と今回の startcol が変化している or\n- lnum が変化している or\nな条件が効いている気がしています。。。うーむ。","ts":"1582352566.002900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8F8sD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3f9f41f2-0c96-4da2-94b7-80beea306a8b","type":"message","user":"U03C6TEAZ","text":"ちなみに昨日のpatchは外してます。","ts":"1582352637.003200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"33z"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"01373168-9c01-4c72-ac78-35fe93fe4d69","type":"message","user":"U8R597E9H","text":"本当だｗ なんでこんなに毎回 completion が飛んでるんだｗ よく普通に動いてるように見えたなこれ。。。","ts":"1582352755.003600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4hT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"950fd5ce-c0e5-42e4-a3a4-1ee968aa2c7a","type":"message","user":"U8R597E9H","text":"自分の理解と違う動きなので、これ謎です。。。","ts":"1582352768.003900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zMgi4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e4eb2ec8-dcf6-46ba-8eca-298f443002f0","type":"message","user":"U8R597E9H","text":"あー！gopls の補完の戻り値が isInComplete=true だからか。","ts":"1582352793.004400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ir05"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1f6a3ebe-32ab-446e-b5c1-3fe841c1defa","type":"message","user":"U03C6TEAZ","text":"え","ts":"1582352802.004600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wNhh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f6228e14-4ef9-469b-8a54-5e08713c82f5","type":"message","user":"U03C6TEAZ","text":"あー","ts":"1582352824.004800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zJ7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"de450a7b-272c-4e00-82e3-c61e287809da","type":"message","user":"U03C6TEAZ","text":"isincomplete が asyncomplete#complete の refresh に渡されてるのか。","ts":"1582352945.005400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WvFU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"337646b4-aae2-4617-8e90-d4884964d845","type":"message","user":"U03C6TEAZ","text":"で s:trigger の\n```        if l:matches['refresh'] || l:matches['status'] ==# 'idle' || l:matches['status'] ==# 'failure'```\nに入ってしまうと。","ts":"1582353050.005800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aBZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"00144328-e1f4-4d41-a61f-89b6ac95f299","type":"message","user":"U03C6TEAZ","text":"`||` でいいんか？","ts":"1582353063.006000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0Id"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fb67fa5d-9141-4e29-b657-edd74b303394","type":"message","user":"U03C6TEAZ","text":"あ、いいわ。","ts":"1582353095.006600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4NAL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8f6944d6-7843-4a2f-87ba-1dd2c53c6875","type":"message","user":"U8R597E9H","text":"isInComplete に対応するとこうなってしまうのかうーむ。","ts":"1582353116.007100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gwAvO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fa1e0ad8-3929-4e23-8080-bc780d9e6843","type":"message","user":"U03C6TEAZ","text":"refresh の判断消してみたらすげーいい感じになったw","ts":"1582353200.007900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Sd+q9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b106329a-c84a-4915-a023-02b09cd768ae","type":"message","user":"U8R597E9H","text":"isInComplete=true で返ってくると、次の type でも更新が走る。。。うーん。","ts":"1582353242.008500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5W5wS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c3a5301d-ffca-41bf-970a-3b795cc60aa3","type":"message","user":"U03C6TEAZ","text":"↑の僕の timer パッチに手を加えて isincomplete の場合だけタイマー発動ならいいのかも。","ts":"1582353292.009700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hMq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"90becac4-13a5-44ed-b3a9-db873c98a7eb","type":"message","user":"U03C6TEAZ","text":"いや、んー。","ts":"1582353308.010000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"av8WA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"79b69bc4-6821-433e-bdde-cee5bbf1d775","type":"message","user":"U8R597E9H","text":"reltime 保存しておいて、incomplete 状態なら reltime 的に 400ms 以上立っているとキャッシュ無視してリクエスト。とかのほうがイメージは合うなあ。（今の実装がおかしい。とも言いにくいのがアレだ）","ts":"1582353322.010600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/EsQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e6c884b3-6002-486b-8dc9-2e5837f76375","type":"message","user":"U8R597E9H","text":"あーでも、timer で後から更新を積むほうがきれいか。","ts":"1582353344.011000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Xgw9U"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"03456785-20fb-4b58-bf01-5acb1e6db709","type":"message","user":"U8R597E9H","text":"isInComplete=true で callback が返ってきたら、tiemr=Nsec 後に勝手に force_refresh を叩く。。。？その間にタイピングされていたら、タイマー止めたりも必要か。","ts":"1582353403.012200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fLl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"044b12d8-fc4d-4eba-aae0-1e06c5c7990d","type":"message","user":"U03C6TEAZ","text":"むずいすね","ts":"1582353421.012400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"P0h"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c99af4e3-98ad-4ac3-94cb-877fca7da742","type":"message","user":"U8R597E9H","text":"そうですね。。。意外とハンドリングが面倒くさい。。。","ts":"1582353448.012700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"b0lA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7bdbcaae-0cce-4eb5-bd1c-5b90eb16ff04","type":"message","user":"U8R597E9H","text":"でも gopls 本当にすごいですね。気づかない程度には高速に動く。。。","ts":"1582353487.013300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mOYW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"85d151ed-e6ad-46f4-8ff6-4d1d0a8c210e","type":"message","user":"U03C6TEAZ","text":"子供の塾送りで離脱。","ts":"1582353759.013900","team":"T03C4RC8V","reactions":[{"name":"subara","count":1,"users":["U8R597E9H"]},{"name":"goodjob","count":3,"users":["U78A6ESHM","U8CC7MDCL","UGP5AJKU4"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LClYX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e43d0fb6-9313-483a-a291-9a1bfac99dfa","type":"message","user":"U03C6TEAZ","text":"s:trigger よりもっと前で頻発抑制した方がいいですね。","ts":"1582353850.015000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"B9UI"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c9c70192-f7b1-4fb1-ae57-073545444f33","type":"message","user":"U8R597E9H","text":"<@U80CX6XDZ> 一応、手元で vim-lsp のアイテムをそのままパスするようにして、自動インポートなどが発動するようにはなりました。PR とかどうしたらよさそうでしょうか。","ts":"1582353997.015700","thread_ts":"1582353997.015700","reply_count":11,"replies":[{"user":"U80CX6XDZ","ts":"1582354120.017800"},{"user":"U8R597E9H","ts":"1582354144.018000"},{"user":"U8R597E9H","ts":"1582354460.024700"},{"user":"U80CX6XDZ","ts":"1582354967.033200"},{"user":"U80CX6XDZ","ts":"1582355050.035000"},{"user":"U8R597E9H","ts":"1582355096.035400"},{"user":"U8R597E9H","ts":"1582355210.037400"},{"user":"U8R597E9H","ts":"1582355254.037600"},{"user":"U8R597E9H","ts":"1582355367.039000"},{"user":"U80CX6XDZ","ts":"1582355767.045600"},{"user":"U8R597E9H","ts":"1582355850.045900"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qcai"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8b958aa2-a283-4b76-a0a5-2f0b4c6e22c3","type":"message","user":"U8R597E9H","text":"やっぱり deoplete 軽いし、自由度も高くていいなあ。ポータビリティだけが。。。","ts":"1582354025.016200","team":"T03C4RC8V","reactions":[{"name":"sorena","count":3,"users":["U78A6ESHM","U8CC7MDCL","UBNPMJJGM"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"X8qgp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"F0D55175-003D-485B-9C99-B8BF254C2ED2","type":"message","user":"U80CX6XDZ","text":"先を越されたww全然送っていただいて大丈夫です。経緯もわかってるので、面倒なら説明省いてもらっても良いですよ。","ts":"1582354120.017800","thread_ts":"1582353997.015700","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zwX7M"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ae517a0d-edec-4cb5-92b8-8cfd71de6d43","type":"message","user":"U8R597E9H","text":"了解しました！一旦送ってみます！","ts":"1582354144.018000","thread_ts":"1582353997.015700","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3dS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"71BB81A6-C5D5-4EA3-A00F-3BC9C49A053B","type":"message","user":"U80CX6XDZ","text":"Pythonistaが導入するにはそこまで苦労しないのですが、そうじゃない人はある程度のPython慣れがいるんですよね。","ts":"1582354272.019900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qu/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0E453E29-375B-4A96-A6EB-D8B9ECB08A07","type":"message","user":"U80CX6XDZ","text":"一時期Goとかで、CompletionEngineを自作しようかなとも思ったのですが、deopleteやcocに今から追いつける自信がなくてやめたことが。","ts":"1582354353.021900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/SDIE"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fab01f72-2432-4dcf-b8bb-465187db02f3","type":"message","user":"U78A6ESHM","text":"ある意味グローバルに pip なライブラリーをインストールするのに抵抗がある pythonista です。","ts":"1582354363.022200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HLb"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"85BD846C-0A92-41A6-8496-837406B66FAE","type":"message","user":"U80CX6XDZ","text":"僕はVim用にVirtualEnv作ってインストールしますね。","ts":"1582354395.023000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wtX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"03418cdb-eba7-480d-99c4-dff72cf29a86","type":"message","user":"U78A6ESHM","text":"そういう解決方法知ってるの pythonista だけな気がするんですよね…。","ts":"1582354444.024200","edited":{"user":"U78A6ESHM","ts":"1582354455.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=VJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c1982564-7214-49f2-adcd-2b1233ed2ca3","type":"message","user":"U8R597E9H","text":"送信ed です！ <https://github.com/lighttiger2505/deoplete-vim-lsp/pull/17/files>\ngopls で確認いただけると良いかと思います。","ts":"1582354460.024700","thread_ts":"1582353997.015700","attachments":[{"fallback":"GitHub: Support vim-lsp user_data by hrsh7th · Pull Request #17 · lighttiger2505/deoplete-vim-lsp","id":1,"title":"Support vim-lsp user_data by hrsh7th · Pull Request #17 · lighttiger2505/deoplete-vim-lsp","title_link":"https://github.com/lighttiger2505/deoplete-vim-lsp/pull/17/files","text":"We should pass through vim-lsp item to deoplete to enable auto-import, snippet expansion etc...","thumb_url":"https://avatars0.githubusercontent.com/u/629908?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/lighttiger2505/deoplete-vim-lsp/pull/17/files","original_url":"https://github.com/lighttiger2505/deoplete-vim-lsp/pull/17/files"}],"parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"20D2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"345B6D2E-FD65-4FD7-8941-15689974E6D1","type":"message","user":"U80CX6XDZ","text":"そうなんですよ。","ts":"1582354462.025200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9ne"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"56a85410-4c63-4daf-822b-43fbf793a323","type":"message","user":"U78A6ESHM","text":"とはいえ pythonista じゃない人はグローバルに入っても気にしないのかも。","ts":"1582354477.025600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PtjNv"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"823361c2-ce15-4d7a-b7c6-fec6868cbc00","type":"message","user":"U8996GYBF","text":"自分はグローバルに入れちゃってますねー\n良くないとは思いつつもpipとgemとnpmの最低限はglobalに入れるようにしちゃってる","ts":"1582354501.026500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iRl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"97ff3aca-63e6-4210-90c9-a5fffaf5a751","type":"message","user":"U8R597E9H","text":"go で completion-engine 結構夢ありそうですよね。いい感じに作れる気がします。","ts":"1582354504.026600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"b07"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c1491de2-7662-4546-8205-b6a83d621403","type":"message","user":"U8R597E9H","text":"nvim だとスッと動いてくれて最高なんですが、vim でどうしても動かせなくて諦めてしまった。","ts":"1582354530.027100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1FK"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"22F722F8-A47A-4448-BB1E-B1930E10602A","type":"message","user":"U80CX6XDZ","text":"そこなんですよ。nvimだけならなんとかなる。","ts":"1582354626.027600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0Iovx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"93b5b96d-1ad5-442e-b51a-d54f965f233a","type":"message","user":"U78A6ESHM","text":"YCM よりポータビリティありそう &gt; go で作った completion-engine","ts":"1582354750.028800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8ZUa"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"D628A85C-3DB3-4F09-B082-09B0E34E871C","type":"message","user":"U80CX6XDZ","text":"もういっそのことLSのようにcompletionサーバ作ってRPCすれば良いのではという妄想をしてました。ただそうなるとLSクライアントで立てたLSとの通信どうするのってなって、もうLSクライアントを兼ねればいいぞ。それcocじゃんってなって考えるのをやめました。","ts":"1582354840.031200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"l2nQ6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e2a632ff-f088-4f02-aca3-cb62a9642f25","type":"message","user":"U8R597E9H","text":"重いのは fuzzy マッチなどである。という前提のもと、Vim script でアイテムを収集してサーバに投げるとフィルタされて返ってくるみたいなのを考えていました。","ts":"1582354899.031900","edited":{"user":"U8R597E9H","ts":"1582354918.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"M/ir"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"283D2137-D3AB-4DB6-816C-E51BD3788735","type":"message","user":"U80CX6XDZ","text":"あれ？これ普通に動きました？\n機能同じことをやって、補完候補の表示がおかしくなってやめたんですよ。","ts":"1582354967.033200","thread_ts":"1582353997.015700","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"J6P"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9D312A35-4CB7-405E-9A2F-DE27CC814ABA","type":"message","user":"U80CX6XDZ","text":"deopleteのgetcher_candinatesの返却値はVimのcomplete funcとは全く一緒ではなかったので。","ts":"1582355050.035000","thread_ts":"1582353997.015700","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"y9Y"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8182198a-8dcc-4daf-ac58-bc3d4a209cbd","type":"message","user":"U8R597E9H","text":"これ普通に動いちゃいましたね。。。うーん。。。","ts":"1582355096.035400","thread_ts":"1582353997.015700","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dm1r"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"28FBA15A-1AB5-4198-9B5D-2AADDF27DE11","type":"message","user":"U80CX6XDZ","text":"なるほどたしかそれclap.vimで似たようなことしてましたよね。fuzzy matcherだけrustにやらせるやつ。","ts":"1582355131.036500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NR0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"60b698eb-f7fa-4911-8f88-aed03599c0f2","type":"message","user":"U78A6ESHM","text":"良さそうですね","ts":"1582355179.036700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ox/3m"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"51471b81-3459-4548-b8d1-c732ad48b9e6","type":"message","user":"U03C6TEAZ","text":"補完 RPC サーバ、なんという coc","ts":"1582355207.037300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"suLuz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3a28045e-8b7d-4a9e-b874-aa6f8ed698ad","type":"message","user":"U8R597E9H","text":"word,abbr,kind,menu,info,dup が deoplete の要求するキー一覧で（実際は user_data も対応してますが）","ts":"1582355210.037400","thread_ts":"1582353997.015700","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MgN=F"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7cfbd5ea-f4fe-4e3b-aacd-5ddc39ebb750","type":"message","user":"U8R597E9H","text":"word, abbr, menu, info, icase, dup, empty, kind が vim-lsp の返すアイテムのキーですね。","ts":"1582355254.037600","thread_ts":"1582353997.015700","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"v7k4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"05029420-C146-4F43-A86B-48BC772EAF6A","type":"message","user":"U80CX6XDZ","text":"<https://www.reddit.com/r/vim/comments/eiazzo/vimclap_to_be_a_performant_fuzzy_finder_and/?utm_source=share&amp;utm_medium=ios_app&amp;utm_name=iossmf|https://www.reddit.com/r/vim/comments/eiazzo/vimclap_to_be_a_performant_fuzzy_finder_and/?utm_source=share&amp;utm_medium=ios_app&amp;utm_name=iossmf>\n\nfuzzy matcherをRustにやらせたぞってこの記事だったかな。","ts":"1582355355.038600","attachments":[{"fallback":"reddit: vim-clap: to be a performant fuzzy finder and dispatcher vim plugin","id":1,"title":"vim-clap: to be a performant fuzzy finder and dispatcher vim plugin","title_link":"https://www.reddit.com/r/vim/comments/eiazzo/vimclap_to_be_a_performant_fuzzy_finder_and/?utm_source=share&utm_medium=ios_app&utm_name=iossmf","text":"Posted in r/vim by u/liuchengxu • 124 points and 39 comments","image_url":"https://preview.redd.it/cnqof82l42841.gif?overlay-align=bottom,left&crop=640:335.078534031,smart&overlay-height=15p&overlay=%2Fwatermark%2Ft5_2qhqx.png%3Fs%3Dc979982d7ae0297c9af65b53968690537de33bba&width=640&height=335.078534031&s=508df64f88bc20227f64868ecd1de5fb52fbe1de","blocks":null,"service_name":"reddit","service_icon":"http://www.redditstatic.com/desktop2x/img/favicon/apple-icon-57x57.png","from_url":"https://www.reddit.com/r/vim/comments/eiazzo/vimclap_to_be_a_performant_fuzzy_finder_and/?utm_source=share&utm_medium=ios_app&utm_name=iossmf","original_url":"https://www.reddit.com/r/vim/comments/eiazzo/vimclap_to_be_a_performant_fuzzy_finder_and/?utm_source=share&amp;utm_medium=ios_app&amp;utm_name=iossmf"}],"edited":{"user":"U80CX6XDZ","ts":"1582356052.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Yk9f7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d6ff2579-fbb4-4bd3-a835-e7d77ca91579","type":"message","user":"U8R597E9H","text":"今の所このような感じです。","ts":"1582355367.039000","thread_ts":"1582353997.015700","parent_user_id":"U8R597E9H","files":[{"id":"FUC9ZG8C8","created":1582355364,"timestamp":1582355364,"name":"スクリーンショット 2020-02-22 16.08.37.png","title":"スクリーンショット 2020-02-22 16.08.37.png","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"U8R597E9H","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":43469,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FUC9ZG8C8/____________________________2020-02-22_16.08.37.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FUC9ZG8C8/download/____________________________2020-02-22_16.08.37.png","original_h":150,"original_w":792,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-FUC9ZG8C8-b52a7eb733/____________________________2020-02-22_16.08.37_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-FUC9ZG8C8-b52a7eb733/____________________________2020-02-22_16.08.37_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-FUC9ZG8C8-b52a7eb733/____________________________2020-02-22_16.08.37_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-FUC9ZG8C8-b52a7eb733/____________________________2020-02-22_16.08.37_360.png","thumb_360_gif":"","thumb_360_w":360,"thumb_360_h":68,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-FUC9ZG8C8-b52a7eb733/____________________________2020-02-22_16.08.37_480.png","thumb_480_w":480,"thumb_480_h":91,"thumb_720":"https://files.slack.com/files-tmb/T03C4RC8V-FUC9ZG8C8-b52a7eb733/____________________________2020-02-22_16.08.37_720.png","thumb_720_w":720,"thumb_720_h":136,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U8R597E9H/FUC9ZG8C8/____________________________2020-02-22_16.08.37.png","permalink_public":"https://slack-files.com/T03C4RC8V-FUC9ZG8C8-74346cc075","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"thumb_tiny":"AwAJADCtEFbgjtT/AC0x/wDWqOHv9Kav3h9aQ7kxiTH/ANak8pfX9Kcep+lV6BE3lqf4v0psihMYwc+1R0UwP//Z","username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"E7ow"}]},{"client_msg_id":"273f8067-c7a0-4092-8e15-dc61c92153b7","type":"message","user":"U8R597E9H","text":"見た目すごいこだわりを感じるプロダクトだ","ts":"1582355403.040300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"G9Xn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f3976595-eb7b-49d4-9a19-b0856f3618b6","type":"message","user":"U78A6ESHM","text":"入れてみるかなぁ。","ts":"1582355479.041300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XoOh9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8ae1af28-257f-407e-9aeb-789ae6cb37c0","type":"message","user":"U78A6ESHM","text":"`has('patch-8.1.2114')` あっ。はい。","ts":"1582355526.042100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fqU5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"73DC328C-80E2-4449-92A6-2982A1778186","type":"message","user":"U80CX6XDZ","text":"deoplete-vim-lspの問題点は、Pythonでやっているのに、リクエストなどは必ずVim scriptを経由してるところなんですよ。完全なアダプタでしかないので。","ts":"1582355555.042500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AS/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9852C806-5802-4C9C-A51A-03BABE67A896","type":"message","user":"U80CX6XDZ","text":"vim-clapはpopupとfloating windowが前提なので。","ts":"1582355588.043500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hT4O"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3a708f24-da95-4847-baaa-252b9cb9e285","type":"message","user":"U78A6ESHM","text":"確かに。","ts":"1582355604.043700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"E0o"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"347B3128-A386-4B7E-AA63-EAA670937260","type":"message","user":"U80CX6XDZ","text":"liuchengxuさんはvista.vimも作ってるし、強い人だ...","ts":"1582355691.044400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YdBr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3122626e-c379-4c53-9ed3-d69e30c89599","type":"message","user":"U78A6ESHM","text":"すごい","ts":"1582355720.044600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4JWK8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2D5A4901-108D-4084-9AC9-457F6DDAD2E3","type":"message","user":"U80CX6XDZ","text":"動いてますね。今ちょっと出先で確認ちょっと遅くなりそうです。申し訳ありません。","ts":"1582355767.045600","thread_ts":"1582353997.015700","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hafb"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cfaa80be-1071-4a22-870f-0765fd9c8518","type":"message","user":"U8R597E9H","text":"了解です！あれだったらこの PR 閉じてもらっても構いません！","ts":"1582355850.045900","thread_ts":"1582353997.015700","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oSzfv"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6D33D69D-DEDF-482C-9766-AA988DC703DE","type":"message","user":"UFYACJ537","text":"undo redoしてgoplsが火を吹いてたのはasyncompleteのせいだったのか…","ts":"1582357538.047400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qbvB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f23eb8c4-e93e-4891-a5b7-0b285cdb7420","type":"message","user":"U80CX6XDZ","text":"いま見てみます。動きますね！","ts":"1582359423.047600","thread_ts":"1582301940.447200","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NPx2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"599f6e78-50e6-4576-bd8d-961d31717b9a","type":"message","user":"U80CX6XDZ","text":"どうやら私の変更がおかしかっただけのようでした。マージします。","ts":"1582359474.047800","thread_ts":"1582301940.447200","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=l/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"32bc1df3-d6a3-463f-b323-48ff81eea48d","type":"message","user":"U80CX6XDZ","text":"これでdeopleteがより快適になりました。ありがとうございます。","ts":"1582359558.048000","thread_ts":"1582301940.447200","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vXC2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eaaf5ccd-1687-4e2d-b2f9-6d772005b91a","type":"message","user":"U8R597E9H","text":"よかったです！確認ありがとう御座います！","ts":"1582359890.048200","thread_ts":"1582301940.447200","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"soU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"929c34c7-ad5a-4630-a17a-2879f3ee234e","type":"message","user":"U03C6TEAZ","text":"娘の塾に行ってる間にノートPC持っていって asyncomplete のパッチ書こうと思ったらソファーが殺人的な眠さを誘って何も出来なかった。","ts":"1582362469.049100","edited":{"user":"U03C6TEAZ","ts":"1582362498.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"g7u"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"45207cda-55c9-4318-b006-14433cd2fa63","type":"message","user":"U76GA7MFA","text":"帰宅後にご期待くださいって感じだ。","ts":"1582362526.049600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"m/Vx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b83835e4-5866-4651-8c4f-00a984d96e55","type":"message","user":"UAZ33BKV2","text":"ソファ...","ts":"1582362613.049800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gPCl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c2217681-d61f-40b0-873f-4f83033c8518","type":"message","user":"U03C6TEAZ","text":"So far...","ts":"1582362721.050100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"44U"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0A2E8756-1D2E-4822-B23B-943730534D37","type":"message","user":"U78A6ESHM","text":"意識が遠くに行ったわけですね。わかります。","ts":"1582363213.050700","team":"T03C4RC8V","reactions":[{"name":"100","count":3,"users":["U03C6TEAZ","U06BRP8VD","U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"d9zI"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0949ac8a-d560-4049-9cc9-e4575c4f48ae","type":"message","user":"UAZ33BKV2","text":"( ˘ω˘)ｿﾌｧ…とすべきだったかw","ts":"1582363371.051700","team":"T03C4RC8V","reactions":[{"name":"ultrafastparrot","count":1,"users":["U78A6ESHM"]},{"name":"fuita","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QHlF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e8dcce14-1a78-417d-8a9e-b7673b7b51c8","type":"message","user":"UFZL441S8","text":"lsp_diagnostics の設定、カーソル移動が１秒に１コマだった現象はなくなりましたが CursorMovedI 発火に相当する動作、文字入力が１秒に１文字の遅さです。\n遅いメディアを手に入れたのは３日ほど前なので、それ以前に原因があるかどうかの切り分けには役に立てない感じです。\nで、この遅いメディア、TOSHIBA canvio AeroCast というやつで Linux 3.4 上で NTFS 偽装をしているようで、何が起こってもおかしくないのかもしれません。\n起動中の clangd を suspend すると何をしても軽いですし、resume すると何をしても重くなります。そこか！的な気分でいます。\nUNC パスを使って直で開いたテキスト上では重くならないことも発覚しています。ドライブレターがついていると重くなる。","ts":"1582373290.061100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"48bS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"63217324-60c2-40be-bd7f-7eb48ecde8c2","type":"message","user":"UAZ33BKV2","text":"(気付いたら自分的star数最大、あれーw? <https://github.com/tsuyoshicho/vim-efm-langserver-settings> )","ts":"1582378431.061700","edited":{"user":"UAZ33BKV2","ts":"1582378437.000000"},"team":"T03C4RC8V","reactions":[{"name":"tada","count":3,"users":["UBNPMJJGM","U78A6ESHM","UEX9VPSET"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uqK"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
