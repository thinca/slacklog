[{"client_msg_id":"f44c0e3d-f802-40e2-91c1-7e275f8b7445","type":"message","user":"U7TMPGWJ0","text":"上の `--stdio` はcoc拡張を使っていないパターンではあるのですが、 coc 本体自体が TS なので `vscode-uri` や `vscode-languageserver-なにがし` な諸々をそのまま使ってるので VSCode 同様の振る舞いができてるって感じっぽそうですね \u003chttps://github.com/neoclide/coc.nvim/blob/master/src/provider/index.ts#L3\u003e","ts":"1596996026.229700","edited":{"user":"U7TMPGWJ0","ts":"1596996255.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"k9n"}]},{"client_msg_id":"b9a866f5-108e-4ec9-ab27-852373118757","type":"message","user":"U03C6TEAZ","text":"vscode と coc が両方うまくいくのは vscode 拡張(coc も)が vscode-uri を使ってパスを URL 化してるからでしょうね。同じものを使わず Vim script でノーマライズしてる vim-lsp は出る、と。","ts":"1596995445.229100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RAM9"}]},{"client_msg_id":"c00f2aaf-8eec-415b-a637-dcc499405ade","type":"message","user":"U7TMPGWJ0","text":"今更ですが coc.nvim の coc-svelte を使わず直接LS登録をする際の `--stdio` のです。 `coc-settings.json` に下記のように追加します。 一応貼っておきます(遅い。爆睡してましたw)。 `\u0026lt;Plug\u0026gt;(coc-definition)` or プラグインマップで叩かれる直接呼び出しの `:call CocActionAsync('jumpDefinition')` の。 Win でジャンプできてるのキャプチャ↑も貼っておきます。\n```{\n  \"languageserver\": {\n    \"svelte-language-server\": {\n      \"command\": \"svelteserver\",\n      \"args\": [\"--stdio\"],\n      \"filetypes\": [\"svelte\"],\n      \"shell\": true\n    }\n  }\n}```","ts":"1596995002.227700","edited":{"user":"U7TMPGWJ0","ts":"1596995330.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Tg9E"}]},{"type":"message","user":"U7TMPGWJ0","ts":"1596994870.227000","files":[{"id":"F018WVAR7H7","created":1596994866,"timestamp":1596994866,"name":"coc-nvim-svelte-stdio.mp4","title":"coc-nvim-svelte-stdio.mp4","mimetype":"video/mp4","image_exif_rotation":0,"filetype":"mp4","pretty_type":"MPEG 4ビデオ","user":"U7TMPGWJ0","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":2327765,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F018WVAR7H7/coc-nvim-svelte-stdio.mp4","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F018WVAR7H7/download/coc-nvim-svelte-stdio.mp4","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U7TMPGWJ0/F018WVAR7H7/coc-nvim-svelte-stdio.mp4","permalink_public":"https://slack-files.com/T03C4RC8V-F018WVAR7H7-cdb8430e9d","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"thumb_video":"https://files.slack.com/files-tmb/T03C4RC8V-F018WVAR7H7-81104de885/coc-nvim-svelte-stdio_thumb_video.jpeg","display_as_bot":false,"has_rich_preview":false,"username":""}],"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"3933B3EC-053D-40CA-B5CB-49DB315FC30E","type":"message","user":"U7TMPGWJ0","text":"おー！LS側の問題だったのですね","ts":"1596994801.226900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Vz6n"}]},{"client_msg_id":"f80e275b-07ed-446d-9ff5-1101bcf44df0","type":"message","user":"U03C6TEAZ","text":"ここ数日の進捗です。","ts":"1596992852.225700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qPE+H"}]},{"client_msg_id":"f4e1e021-1a32-4b02-a7a1-c84d6c8f0a2c","type":"message","user":"U03C6TEAZ","text":"\u003chttps://github.com/sveltejs/language-tools/pull/435\u003e","ts":"1596992841.225300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kSbgo"}]},{"client_msg_id":"5d224bb4-4650-4f6a-b464-fd8cefc593ed","type":"message","user":"U03C6TEAZ","text":"だいたい掴んだ。","ts":"1596991167.225000","team":"T03C4RC8V","reactions":[{"name":"sasumatsu","count":2,"users":["U78A6ESHM","U7TMPGWJ0"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8bemz"}]},{"client_msg_id":"dad0a3ee-78c9-40e0-8775-68b62aa8ceb5","type":"message","user":"U03C6TEAZ","text":"utils.js の中で `%3A` の置換と大文字小文字の扱いを直せば↑の様に絶対パスで開いた際の LspDefinition は動く。後は相対パスでも動く様にするための修正箇所を探す必要がある。","ts":"1596987382.224800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5dcr+"}]},{"client_msg_id":"254cfb96-dca4-4664-acc2-1710f19370c2","type":"message","user":"U03C6TEAZ","text":"なので vim を起動した後 `:e c:/foo/bar/foo.svelte` の様に小文字でドライブレターを開くと認識する。","ts":"1596987319.223400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nh03V"}]},{"client_msg_id":"04fe858c-97e1-4b3d-b71b-431055cc9fb7","type":"message","user":"U03C6TEAZ","text":"```vim src/App.svelte```\nで実行するとドライブレターが常に大文字になる。ただ vscode-uri は vue の件の時に判明したのと同じくドライブレターを強制で小文字にする。","ts":"1596987286.222500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1+5Jc"}]},{"client_msg_id":"a8e624b4-2aa4-4330-a3ea-72c12d40b17f","type":"message","user":"U03C6TEAZ","text":"原因はだいたい見えてますがあと1か所直すべき箇所を探さないといけない。","ts":"1596987228.221400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QyU"}]},{"client_msg_id":"ac9a00a3-8a13-44aa-98db-222b48e9e49d","type":"message","user":"U03C6TEAZ","text":"パス周りにパッチがいりますね。","ts":"1596987160.221000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kdr"}]},{"client_msg_id":"88aa48ca-0a54-43e1-a693-6dc22f3f2681","type":"message","user":"U78A6ESHM","text":"お！","ts":"1596987142.220700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EL=Q"}]},{"client_msg_id":"56e8f856-850d-4d5a-a4cb-425a76961b49","type":"message","user":"U03C6TEAZ","text":"あっ、Windows の vim-lsp で svelte-language-server の LspDefinition 動いた。","ts":"1596987103.220500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WYhm"}]}]
