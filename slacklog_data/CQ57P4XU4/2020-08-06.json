[{"client_msg_id":"738493f4-ed3c-4528-b129-11442e90aaf3","type":"message","user":"U7TMPGWJ0","text":"うーん、 mattn さんの手元のvim-lspで動かないのなんでだろう...。とりあえず今、僕の手元の vim-lsp-settings で入れた svelte の LS ので。ジャンプできた、ジャンプできなくてエラー出てるってやつだけ貼っておきます。。","ts":"1596698364.150600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"t4efB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U7TMPGWJ0","ts":"1596698372.150700","files":[{"id":"F018K3DUA5S","created":1596698366,"timestamp":1596698366,"name":"vim-lsp-svelte-definition-error-960.gif","title":"vim-lsp-svelte-definition-error-960.gif","mimetype":"image/gif","image_exif_rotation":0,"filetype":"gif","pretty_type":"GIF","user":"U7TMPGWJ0","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":2456739,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F018K3DUA5S/vim-lsp-svelte-definition-error-960.gif","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F018K3DUA5S/download/vim-lsp-svelte-definition-error-960.gif","original_h":666,"original_w":960,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F018K3DUA5S-54c4c098de/vim-lsp-svelte-definition-error-960_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F018K3DUA5S-54c4c098de/vim-lsp-svelte-definition-error-960_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F018K3DUA5S-54c4c098de/vim-lsp-svelte-definition-error-960_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F018K3DUA5S-54c4c098de/vim-lsp-svelte-definition-error-960_360.png","thumb_360_gif":"https://files.slack.com/files-tmb/T03C4RC8V-F018K3DUA5S-54c4c098de/vim-lsp-svelte-definition-error-960_360.gif","thumb_360_w":360,"thumb_360_h":250,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-F018K3DUA5S-54c4c098de/vim-lsp-svelte-definition-error-960_480.png","thumb_480_w":480,"thumb_480_h":333,"thumb_720":"https://files.slack.com/files-tmb/T03C4RC8V-F018K3DUA5S-54c4c098de/vim-lsp-svelte-definition-error-960_720.png","thumb_720_w":720,"thumb_720_h":500,"thumb_960":"https://files.slack.com/files-tmb/T03C4RC8V-F018K3DUA5S-54c4c098de/vim-lsp-svelte-definition-error-960_960.png","thumb_960_w":960,"thumb_960_h":666,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U7TMPGWJ0/F018K3DUA5S/vim-lsp-svelte-definition-error-960.gif","permalink_public":"https://slack-files.com/T03C4RC8V-F018K3DUA5S-fe04c7534e","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"deanimate_gif":"https://files.slack.com/files-tmb/T03C4RC8V-F018K3DUA5S-54c4c098de/vim-lsp-svelte-definition-error-960_deanimate_gif.png","display_as_bot":false,"has_rich_preview":false,"thumb_480_gif":"https://files.slack.com/files-tmb/T03C4RC8V-F018K3DUA5S-54c4c098de/vim-lsp-svelte-definition-error-960_480.gif","thumb_800":"https://files.slack.com/files-tmb/T03C4RC8V-F018K3DUA5S-54c4c098de/vim-lsp-svelte-definition-error-960_800.png","thumb_800_h":555,"thumb_800_w":800,"thumb_tiny":"AwAhADChmkopRzQAlFOA+v5UpXP/AOqgBlFKaSgApynHrSEYpKAHMQecnNIceppKKACigc07b7r+dAEj/wDHsfr/AFqtVl/+PY/X+tVqSKl0CiiimSS/wigdBR/CKB0FAH//2Q==","username":""}],"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"2afc5922-2392-4bd4-bf47-9e5e43e1831d","type":"message","user":"U7TMPGWJ0","text":"(どなたか他に違う方、Winな方とかにも試してもらわないとわからないかも...)","ts":"1596698618.151200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"frIQa"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"be84ef57-b5df-4183-9b9f-54047c4cd9ac","type":"message","user":"U78A6ESHM","text":"mac ですけど夜お仕事終わったら試してみます","ts":"1596698730.151500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ndp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9ccb9c41-3381-492a-b164-5cf9a6240187","type":"message","user":"U03C6TEAZ","text":"試した手順\n```npx degit sveltejs/template svelte-app\ncd svelte-app\nnpm install\ntouch src/Nested.svelte\nvim src/App.svelte```\n```&lt;script&gt;\n\timport Nested from './Nested.svelte'; \n\texport let name;\n&lt;/script&gt;\n{name}\n&lt;Nested/&gt;```\nに変更して `&lt;Nested/&gt;` の部分で `:LspDefinition`","ts":"1596700080.153000","edited":{"user":"U03C6TEAZ","ts":"1596700988.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JmV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7e1b520d-1d0d-4893-8945-eb25bf054a9a","type":"message","user":"U03C6TEAZ","text":"Linux で試したら name は飛ぶけど Nested は飛ばない。","ts":"1596700771.153300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DsJiW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ff708617-91d0-428b-af12-1feeed942004","type":"message","user":"U03C6TEAZ","text":"`burner/vim-svelte` 使ってるけど関係ないですよね？","ts":"1596700800.153600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"w+5g"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"82a00063-5443-4293-95f2-ca1866461104","type":"message","user":"U7TMPGWJ0","text":"`&lt;Nested/&gt;` は現在の vim-lsp で飛べなくて上記のエラーが出てるって感じですね。from のファイル名のところなら飛べたって感じですー。VSCodeやcoc.nvimだと `&lt;Nested/&gt;` でも Nested.svelte のファイルに飛べます。","ts":"1596701238.155200","edited":{"user":"U7TMPGWJ0","ts":"1596701685.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3aDe9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0cc391ae-84ff-47d2-8f20-33e46b86d8be","type":"message","user":"U7TMPGWJ0","text":"念の為、試しました。 `burner/vim-svelte` でも `evanleck/vim-svelte` でも両方とも特に変わらなかったです","ts":"1596702303.156000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vH2Mc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ed94b40e-db5d-45df-adc5-287fd5870715","type":"message","user":"U03C6TEAZ","text":"Linux だとエラー再現しました。","ts":"1596703497.156300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"B6sS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ceee3aad-f8f5-42cc-ad81-3f1baf7e467a","type":"message","user":"U03C6TEAZ","text":"つまり Linux だと yaegassy さんと同じになった。","ts":"1596703509.156700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fQ7r"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d4197603-6dae-485c-a316-34a9c0a86aca","type":"message","user":"U03C6TEAZ","text":"これレスポンスおかしくないですかね？","ts":"1596704048.156900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SSs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b072013f-ee8c-484d-8769-7343ad3f5bf9","type":"message","user":"U03C6TEAZ","text":"```{\n  \"response\": {\n    \"id\": 2,\n    \"jsonrpc\": \"2.0\",\n    \"result\": [\n      {\n        \"originSelectionRange\": {\n          \"end\": {\n            \"character\": 7,\n            \"line\": 32\n          },\n          \"start\": {\n            \"character\": 1,\n            \"line\": 32\n          }\n        },\n        \"targetSelectionRange\": {\n          \"end\": {\n            \"character\": 45,\n            \"line\": 5\n          },\n          \"start\": {\n            \"character\": 21,\n            \"line\": 5\n          }\n        },\n        \"targetRange\": {\n          \"end\": {\n            \"character\": 45,\n            \"line\": 5\n          },\n          \"start\": {\n            \"character\": 21,\n            \"line\": 5\n          }\n        },\n        \"targetUri\": \"file:///home/mattn/dev/svelte-app/src/Nested.svelte\"\n      }\n    ]\n  },\n  \"request\": {\n    \"id\": 2,\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"textDocument/definition\",\n    \"params\": {\n      \"textDocument\": {\n        \"uri\": \"file:///home/mattn/dev/svelte-app/src/App.svelte\"\n      },\n      \"position\": {\n        \"character\": 1,\n        \"line\": 32\n      }\n    }\n  }\n}```","ts":"1596704051.157100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tgEfF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"484889ac-c982-4939-9ce9-1cd7a896c4a6","type":"message","user":"U03C6TEAZ","text":"Nested.svelte は1行しかないんですよ。","ts":"1596704078.157500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kEJRS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ef236b69-0b24-4d0c-b4cf-228189b0b403","type":"message","user":"U03C6TEAZ","text":"5行目とかない。","ts":"1596704101.157900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Wxi"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"44de87f7-439b-4127-b50d-c67d274fcae4","type":"message","user":"U03C6TEAZ","text":"<@U8R597E9H> さんが詳しいかな。specification 見た感じ、ターゲットの range なので svelte-language-server がおかしい気がする。","ts":"1596704360.158500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"D2b"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cb2008bb-9921-4911-b86a-2d77693b5435","type":"message","user":"U8R597E9H","text":"実はその辺を真面目に実装したことはないんですよね。でもみてみます。（ただ、明らかにおかしそうですね。。。）","ts":"1596704387.159000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uaHw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0a6f1ec7-53e1-4694-9f5e-4468546c8c74","type":"message","user":"U8R597E9H","text":"_svelte ファイルを js に変換したあとの位置が 5 行目なのでは。。。？感が_","ts":"1596704416.159600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mlI"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f6d8e19e-1186-4d44-8adb-3f8e8f78357e","type":"message","user":"UAZ33BKV2","text":"逆変換というか、逆マッピングしての結果レポートの実装不足とかありそうですね...","ts":"1596704464.160200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JHf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"16fff1ff-8a9a-457e-b842-4c6be65883f1","type":"message","user":"U03C6TEAZ","text":"`Nested.svelte` を5行以上になる様に空行入れたら動いたw","ts":"1596704713.160800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"z8R"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e01c85e8-1fd7-400c-a5dc-13c611212c05","type":"message","user":"U03C6TEAZ","text":"これで動いてる coc-svelte さんと vscode さんはどうやって...","ts":"1596704761.161300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4bn4A"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"97a42b2f-c482-4fad-941a-2ae0526cad2f","type":"message","user":"U8R597E9H","text":"_vim-lsp-settings があるとトラブルシュートが楽だ。。。_","ts":"1596704795.161600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OeiW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"da36f66e-b731-4b6e-97b3-81d588ad2feb","type":"message","user":"U7TMPGWJ0","text":"むっ？","ts":"1596704920.161900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uiD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bc530f1e-be0b-4e9a-993d-9d794be4b19f","type":"message","user":"U03C6TEAZ","text":"vim-lsp としてはエラー出ない様にしといた方がいいのかな。","ts":"1596704927.162200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"O4d7E"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2fba5099-6f1b-4aa9-bcd4-ec94c1f23bdf","type":"message","user":"U7TMPGWJ0","text":"僕の環境では `&lt;Nested/&gt;` ではやはり飛べなかったです。Nested.svelte の行数を増やしても飛べませんでした...","ts":"1596705047.163200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AWfn2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5b56a3e8-b5e0-4e3e-924d-a03854c6a960","type":"message","user":"U8R597E9H","text":"nested の空行を増やすと今度は virtual_text をクリアする処理で index 違反になるｗ","ts":"1596705109.163800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GjMmM"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9e52e9d5-b68b-4bb6-944b-a86192b292e7","type":"message","user":"U8R597E9H","text":"全部の行数がおかしく返ってきてそう","ts":"1596705119.164100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"w0MB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"301e8433-2fdc-4eef-9d28-4ca34bbdf102","type":"message","user":"U03C6TEAZ","text":"僕は not neovim なので動いたのかな？","ts":"1596705169.164500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DPs52"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"075a0d08-ae16-4045-853c-794b181c1984","type":"message","user":"U7TMPGWJ0","text":"僕も not neovim で試しています。","ts":"1596705184.164800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iIBnX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d4de8b7d-2fb7-488f-8dc9-fc5b61c05c67","type":"message","user":"U03C6TEAZ","text":"<https://github.com/prabirshrestha/vim-lsp/commit/4032e4d2fa262fe69f48eff30b2ec91a9f7d8e40>","ts":"1596705271.165000","attachments":[{"fallback":"GitHub: Handle invalid range · prabirshrestha/vim-lsp@4032e4d","id":1,"title":"Handle invalid range · prabirshrestha/vim-lsp@4032e4d","title_link":"https://github.com/prabirshrestha/vim-lsp/commit/4032e4d2fa262fe69f48eff30b2ec91a9f7d8e40","text":"async language server protocol plugin for vim and neovim - prabirshrestha/vim-lsp","thumb_url":"https://avatars1.githubusercontent.com/u/287744?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/prabirshrestha/vim-lsp/commit/4032e4d2fa262fe69f48eff30b2ec91a9f7d8e40","original_url":"https://github.com/prabirshrestha/vim-lsp/commit/4032e4d2fa262fe69f48eff30b2ec91a9f7d8e40"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oegm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5de2fbf5-b77b-475b-a60a-984e9cff86cf","type":"message","user":"U03C6TEAZ","text":"とりあえずこうしたけど、virtual_text も見ないといけないのか。","ts":"1596705287.165700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aQ1eQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c2ad9fbd-b424-4bef-90cf-867db9506258","type":"message","user":"U03C6TEAZ","text":"マージはしてない。","ts":"1596705295.166000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sLF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a7f4c2cb-d4ac-44d2-b5b9-c9209214c218","type":"message","user":"U8R597E9H","text":"例によって coc の json を解析して適当にパラメタ埋め込んでみます。","ts":"1596705301.166200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qV9e"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7e7b7fee-e137-4e2f-a130-b04c99b0d81d","type":"message","user":"U7TMPGWJ0","text":"mattn さんブランチのは `&lt;Nested/&gt;` で飛べました！(途中でエラーでてジャンプが止まるとかはなくて。勿論、空行5行とか関係なく)","ts":"1596705479.166600","edited":{"user":"U7TMPGWJ0","ts":"1596705628.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SxO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"90281801-c95e-4e43-8119-a9babd4df56d","type":"message","user":"U7TMPGWJ0","text":"(他LSのに影響ないかは勿論試せてないです)","ts":"1596705561.167000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ttIfi"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7ba1751e-3554-419d-8333-d50a15300ad4","type":"message","user":"U03C6TEAZ","text":"`Nested.svelte` の中で定義されてる物にジャンプとか出来るのかな？","ts":"1596705889.167700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XSP5F"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f9a0bf70-d30f-4709-ad64-d460eb2111e7","type":"message","user":"U03C6TEAZ","text":"`Nested.foo` みたいな。","ts":"1596705902.167900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Mc6y"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d8a93139-1a3f-436e-9687-88389fe633d3","type":"message","user":"U78A6ESHM","text":"`Nested.foo` で Nested の `function foo()` に飛んでほしいですねぇ。","ts":"1596705969.168600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2wD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d092eafa-46d7-43c1-a577-1e5a12434aa0","type":"message","user":"U03C6TEAZ","text":"`Nested` は file というシンボルらしい。","ts":"1596706124.168900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ve8c"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6a9c2fbc-28a5-409a-86eb-e0f5bd12da8b","type":"message","user":"U03C6TEAZ","text":"なので name とは区別されてる。","ts":"1596706252.169400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yJJY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"638637df-378f-4a8f-86f8-80de67aae45a","type":"message","user":"U03C6TEAZ","text":"中は参照できないぽい。","ts":"1596706271.169900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Kx12X"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f2702752-0395-4d2d-bff7-01f4c28547e1","type":"message","user":"U8R597E9H","text":"initialization options や workspace config は関係なさそうでした。","ts":"1596706357.171700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"swM"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"18ff0a2b-c38c-4076-bca1-840d5c5d6653","type":"message","user":"U03C6TEAZ","text":"今回のエラーになってる箇所は複数箇所あった時に出すテキストだと思うのでまぁエラー無視してもいいかな。","ts":"1596706362.171900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Faxx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0bab486f-03bd-4c9d-83d1-4bbf2129f6dd","type":"message","user":"U03C6TEAZ","text":"別途 svelte に issue 切るくらいで。","ts":"1596706411.172600","edited":{"user":"U03C6TEAZ","ts":"1596706420.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"odacI"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5c8e1d53-5c17-481a-ad35-6bd1d5796c00","type":"message","user":"U8R597E9H","text":"‘line’: 5 が謎ですね。。。","ts":"1596706492.173400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zzK"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"19141c01-c03a-4093-8d61-b24bd9c42d41","type":"message","user":"U03C6TEAZ","text":"hrsh7th さんの js 説ぽい気はしますね。","ts":"1596707691.174200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"M+mHM"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"58919313-f515-40e7-a3a1-bb62142ea156","type":"message","user":"U7TMPGWJ0","text":"おっ、先程のマージされてたのですね。これで vim-lsp で svelte 快適に書きたい、 coc.nvim はなんか嫌だ、みたいな人がいたらオススメはできそうですね <https://github.com/prabirshrestha/vim-lsp/commit/a926dcf9f8e4f88953a527300733edf661d10143>","ts":"1596714389.174400","edited":{"user":"U7TMPGWJ0","ts":"1596714393.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FAv"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"83bdbe8e-9e48-4c4b-a7bb-fdc99e13aae6","type":"message","user":"U78A6ESHM","text":"<https://budougumi0617.github.io/2020/07/24/make_vimrc_with_lsp/>","ts":"1596715094.174800","attachments":[{"fallback":"vim-goを使わず、LSP（gopls）を使ってVimのGo開発環境を構築する - My External Storage","id":1,"title":"vim-goを使わず、LSP（gopls）を使ってVimのGo開発環境を構築する - My External Storage","title_link":"https://budougumi0617.github.io/2020/07/24/make_vimrc_with_lsp/","text":"2020年にもなったので、vim-goを卒業して、vim-lsp（gopls）を使ったVimの開発環境を構築する。","image_url":"https://budougumi0617.github.io/logos/Go-Logo_Aqua.png","blocks":null,"service_name":"budougumi0617.github.io","from_url":"https://budougumi0617.github.io/2020/07/24/make_vimrc_with_lsp/","original_url":"https://budougumi0617.github.io/2020/07/24/make_vimrc_with_lsp/"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5xoMf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a0edccd8-c560-4091-960e-8f02be2fd949","type":"message","user":"U7TMPGWJ0","text":"ultisnips と vim-vsnip の両方(スニペットエンジン2つ)が入ってるのが、ちょっと気になりました (見るべきところはそこじゃなくてですかねw)","ts":"1596716074.175100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jU6lX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d43bfbfd-9f88-45a5-9b78-858bd0c0496e","type":"message","user":"U78A6ESHM","text":"あれー svelte vim-lsp と vim-lsp-settings 最新にして、`evanleck/vim-svelte` 入れたのに vim 起動時に\n`Please install vim-plugin \"evanleck/vim-svelte\" to enable Language Server`\nとかって言われる。そして Nested にジャンプしない。","ts":"1596723973.176300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hPS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a5ad3987-960d-4ea9-b5aa-6e7b5facb5fb","type":"message","user":"U78A6ESHM","text":"LspStatus は\n`svelte-language-server: running` だから動いてるっぽい。","ts":"1596723995.176700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ugx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"56be056c-c28d-4d62-8691-994548c1616d","type":"message","user":"U78A6ESHM","text":"set ft で `filetype=svelte` ってでるなぁ。","ts":"1596724210.177000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NamWu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0efbb26c-c9c4-42da-9cf3-c7b2437dd59a","type":"message","user":"U03C6TEAZ","text":"vim-lsp-settings の方が先に反応しちゃってる？","ts":"1596725862.177400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hlQA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9b08ea12-be20-43c0-a17c-8b01f0eb747f","type":"message","user":"U03C6TEAZ","text":"昨日の svelte の件、なんとか動いたので LspDefinition の件を調べてるけど確かに動かないなぁ。","ts":"1596642049.122200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"26SA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0a2d74d7-9d8f-4cc5-8600-9200eeed360a","type":"message","user":"U03C6TEAZ","text":"普通に LS が textDocument/definition で空を返してる。","ts":"1596642069.122600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NkWcZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0cd11f07-c3ee-4b25-ad6e-915886473d32","type":"message","user":"U03C6TEAZ","text":"ちなみに昨日の svelte の件は `npm run dev` で `rollup -c -w` を実行してるけど `-c` で `rollup.config.js` を見てないらしく `npx rollup -c rollup.config.js -w` したら動いた。","ts":"1596642119.123700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DySn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dd9b55f7-f32c-43d8-bcb6-f8f851c58b85","type":"message","user":"U03C6TEAZ","text":"svelte-language-server のインストーラ直した。","ts":"1596642545.124200","team":"T03C4RC8V","reactions":[{"name":"subara","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NpCOt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4389eafc-db60-4275-8c6c-7af5aa9bedb8","type":"message","user":"U03C6TEAZ","text":"svelte で LspDefinition 効かない件はオプションかなんかなんだろうか。","ts":"1596676246.124800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6JKs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b2c46a67-3813-44c7-a680-32abd533efda","type":"message","user":"U03C6TEAZ","text":"といっても全部デフォルトonに見える。 <https://github.com/sveltejs/language-tools/blob/master/packages/language-server/src/ls-config.ts>","ts":"1596676257.125200","attachments":[{"fallback":"GitHub: sveltejs/language-tools","id":1,"title":"sveltejs/language-tools","title_link":"https://github.com/sveltejs/language-tools/blob/master/packages/language-server/src/ls-config.ts","text":"The Svelte Language Server, and official extensions which use it - sveltejs/language-tools","thumb_url":"https://avatars0.githubusercontent.com/u/23617963?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/sveltejs/language-tools/blob/master/packages/language-server/src/ls-config.ts","original_url":"https://github.com/sveltejs/language-tools/blob/master/packages/language-server/src/ls-config.ts"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+5JT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9d9693db-23eb-4cfd-ba85-ef06f6d4ecfc","type":"message","user":"U7TMPGWJ0","text":"svelte の LspDefinition 効かない件ですが coc.nvim で coc-svelte って拡張を使わずに vim-lsp 相当で直接LS登録をして試してもみたのですがそちらだと定義ジャンプもできてしまいますね。ということでオプション問題ではなさそうです。","ts":"1596678613.125500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aoF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"99782ebe-4418-435b-ae01-0c81c7557864","type":"message","user":"U7TMPGWJ0","text":"vim-lsp でLSPの何かに対応できていないから？等のそういう理由なのではないかと個人的には思っています。 例えば hrsh7th さんの workspaceFolders などそういうのかなと。 <https://github.com/prabirshrestha/vim-lsp/pull/753>","ts":"1596678733.125800","attachments":[{"fallback":"GitHub: Support workspaceFolders by hrsh7th · Pull Request #753 · prabirshrestha/vim-lsp","id":1,"title":"Support workspaceFolders by hrsh7th · Pull Request #753 · prabirshrestha/vim-lsp","title_link":"https://github.com/prabirshrestha/vim-lsp/pull/753","text":"This PR aims to support workspaceFolders capability. For example, Sometimes the gopls does not return the completion items when editing multiple project&amp;#39;s files. /GOPATH /src /github.com ...","thumb_url":"https://avatars1.githubusercontent.com/u/287744?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/prabirshrestha/vim-lsp/pull/753","original_url":"https://github.com/prabirshrestha/vim-lsp/pull/753"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ms8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"608cbc61-1f91-4a38-832e-6187d411de9a","type":"message","user":"U03C6TEAZ","text":"なるほど。ログをログを吐いてくれ～。","ts":"1596678908.126200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tSbZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7fbc1fe2-df9e-4bcc-a35d-10e493f0e6c5","type":"message","user":"U03C6TEAZ","text":"ログが何もでないんですよね。svelte","ts":"1596678920.126600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Scw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cf7045fe-5af7-4716-87f3-5f1258b76d4d","type":"message","user":"U7TMPGWJ0","text":"並行して次のLSPネタとして pyright (いわくつきのpylanceではなく) も vim-lsp で試してみました。pyright は型リンターとしての段階からどんどんパワーアップして既にそれ単体で Language Server の補完や定義ジャンプ等の機能全体で使えるようでした。先日EmacsのLSPの方々がエントリポイントのコマンド pyright-langserver も追加PRされてましたし。","ts":"1596679046.126800","edited":{"user":"U7TMPGWJ0","ts":"1596679756.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5mf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1072215d-69ad-4fe3-83c9-1cf9ce2b90d7","type":"message","user":"U7TMPGWJ0","text":"しかし、これもおそらく vim-lsp ではすべて正常に動かせない状況でした。非常に珍しいケースで補完とリントはできるんですがその他の定義ジャンプやホバー等、LS全般機能がすべて動かない。cocならできるといったところです。","ts":"1596679082.127000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yr2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b05b4c25-eed6-415c-b76d-4eeb3360d018","type":"message","user":"U7TMPGWJ0","text":"nvimのビルトインのLSPでも pyright の LS のPRが出てるようですが `workspaceDidChange` ？に対応してないので本体側で対応が完了しないと使えないみたいなissueも見つけました。 <https://github.com/neovim/nvim-lsp/pull/303#issuecomment-667218049>","ts":"1596679226.127500","attachments":[{"fallback":"GitHub: Add pyright languageserver by mjlbach · Pull Request #303 · neovim/nvim-lsp","id":1,"title":"Add pyright languageserver by mjlbach · Pull Request #303 · neovim/nvim-lsp","title_link":"https://github.com/neovim/nvim-lsp/pull/303#issuecomment-667218049","text":"Closes #299 Depends on neovim/neovim#12638","thumb_url":"https://avatars0.githubusercontent.com/u/6471485?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/neovim/nvim-lsp/pull/303#issuecomment-667218049","original_url":"https://github.com/neovim/nvim-lsp/pull/303#issuecomment-667218049"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ygWC"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4e24ce3b-7ee6-43d9-bdce-640c5c431df7","type":"message","user":"U03C6TEAZ","text":"なるほど。","ts":"1596679470.127800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rKQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cf799af5-206d-481f-bdb7-88efbcf80b84","type":"message","user":"U03C6TEAZ","text":"<https://github.com/prabirshrestha/vim-lsp/pull/753>","ts":"1596679516.128000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"obSt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"df800518-34f2-4d64-a4d5-1dc842f880d7","type":"message","user":"U03C6TEAZ","text":"どういうステータスだったかな。","ts":"1596679520.128200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9Tn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"620c0327-4af5-49df-88f0-cbf64d798009","type":"message","user":"U03C6TEAZ","text":"ready merge ならさっさとマージしちゃいたい。","ts":"1596679531.128500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RjBc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0fe3f759-6c45-4e9b-b829-28864b9e9f23","type":"message","user":"U7TMPGWJ0","text":"一応、そのまま hrsh7th さんのそれも試してみたのですがそれでもsvelteは定義ジャンプできませんでした。 何かLS登録設定の際に 'folders' とか追加の設定がある等、使い方がわからなかったのでそのまま、そのPRのvim-lspを入れ替えてやってみただけですが。","ts":"1596679654.128700","edited":{"user":"U7TMPGWJ0","ts":"1596679716.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jvW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0665ae94-86ac-455c-8033-07957b4b22aa","type":"message","user":"U8R597E9H","text":"では pyright を試してみて、動けばマージする。という感じで手元で作業してみます。まだ駄目なのかあ。。。","ts":"1596680161.129500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NDwRb"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8f7fd442-a871-4483-9a9d-8408f062484e","type":"message","user":"U8R597E9H","text":"めちゃくちゃ忙しい時期は抜けたのでやれそうです。","ts":"1596680189.130200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PEH/P"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9fd67500-2679-4bce-b394-ad49700377cc","type":"message","user":"U7TMPGWJ0","text":"pyright はちょっと過渡期な関係やMSさんの pyls-ms からの移行期を進める？関係なのか workspace_config に設定すべきものがちょっと変わってまして。pythonのキーとpyrightのキーがあります(なくても動くかもですがデフォ値はこれです)。vim-lspのLS登録の一応サンプルとして貼っておきます。\n```if executable('pyright-langserver')\n  augroup LspPyright\n    au!\n    au User lsp_setup call lsp#register_server({\n        \\ 'name': 'pyright-langserver',\n        \\ 'cmd': {server_info-&gt;['pyright-langserver', '--stdio']},\n        \\ 'allowlist': ['python'],\n        \\ 'root_uri': {server_info-&gt;lsp#utils#path_to_uri(lsp#utils#find_nearest_parent_file_directory(lsp#utils#get_buffer_path(), ['venv/', '.venv/', '.env', 'setup.py', 'setup.cfg', 'pyproject.toml', '.git/']))},\n        \\ 'workspace_config': {\n        \\   'python': {\n        \\     'analysis': {\n        \\       'typeshedPaths': [],\n        \\       'autoSearchPaths': v:true,\n        \\       'stubPath': '',\n        \\       'diagnosticMode': 'openFilesOnly',\n        \\       'diagnosticSeverityOverride': {},\n        \\       'logLevel': 'info',\n        \\       'typeCheckingMode': 'basic',\n        \\       'useLibraryCodeForTypes': v:true,\n        \\       'extraPaths': [],\n        \\     },\n        \\     'pythonPath': 'python',\n        \\     'venvPath': '',\n        \\   },\n        \\   'pyright': {\n        \\     'disableLanguageServices': v:false,\n        \\     'disableOrganizeImports': v:false,\n        \\   },\n        \\ }\n        \\})\n  augroup END\nendif```","ts":"1596680999.130400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Pd11"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"98a4b845-848a-4f3a-b7d6-6aeeb4906e59","type":"message","user":"U7TMPGWJ0","text":"pyright 自体のインストールは `npm i -g pyright` で `pyright-langserver` が bin に入ります。nodeのbinのPATHが通ってればたたけますね。","ts":"1596681024.130800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KjV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4c4c3a57-e9f0-47a5-b758-a4a5ad4791bd","type":"message","user":"U8R597E9H","text":"おお。ありがとうございます！","ts":"1596681125.131000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"A8mNI"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9e68775c-fd79-4060-937c-83d23a9c2272","type":"message","user":"U7TMPGWJ0","text":"ちなみに hrsh7th さんのを vim-plug で `Plug 'hrsh7th/vim-lsp', { 'branch': 'workspace' }` で入れて試しましたが残念ながら pyright がバッチリ動くということはなかったです(追加設定があるのならわかりませんが)","ts":"1596681129.131200","edited":{"user":"U7TMPGWJ0","ts":"1596681144.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"W9D"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a43b5a8f-3642-4cdb-b244-01199dab0d00","type":"message","user":"U8R597E9H","text":"root_uri が設定されていれば、workspace ブランチは動作する「予定」だったので、何ら化まだ対応が必要そうですね。。。助かります。","ts":"1596681398.131900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Bwl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"23ea3b23-8138-4e56-8b70-d40f8c86eb88","type":"message","user":"U7TMPGWJ0","text":"ちなみに pyright の LS ですが coc.nvim だと `coc-pyright` って拡張がありまして。その拡張で動くのは勿論ですが、それを使わず vim-lsp と同じように LSを直接登録する方法でも試しましたが coc.nvim では補完、定義ジャンプー、ホバー、リント(diagnotics)等含めちゃんと動きます。 <https://github.com/fannheyward/coc-pyright>","ts":"1596683486.132100","attachments":[{"fallback":"GitHub: fannheyward/coc-pyright","id":1,"title":"fannheyward/coc-pyright","title_link":"https://github.com/fannheyward/coc-pyright","text":"Pyright for Vim/Neovim, works with coc.nvim. Contribute to fannheyward/coc-pyright development by creating an account on GitHub.","thumb_url":"https://avatars2.githubusercontent.com/u/345274?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/fannheyward/coc-pyright","original_url":"https://github.com/fannheyward/coc-pyright"}],"edited":{"user":"U7TMPGWJ0","ts":"1596683581.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9vs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4cf1288c-9247-4f80-8df4-63a28fe79042","type":"message","user":"U03C6TEAZ","text":"TypeScriptPlugin.js の\n```    async getDefinitions(document, position) {\n        if (!this.featureEnabled('definitions')) {\n            return [];\n        }\n        const { lang, tsDoc } = this.getLSAndTSDoc(document);\n        const fragment = await tsDoc.getFragment();\n        const defs = lang.getDefinitionAndBoundSpan(tsDoc.filePath, fragment.offsetAt(fragment.getGeneratedPosition(position)));\n        if (!defs || !defs.definitions) {\n            return [];\n        }\n        const docs = new Map([[tsDoc.filePath, fragment]]);\n        return await Promise.all(defs.definitions.map(async (def) =&gt; {\n            let defDoc = docs.get(def.fileName);\n            if (!defDoc) {\n                defDoc = await this.getSnapshot(def.fileName).getFragment();\n                docs.set(def.fileName, defDoc);\n            }\n            return vscode_languageserver_1.LocationLink.create(utils_1.pathToUrl(def.fileName), utils_2.convertToLocationRange(defDoc, def.textSpan), utils_2.convertToLocationRange(defDoc, def.textSpan), utils_2.convertToLocationRange(fragment, defs.textSpan));\n        }));\n    }```\nここで `if (!defs || !defs.definitions) {` に入ってるぽい。","ts":"1596685406.133300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sLBP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5bca1fc9-e5c9-4238-adcf-5135122f00ed","type":"message","user":"U03C6TEAZ","text":"なので無効にされてるとかじゃなく、一応探しにはいってそう、でも見つかってないって感じ。","ts":"1596686287.133800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0bm/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3493d81f-d897-4b65-b386-3b00a58da623","type":"message","user":"U03C6TEAZ","text":"この lang は `ts.LanguageService` なので ts としてシンボルとして認識されてない？","ts":"1596688449.134400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cM=zr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9d453158-6b97-47ff-9e04-19df40d6124c","type":"message","user":"U7TMPGWJ0","text":"svelteのあそこで `:LspDefinition`でジャンプできない件ですが。","ts":"1596691833.135100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Vvm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b49fc9dc-0036-4d18-b293-db2780ebade1","type":"message","user":"U7TMPGWJ0","text":"vim-lsp でログ吐き出したら `\"Vim(let):E684: リストのインデックスが範囲外です: 4\"` が出てました。","ts":"1596691916.135400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TtNNc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9e8d158e-17bf-43c7-b853-8a993b393eee","type":"message","user":"U03C6TEAZ","text":"hou","ts":"1596691943.135600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Fnl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6e98dba9-9f5d-4073-bebb-a1fb0c716cef","type":"message","user":"U03C6TEAZ","text":"僕んとこ出てないんすよね。","ts":"1596692009.135900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fsl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U7TMPGWJ0","ts":"1596692065.136000","files":[{"id":"F01862059B8","created":1596692052,"timestamp":1596692052,"name":"vim-lsp-svelte-log.txt","title":"vim-lsp-svelte-log.txt","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"Plain Text","user":"U7TMPGWJ0","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":1109,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F01862059B8/vim-lsp-svelte-log.txt","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F01862059B8/download/vim-lsp-svelte-log.txt","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U7TMPGWJ0/F01862059B8/vim-lsp-svelte-log.txt","permalink_public":"https://slack-files.com/T03C4RC8V-F01862059B8-71485bbc80","edit_link":"https://vim-jp.slack.com/files/U7TMPGWJ0/F01862059B8/vim-lsp-svelte-log.txt/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"2b605766-6cef-420d-b3dc-231ab62dd6b4","type":"message","user":"U7TMPGWJ0","text":"`:LspDefinition` を実行とその後にエラーが出力されたといった2行のログです。","ts":"1596692148.136700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HSmk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2c2126f0-a18e-4d80-92f4-c56d160cd659","type":"message","user":"U03C6TEAZ","text":"callbag の中か... つら","ts":"1596692282.137000","edited":{"user":"U03C6TEAZ","ts":"1596692295.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7hV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e2033664-21f1-4b54-8649-57814efdcc84","type":"message","user":"U7TMPGWJ0","text":"vim-lsp 直接の僕の手元だけかなと思ったら、vim-lsp-settings のでも同じように上記のログがでました","ts":"1596692432.137800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"y0Q3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c428d063-599d-4f8c-ab0e-f94bfeb3f271","type":"message","user":"U7TMPGWJ0","text":"うまく捌ければちゃんと定義ジャンプできそうな雰囲気ありますね","ts":"1596692559.138600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"O=v57"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"546b29cb-a13f-4e2e-8999-ea69eeab97a2","type":"message","user":"U7TMPGWJ0","text":"例えばimport文のfromのこのあたり `|` では飛べるので。 `import Nested from './Nest|ed.svelte';`","ts":"1596692660.139100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vxrh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"78477291-2133-434d-bdb5-e503a5730e79","type":"message","user":"U03C6TEAZ","text":"僕んとこどちらも飛べない。","ts":"1596692708.139500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2OyTt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"288125ba-f4c7-4fa2-990b-8ade25924057","type":"message","user":"U7TMPGWJ0","text":"およ？そうですか。なんでしょう...。ファイル内では飛べますでしょうか？こういうのがあったとして。 `{name}`  から 上の script 内の `name` に。\n```&lt;script&gt;\n\timport Nested from './Nested.svelte';\n\texport let name;\n&lt;/script&gt;\n\n&lt;p&gt;{name}!&lt;/p&gt;\n&lt;Nested/&gt;```","ts":"1596692815.140700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xyKY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"16d03fbc-8374-44a6-b1ad-badec6baf901","type":"message","user":"U03C6TEAZ","text":"飛べない...","ts":"1596692858.140900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zHqbT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1365bcdf-19e3-470d-8970-d608a6c9bd29","type":"message","user":"U7TMPGWJ0","text":"グヌー...","ts":"1596692881.141500","team":"T03C4RC8V","reactions":[{"name":"gnu_head","count":2,"users":["UAZ33BKV2","U78A6ESHM"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hwU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dbe7546a-1bb5-40c1-87f5-0a1acdc7ce52","type":"message","user":"U03C6TEAZ","text":"`Nested.svelte` は src の中ですがあってますか？","ts":"1596692885.141600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KHiQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e698abbe-f674-48ad-be2c-c4afe3399eff","type":"message","user":"U7TMPGWJ0","text":"はい。","ts":"1596692912.142000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cVsA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e99b8786-903a-48e7-8065-71de5e543dc9","type":"message","user":"UAZ33BKV2","text":"むずかしいですね...","ts":"1596692951.142700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Om0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1c1ebe18-d5a9-4119-9ffb-7fb2c0f47c22","type":"message","user":"U7TMPGWJ0","text":"mattn さんの手元のそのフォルダは VSCodeだと飛べますか？ mattn さんはVSCodeも手元に入ってそう。","ts":"1596692966.143100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"j6TqG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2f7f68a1-52b5-425c-b64f-d765dca79526","type":"message","user":"U7TMPGWJ0","text":"拡張を入れれば正しい振る舞い(正しい？VSCodeファーストなものではあるので)は確認できますね <https://marketplace.visualstudio.com/items?itemName=svelte.svelte-vscode>","ts":"1596693023.143800","attachments":[{"fallback":"Svelte for VS Code - Visual Studio Marketplace","id":1,"title":"Svelte for VS Code - Visual Studio Marketplace","title_link":"https://marketplace.visualstudio.com/items?itemName=svelte.svelte-vscode","text":"Extension for Visual Studio Code - Svelte language support for VS Code","thumb_url":"https://svelte.gallerycdn.vsassets.io/extensions/svelte/svelte-vscode/101.8.0/1596611094520/Microsoft.VisualStudio.Services.Icons.Default","blocks":null,"service_name":"marketplace.visualstudio.com","service_icon":"https://marketplace.visualstudio.com/favicon.ico","thumb_width":256,"thumb_height":256,"from_url":"https://marketplace.visualstudio.com/items?itemName=svelte.svelte-vscode","original_url":"https://marketplace.visualstudio.com/items?itemName=svelte.svelte-vscode"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1kR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ed427c0e-eb0e-4de7-b37e-393e464a0a71","type":"message","user":"U03C6TEAZ","text":"お、飛べました &gt; vscode","ts":"1596693046.144200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Q5o"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"53b1b6a3-4092-4cda-a2c4-d06bf70de464","type":"message","user":"U7TMPGWJ0","text":"となると、mattnさんのvim-lsp環境なのかな。win?","ts":"1596693074.144900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ib07f"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7913183e-76d7-419f-935c-373bc5f8e4da","type":"message","user":"U03C6TEAZ","text":"はい。","ts":"1596693088.145300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Mtm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4d9a57a7-9880-4bb8-b705-c9fa496b4f01","type":"message","user":"U7TMPGWJ0","text":"svelte はチュートリアルがしっかりしてたのでイメージとしては進めながらこれっぽく別ファイルをってのを参考にしました <https://svelte.dev/tutorial/nested-components>","ts":"1596693128.146200","attachments":[{"fallback":"Svelte tutorial","id":1,"title":"Svelte tutorial","title_link":"https://svelte.dev/tutorial/nested-components","text":"Introduction / Nested components","image_url":"https://svelte.dev/images/twitter-card.png","blocks":null,"service_name":"svelte.dev","service_icon":"https://svelte.dev/favicon.ico","from_url":"https://svelte.dev/tutorial/nested-components","original_url":"https://svelte.dev/tutorial/nested-components"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=4j"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"761353c0-0217-464a-b8a0-a27003c421cd","type":"message","user":"U7TMPGWJ0","text":"(僕の今の手元のWinはVimが整ってないので試せない...)","ts":"1596693173.146700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cIM=J"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"40fd98f5-350b-4934-818f-57219f96c96b","type":"message","user":"U03C6TEAZ","text":"僕は svelte/template から作りました。","ts":"1596693292.147100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"E=OZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"EF34660E-99EB-4049-ACD9-56E5B6603E2E","type":"message","user":"U7TMPGWJ0","text":"僕も同じです。npxでプロジェクト作るやつですね","ts":"1596693418.148400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8yqcr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9cef1c87-349d-46e5-a29d-86c29153f847","type":"message","user":"U03C6TEAZ","text":"はい。","ts":"1596693443.148600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7l=wz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0fcd79a1-e187-40be-a4ad-3413731b710c","type":"message","user":"U03C6TEAZ","text":"scripts/setypTypeScript.js を消して typescript にしてます。","ts":"1596693503.149100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PzZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
