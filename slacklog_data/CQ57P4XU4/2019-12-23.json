[{"type":"message","user":"URB072GTU","text":"<@URB072GTU> has joined the channel","ts":"1577072389.096200","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"1632d21a-415f-479c-8d40-03e753b641d7","type":"message","user":"U03C6TEAZ","text":"オッ","ts":"1577083385.096600","files":[{"id":"FRZSM38AZ","created":1577083383,"timestamp":1577083383,"name":"image.png","title":"image.png","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"U03C6TEAZ","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":11701,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FRZSM38AZ/image.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FRZSM38AZ/download/image.png","original_h":153,"original_w":469,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-FRZSM38AZ-9353a36843/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-FRZSM38AZ-9353a36843/image_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-FRZSM38AZ-9353a36843/image_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-FRZSM38AZ-9353a36843/image_360.png","thumb_360_gif":"","thumb_360_w":360,"thumb_360_h":117,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U03C6TEAZ/FRZSM38AZ/image.png","permalink_public":"https://slack-files.com/T03C4RC8V-FRZSM38AZ-914a49918b","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"thumb_tiny":"AwAPADC8qyB2LMCp6D0p2f8AbFOoH1NACdeNwzS4Pr+lH40fiaADBoxS5ozQB//Z","username":""}],"upload":true,"reactions":[{"name":"yossya","count":2,"users":["UEB17JJJE","UNM8AVCB0"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5r="}]},{"client_msg_id":"a5bd85e4-326b-40cf-977e-cdca0f805bcc","type":"message","user":"U8R597E9H","text":"_issue もきて、使っていただけてる感じで嬉しい_","ts":"1577084997.097700","team":"T03C4RC8V","reactions":[{"name":"goodpoem","count":11,"users":["UKHUVMBJR","UAZ33BKV2","U78A6ESHM","U72TB62UF","U8CC7MDCL","UNM8AVCB0","U7TMPGWJ0","U03C6TEAZ","UG6DF6W87","UQCJ45ZFH","UEACRCY0Z"]},{"name":"subara","count":2,"users":["UGP5AJKU4","UEB17JJJE"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"g+m4Y"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c8b23b0b-bf11-49bf-a36c-46eaf5c9c65a","type":"message","user":"U03C6TEAZ","text":"僕も textEdit 直す pr で hrsh7sh/vim-vsnip で検証してくれって言われてますw","ts":"1577090186.099900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fMv2O"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c4a1795a-3df8-4dd0-ab98-75e0bee75c2b","type":"message","user":"U03C6TEAZ","text":"<https://github.com/prabirshrestha/vim-lsp/pull/572#issuecomment-568329990>","ts":"1577090197.100100","attachments":[{"fallback":"GitHub: Fix completion: textEdit by mattn · Pull Request #572 · prabirshrestha/vim-lsp","id":1,"title":"Fix completion: textEdit by mattn · Pull Request #572 · prabirshrestha/vim-lsp","title_link":"https://github.com/prabirshrestha/vim-lsp/pull/572#issuecomment-568329990","text":"When enabling text-edit and do completion with snippets like getSection($0), vim-lsp expands ($0)( wity typing (. This is caused by two problems. ( (typed by user) is not required if insertTextFor...","thumb_url":"https://avatars1.githubusercontent.com/u/287744?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/prabirshrestha/vim-lsp/pull/572#issuecomment-568329990","original_url":"https://github.com/prabirshrestha/vim-lsp/pull/572#issuecomment-568329990"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aU9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"15cf5564-17c3-4943-b8f8-181c16ff630d","type":"message","user":"UAZ33BKV2","text":"おおおー","ts":"1577090290.100500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"goL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d13741d8-7c7a-48fd-98f9-9e8cf9210d35","type":"message","user":"U8R597E9H","text":"お。手元で試してみましょうか。","ts":"1577090619.100800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LHko"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cbc88760-76b9-4668-a3ae-cccad85d3447","type":"message","user":"U8R597E9H","text":"最近、自分の vimrc を `s:config.lsp`  という値で `vim-lsc` `vim-lsp` `自作` `nvim-builtin` 切り替えられるようにしている。","ts":"1577090688.101800","team":"T03C4RC8V","reactions":[{"name":"subara","count":2,"users":["UEB17JJJE","UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"p8oSG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3fa51a85-f026-4158-bebc-54f398e4f58a","type":"message","user":"U03C6TEAZ","text":"今は明示的に殺してるんですよね。 <https://github.com/prabirshrestha/vim-lsp/pull/572/files#diff-15712bb0a804586a2c6f928b17b68ce1R254>","ts":"1577090756.102300","attachments":[{"fallback":"GitHub: Fix completion: textEdit by mattn · Pull Request #572 · prabirshrestha/vim-lsp","id":1,"title":"Fix completion: textEdit by mattn · Pull Request #572 · prabirshrestha/vim-lsp","title_link":"https://github.com/prabirshrestha/vim-lsp/pull/572/files#diff-15712bb0a804586a2c6f928b17b68ce1R254","text":"When enabling text-edit and do completion with snippets like getSection($0), vim-lsp expands ($0)( wity typing (. This is caused by two problems. ( (typed by user) is not required if insertTextFor...","thumb_url":"https://avatars1.githubusercontent.com/u/10111?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/prabirshrestha/vim-lsp/pull/572/files#diff-15712bb0a804586a2c6f928b17b68ce1R254","original_url":"https://github.com/prabirshrestha/vim-lsp/pull/572/files#diff-15712bb0a804586a2c6f928b17b68ce1R254"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ktK"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"88d90be4-aee7-4b0f-a68f-40638e673478","type":"message","user":"U03C6TEAZ","text":"あら、私ったら「コロス」だなんて。","ts":"1577090771.102800","team":"T03C4RC8V","reactions":[{"name":"ultrafastparrot","count":1,"users":["U78A6ESHM"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lBiA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2ade8d50-46e7-4615-a518-ff0de540dd28","type":"message","user":"U8CC7MDCL","text":"某大アメフト部ばりの謝罪会見が開かれそう","ts":"1577090898.103400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DYa"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d222c084-086b-4dd8-a236-638711cb1dcd","type":"message","user":"U03C6TEAZ","text":"実際 vsnip と vim-lsp でどの様に動くんだろう。","ts":"1577091143.104100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"w3r"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"93a9e562-a16f-48e0-b2a4-08b8982b8cdc","type":"message","user":"U03C6TEAZ","text":"scala の langserver のスクリーンショット上げて insertTextFormat の使い方間違ってない？ってツイートしたら作者陣に囲まれたのがこちらのアカウントになります。 <https://twitter.com/mattn_jp/status/1208351066821021696>","ts":"1577091215.105000","attachments":[{"fallback":"<https://twitter.com/mattn_jp|@mattn_jp>: metals (Language Server for Scala) 入れてみた。なんすかこれ、最高じゃないすか。 <https://pbs.twimg.com/tweet_video_thumb/EMTs4muUUAARJOn.jpg>","id":1,"author_name":"mattn","author_subname":"@mattn_jp","author_link":"https://twitter.com/mattn_jp/status/1208351066821021696","author_icon":"https://pbs.twimg.com/profile_images/1022150732634419200/yZg4xLsO_normal.jpg","text":"metals (Language Server for Scala) 入れてみた。なんすかこれ、最高じゃないすか。","thumb_url":"https://pbs.twimg.com/tweet_video_thumb/EMTs4muUUAARJOn.jpg","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1576928319,"service_name":"twitter","thumb_width":798,"thumb_height":632,"video_html":"<video autoplay loop muted poster=\"https://pbs.twimg.com/tweet_video_thumb/EMTs4muUUAARJOn.jpg\" width=\"798\" height=\"632\"><source type=\"video/mp4\" src=\"https://video.twimg.com/tweet_video/EMTs4muUUAARJOn.mp4\"></video>","video_html_width":798,"video_html_height":632,"from_url":"https://twitter.com/mattn_jp/status/1208351066821021696","original_url":"https://twitter.com/mattn_jp/status/1208351066821021696"}],"team":"T03C4RC8V","reactions":[{"name":"goodpoem","count":4,"users":["UGP5AJKU4","U78A6ESHM","U8CC7MDCL","UEB17JJJE"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XP2u+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9fd9be73-f66d-4838-9e15-ae361538f4a6","type":"message","user":"U8R597E9H","text":"vim-vsnip と vim-vsnip-integ と vim-lsp をあわせてインストールすると、\n<https://vim-jp.slack.com/archives/CQ57P4XU4/p1575609890275100>\nこういうふうに動きます。","ts":"1577091996.106000","attachments":[{"fallback":"[December 5th, 2019 9:24 PM] hrsh7th: ご様子です。","id":1,"author_id":"U8R597E9H","author_name":"hrsh7th","author_subname":"hrsh7th","author_link":"https://vim-jp.slack.com/team/U8R597E9H","author_icon":"https://secure.gravatar.com/avatar/754fe8f7bc26c7dff2a8f709fea09751.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0008-48.png","text":"ご様子です。","mrkdwn_in":["text"],"blocks":null,"footer":"Posted in #lsp","ts":1575609890.275100,"from_url":"https://vim-jp.slack.com/archives/CQ57P4XU4/p1575609890275100","original_url":"https://vim-jp.slack.com/archives/CQ57P4XU4/p1575609890275100"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"70de"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8b043c8c-00fd-4773-a528-595f16f54cce","type":"message","user":"U8R597E9H","text":"補完候補として返却された snippet がその場で始まる感じです。","ts":"1577092039.106600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"P6Ji"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"99ddfab7-1042-4e6f-90af-93801e908c4c","type":"message","user":"UGP5AJKU4","text":"おおぉ、すごい…","ts":"1577092114.106900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hk9JC"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c7b8ec94-58b4-4817-b496-37629884b05b","type":"message","user":"U03C6TEAZ","text":"vim-lsp と連携する場合は、snippet ファイル等は要らないという事ですか？","ts":"1577092467.107300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ze03"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2ff86846-d66d-4857-9379-db4d972cce14","type":"message","user":"U8R597E9H","text":"不要ですね。自分用のスニペットもそういうプラグインなので定義したりできますが（VsnipOpen で開けます。）、なくても動きます。","ts":"1577092677.108100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bMY34"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"de604125-5850-431f-9483-ebbdc0f53636","type":"message","user":"U8R597E9H","text":"gopls なんかは、関数の補完候補に対して「関数呼び出しを行う（引数をプレースホルダとする）」というスニペットを返してくるので、勝手に発動します。","ts":"1577092732.108900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KWxsT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0ecc6f77-b89a-4b7b-ac50-f92d853450be","type":"message","user":"U03C6TEAZ","text":"何がトリガになってるんですか？","ts":"1577092825.109300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NPxz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d5dcae7e-43cd-4d90-b081-24ce5527875f","type":"message","user":"U8R597E9H","text":"CompleteDone 時に、user_data に入っている情報がスニペットだった場合、その場でスニペットを起動しています。","ts":"1577092865.110100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RZGJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"99765144-d3e9-43d9-8a9d-b0e9de3b150c","type":"message","user":"U03C6TEAZ","text":"あー、あれか。","ts":"1577092874.110400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Prp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6cff9092-349d-4316-8247-3ae806c0e159","type":"message","user":"U8R597E9H","text":"_CompleteDone 時に、文字数が減っている場合は発動しないとかはやってます。（&lt;BS&gt; や &lt;C-w&gt; への考慮）_","ts":"1577092915.111000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hV3yh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"73a8210b-4d8e-4b70-b247-16a022462c9b","type":"message","user":"U03C6TEAZ","text":"上の修正、タイマーで行上書きしてるんですがバッティングしないだろうか。","ts":"1577093095.112100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RC4mY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b4abcbcf-8fed-4c06-9d14-09b2fb0fdc8f","type":"message","user":"U8R597E9H","text":"ありえる…","ts":"1577093117.112300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/l1m"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4097d99c-f081-4f82-97ab-4392f7cc73dc","type":"message","user":"U8R597E9H","text":"vsnip-integ は少し行儀悪い感じにしているので耐える気がしてきた。\n\nたしか、vim-lsp って関数を差し込むとそれによってスニペット展開しようとするはずなので、それの有無で「vim-lsp 本体側で展開するかしないか」を判断できるはず。","ts":"1577093249.116500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=Ck"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e5344431-cae2-435a-868b-b84a2d68ac4d","type":"message","user":"U03C6TEAZ","text":"補完候補を出してる最中に c-j とか、 . をタイプすると、現状の vim-lsp は textEdit か壊れるんですよね。","ts":"1577093336.119000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zguj"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9d319ee0-4b2c-4a5d-9c9e-fdf6f2ab13d8","type":"message","user":"U03C6TEAZ","text":"補完候補と、タイプした文字が入った後に CompleteDone が発火するので。","ts":"1577093385.121300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"S/nft"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b4b60588-a0bf-4bcb-854f-6591ad666524","type":"message","user":"U8R597E9H","text":"僕の実装でも行が変化するような変更は怪しいかもしれないです。\nただ、ドットなどは対応しているはず。","ts":"1577093405.121900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7WcbP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"93f2cd36-c170-4d60-b581-4ff9f247d1f4","type":"message","user":"U03C6TEAZ","text":"本当は本体でこのタイミング直した方がいいんだけどなぁ。","ts":"1577093425.123000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WWrR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"309d0a29-6f05-4a84-83d7-38f44138f3fd","type":"message","user":"U03C71D7H","text":"(あまりちゃんと理解できてないけど環境がどんどん良くなっていってる感じはあるので期待感が高い)","ts":"1577093457.124600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"k1cxB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a0bd1373-9db7-4af3-a6e0-98ed280576e2","type":"message","user":"U03C6TEAZ","text":"でも直すと色んな物が壊れるんだろうな。","ts":"1577093522.127300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"deV=e"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"465f4a06-fba2-4694-b267-d93b8424c161","type":"message","user":"U8R597E9H","text":"CompleteDone のタイミングでは、「補完が確定するトリガとなった文字列」はまだ挿入されてなくて、「v:completed_item.word」が入っている。という状態になります。\n\nそこで、CompleteDone 時の行を保存しておいて、0sec タイマー後に書き戻すことで「補完が確定するトリガとなった文字列」を削除しています。","ts":"1577093537.127800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"M02"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"166c494b-abac-4229-805f-2dee962444aa","type":"message","user":"U8R597E9H","text":"スニペット展開前にはさらに補完によって挿入された word 文字を削除して、展開するようにしています。","ts":"1577093637.129700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4KIns"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9ac61a99-1260-43ab-87f3-536476a1f094","type":"message","user":"U8R597E9H","text":"_ちなみに、0sec タイマー後に書き戻す。というのが以前の実装で今は feedkeys で `&lt;C-r&gt;=` を利用して、書き戻す処理に移行してます。_","ts":"1577093893.130600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yvoB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"950ba9ed-b287-4296-b362-c548504e42a5","type":"message","user":"U03C6TEAZ","text":"どっちが先に発動するか微妙","ts":"1577093979.130900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dYbj8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"43b822a0-5bff-4250-a4e4-761a596f99ec","type":"message","user":"U8R597E9H","text":"feedkeys なら、ユーザ入力となったキーよりもあとに積まれないかな。。。という期待があるのと、少しちらつきが減るのが変更してみた感じです。","ts":"1577094069.131700","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["U03C6TEAZ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LNbOJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f3578199-de5c-4cfe-bb0e-f1a3264f0435","type":"message","user":"U8R597E9H","text":"少なくとも当該のブランチで vim-vsnip との連携が壊れることはないのがわかりました。","ts":"1577094557.132200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IIX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9a09daac-c2b9-4fc2-9d3a-53a3277cb838","type":"message","user":"U03C6TEAZ","text":"ありがとうございます。あとで自分も確認してみます。","ts":"1577094578.132500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OPAQh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9af0a1f8-6207-4757-b1a4-020a2fb78b57","type":"message","user":"U8R597E9H","text":"_なぜ壊れないのかというと、vim-vsnip-integ は user_data を完全に乗っ取っていて vim-lsp 側に仕事をさせないようになっているからですね。。。行儀があまり良くない。_","ts":"1577094642.134000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"i6S4Q"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f94a3398-9eb5-41e5-926c-39f1907a9b35","type":"message","user":"U8R597E9H","text":"neosnippet とかとの連携は、壊れそうな気がするので追加の判定がいるかもしれない。そのへんがわかったら PR 上に記載します。","ts":"1577094676.134700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+Kg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"33dcfe10-e7a7-429f-9587-6e125a4052e9","type":"message","user":"U03C6TEAZ","text":"vim-lsp に依存したコードが書かれてるって事ですか？","ts":"1577094676.134800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nQxmy"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"aed57930-c493-4bd3-a8d0-3a42dae5a77c","type":"message","user":"U8R597E9H","text":"vim-lsp は「補完候補を作成するためのフック」を用意してくれていたので、そこで vim-lsp が対応していない user_data に置き換えています。\nvim-lsp は user_data に「vim-lsp/textEdit」などのキーが刺さっていることを期待していますが、それを消し去って、独自に処理しています。","ts":"1577094794.136200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0i1+B"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"54ba818f-9c7e-4968-aaaf-1c4b2f8ecdb0","type":"message","user":"U8R597E9H","text":"<https://github.com/hrsh7th/vim-vsnip-integ/blob/master/autoload/vsnip_integ/vim_lsp.vim>\nこれが vim-vsnip-integ の vim_lsp 向けの処理です。","ts":"1577094833.136500","edited":{"user":"U8R597E9H","ts":"1577094851.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lD5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c3c7a9f8-4e2b-45b5-9e0c-580231b8f26c","type":"message","user":"U03C6TEAZ","text":"なるほど、やはりそのキーを触ってるんですね。","ts":"1577094875.137100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"G4i"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0ecf3d52-df63-4123-94e8-e5756ccc9acb","type":"message","user":"U03C6TEAZ","text":"そこに今回 `vim-lsp/insertFormat` を入れる修正してます。","ts":"1577094915.137800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tV/H0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dbbad5e5-7d1d-4598-99f7-5aea20777a9f","type":"message","user":"U8R597E9H","text":"おそらく、mattn さんの追加コードを発動する時に `len(get(g:, 'lsp_snippets_expand_snippet', [])) == 0` で「スニペット展開がユーザ側で対応されているか」をチェックすれば影響はなくせそうな気がしました。\n_neosnippet の準備中_","ts":"1577095188.139500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Pu3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6fc7419b-d4f7-41c8-8705-457c9555b043","type":"message","user":"U8R597E9H","text":"_neosnippet と連携しても壊れなかった_","ts":"1577095473.139800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=WCeY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2613ba73-c30b-44a4-8a6c-b39aae50fbeb","type":"message","user":"U03C6TEAZ","text":"助かります","ts":"1577095510.140700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5kMm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"37be9f58-e181-4d96-95e2-efe56990feff","type":"message","user":"U03C6TEAZ","text":"vim-vsnip、候補選択中に ESC で元のが残るっぽいですね。","ts":"1577107064.141200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Jf8me"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cd4453aa-8a21-4a31-bd38-f35760f44431","type":"message","user":"U03C6TEAZ","ts":"1577107225.141300","files":[{"id":"FRPUM8KR7","created":1577107199,"timestamp":1577107199,"name":"screenshot.gif","title":"screenshot.gif","mimetype":"image/gif","image_exif_rotation":1,"filetype":"gif","pretty_type":"GIF","user":"U03C6TEAZ","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":183161,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FRPUM8KR7/screenshot.gif","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FRPUM8KR7/download/screenshot.gif","original_h":484,"original_w":636,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-FRPUM8KR7-c0a696fbd9/screenshot_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-FRPUM8KR7-c0a696fbd9/screenshot_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-FRPUM8KR7-c0a696fbd9/screenshot_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-FRPUM8KR7-c0a696fbd9/screenshot_360.png","thumb_360_gif":"https://files.slack.com/files-tmb/T03C4RC8V-FRPUM8KR7-c0a696fbd9/screenshot_360.gif","thumb_360_w":360,"thumb_360_h":274,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-FRPUM8KR7-c0a696fbd9/screenshot_480.png","thumb_480_w":480,"thumb_480_h":365,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U03C6TEAZ/FRPUM8KR7/screenshot.gif","permalink_public":"https://slack-files.com/T03C4RC8V-FRPUM8KR7-efaba7d711","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"deanimate_gif":"https://files.slack.com/files-tmb/T03C4RC8V-FRPUM8KR7-c0a696fbd9/screenshot_deanimate_gif.png","display_as_bot":false,"has_rich_preview":false,"thumb_480_gif":"https://files.slack.com/files-tmb/T03C4RC8V-FRPUM8KR7-c0a696fbd9/screenshot_480.gif","thumb_tiny":"AwAkADCgD6mlJXFNpKAHcUmfb9aSigBaKSigBaSnmKQHlGH4UhRh1Uj8KAG0U4Ix6KT+FL5b/wBxvyoAZRTxFITxGx/Cl8ib/nk//fJoAQyyHq7fnSF2PVifxptFADg7DoxH40vmP/fb86ZRQA8SyDpIw/Gl8+X/AJ6v/wB9Go6WgD//2Q==","username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"d6926d3f-1c49-4465-8a81-4806a2827254","type":"message","user":"U8R597E9H","text":"普通なら残らないんでしたっけ…なるべく副作用なくしたいので見直してみます！","ts":"1577109769.143600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hVq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7416ffa7-5da6-453d-a2cc-776f3c29ab43","type":"message","user":"UNJ2DANJC","text":"MSさんのPython Language Serverのvim-lsp-settingsインストーラ作ってvim-lspでおしゃべりするところまでは試しましたが。。。うまく動かない。。。どなたか試している方いませんかね。。。","ts":"1577109851.145000","edited":{"user":"UNJ2DANJC","ts":"1577109863.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"J9f"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f058c87e-44dd-4bfc-a33a-f80d89cea41f","type":"message","user":"U78A6ESHM","text":"vim-lsp-settings に移行しようと色々やってるけど gopls が動いてないな。`LspInstallServer` の後ってなんか設定とかいるんでしたっけ。","ts":"1577111606.146500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4msf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8047db89-5af8-4ba3-a824-31f6a30a1108","type":"message","user":"U78A6ESHM","text":"vim app.go とかで適当 `fmt.&lt;C-x&gt;&lt;C-o&gt;` で補完されると思ってたけどされない…。","ts":"1577111755.147400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"363"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3ba602ee-2284-42dd-af9d-084c045ac88b","type":"message","user":"UNJ2DANJC","text":"`:LspHover` とかが動くならおしゃべりはできているはず...","ts":"1577111868.148900","edited":{"user":"UNJ2DANJC","ts":"1577111883.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"63Ud"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fa33ccb8-80f0-4407-aca0-559f406a8bc2","type":"message","user":"U78A6ESHM","text":"`LspStatus` で gopls がでない…。","ts":"1577111965.149300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9zCL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"be87272d-05d6-43e5-b92c-b6543623b88f","type":"message","user":"U78A6ESHM","text":"`servers/gopls` に gopls のバイナリはあるなぁ","ts":"1577112024.149800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/r7/Q"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
