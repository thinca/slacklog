[{"client_msg_id":"3e25b288-f206-4ebd-85a4-c0971f1cf837","type":"message","user":"U03C6TEAZ","text":"LSP に関係するかツール類の導入に関連する事しか入れない予定ですね。今のところ LSP にはもう efm が扱えそうなインターフェースがほぼないので今後は今ある機能のブラッシュアップすね。","ts":"1582964241.360100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9rBOV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"07c2d195-b1d8-458c-98fa-8f09bca8727b","type":"message","user":"UAZ33BKV2","text":"なるほど、じゃあ大丈夫ですね...いや、CodeAction系でアクロバティックなことになってたらアレだなあ、とか思ったものでw","ts":"1582964290.360900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"spOe"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"024dbb89-adb4-4d3e-9cf8-73f2619eb917","type":"message","user":"U03C6TEAZ","text":"機能は関係ないですが落ち着いてきたら scoop か chocolaty に入れようかなと思ってます。","ts":"1582964729.362700","team":"T03C4RC8V","reactions":[{"name":"subara","count":3,"users":["UAZ33BKV2","UKHUVMBJR","U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QIkG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6c07ca07-8932-4fbd-9620-10a13274a03a","type":"message","user":"UEB0VGD7E","text":"vim-lspでrust-analyzerを動かしてみているんですが、LspCodeActionが動かないです。\nvim-lspのログを見たところ、workspace/executeCommandに対してunknown requestを返されている状態で、そもそもやり方が違う感じです。\nこれってvim-lspで動かそうと思うと専用拡張とか作るしかない感じですか？","ts":"1582985605.365200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"l1A"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"555c485e-052d-4bf4-8442-dcf9b1d83f6e","type":"message","user":"U03C6TEAZ","text":"そもそも codeAction の応答が何も返ってなくないですか？","ts":"1582986280.366300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"A0U"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"82132506-b865-4d15-89cd-d6d7d505cdf0","type":"message","user":"UEB0VGD7E","text":"あれ？そうですか？","ts":"1582986375.366600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+mHn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b5d5c7fe-c6f1-4dac-b5c2-2c8f6b51c20f","type":"message","user":"U8R597E9H","text":"`let file = …` なコードを書いて、「vim を立ち上げ直してそのファイルを開く」と「使ってない変数 file」という怒られが発生しました。","ts":"1582986430.367700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"M5if"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6cfe3847-003f-40e3-8ef7-94aaac1628ea","type":"message","user":"UEB0VGD7E","text":"```2020年02月29日 23時07分10秒:[\"---&gt;\",1,\"rust-analyzer\",{\"method\":\"workspace/executeCommand\",\"on_notification\":\"---funcref---\",\"sync\":false,\"params\":{\"arguments\":[{\"label\":\"Extract into variable\",\"cursorPosition\":{\"textDocument\":{\"uri\":\"file:///work/wasm-test/src/lib.rs\"},\"position\":{\"character\":12,\"line\":339}},\"workspaceEdit\":{\"documentChanges\":[{\"edits\":[{\"range\":{\"end\":{\"character\":8,\"line\":339},\"start\":{\"character\":8,\"line\":339}},\"newText\":\"let var_name = test_button.dyn_into::&lt;web_sys::HtmlButtonElement&gt;();\\n        \"},{\"range\":{\"end\":{\"character\":64,\"line\":340},\"start\":{\"character\":12,\"line\":340}},\"newText\":\"var_name\"}],\"textDocument\":{\"uri\":\"file:///work/wasm-test/src/lib.rs\",\"version\":null}}]}}],\"title\":\"Extract into variable\",\"command\":\"rust-analyzer.applySourceChange\"}}]\n2020年02月29日 23時07分10秒:[\"&lt;---\",1,\"rust-analyzer\",{\"response\":{\"id\":28,\"jsonrpc\":\"2.0\",\"error\":{\"code\":-32601,\"message\":\"unknown request\"}},\"request\":{\"id\":28,\"jsonrpc\":\"2.0\",\"method\":\"workspace/executeCommand\",\"params\":{\"arguments\":[{\"label\":\"Extract into variable\",\"cursorPosition\":{\"textDocument\":{\"uri\":\"file:///work/wasm-test/src/lib.rs\"},\"position\":{\"character\":12,\"line\":339}},\"workspaceEdit\":{\"documentChanges\":[{\"edits\":[{\"range\":{\"end\":{\"character\":8,\"line\":339},\"start\":{\"character\":8,\"line\":339}},\"newText\":\"let var_name = test_button.dyn_into::&lt;web_sys::HtmlButtonElement&gt;();\\n        \"},{\"range\":{\"end\":{\"character\":64,\"line\":340},\"start\":{\"character\":12,\"line\":340}},\"newText\":\"var_name\"}],\"textDocument\":{\"uri\":\"file:///work/wasm-test/src/lib.rs\",\"version\":null}}]}}],\"title\":\"Extract into variable\",\"command\":\"rust-analyzer.applySourceChange\"}}}]\n2020年02月29日 23時07分10秒:[\"s:on_stdout client request on_notification() error\",\"Vim(call):E731: 辞書型を文字列として扱っています\",\"function &lt;SNR&gt;146_out_cb[2]..&lt;SNR&gt;145_on_stdout[79]..&lt;lambda&gt;270[1]..&lt;SNR&gt;155_handle_executeCommand, 行 2\"]\n2020年02月29日 23時07分10秒:[\"&lt;---(stderr)\",1,\"rust-analyzer\",[\"[ERROR rust_analyzer::main_loop] unknown request: Request { id: RequestId(U64(28)), method: \\\"workspace/executeCommand\\\", params: Object({\\\"arguments\\\": Array([Object({\\\"cursorPosition\\\": Object({\\\"position\\\": Object({\\\"character\\\": Number(12), \\\"line\\\": Number(339)}), \\\"textDocument\\\": Object({\\\"uri\\\": String(\\\"file:///work/wasm-test/src/lib.rs\\\")})}), \\\"label\\\": String(\\\"Extract into variable\\\"), \\\"workspaceEdit\\\": Object({\\\"documentChanges\\\": Array([Object({\\\"edits\\\": Array([Object({\\\"newText\\\": String(\\\"let var_name = test_button.dyn_into::&lt;web_sys::HtmlButtonElement&gt;();\\\\n        \\\"), \\\"range\\\": Object({\\\"end\\\": Object({\\\"character\\\": Number(8), \\\"line\\\": Number(339)}), \\\"start\\\": Object({\\\"character\\\": Number(8), \\\"line\\\": Number(339)})})}), Object({\\\"newText\\\": String(\\\"var_name\\\"), \\\"range\\\": Object({\\\"end\\\": Object({\\\"character\\\": Number(64), \\\"line\\\": Number(340)}), \\\"start\\\": Object({\\\"character\\\": Number(12), \\\"line\\\": Number(340)})})})]), \\\"textDocument\\\": Object({\\\"uri\\\": String(\\\"file:///work/wasm-test/src/lib.rs\\\"), \\\"version\\\": Null})})])})})]), \\\"command\\\": String(\\\"rust-analyzer.applySourceChange\\\"), \\\"title\\\": String(\\\"Extract into variable\\\")}) }\",\"\"]] ```","ts":"1582986442.368100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+vF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"434f2a9b-2bfc-46d3-8629-cefc2553f332","type":"message","user":"UEB0VGD7E","text":"でかくてすみません。自分の環境だとこんな感じになっています。","ts":"1582986476.369300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VdyM"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9b7a901d-a931-4aaf-bb20-df27cb836f19","type":"message","user":"U8R597E9H","text":"その行の上で `LspCodeAction` すると 2 種類返ってきまして、\n- 1. consider prefixing with an underscore: ‘_file’\n- 2. Insert explicit type ‘File’\nこんな感じになっていて、1 はちゃんと動いたのですが、2 はおっしゃるとおり、なんかおかしな動きをしていますね。。。","ts":"1582986516.370000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xUVvi"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"49110918-6050-4785-ba55-46c41904987e","type":"message","user":"U8R597E9H","text":"_そもそもファイルをいじっても diagnostics が全く更新されない。。。自分の環境がまた何かおかしいのかなあ。。。_","ts":"1582986588.370600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Xv9G"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d6e56f6d-2aef-4db5-9d1c-fcb0d6f48e57","type":"message","user":"UEB0VGD7E","text":"```1 - Extract into variable\n2 - Inline variable```\n自分の場合こんな感じで返っていて、1,2両方とも同じ動きに見えています。","ts":"1582986666.371800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vFcI"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"21e1718e-bd09-42bf-a83e-6cb77cddf336","type":"message","user":"U03C6TEAZ","text":"↑のログエラー出てません？","ts":"1582986759.372700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hnrvy"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0539ac50-ff5d-4db0-8945-405a01f15efb","type":"message","user":"U8R597E9H","text":"_これ、以前 mattn さんが倒そうとしていた <http://eclipse.jdt.ls|eclipse.jdt.ls> と似ている気がする。。。なぜだかわからないが、CodeAction のアイテムの Command の引数に編集操作が格納されてる。_","ts":"1582986787.373600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vx7Q"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"543c3ff5-1ad5-4c75-8b6f-fb300301c8df","type":"message","user":"U03C6TEAZ","text":"あ、出てきた。ログ確認します。","ts":"1582986900.375700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"J+Z4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dc239afa-c467-4e61-b9b7-0337a04d30ef","type":"message","user":"UEB0VGD7E","text":"それも気になっているんですが、恐らく根本的には関係ないのかなと思っています。\n今日最初に試した時は　vim-lspのバージョンが古かったんですが、現象自体は同じ感じでした。\nただ、古いバージョンではE731ってやつは出ていなかった気がします。\n新しくしたらE731だけ増えたような感じです。\nただ、古いバージョンのログを消してしまった上、どのバージョンを使っていたかもよくわからず","ts":"1582986910.375900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1Sl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e97a45f9-ff58-4088-9555-4a6977472bd3","type":"message","user":"UEB0VGD7E","text":"ありがとうございます","ts":"1582986977.376200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"L65p"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"abe1aeda-9809-4541-a5c6-47806cf516f2","type":"message","user":"U03C6TEAZ","text":"code action の応答結果 <https://gist.github.com/mattn/962cd05555c6f4fb568815c752d214d0>","ts":"1582987032.376400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/xsgk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"74bbd16a-587a-4085-bc44-f01534c02cfb","type":"message","user":"U03C6TEAZ","text":"result の最初は command がない。","ts":"1582987106.376900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"akE8d"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cf84f515-8e16-4c9c-a6a8-e1de82d86799","type":"message","user":"U03C6TEAZ","text":"codeAction の応答は command か codeAction しかだめ。","ts":"1582987211.377300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4dfSz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fd4b1ee5-a043-4a9c-ab25-e310a4ea0f53","type":"message","user":"U03C6TEAZ","ts":"1582987216.377400","files":[{"id":"FUP1G9MFW","created":1582987213,"timestamp":1582987213,"name":"image.png","title":"image.png","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"U03C6TEAZ","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":7693,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FUP1G9MFW/image.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FUP1G9MFW/download/image.png","original_h":150,"original_w":683,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-FUP1G9MFW-6798943ab4/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-FUP1G9MFW-6798943ab4/image_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-FUP1G9MFW-6798943ab4/image_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-FUP1G9MFW-6798943ab4/image_360.png","thumb_360_gif":"","thumb_360_w":360,"thumb_360_h":79,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-FUP1G9MFW-6798943ab4/image_480.png","thumb_480_w":480,"thumb_480_h":105,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U03C6TEAZ/FUP1G9MFW/image.png","permalink_public":"https://slack-files.com/T03C4RC8V-FUP1G9MFW-9884749d0c","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"thumb_tiny":"AwAKADDSP40Z9jQetFABn2oz7UUUAGfajPsaKKAP/9k=","username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"eaa911cc-4447-4fff-ba28-8f1c9bf30d2b","type":"message","user":"U03C6TEAZ","text":"なので本来なら rust-analyzer のバグ。","ts":"1582987235.377900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7o+8g"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6a2f4b44-7014-4d9f-91c3-1c0f68819200","type":"message","user":"U03C6TEAZ","text":"でここに textEdit の様なのをいれてくる LS がいて、その一つが <http://eclipse.jdt.ls|eclipse.jdt.ls> なんですが、rust-analyzer もそれかーという感じ。","ts":"1582987309.378700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZMInB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"02d180df-b62f-434b-8c78-2e5f0940d10e","type":"message","user":"U03C6TEAZ","text":"1. クライアントが codeAction を投げる\n2. サーバが command 一覧もしくは codeAction 一覧を返す\n3. クライアントが何れかを選んで executeCommand を実行\n4. サーバが textEdit を返す\nというのが正しい仕様。","ts":"1582987371.380000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9C4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"17129629-08c6-44d4-9b98-9a452214ef2c","type":"message","user":"UEB0VGD7E","text":"あ、なるほど。本来あっちゃいけないところに補完的なのを入れてきてるって話ですか。","ts":"1582987478.381100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7l0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a2472626-5ceb-4805-8c44-81ac1ce13c52","type":"message","user":"U03C6TEAZ","text":"あ、僕が間違ってるな。","ts":"1582987479.381200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UR6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7091f365-d651-4246-aa81-98aab97c4e19","type":"message","user":"U03C6TEAZ","text":"すいません。これ codeAction すね。","ts":"1582987503.381600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ekG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0b726ef5-573f-4d0b-a8d6-661a6ae0e443","type":"message","user":"U8R597E9H","text":"rust-analyzer 謎ですね。。。\n<https://github.com/rust-analyzer/rust-analyzer/search?q=rust-analyzer.applySourceChange&amp;unscoped_q=rust-analyzer.applySourceChange>\n自分で送り込んでいるものをハンドリングする処理が見当たらない。","ts":"1582987523.382400","attachments":[{"fallback":"GitHub: rust-analyzer/rust-analyzer","id":1,"title":"rust-analyzer/rust-analyzer","title_link":"https://github.com/rust-analyzer/rust-analyzer/search?q=rust-analyzer.applySourceChange&unscoped_q=rust-analyzer.applySourceChange","text":"An experimental Rust compiler front-end for IDEs. Contribute to rust-analyzer/rust-analyzer development by creating an account on GitHub.","thumb_url":"https://avatars3.githubusercontent.com/u/43985197?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/rust-analyzer/rust-analyzer/search?q=rust-analyzer.applySourceChange&unscoped_q=rust-analyzer.applySourceChange","original_url":"https://github.com/rust-analyzer/rust-analyzer/search?q=rust-analyzer.applySourceChange&amp;unscoped_q=rust-analyzer.applySourceChange"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GgCDP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"61fe537d-c245-49b8-9782-40b41b0882f4","type":"message","user":"U8R597E9H","text":"CodeAction の解釈がやはりおかしくてハンドリング足りないってことなのかな。。。","ts":"1582987550.382900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"emDl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fc6a44a0-6fcd-4bc1-ac88-35c149ce1c2c","type":"message","user":"U03C6TEAZ","text":"edit 付きの codeAction なんですよねこれ。","ts":"1582987573.383200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rRkT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7a594f83-2eee-4d26-86fa-699d952b503f","type":"message","user":"U03C6TEAZ","text":"なので即実行するやつ。","ts":"1582987583.383500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JRVQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1b0f53f2-8507-4877-9578-c48801999414","type":"message","user":"U03C6TEAZ","text":"```\t/**\n\t * The workspace edit this code action performs.\n\t */\n\tedit?: WorkspaceEdit;\n\n\t/**\n\t * A command this code action executes. If a code action\n\t * provides an edit and a command, first the edit is\n\t * executed and then the command.\n\t */\n\tcommand?: Command;```","ts":"1582987607.384200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TXOD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b7b03915-d9e1-43bb-8463-157cf0c65512","type":"message","user":"U03C6TEAZ","text":"あれ？ vim-lsp も対応してるな。","ts":"1582987691.384900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XsLkr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6423afa7-6ace-4cb9-8cb0-7991545d4d07","type":"message","user":"U8R597E9H","text":"`[{'range': {'end': {'character': 12, 'line': 3}, 'start': {'character': 12, 'line': 3}}, 'newText': ': File'}], 'textDocument': {'uri': 'file:///Users/.../Develop/LocalVimPlugins/vim-lamp/misc/rust/src/main.rs', 'version': v:null}}]}}], 'title': 'Insert explicit type ''File''', 'command': 'rust-analyzer.applySourceChange'}}]`","ts":"1582987693.385000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fNi6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"406a6d57-cc3c-48e4-8a3f-845d865d014f","type":"message","user":"U03C6TEAZ","text":"↑のコメントすね。","ts":"1582987732.385400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3s6zY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"04e5bd73-e301-4cee-9700-879f211af846","type":"message","user":"U03C6TEAZ","text":"edit 適用してから command 投げろと。","ts":"1582987772.385800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KT=4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ea0d4dfa-1f90-4aa5-8178-304d374d4382","type":"message","user":"U03C6TEAZ","text":"`1 - consider prefixing with an underscore: '_file' ` の方は動いてますね。","ts":"1582988008.386700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"s8w5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"97f00a8d-9a71-43aa-a368-f6019d9df9a1","type":"message","user":"U03C6TEAZ","text":"その後ほんとは command 投げないといけないけど。","ts":"1582988030.387500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hYJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"34e9eea4-00f9-4d58-abf6-13ce84158db8","type":"message","user":"U8R597E9H","text":"`Insert explici type 'File'` を選ぶと、\n\n```{\n\t\"title\": \"Insert explicit type 'File'\",\n\t\"command\": {\n\t\t\"arguments\": [{\n\t\t\t\"label\": \"Insert explicit type 'File'\",\n\t\t\t\"cursorPosition\": null,\n\t\t\t\"workspaceEdit\": {\n\t\t\t\t\"documentChanges\": [{\n\t\t\t\t\t\"edits\": [{\n\t\t\t\t\t\t\"range\": {\n\t\t\t\t\t\t\t\"end\": {\n\t\t\t\t\t\t\t\t\"character\": 12,\n\t\t\t\t\t\t\t\t\"line\": 3\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"start\": {\n\t\t\t\t\t\t\t\t\"character\": 12,\n\t\t\t\t\t\t\t\t\"line\": 3\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"newText\": \": File\"\n\t\t\t\t\t}],\n\t\t\t\t\t\"textDocument\": {\n\t\t\t\t\t\t\"uri\": \"file:///Users/.../misc/rust/src/main.rs\",\n\t\t\t\t\t\t\"version\": null\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t}\n\t\t}],\n\t\t\"title\": \"Insert explicit type 'File'\",\n\t\t\"command\": \"rust-analyzer.applySourceChange\"\n\t}\n}```\nこれが返ってきてます。\nこれ、LSP のスペックでいうと「ただのコマンドを表す CodeAction」なので、こっちがこけるのはちょっと解せないです。。。","ts":"1582988059.387700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3ii=Z"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f03e045e-35e5-4b01-a94a-eb47774932ac","type":"message","user":"U8R597E9H","text":"たしかに、上の例（consider prefixing with an …) のほうは実装側にも不備ありそうですね。\nedit 且つ、command なケースが漏れているのかもしれない。","ts":"1582988093.388500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HE8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e00f146e-4a94-4925-ba67-eb2f5a8d4f5a","type":"message","user":"U03C6TEAZ","text":"クライアントにコマンド投げてくるやつだw","ts":"1582988103.388800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Oz+k"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d4a91188-b57e-49ee-9742-90b9b9b578b3","type":"message","user":"U8R597E9H","text":"<http://eclipse.jdt.ls|eclipse.jdt.ls> といい、なにか「これが正しい」とどっかに書いてあるんですかねｗ","ts":"1582988155.389300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"015"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"51e9ec59-8f09-40b2-a20f-27d6d19ea1e7","type":"message","user":"U8R597E9H","text":"とりあえず、vim-lsp の実装にも改善余地があることがわかったのはよかった。","ts":"1582988181.389800","team":"T03C4RC8V","reactions":[{"name":"tiken","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yb6t"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0b889baf-7b95-402c-a86d-46300503fefe","type":"message","user":"U03C6TEAZ","text":"```diff --git a/autoload/lsp/ui/vim/code_action.vim b/autoload/lsp/ui/vim/code_action.vim\nindex 4a23003..f7e02ee 100644\n--- a/autoload/lsp/ui/vim/code_action.vim\n+++ b/autoload/lsp/ui/vim/code_action.vim\n@@ -95,9 +95,10 @@ function! s:handle_one_code_action(server_name, sync, command_or_code_action) ab\n     \" has WorkspaceEdit.\n     if has_key(a:command_or_code_action, 'edit')\n         call lsp#utils#workspace_edit#apply_workspace_edit(a:command_or_code_action['edit'])\n+    endif\n \n     \" Command.\n-    elseif has_key(a:command_or_code_action, 'command') &amp;&amp; type(a:command_or_code_action['command']) == type('')\n+    if has_key(a:command_or_code_action, 'command') &amp;&amp; type(a:command_or_code_action['command']) == type('')\n         call lsp#send_request(a:server_name, {\n                     \\   'method': 'workspace/executeCommand',\n                     \\   'params': a:command_or_code_action,```","ts":"1582988250.390200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YzATM"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"26d29b63-a00a-4e78-a3a4-6a5fcc97b496","type":"message","user":"U03C6TEAZ","text":"1個目はこれでいけそう。","ts":"1582988262.390700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Xcz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c90ce6f5-0681-4913-920e-0505efc629b6","type":"message","user":"U8R597E9H","text":"そう思います。全く同じ修正手元で試してみてました。 _挙動に何も変化がない気はするが、正しくはなったはず。。。_","ts":"1582988350.391300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zbWGW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"36584cd7-7f49-41f6-b793-0101d09bd89a","type":"message","user":"U03C6TEAZ","text":"はい。僕も同じく。","ts":"1582988376.392000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LkTt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"812d8854-0b0d-423b-b999-bab66421a43b","type":"message","user":"UAZ33BKV2","text":"<https://github.com/tsuyoshicho/vim-efm-langserver-settings>\nhelpの翻訳からnvcheckのサポートとhelpタイプでのvaleのチェックなどを増やしました","ts":"1582949410.351800","attachments":[{"fallback":"GitHub: tsuyoshicho/vim-efm-langserver-settings","id":1,"title":"tsuyoshicho/vim-efm-langserver-settings","title_link":"https://github.com/tsuyoshicho/vim-efm-langserver-settings","text":"trial vim lsp client - efm-langserver link and configure settings - tsuyoshicho/vim-efm-langserver-settings","thumb_url":"https://avatars2.githubusercontent.com/u/96727?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/tsuyoshicho/vim-efm-langserver-settings","original_url":"https://github.com/tsuyoshicho/vim-efm-langserver-settings"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"s6W="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8bbde97c-af38-4a6a-a9e9-7d64ce43c22b","type":"message","user":"UAZ33BKV2","text":"プロジェクトルートにdict.ymlがあることをちゃんと検出できてるなら、普通に使いやすそう","ts":"1582949663.352500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KKJn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cbd4ff38-bfe1-4b7b-a8e3-0443ebd7e8be","type":"message","user":"U03C6TEAZ","text":"<@U7H4TJEG0> <https://github.com/prabirshrestha/vim-lsp/issues/733>","ts":"1582957723.352800","attachments":[{"fallback":"GitHub: Missing autocommand when diagnostics are updated · Issue #733 · prabirshrestha/vim-lsp","id":1,"title":"Missing autocommand when diagnostics are updated · Issue #733 · prabirshrestha/vim-lsp","title_link":"https://github.com/prabirshrestha/vim-lsp/issues/733","text":"Hi, I tried using lsp#get_buffer_diagnostics_counts() to update my statusline (via the lightline plugin). Unfortunately, I can&amp;#39;t find a way to know when diagnostic counts are updated in order t...","thumb_url":"https://avatars1.githubusercontent.com/u/287744?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/prabirshrestha/vim-lsp/issues/733","original_url":"https://github.com/prabirshrestha/vim-lsp/issues/733"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ezn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"70e46a39-2333-47d2-a140-fe4eb12a1fbf","type":"message","user":"U03C6TEAZ","text":"いい方法があるのか僕には分からない。","ts":"1582957763.353200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5q5bt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"36b4c7c6-c36b-4c39-a367-bfdf3fcc3bfb","type":"message","user":"UAZ33BKV2","text":"efm-langserver便利だけど、太るのもよくないので難しい....","ts":"1582958469.353700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4iR3J"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c9f8adf0-a74b-4ab8-88a4-a400c7e4a691","type":"message","user":"U03C6TEAZ","text":"efm、コードを何も持ってないので起動中のメモリかなり少ないんですよね。","ts":"1582960418.355500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Zjx6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"79c35ae7-7fa1-495c-8f23-79d9747650a8","type":"message","user":"UAZ33BKV2","text":"あー、どっちかというと、機能が複雑化するかもを気にしたんです...\nしかし軽いのはいいですよね","ts":"1582960573.356100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Viu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
