[{"type":"message","user":"UM58ZL19C","text":"<@UM58ZL19C> has joined the channel","ts":"1594981033.269700","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"5cd0a390-8288-495f-8700-23cdecab3321","type":"message","user":"UNJ2DANJC","text":"オッ <https://github.com/tomv564/lsp-tsserver|https://github.com/tomv564/lsp-tsserver>\nうーん....","ts":"1594995311.270500","attachments":[{"fallback":"GitHub: tomv564/lsp-tsserver","id":1,"title":"tomv564/lsp-tsserver","title_link":"https://github.com/tomv564/lsp-tsserver","text":"Contribute to tomv564/lsp-tsserver development by creating an account on GitHub.","thumb_url":"https://avatars2.githubusercontent.com/u/4395832?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/tomv564/lsp-tsserver","original_url":"https://github.com/tomv564/lsp-tsserver"}],"edited":{"user":"UNJ2DANJC","ts":"1594995338.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Cn2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"05381838-d1c0-4d79-a663-4bb3db8295e2","type":"message","user":"U78A6ESHM","text":"あぁごめんなさい。pydocstyle だけか。\n&gt; To enable pydocstyle for linting docstrings add the following setting in your LSP configuration: ```\n`\"pyls.plugins.pydocstyle.enabled\": true``","ts":"1594911720.219200","edited":{"user":"U78A6ESHM","ts":"1594911753.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hvC2R"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d4e122eb-38e0-4960-b13a-51c294acfbca","type":"message","user":"US72PNNLQ","text":"そうですね，pydocstyle は disabled by default と書かれています．","ts":"1594911757.220200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8fP08"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3d2316d1-d1e7-4ff7-b573-80a359c464ac","type":"message","user":"US72PNNLQ","text":"black や mypy を使いたい人は workspace_config で設定をすることになるので，Rope, Pyflakes, McCabe, pycodestyle, pydocstyle, autopep8, YAPF の一式は一緒に入れてしまって問題ないような気もします．pydocstyle は省いてもいいかも．","ts":"1594911907.221500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wbkWB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"116f4fca-8e78-4c4e-845a-c7c61fe752bf","type":"message","user":"U78A6ESHM","text":"個人的には使う人がやっぱり自分で選択して欲しいです。例えば自分は自作の flake8 プラグインを使ってるので、使わないもの入れられるのは気持ち悪いです。\nもしくはミニマムに入る or 全部入りを入れるを選択できるようにして欲しい。","ts":"1594912043.222800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hlNkt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e029fb6e-af54-433b-8344-3a87c4d64d08","type":"message","user":"U78A6ESHM","text":"あと少なくとも PR にある isort は外して欲しいです。","ts":"1594912068.223300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LX/36"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3f83e1da-6318-4e85-a6f1-cb85c5a66ffe","type":"message","user":"US72PNNLQ","text":"pyls-plain と pyls-all のふたつの LS を準備するのはどうでしょうか？　それなら `:LspInstallServer pyls-plain` のように選択できるようになります．","ts":"1594912168.225100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8CqH2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"03c4bef3-b4b4-4dc3-af2e-0cb8936fad15","type":"message","user":"U78A6ESHM","text":"良さそう:thumbsup:","ts":"1594912200.225900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"btLm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b42d62e8-aa97-4b14-8a6e-dede2170368d","type":"message","user":"US72PNNLQ","text":"どちらがデフォルトであるべきかについては，私は\n&gt; vim-lsp-settings 自体がコマンド一発で面倒な設定なしに新しい LS を導入できますよってものなので， LSP に一般的に求められる機能一式がデフォルトで入ってくれたら嬉しいなと思います．\nこの理由から pyls-all がデフォルトであってほしいなと思います．どうでしょうか．","ts":"1594912221.226400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oOil"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6fbf2b17-701a-4f72-9386-695e1575aea2","type":"message","user":"U78A6ESHM","text":"異論ないです。","ts":"1594912236.226600","edited":{"user":"U78A6ESHM","ts":"1594912337.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cJ7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3e208eff-0d21-484a-8ce1-e65d83bf84ac","type":"message","user":"US72PNNLQ","text":"pyls-all の方について，3rd party plugins の black や mypy, isort は入れないほうがいいですかね？　ここについてどうするのがいいのかちょっとよく分かりません．ご意見ありましたらお聞きしたいです．","ts":"1594912352.228300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ER0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d4a54d99-fd5a-4080-aeaa-7f82a5fe51e8","type":"message","user":"U78A6ESHM","text":"個人的にはデフォルトだけでいいと思ってます。おっしゃるように workspace_config 書かないといけないし。","ts":"1594912423.229000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2DZ8W"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"443f2e5b-9869-4ec7-bf19-c491c1c9e9c5","type":"message","user":"U78A6ESHM","text":"pyls-black 使いたい。pyls-plain 入れて、pyls-black 入れて自分で workspace_config 書いてくれかと。black とか mypy 選ぶ人はガリガリ Python 書く人でしょうし。","ts":"1594912506.230100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Y+Q"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1b939867-9126-4160-8e4e-b5ea736424f6","type":"message","user":"US72PNNLQ","text":"なるほど確かに．ありがとうございます．\npyls-plain 新しく作って pyls を削除すると braking change になってしまうので，現状の pyls はそのままに，新しく pyls-all を導入してそっちをデフォルトにするように PR 書きなおしてみます．","ts":"1594912609.231500","edited":{"user":"US72PNNLQ","ts":"1594912641.000000"},"team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U771W8C56"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ejVb"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a9fc1b1c-e0ca-4fce-9de5-fc0b6cd69dbb","type":"message","user":"U78A6ESHM","text":"とても良いと思います！ :thumbsup:","ts":"1594912673.232000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ytFSj"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"20271612-fc19-4e13-9121-1ea303fde0c1","type":"message","user":"US72PNNLQ","text":"pyls-all を追加しました！\n<https://github.com/mattn/vim-lsp-settings/pull/278>","ts":"1594917456.232700","attachments":[{"fallback":"GitHub: Install pyls together with its dependencies by aiotter · Pull Request #278 · mattn/vim-lsp-settings","id":1,"title":"Install pyls together with its dependencies by aiotter · Pull Request #278 · mattn/vim-lsp-settings","title_link":"https://github.com/mattn/vim-lsp-settings/pull/278","text":"In the current settings, vim-lsp-settings only installs pyls. The function of pyls is limited unless its dependencies: Rope, Pyflakes, McCabe, pycodestyle, pydocstyle, autopep8, YAPF. (See Installa...","thumb_url":"https://avatars1.githubusercontent.com/u/10111?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/mattn/vim-lsp-settings/pull/278","original_url":"https://github.com/mattn/vim-lsp-settings/pull/278"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Fpc7H"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"487c4585-c4f5-4b7a-99a3-3505c5af9f1f","type":"message","user":"U03C6TEAZ","text":"昨日寝ながら考えてて別名にするのがいいんじゃないですかね？って思いついて発言しようと思ったら、既に話がそこまで進んでた。","ts":"1594946476.233600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"h8ae"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"90f3237b-4230-440b-80eb-500b0afdd410","type":"message","user":"U03C6TEAZ","text":"all がいいか full がいいか、どちらでしょうかね。","ts":"1594946509.233900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wSqh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d83c6d57-2c8e-4dbb-b9f7-b31dcd058b0e","type":"message","user":"U03C6TEAZ","text":"名前だけの話。","ts":"1594946518.234200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2KoC"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"EA65C819-2D13-46F5-8819-227C710C196E","type":"message","user":"UDDCM376D","text":"allが分かりやすそう","ts":"1594946568.235100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Zqy"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6FF114DD-0BA7-4C71-8973-6A5177FD6BEA","type":"message","user":"U776661HA","text":"allでもfullでもないのでessentialとかじゃない？とかんじました","ts":"1594946569.235200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=fcZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9ADA99A9-2D01-4EAF-90EF-E987A7420803","type":"message","user":"U776661HA","text":"全部、じゃないよねと","ts":"1594946579.235500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ro9BV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"71154034-d7ca-44ab-a0bf-18efe9b646d4","type":"message","user":"UAZ33BKV2","text":"MSのソフトの無料パッケージ名風味に思えてしまうのはなぜだろうw &gt; essential","ts":"1594946638.236300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"p/yn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4be3c6f8-5d83-4589-a96a-547db5ec7511","type":"message","user":"U03C6TEAZ","text":"apt install build-essential","ts":"1594946661.236900","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":2,"users":["U9S4G0LJW","UEBF2KQTD"]},{"name":"sorena","count":2,"users":["U776661HA","U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ozpMA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"A34A6CDC-5491-4560-9ADA-9890766CFBBF","type":"message","user":"U776661HA","text":"どちらかというとUbuntuの","ts":"1594946665.237100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wQa"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"D04C16D5-5E13-412E-AC0C-9B68BE4EAD9B","type":"message","user":"U776661HA","text":"そそ、それ","ts":"1594946667.237300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TXp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"abbafa61-a0e7-4fb8-822f-aef86c6df4c0","type":"message","user":"US72PNNLQ","text":"pip で install するときの名前が `python-language-server[all]` なんですよね．それでとりあえず all にしてます．\n<https://github.com/palantir/python-language-server/blob/78dee3d03fd6027804588fd204df06b2ac57d7d3/setup.py#L49>","ts":"1594947235.237700","edited":{"user":"US72PNNLQ","ts":"1594947627.000000"},"team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["U776661HA"]},{"name":"yosasou","count":1,"users":["U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yZgL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a56aa1a2-bdd1-4ee1-8c72-18a6b557d14a","type":"message","user":"US72PNNLQ","text":"すみません，vim-lsp-settings についてひとつ質問なのですが，下記のように .vimrc に書いても zsh で bash-language-server が使えません．\n```let g:lsp_settings = {\n\\   'bash-language-server': {\n\\     'allowlist': ['sh', 'zsh']\n\\   },\n\\}```\nこのように直接 lsp#register_server すると使えます:\n```au User lsp_setup call lsp#register_server({\n\\ 'name': 'bash-language-server',\n\\ 'cmd': {server_info-&gt;[&amp;shell, &amp;shellcmdflag, expand('~/.cache/vim-lsp-settings/servers/bash-language-server/bash-language-server start')]},\n\\ 'allowlist': ['sh', 'zsh']\n\\ })```\nこれは私がなにか書き方を間違えていたりしますか？","ts":"1594950055.241500","edited":{"user":"US72PNNLQ","ts":"1594950111.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MtMXH"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e65bfd52-3b56-423a-9d3f-1128de342d78","type":"message","user":"UAZ33BKV2","text":"大丈夫そうに見えますが...","ts":"1594950240.241900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xWhok"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e2d25b58-e7a7-495e-aad0-7a6ec621c90a","type":"message","user":"UAZ33BKV2","text":"ただ、vim-lsp-settingsの `au User lsp_setup call lsp#register_server` の呼び出しされる前に設定が完了している必要はあるので、vim hoge.zsh で間に合わない所で設定してなければ、という注は付く気がしますが","ts":"1594950363.243300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ehBR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0abd025f-d180-4ec3-95fa-d16af4ba0f56","type":"message","user":"UAZ33BKV2","text":"プラグインがsourceされる前に設定してあれば大丈夫のはず","ts":"1594950385.243700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vAm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f4caecff-03b1-46eb-8659-f2e21fd08a7d","type":"message","user":"U9S4G0LJW","text":"そもそもallowlistなんて書く必要あったっけ","ts":"1594950424.244000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hWTZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"85a3f710-f240-4734-b400-ce16eda80826","type":"message","user":"UAZ33BKV2","text":"zshで動いてほしいみたいだから","ts":"1594950507.245000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ElSj"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e9bfa931-aec1-4578-b3c9-8b6d5df4ee0b","type":"message","user":"U9S4G0LJW","text":":rikai:","ts":"1594950533.245600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Q9=2K"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e1f40a7a-46ec-4083-aa26-9751b1734ed7","type":"message","user":"US72PNNLQ","text":"うーん，.vimrc の最上部で設定しても動かないですね……","ts":"1594950627.246100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"usFv"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a4b995d5-24d9-4bc8-8d1b-7c587f45c4dd","type":"message","user":"U7TMPGWJ0","text":"あっ","ts":"1594951253.246400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZDwpZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"985a8840-00df-4ea6-92f0-3e497dee1417","type":"message","user":"U7TMPGWJ0","text":"動かないかもですね。vim-lsp-settingsでzshファイル","ts":"1594951317.246800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"L1Zf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"735e2dbd-64a5-4381-a76f-aab696a3b12d","type":"message","user":"U7TMPGWJ0","text":"vim-lsp-settings/settings.json にこれをマージするPRすれば大丈夫かもかな\n```  \"zsh\": [\n    {\n      \"command\": \"bash-language-server\",\n      \"config\": {\n        \"refresh_pattern\": \"\\\\([a-zA-Z0-9_-]\\\\+\\\\|\\\\k\\\\+\\\\)$\"\n      },\n      \"requires\": [\n        \"npm\"\n      ]\n    }\n  ],```","ts":"1594951375.247000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QR4jF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2deea73f-7ce5-4a3a-a261-7c7da7ebd38a","type":"message","user":"U7TMPGWJ0","text":"その上で allowlist を zsh 追加で上書きするその上のオプション書いてってところか。それ自体も本体の settings/bash-language-server.vim 自体の allowlist 書き換えPRするか","ts":"1594951616.247500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6PAc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d1d9990b-5309-4fea-9048-043c07fa022d","type":"message","user":"U03C6TEAZ","text":"なんかそこ設計がイマイチな感じがありますねぇ。なんで ft をキーにしてしまったのか。","ts":"1594951724.248100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"L79I"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"01647bd5-c62f-4e3f-93c0-19d446cf1552","type":"message","user":"U03C6TEAZ","text":"ft に対して LS が複数ある状況をなんとかしたかったんだろうけど。","ts":"1594951758.248600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lDncF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1ce3cfa8-e83c-466b-956a-092e0c1602eb","type":"message","user":"U7TMPGWJ0","text":"bash-language-server で zsh が正式にサポートされているかはちょっとあやしいですが。 <https://github.com/bash-lsp/bash-language-server/issues/252>","ts":"1594951826.249200","thread_ts":"1594951826.249200","attachments":[{"fallback":"GitHub: Handle zsh syntax · Issue #252 · bash-lsp/bash-language-server","id":1,"title":"Handle zsh syntax · Issue #252 · bash-lsp/bash-language-server","title_link":"https://github.com/bash-lsp/bash-language-server/issues/252","text":"I have a bunch of scripts (not least my dotfiles) where I have to deal with both bash and zsh. However whenever I add some zsh syntax, for example [[ -n &amp;quot;${foo[(r)b]}&amp;quot; ]] &amp;&amp; echo ...","thumb_url":"https://avatars3.githubusercontent.com/u/61803527?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":159,"thumb_height":159,"from_url":"https://github.com/bash-lsp/bash-language-server/issues/252","original_url":"https://github.com/bash-lsp/bash-language-server/issues/252"}],"reply_count":1,"replies":[{"user":"UBNPMJJGM","ts":"1594959196.268900"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NB7r1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"83ead755-7366-4f31-8a4d-d72dea783c2c","type":"message","user":"US72PNNLQ","text":"`lsp_settings#get` で settings.json を参照しているように見えないのですが，settings.json が関係してくるんですか？","ts":"1594951940.250200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ru1l"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ac917b08-20ee-4097-bc27-e9108d6b58d9","type":"message","user":"U03C6TEAZ","text":"ft=zsh で settings/bash-language-server.vim が読まれないので、それを読ませる為に settings.json に書く、という事ですね。","ts":"1594952012.251100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"U05"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bff6b329-c6d3-4f61-9d3b-1ff6a221c7da","type":"message","user":"US72PNNLQ","text":"あぁ，なるほど．ありがとうございます．","ts":"1594952031.251500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"svCAM"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7b291cdc-f351-4d0f-b350-b5a8ef7aac99","type":"message","user":"U03C6TEAZ","text":"なのでちょっと設計がアレだなぁと。","ts":"1594952045.251900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"96M9v"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8f9eecbf-6a65-4d9e-aa1e-92574a005ce7","type":"message","user":"U03C6TEAZ","text":"あ、でも先に変数を見ればできなくないのか。","ts":"1594952092.252700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Hf3T2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"33786b0c-9e33-4887-83be-9be04b332170","type":"message","user":"U03C6TEAZ","text":"でも重たくなるな。","ts":"1594952108.253000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FSBn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"00037845-3310-4a3f-b7fd-26f06353af59","type":"message","user":"U03C6TEAZ","text":"自分の整理用\n\n1. settings.json は ft がキー。これは ft に対して複数ある LS を解決する為。\n2. `lsp_settings` は各 LS を制御する為。\n\n解釈の順番は 1, 2。","ts":"1594952540.254900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YzUEh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"34161304-9780-4fcf-976e-6171f9b7d00d","type":"message","user":"U03C6TEAZ","text":"あ、そうか。\n```let g:lsp_settings_zsh = ['bash-language-server']```\nを見ればいいか。(今は見てない)","ts":"1594952671.255600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MK+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f96393f1-9e10-4eda-9119-54ac98d65a92","type":"message","user":"U03C6TEAZ","text":"元々、LS を指定できる様にこの変数は用意してた。\n```let g:lsp_settings_typescript = ['typescript-language-server', 'eslint-language-server']```","ts":"1594952729.256400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dbxv"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c3d25dd7-3b13-4336-9225-4c2260d4fd12","type":"message","user":"U03C6TEAZ","text":"後でこの対応入れときます。ユーザさんは\n```let g:lsp_settings_zsh = ['bash-language-server']\nlet g:lsp_settings = {\n\\   'bash-language-server': {\n\\     'allowlist': ['sh', 'zsh']\n\\   },\n\\}```\nとやって頂く感じに。","ts":"1594952970.257300","team":"T03C4RC8V","reactions":[{"name":"clap","count":1,"users":["US72PNNLQ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PFCT+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c2f0baf2-03bc-4680-ab9a-3fad6dc4f44b","type":"message","user":"U03C6TEAZ","text":"もしかしたらいずれ zsh-language-server 出てくるかもしれないけど。","ts":"1594953003.258000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wx37f"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"403a28b4-cad1-48cb-b279-0eff637339b1","type":"message","user":"UAZ33BKV2","text":"なるほど、ファイルタイプでactiveにしてたか... ft -&gt; ls -&gt; lsに対応するsettingsを見にいく(上の対応)ができれば、とりあえず問題は解決ですかね","ts":"1594953306.259100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"A+LLy"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"84e33e76-a6b3-45a7-b7de-a411f70e71a8","type":"message","user":"UNJ2DANJC","text":"設定ファイルフォーマットもLSPの仕様に取り込んで欲しい（N回目","ts":"1594953824.260100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KvgE"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"22fedd23-a771-4752-9a18-166677190e15","type":"message","user":"U03C6TEAZ","text":"変数名違った。 `lsp_settings_filetype_xxxx` だった。","ts":"1594954499.260600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oj="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9c80bf35-0f39-44ce-a8be-58992ee470ef","type":"message","user":"US72PNNLQ","text":"`keys(g:lsp_settings)` を見るようにすると重たくなるんですか？","ts":"1594954590.261200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2aL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cb52af0f-7742-4efc-9fa3-266ebb5ca7b7","type":"message","user":"US72PNNLQ","text":"ファイルタイプの判定をしなきゃいけないのか．","ts":"1594954672.262500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"z9Qtx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"12098d95-dd2d-4bdf-affc-a733c5601b32","type":"message","user":"US72PNNLQ","text":"ft から対応する ls を見つけるんですもんね","ts":"1594954695.263300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QXHa"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3eda920d-7b1b-40e5-b9fe-58a4443e1d07","type":"message","user":"U7TMPGWJ0","text":"参考までですが coc.nvim だと vimrc レベルで。 nvim-lsp だと filetypes (vim-lspのallowlist相当) の設定のみでシュッと対応はできるようでした。","ts":"1594954701.263600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"H5DG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"94924cb0-e8c8-4e7d-a9ab-aa97d2c974bd","type":"message","user":"U03C6TEAZ","text":"vim-lsp-settings は settings.json のキーから autocmd を作って `settings/bash-language-server.vim` を読み込んでるので、あたかも `settings.json` に zsh のキーが存在する様に振る舞う為にマージが必要になるんですよね。","ts":"1594954708.263900","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["US72PNNLQ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LvAF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"772da9c1-adb1-4ed5-955e-8f21a7cb3f08","type":"message","user":"U03C6TEAZ","text":"`g:lsp_settings` から逆のテーブルを作る様にすればまぁ行けるのは行けるんですけどね。","ts":"1594954777.264400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SUsi"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fba47ce1-2e38-448b-bf0d-1d43549773ea","type":"message","user":"U03C6TEAZ","text":"`keys(g:lsp_settings)` の allowlist を見て、それが settings.json のキーとして存在しないなら LS 名を持ってる ft を探してその LS 情報をコピーしてやる。","ts":"1594954979.266000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MiWT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"58d7bd81-d301-4b24-bd68-b3f489fd8974","type":"message","user":"U03C6TEAZ","text":"なので深いループになりそうなんですよね。","ts":"1594955002.266200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yQiH"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"41e0610a-2754-4c3f-b3b5-5dcd969c29de","type":"message","user":"U03C6TEAZ","text":"まぁまぁ深くなった。\n```  for [l:name, l:server] in items(get(g:, 'lsp_settings', {}))\n    if !has_key(l:server, 'allowlist')\n      continue\n    endif\n    for l:ft in l:server['allowlist']\n      if !has_key(s:settings, l:ft)\n        let s:settings[l:ft] = []\n      endif\n      for [l:ft2, l:configs] in items(s:settings)\n        if l:ft ==# l:ft2\n          continue\n        endif\n        for l:config in l:configs\n          if l:config.command !=# l:name\n            continue\n          endif\n          call add(s:settings[l:ft], l:config)\n        endfor\n      endfor\n    endfor\n  endfor```","ts":"1594956033.266500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3/Feq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9894ee9f-3f7f-4e3f-9529-ac482aa61594","type":"message","user":"U03C6TEAZ","text":"これは僕の案じゃなく allowlist だけで追従する方。","ts":"1594956057.267100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vbS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2e4668d1-986b-426b-a110-6f34409436dd","type":"message","user":"U03C6TEAZ","text":"こっちの方が設定がスマートだしこれにしようかな。","ts":"1594956596.268100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ec0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1fd6bf07-9917-4634-a43e-a97be53797ae","type":"message","user":"U03C6TEAZ","text":"whitelist だと動かないけどいいよね。","ts":"1594956654.268400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HT=j"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"03e7008b-c0cc-4d87-ace9-afd63ae70ac3","type":"message","user":"U03C6TEAZ","text":"<https://github.com/mattn/vim-lsp-settings/pull/283>","ts":"1594957601.268600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Mt4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f885515b-29c8-445f-a9d6-d28b51d143e1","type":"message","user":"UBNPMJJGM","text":"`*.zsh` でbash-language-server使ってますが、zshの独自文法使うと死にますね\nzshの独自文法使わなければそれなりには動きます","ts":"1594959196.268900","thread_ts":"1594951826.249200","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lBp"}],"root":{"client_msg_id":"1ce3cfa8-e83c-466b-956a-092e0c1602eb","type":"message","user":"U7TMPGWJ0","text":"bash-language-server で zsh が正式にサポートされているかはちょっとあやしいですが。 <https://github.com/bash-lsp/bash-language-server/issues/252>","ts":"1594951826.249200","thread_ts":"1594951826.249200","attachments":[{"fallback":"GitHub: Handle zsh syntax · Issue #252 · bash-lsp/bash-language-server","id":1,"title":"Handle zsh syntax · Issue #252 · bash-lsp/bash-language-server","title_link":"https://github.com/bash-lsp/bash-language-server/issues/252","text":"I have a bunch of scripts (not least my dotfiles) where I have to deal with both bash and zsh. However whenever I add some zsh syntax, for example [[ -n &amp;quot;${foo[(r)b]}&amp;quot; ]] &amp;&amp; echo ...","thumb_url":"https://avatars3.githubusercontent.com/u/61803527?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":159,"thumb_height":159,"from_url":"https://github.com/bash-lsp/bash-language-server/issues/252","original_url":"https://github.com/bash-lsp/bash-language-server/issues/252"}],"reply_count":1,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NB7r1"}]}},{"client_msg_id":"5630553b-e6ef-466a-b3a2-81c7cad8b36a","type":"message","user":"U03C6TEAZ","text":"マージしました。 allowlist で有効になります。","ts":"1594961120.269400","team":"T03C4RC8V","reactions":[{"name":"clap","count":1,"users":["US72PNNLQ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Qtn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
