[{"client_msg_id":"4fa06810-ed35-4eca-a54d-dcdefa138ee4","type":"message","user":"U03C6TEAZ","text":"ruby はこういった揺らぎがあるのが良さであり欠点","ts":"1528700450.000043","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"141975f4-aa1a-428e-864c-726d1c0b8418","type":"message","user":"U03C4RC8X","text":"みんなはそんなRubyではなくVim scriptを書こう! (ステマ","ts":"1528700551.000219","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f2c5baaa-261f-4d96-91e4-ed7fef44fe2c","type":"message","user":"U03C6TEAZ","text":"Vim script はもっとひどかった\n```\nlet x = get(s:, 'config', {})\n```","ts":"1528700608.000072","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a35f233a-993b-4548-af51-d19c2ac4b86e","type":"message","user":"U03C71D7H","text":"Vim script 遅いからなぁ。Vim 9x9 プロジェクトとか立ち上がりませんかね","ts":"1528700619.000286","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fe402f16-0508-4519-887b-02ad434c1a88","type":"message","user":"U03C6TEAZ","text":"<https://qiita.com/wholekeik/items/e9b528c240d15c714aa4>","ts":"1528700648.000256","attachments":[{"fallback":"Qiita: Vim scriptを処理系レベルから高速化しようとしている話 - Qiita","id":1,"title":"Vim scriptを処理系レベルから高速化しようとしている話 - Qiita","title_link":"https://qiita.com/wholekeik/items/e9b528c240d15c714aa4","text":"# TL; DR Vim scriptをパースしてASTを作り、高速化を図ります。リポジトリはこちら→[wholekeik/vim](<https://github.com/wholekeik/vim/tree/feature/vim>...","thumb_url":"https://cdn.qiita.com/assets/qiita-fb-2887e7b4aad86fd8c25cea84846f2236.png","blocks":null,"service_name":"Qiita","service_icon":"https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-f9a6afad761ec2306e10db2736187c8b.png","thumb_width":200,"thumb_height":200,"from_url":"https://qiita.com/wholekeik/items/e9b528c240d15c714aa4","original_url":"https://qiita.com/wholekeik/items/e9b528c240d15c714aa4"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a7132608-afd0-49a5-9f47-2646ceff60c8","type":"message","user":"U03C6TEAZ","text":"これ勿体ないよなー","ts":"1528700651.000115","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a4b7a92e-7cbf-4fdd-b5f6-3fb8f993ba70","type":"message","user":"U03C71D7H","text":"vim-jp でサポートしたいレベル (※私は応援する係です)","ts":"1528700691.000004","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c414283b-7961-4568-881d-d9502bf30866","type":"message","user":"U03C6TEAZ","text":"&gt;追記：vital.vimのテストがすべて通るようになりました！！これでバグはかなり少なくなったと言えそうです。","ts":"1528700696.000245","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b33e999e-6658-491d-9c77-c4db147f24ac","type":"message","user":"U03C6TEAZ","text":"&gt;+2.2%高速","ts":"1528700732.000097","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7cf8ca39-f0b6-484f-9807-d8832fd67447","type":"message","user":"U03C6TEAZ","text":"えっw","ts":"1528700734.000052","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b8ead15f-60e1-4778-a36d-a60df63e9156","type":"message","user":"U03C4RC8X","text":"Vim 9x9プロジェクト、普通に未踏とかgsocとかで有力そう","ts":"1528700807.000169","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f0eceede-6734-4f4e-8f42-648087502269","type":"message","user":"U03C4RC8X","text":"ruby 3x3 = ruby2から3にすると3倍速くなる","ts":"1528700865.000158","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b5a4436a-213d-402e-a109-6ff71f26a96f","type":"message","user":"U03C4RC8X","text":"vim 9x9 = vim8.0から9.0にすると9倍遅くなる","ts":"1528700876.000370","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"97b13d02-40b4-4d3c-b184-3940323961ae","type":"message","user":"U03C6TEAZ","text":"Vim script って Vim script でやれないきわきわがC言語なので、そんなに Vim script の滞在期間が無かったりするんかもですね。","ts":"1528700877.000355","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c29698c5-283a-4514-887a-376fa3258bab","type":"message","user":"U03C71D7H","text":"遅くなるんかーい","ts":"1528700885.000283","team":"T03C4RC8V","reactions":[{"name":"virtualnojarorikitsunemusumeyoutuberojisan","count":1,"users":["U03C4RC8X"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"063a0d0b-48b4-4e8b-8df6-ec56b47a47fb","type":"message","user":"U03C4RC8X","text":"vim script, パフォーマンスが(vim script力だいぶ高くないと)読みにくいのがむずそう","ts":"1528700952.000170","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"110d954f-eccb-4ffa-b535-588eb04d93f1","type":"message","user":"U03C71D7H","text":"そう、AST のやつがんばってる割になぜか結果があまり出てないのがつらい","ts":"1528700955.000312","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b22de5a3-7ca8-4ca8-840a-472160590c01","type":"message","user":"U03C6TEAZ","text":"Vim script って単純計算くらいなら結構速いんすよ。","ts":"1528701112.000108","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7951284f-b23a-4a3b-b713-cc7141a48329","type":"message","user":"U03C6TEAZ","text":"ループ回して map して、とかなってくると遅い。","ts":"1528701131.000204","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f9ebad20-9f2f-4a3b-b701-b83ede069a3c","type":"message","user":"U03C6TEAZ","text":"Vim script はイケてない API を deprecated にする勇気をもって欲しい","ts":"1528701772.000352","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1C314C2E-03CD-4693-AFCB-A47CC7E7E819","type":"message","user":"U03C4RC8X","text":"後方互換生","ts":"1528702542.000222","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d6ecd31c-3ab8-45aa-b171-e02e9d899524","type":"message","user":"U03C71D7H","text":"<@U7CGPB4NR> iro.vim で、 `foo = 10; foo += 10` みたいな自己代入式(`+=`)の左辺値の `foo` がローカル変数としてハイライトされないのは意図的(あるいは既知の技術的な制限)でしょうか? typo 検出が目的ならこの場合はハイライトされると嬉しい気がします。","ts":"1528698263.000224","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f58a2e22-153d-4bc6-bbbd-57c421687d9f","type":"message","user":"U7CGPB4NR","text":"現状代入の左辺に関しては、自己代入も含めて全くやってないですね。 やりたいとは思っているのですが、ruby_hl_lvar.vim でこのへん頑張っている結果結構バグが多くて、大変そうだなーという気持ちです","ts":"1528698405.000145","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8118d444-090e-42ff-9324-da87991a48ea","type":"message","user":"U03C71D7H","text":"なるほど。把握はされてる感じですね。ありがとうございますー","ts":"1528698598.000017","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d7e71044-1aac-441f-bb62-95c8558b61a5","type":"message","user":"U7CGPB4NR","text":"ちなみに、 `foo` が予め定義されいたらハイライトする、みたいなのはできない気がしています。 `foo` が定義されてようがなかろうが、発生するイベントはかわらなさそう。","ts":"1528698665.000295","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eb41f1df-4bf1-4e9b-b8d8-e2b5ea4030c6","type":"message","user":"U03C71D7H","text":"AST 的にはそうなりそうですね。そもそも既存のやつがどうやってるか私は把握してないのだった","ts":"1528698732.000059","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ec5e7d8a-5c1d-4a51-a02e-030d5162e12c","type":"message","user":"U7CGPB4NR","text":"既存のやつは、ローカル変数とメソッド呼び出しだと違うイベントが発生するので、それで出し分けている感じですねー","ts":"1528698777.000032","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"459464b8-22f7-4417-bdf0-119c13cb6d28","type":"message","user":"U03C71D7H","text":"あー、そこが自己代入式だと区別が付かない感じなのかな…","ts":"1528698820.000186","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dc73d58a-4f9c-48c9-82d6-a5097c00d258","type":"message","user":"U7CGPB4NR","text":"定義されていないローカル変数に対して `+=` されてたら警告するの、RuboCopかRuby本体で実装して良さそう","ts":"1528698832.000111","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"34b0dd29-472c-4f88-aaf3-0dd1107420f4","type":"message","user":"U03C71D7H","text":"良さそう","ts":"1528698843.000009","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c57bf157-67cd-490b-b792-0a779bbfb06b","type":"message","user":"U7CGPB4NR","text":"ローカル変数の参照は単にイベントを見ればよいのですが、定義の方では assign イベントの中の var_field の中の ident がローカル変数だったら( == @ とかで始まってなかったら) みたいなめんどい処理を書かなきゃいけず、面倒だった記憶があります。。","ts":"1528698968.000061","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ad494e4c-97d4-41ef-9b14-f0bce360699b","type":"message","user":"U03C71D7H","text":"なるほどー","ts":"1528699019.000154","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9b1e9270-2fc6-4ef4-8ad4-8319beb55038","type":"message","user":"U03C4RC8X","text":"&gt; 定義されていないローカル変数に対して `+=` されてたら警告するの、RuboCopかRuby本体で実装して良さそう","ts":"1528699029.000173","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"18c0c265-9509-4d7e-8f83-f7f8e2adf962","type":"message","user":"U03C4RC8X","text":"ruby本体でやるなら、NilClass#+ を定義する感じですね","ts":"1528699047.000126","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9943f6df-b5f1-41b5-99d7-9ccacbcda8fe","type":"message","user":"U03C71D7H","text":"むしろ `ruby -w` で出て欲しい気がする","ts":"1528699069.000168","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e21f2821-3fa8-4069-9804-92d831de4d2c","type":"message","user":"U7CGPB4NR","text":"あー、実行時じゃなくてパース時で出したいなと思ってました","ts":"1528699078.000231","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ee59572a-6884-46c5-8bcb-0661b6dbeb94","type":"message","user":"U03C4RC8X","text":"パース時は無理ですー","ts":"1528699092.000200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6735316c-8800-44f0-8f69-3a867d9e9fa4","type":"message","user":"U03C4RC8X","text":"外からいじれるので","ts":"1528699103.000085","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"77071b85-4a17-45a4-8266-2800475a64d5","type":"message","user":"U03C4RC8X","text":"お店しましょう","ts":"1528699116.000034","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"43e07e6f-1046-4ddb-b150-5ebb13b82a70","type":"message","user":"U7CGPB4NR","text":":shopping_trolley:","ts":"1528699132.000323","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b8cd7ffd-8503-4196-b79f-f70ae33f46c4","type":"message","user":"U03C4RC8X","text":"```def pocke\n  @binding = binding\n  sleep 1\n  x += 0\nend\n\nThread.start do\n  sleep 0.1\n  @binding.local_variable_set(:x, 0)\nend\np pocke\n```","ts":"1528699266.000117","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eb0895ea-afa4-47be-9c40-ba730de6b563","type":"message","user":"U03C4RC8X","text":"書いてて思ったけど、こういうケースかなり少ないし正直無視してよそうww","ts":"1528699278.000157","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f5ef4eb7-0624-413c-95ef-02d1cd1cf760","type":"message","user":"U03C4RC8X","text":"上記例の意図は、pocke()の中ではxを0に初期化してないけど、うまく実行できる例です","ts":"1528699321.000113","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0d63d85c-00d3-4d29-a84f-056fabbcfc2e","type":"message","user":"U03C71D7H","text":"`x += ...` がある時点でメソッドのローカル変数として登録されるから local_variable_set で変更可能ということか","ts":"1528699328.000192","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1aaea434-8725-4d4e-9735-eb1fa22c5713","type":"message","user":"U7CGPB4NR","text":"なるほどー","ts":"1528699336.000278","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1ce184bd-9e3e-4a3c-8070-bc401688b3a5","type":"message","user":"U03C4RC8X","text":"です。遡って宣言されます","ts":"1528699344.000018","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"598ed867-0685-4c21-b530-31d478e57c27","type":"message","user":"U03C71D7H","text":"あとはユーザーが `NilClass#+` を自前で定義してても動く","ts":"1528699357.000133","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"aec8bdd2-31f7-4405-8df1-74d7672e4595","type":"message","user":"U7CGPB4NR","text":"<https://twitter.com/yuroyoro/status/639390745011486720>","ts":"1528699396.000280","attachments":[{"fallback":"<https://twitter.com/yuroyoro|@yuroyoro>: ウチにはNilClass#method_missingがnilを返すような伝説のmonkey patchがありましてね…… #omotesandorb","id":1,"author_name":"( \u000b \u000e\u000f            ​‌‍‎‏　null)","author_subname":"@yuroyoro","author_link":"https://twitter.com/yuroyoro/status/639390745011486720","author_icon":"https://pbs.twimg.com/profile_images/953483481757044736/RG3xGkuE_normal.jpg","text":"ウチにはNilClass#method_missingがnilを返すような伝説のmonkey patchがありましてね…… #omotesandorb","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1441277607,"service_name":"twitter","from_url":"https://twitter.com/yuroyoro/status/639390745011486720","original_url":"https://twitter.com/yuroyoro/status/639390745011486720"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"895722a7-3462-43a7-8bb1-fdf54b169b1e","type":"message","user":"U03C71D7H","text":"こわい","ts":"1528699410.000282","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"41831483-14ae-4a61-b8d9-4f02efeb1adf","type":"message","user":"U03C4RC8X","text":"実際Object#method_missingするやばいやつもあるので、そうなると必然的にそうなりそう","ts":"1528699424.000373","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"be9285f1-e0d5-4d58-9b68-6344a8e58ad2","type":"message","user":"U03C4RC8X","text":"ただまあパース時に","ts":"1528699445.000141","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"630f30ff-e5b3-4d49-9e63-0564cb644c36","type":"message","user":"U03C71D7H","text":"RuboCop で false positive でやることは可能そうかなぁ","ts":"1528699472.000040","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3e80999c-3c02-4f64-97c6-81ce52c56461","type":"message","user":"U03C4RC8X","text":"`スコープ内に初期化がでるより前に参照がある`","ts":"1528699483.000355","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c8e18650-c54b-4c7d-860b-c7214fab86ea","type":"message","user":"U03C4RC8X","text":"とrubocopでやる、というのはよさそう。静的にいける","ts":"1528699495.000072","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9360b1fa-27a5-4ae2-b60c-83c971b217c7","type":"message","user":"U7CGPB4NR","text":"あー、これ前に別件でやりたいと思った気がする、なんだっけ…","ts":"1528699517.000185","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"627dba43-b64e-46d1-8ac4-0a925a343143","type":"message","user":"U03C4RC8X","text":"つまり以下は合法とする\n```if false\n  x = 0\nend\nx += 1 #=&gt; えらー```","ts":"1528699542.000204","edited":{"user":"U03C4RC8X","ts":"1528699551.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"302baa6c-be8f-40e3-922a-c57d8ed30fb4","type":"message","user":"U7CGPB4NR","text":"<https://twitter.com/p_ck_/status/864824027570880512> 前にこのへんで話してた","ts":"1528699623.000352","attachments":[{"fallback":"<https://twitter.com/p_ck_|@p_ck_>: a = foo(a) みたいなのに警告をだすCopを書きたいなと思っている(手を付けていない)。右辺のaは必ずnilになる。","id":1,"author_name":"Pocke(ぽっけ)","author_subname":"@p_ck_","author_link":"https://twitter.com/p_ck_/status/864824027570880512","author_icon":"https://pbs.twimg.com/profile_images/907622210231078914/EDd0_edK_normal.jpg","text":"a = foo(a) みたいなのに警告をだすCopを書きたいなと思っている(手を付けていない)。右辺のaは必ずnilになる。","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1495025090,"service_name":"twitter","from_url":"https://twitter.com/p_ck_/status/864824027570880512","original_url":"https://twitter.com/p_ck_/status/864824027570880512"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"97a3c678-ad64-4265-b596-2dbec838bf5e","type":"message","user":"U03C4RC8X","text":"うーんいや、これはよくないな &gt; 僕の","ts":"1528699624.000302","edited":{"user":"U03C4RC8X","ts":"1528699632.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b32269ea-b8d5-498d-8f51-38b0796ed625","type":"message","user":"U03C4RC8X","text":"この右辺がnilになる自体は問題なさそう","ts":"1528699673.000261","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"330a462d-4f3f-4e0f-b8ba-4f0d9868f346","type":"message","user":"U03C71D7H","text":"初期化される前のローカル変数にアクセスするコード","ts":"1528699680.000148","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e9266eb4-1e86-436a-9350-a8894eb81048","type":"message","user":"U03C4RC8X","text":"`スコープ内に初期化がでるより前にその変数に対するメソッド呼び出しがある` ときに静的に警告、は良さそう。","ts":"1528699699.000370","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"458141df-0813-4cef-a27c-b4fb1b7826ae","type":"message","user":"U03C4RC8X","text":"`a = foo(a)` は意図通りの確率が否定できない","ts":"1528699716.000119","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0f66a38f-0829-4812-9133-9acc4f7cffda","type":"message","user":"U03C4RC8X","text":"`a = a.foo` は意図通りの確率が否定できがち","ts":"1528699734.000123","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fe2a1ba8-7a2a-44d7-b3a1-229079c10586","type":"message","user":"U03C4RC8X","text":"日本語がやばくなってきた","ts":"1528699739.000085","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"37bc339f-4047-4ece-bf36-34941c0d118e","type":"message","user":"U03C71D7H","text":"とは言えコードとしてはアンチパターン感あるし警告出してもいい気がする","ts":"1528699740.000142","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"555b4232-ba1a-480c-a4d1-2873e6bd20f8","type":"message","user":"U7CGPB4NR","text":"意図通り <#C7XCWG32P|とは>","ts":"1528699743.000186","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"91281ee9-29fc-4be3-9d3a-fb2d0cc5a131","type":"message","user":"U03C71D7H","text":"TRICK してるとかでない限りまず書かない","ts":"1528699758.000020","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"35438c00-7d6e-45bd-8ec0-4ab6e6dd5c4d","type":"message","user":"U03C4RC8X","text":"fooが中でaがnilかそれ以外で分岐してる場合がありうる","ts":"1528699761.000108","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8810ee9a-7ba7-4aa3-964a-81d6e851bf9a","type":"message","user":"U03C71D7H","text":"未初期化のローカル変数の値が nil であることを期待するコードを書くのはちょっと…と言う感じ","ts":"1528699798.000157","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"36c86279-9140-48ed-919e-e042a2fdda0e","type":"message","user":"U7CGPB4NR","text":"aがその前で定義されていない前提なら、 `a = foo(a)` は `a = foo(nil)` と同じなので、 `a` と書くのはないかなーという気がしています","ts":"1528699830.000282","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"061a46d8-e01b-48a3-8c72-7ecca6c845fd","type":"message","user":"U03C4RC8X","text":"```if ビジネスロジック\n  x = foo()\nend\n\nx = bar(x)\nx = buzz(x)\n```","ts":"1528699842.000018","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b2917d15-f4cb-4ffa-86a8-ec702720a651","type":"message","user":"U03C71D7H","text":"それをやるなら私なら if の前に `x = nil` を書きます","ts":"1528699867.000193","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1d87c162-58ab-4ce6-8302-1e71e7af2715","type":"message","user":"U03C4RC8X","text":"実際僕もそうするなあw","ts":"1528699876.000218","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"94f42b55-a26c-4e06-8123-45f82b66fb21","type":"message","user":"U03C4RC8X","text":"```x =\n  if ビジネスロジック\n    foo()\n  end\n# OR\n# x = foo() if ビジネスロジック\n\nx = bar(x)\nx = buzz(x)\n```","ts":"1528699899.000145","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"242169bc-97e0-494c-bab0-73369d4865a1","type":"message","user":"U03C4RC8X","text":"なのでスルーしてよさそう","ts":"1528699940.000042","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"168f6195-2614-459d-a303-ebf49e95ae6c","type":"message","user":"U03C71D7H","text":"そう言えば個人的には else のない if 式が、条件式が false の場合に結果が nil になるのが気持ち悪いのでその場合は `else; nil; end` を書くのだけど、これを書くとデフォルトの RuboCop さんはこのコードは不要とか言ってくる","ts":"1528699991.000195","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fdc2ab80-1499-4b86-97df-20fce5c55aff","type":"message","user":"U03C4RC8X","text":"僕もelse; nil; end核派です。","ts":"1528700001.000111","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f5572552-7053-40e6-a0a3-a930b27e6497","type":"message","user":"U03C4RC8X","text":"意図としてのnil","ts":"1528700014.000083","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9f6aa80c-3067-443c-8f45-f64659fac492","type":"message","user":"U03C71D7H","text":"わかりすぎる","ts":"1528700020.000198","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cf2bc84b-2b34-4547-b20a-47de53851942","type":"message","user":"U03C6TEAZ","text":"rubyist なら\n```\nx = ビジネスロジック ? foo() : nil\n```\nって書きそう","ts":"1528700022.000085","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ebb33c8b-a2bb-47e1-b69c-789ed04ea52b","type":"message","user":"U03C4RC8X","text":"僕もそれになるなあ","ts":"1528700044.000196","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"31f008e9-663e-4912-91dc-b54327dba773","type":"message","user":"U7CGPB4NR","text":"x = foo() if ビジネスロジック\nと書きそう","ts":"1528700057.000192","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"51c21950-0b4c-4603-9933-f78180e0afc4","type":"message","user":"U03C71D7H","text":"私は Ruby 書いてると極力三項演算子避けて if 式使うようにしてる (行数増えちゃうけど)","ts":"1528700063.000208","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3960521e-0ee6-4814-9802-7bae4fb50b59","type":"message","user":"U03C4RC8X","text":"条件演算子","ts":"1528700073.000026","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ab172fad-8e8f-4e1c-8a08-39d3033ab485","type":"message","user":"U03C71D7H","text":"条件演算子","ts":"1528700081.000007","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3ff44176-36fd-49f5-b001-07a09364438d","type":"message","user":"U03C6TEAZ","text":"x = nil 前提は書かないな僕も","ts":"1528700139.000383","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2cc02a6a-40ad-411d-af79-320c1e90a358","type":"message","user":"U7CGPB4NR","text":"elseのないif式の値を使う時に `else nil` は省略するけど、戻り値があることを期待するメソッド定義ではreturnを省略したくない勢","ts":"1528700141.000081","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f2ce0725-80ba-4c03-80ce-82906073df3e","type":"message","user":"U03C4RC8X","text":"rubyに `三項演算子` の名前の演算子は存在しない <https://docs.ruby-lang.org/ja/2.5.0/doc/spec=2foperator.html#cond>","ts":"1528700145.000017","attachments":[{"fallback":"演算子式 (Ruby 2.5.0)","id":1,"title":"演算子式 (Ruby 2.5.0)","title_link":"https://docs.ruby-lang.org/ja/2.5.0/doc/spec=2foperator.html#cond","text":"* [[ref:assign]] * [[ref:selfassign]] * [[ref:multiassign]] * [[ref:range]] * [[ref:range_cond]] * [[ref:and]] * [[ref:or]] * [[ref:not]] * [[ref:cond]]","blocks":null,"service_name":"docs.ruby-lang.org","service_icon":"https://docs.ruby-lang.org/ja/2.5.0/rurema.png","from_url":"https://docs.ruby-lang.org/ja/2.5.0/doc/spec=2foperator.html#cond","original_url":"https://docs.ruby-lang.org/ja/2.5.0/doc/spec=2foperator.html#cond"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"faf7ccc0-7ab4-4b0a-8202-c4d17e1d3ef9","type":"message","user":"U03C6TEAZ","text":"もしくは case when で書く。","ts":"1528700199.000129","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9170e53a-0891-4e1c-97c2-1bf5555d01c1","type":"message","user":"U03C4RC8X","text":"このスレ全員わかり手で安心した、一緒にruby隠し事したい","ts":"1528700199.000171","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e690506c-d811-46d1-af7a-a8d084759742","type":"message","user":"U03C71D7H","text":"隠し事","ts":"1528700209.000327","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"35f0d6df-6d09-4329-8682-79da3e220e17","type":"message","user":"U03C4RC8X","text":"なんか意図がぶっとぶ変換してたので吹いたまま投稿してしまった・・・","ts":"1528700220.000314","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ed9f2d56-c136-4a14-8bab-2545547fdb14","type":"message","user":"U03C6TEAZ","text":"```\n(1..100).each do |n|\n  puts case 0\n  when n % 15 then :FizzBuzz\n  when n % 3 then :Fizz\n  when n % 5 then :Buzz\n  else n\n  end\nend\n```","ts":"1528700227.000276","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eaed6120-fc1e-48cd-afee-b9050cd731a8","type":"message","user":"U03C71D7H","text":"case when 使う場合も意図的に else; nil 書くのだけど、これも RuboCop に突っ込まれる","ts":"1528700248.000385","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a4f03629-af46-4a12-b64d-37411142f239","type":"message","user":"U03C71D7H","text":"つらい","ts":"1528700251.000019","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0f8da1cd-341c-4ed0-bce6-7e2c5838c7fd","type":"message","user":"U03C4RC8X","text":"```(1..100).each do |n|\n  puts\n    case 0\n    when n % 15\n      :FizzBuzz\n    when n % 3\n      :Fizz\n    when n % 5\n      :Buzz\n    else\n      n\n    end\nend\n```","ts":"1528700265.000326","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6420ec05-ccd2-4b3b-b631-af8e9f5f08dd","type":"message","user":"U03C4RC8X","text":"```(1..100).each do |n|\n  output =\n    case 0\n    when n % 15\n      :FizzBuzz\n    when n % 3\n      :Fizz\n    when n % 5\n      :Buzz\n    else\n      n\n    end\n  puts output\nend\n```","ts":"1528700291.000159","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"85133aca-6a50-4a3a-bdd2-77fcfdec33e0","type":"message","user":"U03C4RC8X","text":"(見た目のためだけに一旦ローカル変数に入れるかな)","ts":"1528700306.000021","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
