[{"client_msg_id":"deb00519-7c9c-4e54-a1cb-b9f0715edef1","type":"message","user":"UEACRCY0Z","text":"GCPUGの sinmetal さんが spanner の紹介してました\n\u003chttps://www.youtube.com/watch?v=l7Y7Qs60Nf8\u003e","ts":"1602576003.030000","attachments":[{"fallback":"YouTube Video: Spanner 沼への誘い Part 2 Write","id":1,"author_name":"GCPUG","author_link":"https://www.youtube.com/channel/UCCw7gdgXcnxarKCEGUFELAQ","title":"Spanner 沼への誘い Part 2 Write","title_link":"https://www.youtube.com/watch?v=l7Y7Qs60Nf8","thumb_url":"https://i.ytimg.com/vi/l7Y7Qs60Nf8/hqdefault.jpg","blocks":null,"service_name":"YouTube","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/youtube.png","thumb_width":480,"thumb_height":360,"video_html":"\u003ciframe width=\"400\" height=\"225\" src=\"https://www.youtube.com/embed/l7Y7Qs60Nf8?feature=oembed\u0026autoplay=1\u0026iv_load_policy=3\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003e\u003c/iframe\u003e","video_html_width":400,"video_html_height":225,"from_url":"https://www.youtube.com/watch?v=l7Y7Qs60Nf8","original_url":"https://www.youtube.com/watch?v=l7Y7Qs60Nf8"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5GF"}]},{"client_msg_id":"038483ee-c195-4513-93f6-abeaffc452dc","type":"message","user":"UDDCM376D","text":"mongodb、名前しか知らない","ts":"1602573518.029300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"09YI"}]},{"client_msg_id":"417f1313-5408-41d1-bf48-ba8744cd6a25","type":"message","user":"U03C6TEAZ","text":"本当に検索したいなら mongodb とかの方を使うべきすね。","ts":"1602568991.028900","edited":{"user":"U03C6TEAZ","ts":"1602568999.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"adR"}]},{"client_msg_id":"37296bf1-5d45-4126-bb06-b664fdf326fc","type":"message","user":"U03C6TEAZ","text":"先日システムの postgresql のバージョンを 12 に上げたけど、だいぶパフォーマンス良くなった。","ts":"1602568772.028500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ermt"}]},{"client_msg_id":"fd1a8a49-a1dd-493e-ae16-807a43b507e6","type":"message","user":"U03C6TEAZ","text":"行を列にできないのでなぁ。凄い inner join が出来上がりそう。","ts":"1602568406.028000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tMS"}]},{"client_msg_id":"19d442fc-950d-4abe-b5b5-bb62023933ca","type":"message","user":"UDDCM376D","text":"なので、どうしても検索したいならビューを作るってやり方があるけど、それならテーブルを（ｒｙ","ts":"1602568314.027500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"U1jgP"}]},{"client_msg_id":"79fdab72-a291-4ed4-8122-dd9bd3313154","type":"message","user":"UDDCM376D","text":"インデックスは貼れないらしい","ts":"1602568291.026900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ruc"}]},{"client_msg_id":"72da3638-fce1-40f9-a6d3-35ed758aed05","type":"message","user":"U03C71D7H","text":"検索したい前提があるなら JSON にしちゃダメですね。一応カラムの型を JSON にしておけばクエリで検索はできるらしい。便利そうだけど使ったことはない (index とかはれるんだろうか…?)","ts":"1602568199.026700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pLHS"}]},{"client_msg_id":"71353e0a-7a71-416b-bddb-0b10e20f734a","type":"message","user":"UDDCM376D","text":"\u0026gt; 僕もその JSON の中身に条件あてて検索したりはしないすね。あくまでカラムの中身がたまたま JSON だった、というだけの話。\n検索しないなら、JSON入れてもいいかなって気持ちはありますね\n検索したいならやはりJSONを入れるのはしんどい希ガス","ts":"1602568042.025400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"t5ncD"}]},{"client_msg_id":"580a4752-fd11-4a88-b390-aa154606e167","type":"message","user":"UDDCM376D","text":"\u0026gt; 設定項目がどんどん増える様なケースだと、それは行なんですが、欲しいのは列なんですよね。\nなるほどなぁ\n確かに、それならJSONにして突っ込んで方が良さそうすね","ts":"1602567983.024700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SK7"}]},{"client_msg_id":"a4d6628f-6cbc-4c37-8046-ac90949982df","type":"message","user":"U03C6TEAZ","text":"まぁスキーマレスは嫌われがちなのはあるんですが、最近の PostgreSQL とかだと JSON に対してスキーマを設定できたりします。","ts":"1602566222.024200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"y16Tk"}]},{"client_msg_id":"54a1dab0-7680-45bc-a087-3977512978bf","type":"message","user":"U7B4ZD49X","text":"私も↑のthincaさんの意見が真理だと思ってる。\nあとはリレーションや検索する必要がない純粋なデータかどうかを最初に判断できるかどうかだけだと思う。","ts":"1602565970.023100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2IFd"}]},{"client_msg_id":"7f8e830e-0812-494d-af80-7a162a17e4ae","type":"message","user":"U03C6TEAZ","text":"僕もその JSON の中身に条件あてて検索したりはしないすね。あくまでカラムの中身がたまたま JSON だった、というだけの話。","ts":"1602565919.022400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Lssnb"}]},{"client_msg_id":"487acdb3-654b-4ca7-928d-5a2fe5897913","type":"message","user":"U03C71D7H","text":"リレーションや検索する必要がない純粋なデータはそれはもうデータなので JSON とかで押し込みがち","ts":"1602565788.020900","edited":{"user":"U03C71D7H","ts":"1602565810.000000"},"team":"T03C4RC8V","reactions":[{"name":"wakaru","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UAX1m"}]},{"client_msg_id":"d35509a4-96d5-4c7b-aba8-d405c4ef4d19","type":"message","user":"U03C6TEAZ","text":"例えば、あるグループの下に、あるユーザがいて、ユーザ毎にどんどん増える可能性のある設定項目がある場合、ちゃんと作るなら\n\n* グループID\n* ユーザID\n* 項目名\n* 項目値\n\nというテーブルを持つのが正しいんですが、ユーザ情報と項目を一気に取りたいケースがあったり、ユーザを引く為の条件に会社IDが足される様なケースになると割と面倒な事がおきる。もちろんちゃんとそれぞれの紐づけ直すのが正解なんだけど。","ts":"1602565586.020300","edited":{"user":"U03C6TEAZ","ts":"1602565730.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"loW"}]},{"client_msg_id":"010ffb10-5943-4a1b-8035-9e414b4a893a","type":"message","user":"U03C71D7H","text":"まあ設計が悪いと言ってしまうのは簡単なんですけど、そもそも要件が後からどんどん変化していくものですからね。現実は。ゲームは特にそう。","ts":"1602565474.018500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"W=g"}]},{"client_msg_id":"a3ad0ce2-7162-4143-ae82-1a2e58f35ab9","type":"message","user":"U03C6TEAZ","text":"設定項目がどんどん増える様なケースだと、それは行なんですが、欲しいのは列なんですよね。","ts":"1602565391.017000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lkYx"}]},{"client_msg_id":"3d39dc57-e195-4c41-9124-4962ae95c938","type":"message","user":"U03C71D7H","text":"けどまあ途中から変えたりはできないからな…w","ts":"1602565367.016700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ABr0"}]},{"client_msg_id":"e5d1b19c-14d4-466d-9fc9-3b31030a2c73","type":"message","user":"U03C71D7H","text":"そもそも RDB を使うべきだったのかどうかについては検討の余地がある","ts":"1602565344.016200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Y14"}]},{"client_msg_id":"20be0919-fc1b-4cae-affa-67a2ccae6c8d","type":"message","user":"U03C71D7H","text":"もしそうならこの世にスキーマレスなんてものは必要なかったと思う","ts":"1602565294.015800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TGIj"}]},{"client_msg_id":"4c88113a-8ba6-4961-acc8-c48c3db046b1","type":"message","user":"U7B4ZD49X","text":"私も安牌はちゃんと設計することだと思ってる。けど、ものによってはJSON格納でもいいと思ってる。\n判断つかないならちゃんと設計してやったほうがいいと思ってる。（私はあとから、あ〜ってなるのが嫌なタイプなんでかなりの確証がないとJSON格納にはしないかな）","ts":"1602565293.015700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eS47"}]},{"client_msg_id":"66DAA83F-40E2-4884-9C41-F845E6594153","type":"message","user":"UDDCM376D","text":"なるほど","ts":"1602564946.013500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dO5Mm"}]},{"client_msg_id":"bfb9a4b2-726d-4bbd-9639-e7c781f43924","type":"message","user":"U06ECBRTJ","text":"設計が悪そう…(偏見)","ts":"1602562564.013200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4hd"}]},{"client_msg_id":"5797f770-4a34-4f6e-87f9-c48894df6a58","type":"message","user":"U03C71D7H","text":"そうではなくちょっとずつ違う型のテーブルがたくさん必要な場合","ts":"1602561524.012600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zLPA"}]},{"client_msg_id":"38bcf68e-db12-40bf-8225-8adb06c589ea","type":"message","user":"U06ECBRTJ","text":"\u0026gt; 型変える度にテーブル作ってたら\nALTER TABLE とは…","ts":"1602561043.012100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4OtD"}]},{"client_msg_id":"d5b18244-995c-412b-892a-da4107bc6e85","type":"message","user":"U03C6TEAZ","text":"雑にスキーマレス欲しい時はありますね。","ts":"1602560970.011800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pKc7"}]},{"client_msg_id":"e9bbe694-e494-424f-94c6-0e1cd7bd938e","type":"message","user":"U03C71D7H","text":"型変える度にテーブル作ってたら何百個になるかわからん","ts":"1602560728.011500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5De=b"}]},{"client_msg_id":"f60eda91-4ece-4072-bb4a-bdbb6000a12b","type":"message","user":"U06ECBRTJ","text":"現場の声だ","ts":"1602560692.010900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"h=4"}]},{"client_msg_id":"4c5e6c2b-cd6f-4edd-8060-c317fcf5a70b","type":"message","user":"U03C71D7H","text":"key-value ストアの需要を考えると、似たようなことを RDB でやろうと思ったらまあそうなるよね(検索はできないけど)ってなる…","ts":"1602560690.010800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sKma3"}]},{"client_msg_id":"27faf76a-93d2-4c44-8dbf-bef0dff2a27c","type":"message","user":"U03C71D7H","text":"JSON 保存しまくってる","ts":"1602560650.009900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OO0"}]},{"client_msg_id":"8454ac8b-23dc-4828-b03f-14dfbf88764d","type":"message","user":"U03C6TEAZ","text":"なので入れるのはマスター系のテーブルにだけ。","ts":"1602559454.009700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BpE0n"}]},{"client_msg_id":"85f6a3e5-4f56-4f14-bfeb-e5757089a9b8","type":"message","user":"U03C6TEAZ","text":"ある程度出来上がったシステムにテーブルを追加するほどでもないけど、動作に拡張性を持たせたい時にいちいちカラム追加してくのだるいので JSON でまるまま config を入れてたりする。レコード毎の config。","ts":"1602559408.009300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DWrDk"}]},{"client_msg_id":"26ff3d8e-4100-45f5-88ed-0ed2ff5d6e7e","type":"message","user":"U03C6TEAZ","text":"僕 JSON 保存やってる。","ts":"1602559349.008100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sFE"}]},{"client_msg_id":"E406CAA9-0287-4215-B470-7C26E842B946","type":"message","user":"UDDCM376D","text":"ビュー作ればええって話だけど、それならテーブルでいいんじゃないのってと思ったりはした","ts":"1602559269.007700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ulDtY"}]},{"client_msg_id":"2CFCB6FF-805D-4D16-973C-DAB6EA5032B6","type":"message","user":"UDDCM376D","text":"mysqlでは一応whereで絞れるみたいだけど、インデックス効かないからパフォーマンスがあまり良くないらしいすね","ts":"1602559242.006800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rjvy"}]},{"client_msg_id":"efb71d5b-0d67-4cf0-b101-8a598b699b1f","type":"message","user":"U7B4ZD49X","text":"最初見たときはなんじゃこりゃと思ったけど思ったより使い勝手が悪くなかった","ts":"1602559136.005700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KbG2o"}]},{"client_msg_id":"c4a261e2-8091-49fe-b3c9-2dd1a433822e","type":"message","user":"U7B4ZD49X","text":"私出会ったことある・・・","ts":"1602559000.005100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AU7zk"}]},{"client_msg_id":"7504a68a-0b28-421b-81fe-2384963f838d","type":"message","user":"U06ECBRTJ","text":"リビジョンを保存しておきたいときは、ありかもしれない くらいかな ＞ JSON 保存","ts":"1602558661.004900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GqWBt"}]},{"client_msg_id":"eaebc2b2-fdbf-4a45-ba91-06467cf846c5","type":"message","user":"UDDCM376D","text":"そもそもDBあまり触っていない…","ts":"1602558643.004400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1jhb"}]},{"client_msg_id":"ea103824-eaa8-44c4-a961-d03de57b2be4","type":"message","user":"UDDCM376D","text":"DBちゃんと正規化したことがない","ts":"1602558634.003900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kpSp"}]},{"client_msg_id":"52e86d79-6cfd-438d-9a4e-c7c7185fb706","type":"message","user":"U06ECBRTJ","text":"たいてい正規化して設計するから…","ts":"1602558617.003500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"r=i"}]},{"client_msg_id":"e3647569-8269-4f9f-b146-f8e86a4ad7b3","type":"message","user":"UDDCM376D","text":"そうみたいですね","ts":"1602558614.003200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qW=gn"}]},{"client_msg_id":"55ad65cb-2dc2-48de-86ff-204fe79f0cd4","type":"message","user":"U06ECBRTJ","text":"今は MySQL に JSON型 のカラムができたから、一応ニーズはあるっぽい","ts":"1602558601.002800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XaoW/"}]},{"client_msg_id":"cada5ba6-09af-44da-9257-a91e4395c31d","type":"message","user":"UDDCM376D","text":"\u003chttp://honeplus.blog50.fc2.com/blog-entry-185.html\u003e\nDBカラムにJSONを保存するシーンに出会ったことがないけど、結構あるんかな","ts":"1602558520.001900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fjk"}]}]
