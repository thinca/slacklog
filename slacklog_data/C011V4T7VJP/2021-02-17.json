[{"client_msg_id":"4c1e5293-e676-4ab5-b41f-b46523ccdb60","type":"message","user":"U7B4ZD49X","text":"最新へのキャッチアップまじでつらい・・・これを解決してるシステムってあるのかな。。。","ts":"1613550857.353200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nmrsX"}]},{"client_msg_id":"999dc049-90cb-4357-9e96-49134b09987c","type":"message","user":"UAZ33BKV2","text":"けっこう便利ですよね、Template\nただ、更新しても伝播させにくい(そのためともいう)ので、ちょっとだけ注意と動的成長と相性の悪さみたいなのはありますが","ts":"1613550743.352300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8EkK"}]},{"client_msg_id":"1c71b3b4-5d62-4dcf-90ff-81f654ec6afa","type":"message","user":"UGXMRNBUM","text":"テンプレに変数使いたいとずっと思ってるやつ","ts":"1613550718.351800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wMa"}]},{"client_msg_id":"e9a37374-53e8-4813-8cef-7372fccc1b2f","type":"message","user":"U78A6ESHM","text":"便利なやつ","ts":"1613550082.350600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"htUgY"}]},{"client_msg_id":"7cdcabba-242b-457b-8acf-6f492baf3c8f","type":"message","user":"U7B4ZD49X","text":"なんかリポジトリの名前に変なの出てるなって思ったら、template機能初めて知った\n\u003chttps://github.com/ouuan/AUR-template\u003e\n\u003chttps://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-template-repository\u003e","ts":"1613549816.350300","attachments":[{"fallback":"GitHub: ouuan/AUR-template","id":1,"title":"ouuan/AUR-template","title_link":"https://github.com/ouuan/AUR-template","text":"Manage AUR packages in a GitHub repository, with CI tests and auto-publish :rocket: - ouuan/AUR-template","thumb_url":"https://avatars.githubusercontent.com/u/30581822?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":300,"thumb_height":300,"from_url":"https://github.com/ouuan/AUR-template","original_url":"https://github.com/ouuan/AUR-template"},{"fallback":"Creating a template repository - GitHub Docs","id":2,"title":"Creating a template repository - GitHub Docs","title_link":"https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-template-repository","text":"You can make an existing repository a template, so you and others can generate new repositories with the same directory structure, branches, and files.","blocks":null,"service_name":"docs.github.com","from_url":"https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-template-repository","original_url":"https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-template-repository"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nB/WE"}]},{"client_msg_id":"e54e9b9b-3125-4c72-9eb7-4c4012f698c3","type":"message","user":"UDDCM376D","text":"事故るのは確かに怖い","ts":"1613548003.349600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"N41"}]},{"client_msg_id":"824276d3-7c43-452c-8a47-18a9470308c1","type":"message","user":"U03C6TEAZ","text":"git が `.git` しかチェックしてなくて `.Git` も clone しちゃうから普通に `.git` を上書き出来てしまっていた。","ts":"1613547181.348900","team":"T03C4RC8V","reactions":[{"name":"yabai","count":3,"users":["UPWFF5YQ7","U06ECBRTJ","U9S4G0LJW"]},{"name":"hee","count":2,"users":["U7B4ZD49X","U06ECBRTJ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mt5t"}]},{"client_msg_id":"b66551b9-5d98-4729-82b7-9890fef7f0ca","type":"message","user":"U03C6TEAZ","text":"昔ありましたね。リポジトリに `.Git` を含んでおいて Windows で checkout させる脆弱性","ts":"1613547138.348200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"o5b+5"}]},{"client_msg_id":"3cfb21a8-1393-49b4-ae1f-9dc54c9ffee0","type":"message","user":"UPWFF5YQ7","text":"少なくとも手元のバージョンだと、\n`.env` の更新については承認不要でいけちゃう（`.envrc` 側の `dotenv` の承認を一度すれば OK）のですよね。\n\nまぁセキュリティ的な怖さの話でいうと\nそもそも git hook を hack されたらアウトなので direnv の問題ではなさそうなのと\n\n意図しない環境破壊の怖さでいうなら direnv に寄せる考え方のほうが考慮点は少なくて済むかなーとは個人的に思いました","ts":"1613546088.347500","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UFHQ7TNT0"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lWs"}]},{"client_msg_id":"63cdb42f-d8ef-4248-a8f5-614c8029a2b1","type":"message","user":"UFHQ7TNT0","text":"direnv に承認させるのであればまあ大丈夫か","ts":"1613545705.342000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"m7dB"}]},{"client_msg_id":"49a1b1a9-c90b-40a7-ab21-905b5e0e2e85","type":"message","user":"UPWFF5YQ7","text":"将来的に `.env` ファイルの更新も `direnv allow` が必要になったりするとひと手間増えますが、それはそれで健全な気もする","ts":"1613545601.341400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"S9lV"}]},{"client_msg_id":"e39dfa0f-9d52-4f77-a2c5-cb8d305b33c0","type":"message","user":"UFHQ7TNT0","text":"実行後に標準出力に結果を流したとしても、エディタとかGUIソフトでブランチを切り替えたとき気付かないから、やっぱり事故りそう。","ts":"1613545588.341000","edited":{"user":"UFHQ7TNT0","ts":"1613545596.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EQJ5"}]},{"client_msg_id":"dfb71016-9f4d-46cf-beb9-db5785c3c5ca","type":"message","user":"UFHQ7TNT0","text":"普通に怖いですね","ts":"1613545493.339600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tOvf"}]},{"client_msg_id":"cbc9a741-62db-48ed-87d6-f4b6d10cbbc1","type":"message","user":"UPWFF5YQ7","text":"一応 direnv と post-checkout の組み合わせで環境変数変えられました。ちょっと意図しない挙動起きないか怖さありますが\n• `.envrc` に `dotenv` を記述して direnv が `.env` から環境変数を読み込むようにしておく\n• post-checkout hook で `.env` の内容を書き換える","ts":"1613542353.339200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MNIF"}]},{"client_msg_id":"bcc76b64-4808-49f5-8f53-be23f6be0c9c","type":"message","user":"U06ECBRTJ","text":"fishっしゅ…","ts":"1613539693.336100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"d6="}]},{"client_msg_id":"43773948-cefe-4c77-ba35-3b8ce476cbf9","type":"message","user":"U03C6TEAZ","text":"なかなか面倒なんですよね。 bash 向け、zsh 向け、それぞれ用意しないといけない。","ts":"1613539592.335900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HTk"}]},{"client_msg_id":"88823b74-a33a-46ae-85f1-66a0e62ecf0a","type":"message","user":"U03C71D7H","text":"普通にそれでよさそうではある","ts":"1613539532.335500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"u5l"}]},{"client_msg_id":"1850365d-f53b-43c2-a326-1bb1a83611aa","type":"message","user":"U03C6TEAZ","text":"ちなみに direnv は PROMPT_COMMAND でディレクトリの変化を確認して発動する仕組みです。","ts":"1613539244.335300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7sP"}]},{"client_msg_id":"1186e67d-bd1d-4c79-b22d-ca809b5fdda8","type":"message","user":"U03C6TEAZ","text":"もしくは bash なんかの `PROMPT_COMMAND` に仕込むしかない。","ts":"1613539166.334700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QpbU"}]},{"client_msg_id":"03c88c0d-1149-47e8-a1cc-427f644bdfe6","type":"message","user":"U03C6TEAZ","text":"git の hook で何かファイルを吐いて、 `source setenv.sh` するなら出来ますが、git checkout の瞬間に自動で環境変数を変えるのは無理。","ts":"1613538625.334300","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UPWFF5YQ7"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SED"}]},{"client_msg_id":"7f9be7b7-5a14-447e-b57c-a1f893c32429","type":"message","user":"U03C6TEAZ","text":"プロセスを起動する様な仕組みでは無理だと思いますよ。","ts":"1613538562.333300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/X0"}]},{"client_msg_id":"F966B265-01B7-49CF-A314-8D00B6426B2F","type":"message","user":"UDDCM376D","text":"一択すね","ts":"1613537164.332700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tIq"}]},{"client_msg_id":"6037052E-37B4-44F3-92D9-BE24510A5F99","type":"message","user":"UDDCM376D","text":"ツール書くなら、それを使うかなと思います","ts":"1613537151.332400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LQ=RL"}]},{"client_msg_id":"84aadccc-48aa-481d-bcc9-12ee79fdb769","type":"message","user":"U7B4ZD49X","text":"シェル上でやるならやりようはありますけど、どっからでもならgit hook一択になりそう","ts":"1613537149.332200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mbXVA"}]},{"client_msg_id":"D8C6011B-FD44-439E-B89E-0920EBF2CD82","type":"message","user":"UDDCM376D","text":"hookはありすね","ts":"1613537141.331800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Vj77r"}]},{"client_msg_id":"614E32CF-11A5-4D42-A2B1-1503CCC8AA78","type":"message","user":"UDDCM376D","text":"前の環境変数を綺麗に削除とか、一工夫必要すね","ts":"1613537131.331300","team":"T03C4RC8V","reactions":[{"name":"desune","count":1,"users":["UPWFF5YQ7"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"n4smu"}]},{"client_msg_id":"dd65f5a5-790a-4b2a-98f7-54cf87333abf","type":"message","user":"UPWFF5YQ7","text":"git hook の話です","ts":"1613537112.330600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jmB"}]},{"client_msg_id":"76933d67-00ae-4fa7-bef3-7b9cd5757e08","type":"message","user":"UPWFF5YQ7","text":"post-checkout を使うのは？","ts":"1613537102.330300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0QA"}]},{"client_msg_id":"856D9396-6927-4F56-9DF3-B2528BC7C30B","type":"message","user":"UDDCM376D","text":"ブランチのチェックアウトとかでも発火するんすかね","ts":"1613537098.330000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4rw5S"}]},{"client_msg_id":"66F13F75-B28C-4DBB-B395-04CEB3A6890B","type":"message","user":"UDDCM376D","text":"direnvってディレクトリ変わったら動くんすよね？","ts":"1613537073.329200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=4ix"}]},{"client_msg_id":"62e44831-15e9-4c43-ab2f-9fec51ed6640","type":"message","user":"U8996GYBF","text":"なんとなく `env/{n}.sh` しておいてどれ読むかdirenvで差し替えるくらいが楽そうな気がした","ts":"1613536319.328700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"n8y2="}]},{"client_msg_id":"39b00cbf-2eb0-4597-8345-70dbe5feb285","type":"message","user":"U8996GYBF","text":"コミットしたらまずい内容なのかな","ts":"1613536244.327600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2Aq7W"}]},{"client_msg_id":"1628fbf4-4531-4b3a-956a-189e3cee3c75","type":"message","user":"U7B4ZD49X","text":"事故る未来が見える","ts":"1613536169.327300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vJkJ"}]},{"client_msg_id":"ccdc306b-f4ac-45be-a36d-a1d1dbaf9fc0","type":"message","user":"U8996GYBF","text":"やりたいこと次第だけど、ブランチ名と対象のスクリプトのmapが必要だから要件満たさないとかあるかも","ts":"1613536154.326900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=8U"}]},{"client_msg_id":"e91594d2-20d7-496f-99f9-e6fb6b31f8ed","type":"message","user":"U8996GYBF","text":"direnvで動的にスクリプトをsourceするようにしたらどうです？","ts":"1613536083.326200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cUl"}]},{"client_msg_id":"941d6d23-ab21-44e3-956b-4b5c984a3f2f","type":"message","user":"U8996GYBF","text":"ちょっと工夫したらできそう","ts":"1613536066.325800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3VUMH"}]},{"client_msg_id":"8387BBAA-9FB3-40FC-B6AB-561FF99564B8","type":"message","user":"UDDCM376D","text":"\u003chttps://twitter.com/gorilla0513/status/1361888675664039936?s=21|https://twitter.com/gorilla0513/status/1361888675664039936?s=21\u003e","ts":"1613536013.325500","attachments":[{"fallback":"\u003chttps://twitter.com/gorilla0513|@gorilla0513\u003e: ブランチごとに環境変数設定してくれるやつないかな\ndirenvのgit版","id":1,"author_name":"ゴリラ@筋トレ始めたい","author_subname":"@gorilla0513","author_link":"https://twitter.com/gorilla0513/status/1361888675664039936","author_icon":"https://pbs.twimg.com/profile_images/1348486174914957314/-RJqWxMK_normal.jpg","text":"ブランチごとに環境変数設定してくれるやつないかな\ndirenvのgit版","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1613534537,"service_name":"twitter","from_url":"https://twitter.com/gorilla0513/status/1361888675664039936?s=21","original_url":"https://twitter.com/gorilla0513/status/1361888675664039936?s=21"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"U7w1G"}]}]
