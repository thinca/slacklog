[{"client_msg_id":"c79e3cef-0863-4345-91f6-1cfaf9c4e2bd","type":"message","user":"UAZ33BKV2","text":"<https://blog.geolonia.com/2020/05/29/imi-tools.html>\nふむ","ts":"1590737009.352700","attachments":[{"fallback":"経産省発の npm モジュール！住所や電話番号の正規化、ジオコーディングなどができる IMI コンポーネントツールを試した！","id":1,"title":"経産省発の npm モジュール！住所や電話番号の正規化、ジオコーディングなどができる IMI コンポーネントツールを試した！","title_link":"https://blog.geolonia.com/2020/05/29/imi-tools.html","text":"経産省がオープンソースで公開した npm モジュールを試してみました。","image_url":"https://blog.geolonia.com/img/20200529/header.jpg","blocks":null,"service_name":"blog.geolonia.com","service_icon":"https://blog.geolonia.com/favicon.ico","from_url":"https://blog.geolonia.com/2020/05/29/imi-tools.html","original_url":"https://blog.geolonia.com/2020/05/29/imi-tools.html"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uNBB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"32e130ff-09be-48c5-b1f6-88aadcfd1653","type":"message","user":"U8996GYBF","text":"書いてて謎にハマったんですけど、なんで `ReadonlyArray.includes()` の型引数ってsearchElementに `T` を取るんですかね・・・？\n```interface ReadonlyArray&lt;T&gt; {\n    /**\n     * Determines whether an array includes a certain element, returning true or false as appropriate.\n     * @param searchElement The element to search for.\n     * @param fromIndex The position in this array at which to begin searching for searchElement.\n     */\n    includes(searchElement: T, fromIndex?: number): boolean;\n}```","ts":"1590751452.354400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dNHw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3a59be28-7e7c-4c80-8b30-cb9557e91be6","type":"message","user":"U8996GYBF","text":"具体的には\n```const foobar = [\"foo\", \"bar\"] as const\nfoobar.includes(\"hoge\")```\nが型エラーで通らないんですけど、includesって要素が存在するかチェックするためにあるメソッドのはずで、この場合 `\"foo\" | \"bar\"` しか引数に取らないのっておかしいと思うんですが","ts":"1590751545.356000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CUXI"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6b7d009d-b0d8-41aa-beee-2782d1e66b06","type":"message","user":"U8R597E9H","text":"でもそのケースってそもそも [“foo”, “bar”] 型だから includes するのがおかしいとも言えそうな気はします。","ts":"1590751728.356400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"p1C7w"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5a1aafe0-7964-4386-9fef-9da57185a6d5","type":"message","user":"U8996GYBF","text":"あー、includesが何故か実装されてるけど使っちゃダメな感じなのかな","ts":"1590751817.356900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pJn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e9038eed-a6c4-469a-89be-923694113a9a","type":"message","user":"U8996GYBF","text":"ダメっていうとおかしいけど、なんというか","ts":"1590751871.357100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zl+S7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"776ebd91-79af-4e05-ab47-c3559425947f","type":"message","user":"U8R597E9H","text":"TypeScript としては「0 番目に foo、1 番目に bar」な配列として見えているので、includes する必要性がなさそうという意味でした。\nでもよく考えたら「値側が “foo” or “bar” であることをチェックしたい」という用途がありうるから必ずしもおかしいとは言えませんでした。","ts":"1590752250.359000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uYP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"51066033-a1dc-475c-950c-1949dd76211c","type":"message","user":"U8996GYBF","text":"ひとまず無理矢理キャストしないとtrueしか返さない感じでしか使えないのはまぁ間違いなさそうですよね、仕方ないから変換して使うかas const消すかだなぁ","ts":"1590752558.360200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"//s9+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2b1e5dba-726d-46a0-bfcb-af53c3644c92","type":"message","user":"U8996GYBF","text":"Neovim側に渡すために型安全の世界を放棄する部分がとても辛い、設計難しいですね","ts":"1590752675.360800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jqRY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0b5484f4-6ef2-49d9-9b98-d7537169c8e5","type":"message","user":"U8996GYBF","text":"```const regexp = /^-add-fzf-args=(\\S+)$/\nreturn args\n  .filter((arg) =&gt; regexp.exec(arg))\n  .map((arg) =&gt; {\n    const match = regexp.exec(arg)\n    return match ? match[1] : \"\"\n  })```\nあとこんな感じのコードを書いてたんですけど、filterでnullableを弾きたいのにmapの中でmatchがnullableになるからtype guardをしないといけないとか、なんかもうちょい綺麗にやりたい","ts":"1590752785.362200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gyB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8f456544-91a7-4864-b7f9-f97d981aec8b","type":"message","user":"U8996GYBF","text":"```  return args\n    .map((arg) =&gt; regexp.exec(arg))\n    .filter((match): match is RegExpExecArray =&gt; match !== null)\n    .map((match) =&gt; match[1])```\nで綺麗にいけた・・・\n学びだ・・・","ts":"1590753411.362500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1CqP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e99cab26-3e6c-4b0a-8b09-610d23f0580e","type":"message","user":"U8R597E9H","text":"_自分、割と躊躇なく as とか使っちゃいますね。_","ts":"1590753596.363100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2QT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"84851e5b-48e9-4618-af88-7a925b05d0ef","type":"message","user":"U8996GYBF","text":"どこまでasするか難しいですよね、確実に安全っぽかったらやっちゃうけど割れ窓になりそうで怖い気持ちも結構","ts":"1590753684.363700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bF6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"191d3022-cea6-4869-bc11-4f829e6d40f3","type":"message","user":"U78A6ESHM","text":"自分もカジュアルにタイプアサーションしちゃいます…。やらないに越したことないんですけども。","ts":"1590753756.364200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+2R"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f4b5ff73-4263-4fb6-9757-d8ad0dec6b93","type":"message","user":"U78A6ESHM","text":"TS compiler api 触ってると、どうやってもやらんといけない場合があった…。","ts":"1590753798.364900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zUkmW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e0e97dcc-b6c1-4aff-8910-e89bd63f8654","type":"message","user":"U8996GYBF","text":"今 `[otherProperty: string]: any // eslint-disable-line @typescript-eslint/no-explicit-any` しないといけない場所が合って辛い思いをしてます","ts":"1590753849.365400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XOth"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"de5220a0-7291-406b-acf4-1d3a4390cef9","type":"message","user":"U8996GYBF","text":"具体的にはユーザから任意のfzfのオプションを受け取るあたりで・・・","ts":"1590753881.365900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"e9F"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"793008b7-0b7f-4874-8148-e3e81698a4e5","type":"message","user":"U78A6ESHM","text":"あーなるほど！","ts":"1590753903.366300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YCPVp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2ea866de-0b48-42d7-8a59-362146f2ba03","type":"message","user":"U78A6ESHM","text":"なんか手打ちで eslint-disable 書くのだるいから、quickfix でエラー出たら、コマンド打ったら自動的に該当行の上に disable-next-line 入れるものを作ろうかと思ったけど、手がつけれてない…。\nそして多用すると怒られるやつ。","ts":"1590754014.368200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MPmWc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6e154897-065b-4cd0-9a52-b7460ec3b6c6","type":"message","user":"U8996GYBF","text":"snippetでいいかと一瞬思ったけど、該当エラーまで入れてくれたら楽ですね、next-lineとlineを選べたらよさそう","ts":"1590754059.368900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iyau"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d7025125-b48f-4c18-adfc-1df4881879ab","type":"message","user":"U78A6ESHM","text":"ですです。該当エラーを明示してくれるやつが欲しいですw","ts":"1590754083.369300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"v=tEV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ae5430a6-7ce6-4812-b235-5bc16d5bef19","type":"message","user":"U78A6ESHM","text":"でも完全に臭いものに蓋をしてる感があるから不便なままの方がいいのかもしれないですねw","ts":"1590754130.369800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"K5mr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
