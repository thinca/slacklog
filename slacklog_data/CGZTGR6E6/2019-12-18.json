[{"client_msg_id":"917764fd-52bf-409b-9536-5dd6dc8b6d4a","type":"message","user":"U03C71D7H","text":"TypeScript の質問いいですか?","ts":"1576666491.110100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nOGW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ffc11b31-270a-4895-a0ab-dc99aded93b1","type":"message","user":"U03C71D7H","text":"Literal Types `type Foo = \"A\" | \"B\" | \"C\";` 的なやつ。これで、特定の string の型が `Foo` の型に代入できるかを実行時に判定する方法って何があるでしょう? できれば `\"A\" \"B\" \"C\"` の部分を DRY にしたい","ts":"1576666664.112000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"W0/V"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ca25329b-e33f-42ea-9771-88e868621e1e","type":"message","user":"U8R597E9H","text":"type は runtime にでてこないのでできません。","ts":"1576666938.112500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UgG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"335974fd-ce18-40cf-90e2-d5c1e1c4e36b","type":"message","user":"U8R597E9H","text":"enum を使うと、ランタイムで値が参照できるので可能です。","ts":"1576666960.113100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"E=9sd"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7f62a200-8c78-46f8-8c90-1949af6c85a1","type":"message","user":"U03C71D7H","text":"enum を使うと今度は string から enum への変換が面倒なんですよねぇ","ts":"1576667031.113600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0jaD4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"10259663-52c9-494c-9757-ecdee92dbbd2","type":"message","user":"U8R597E9H","text":"わかる。enum は同じ型と認識していても string から代入できないんですよね。","ts":"1576667085.114700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aLEsU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e10f3138-4f75-4883-850b-be77fca3b25f","type":"message","user":"U8R597E9H","text":"みんな type と const 並べまくってる印象です。つまり、DRY は捨てている。","ts":"1576667151.115800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SiX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"99f65c51-7cb5-40b5-bb85-2d048ef06141","type":"message","user":"U03C71D7H","text":":cry:","ts":"1576667179.116000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Crh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c8eae90a-f14c-451e-8b87-6e1900f9671d","type":"message","user":"U03C71D7H","text":"型定義からコードが生成できてもいいと思うんだけどなぁ。","ts":"1576667215.116400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nCue"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d443fe5e-f18c-41e2-b1b1-7e2baeccc6b3","type":"message","user":"U03C71D7H","text":"リテラルのみの総和型だったら配列に変換できるだけでも違うのだけど","ts":"1576667240.117000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bBD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bc5a6314-2abb-4130-9182-74f6a0b226d9","type":"message","user":"U8R597E9H","text":"一応、型からランタイムチェックするコードを吐き出すモパッケージもあったりはするようですが、門外漢で申し訳ない。（あんまり推奨されてる空気も感じないです）","ts":"1576667344.118600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RQK"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fd0bb3c1-4838-4148-aac1-66b1dff3a1f8","type":"message","user":"U03C71D7H","text":"むずかしい","ts":"1576667654.118800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Z7/Z"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2335f693-4359-43c6-a01e-c865781f0c66","type":"message","user":"U8R597E9H","text":"よく見るコードです。\n\n```export type HogeStatuses = AStatus | BStatus | CStatus;\nexport type AStatus = 'a';\nexport type BStatus = 'b';\nexport type CStatus = 'c';```\nで、もうチェック側はリテラルで `'a'` って書いちゃう。","ts":"1576667794.120300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pRiBx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"88f758a7-1ee2-402c-bf7d-af4f6aad61bd","type":"message","user":"U03C71D7H","text":"これは型ですよね","ts":"1576667837.121400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"w8dg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"939f1b5c-64cb-4a04-8e6c-552d01ef2006","type":"message","user":"U8R597E9H","text":"もしくは `export const AStatus = 'a';` もたくさん羅列する。僕もこれ本当に嫌いでなんとかなってほしいです。。。enum の型チェック緩和してほしい。（リテラルとして同じならええやろ感。。。）","ts":"1576667842.121600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kOs3W"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d388719b-8557-493c-84e2-a009b47419e5","type":"message","user":"U03C71D7H","text":"型とは別に実行側にも同じ定義を列挙しないといけない","ts":"1576667876.122300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"t=X7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"439cd246-e937-4286-934d-c437a3294349","type":"message","user":"U8R597E9H","text":"`if (argStatus === 'a')` ってチェックする側に書いちゃう感じですね。。。それが嫌な人は `export const A = 'a'` までやってる感じです。","ts":"1576667965.123000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FgO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c2f2e13c-67cd-43f7-a2bc-736271afb44b","type":"message","user":"U8R597E9H","text":"まてよ、\n```export const Statuses = {\n  A: 'a',\n  B: 'b',\n  C: 'c'\n}\nexport type StatusKeys = keyof Statuses;```\nこれなら嬉しくいけるかもしれない。後で試してみよう。","ts":"1576668121.124200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UGTk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"83898fb2-b264-40dc-8cbf-7b029b0b87a4","type":"message","user":"U03C71D7H","text":"keyof だと `\"A\" | \"B\" | \"C\"` になってしまう気が","ts":"1576668353.125400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pNA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8d4425ab-a309-4271-bbc7-21510a261dc6","type":"message","user":"U8R597E9H","text":"あ、そうですね。Statuses[keyof Statuses] ですね。","ts":"1576668472.126400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dFndo"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b8bb7696-a64c-4588-8bae-95708518830c","type":"message","user":"U8R597E9H","text":"あ、しかも typeof も抜けている…","ts":"1576668491.126800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bWh2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f16335b0-5258-4956-b8dd-ea09ed8b631f","type":"message","user":"U8R597E9H","text":"`(typeof Statuses)[keyof typeof Statuses]` おそらくこんな感じな気がしました","ts":"1576669046.129100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AH0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
