[{"client_msg_id":"d5ab3378-dc9c-4e70-8711-b05c4505d24a","type":"message","user":"UDDCM376D","text":"axiosでgetするとい、302返ってくるとブラウザがリダイレクトしてくれないのね。。。。","ts":"1568412722.082000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"86d2e4d3-0c6a-4be9-91c2-e0a03424a441","type":"message","user":"UDDCM376D","text":"<https://github.com/axios/axios/issues/396>","ts":"1568412726.082200","attachments":[{"fallback":"GitHub: 302 received but browser does not redirect. · Issue #396 · axios/axios","id":1,"title":"302 received but browser does not redirect. · Issue #396 · axios/axios","title_link":"https://github.com/axios/axios/issues/396","text":"Use-case: User clicked on the add button at quote page. Add quote request is send async (using Axios) to server. Server check and found user not logon. Server send a redirect 302 back to browser. B...","thumb_url":"https://avatars1.githubusercontent.com/u/32372333?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":420,"thumb_height":420,"from_url":"https://github.com/axios/axios/issues/396","original_url":"https://github.com/axios/axios/issues/396"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5bbf6e09-7d93-4c91-bb67-88739457d392","type":"message","user":"UDDCM376D","text":"ツライ","ts":"1568412729.082500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cda6e606-1a50-4c2b-aa5a-f983806e4f5f","type":"message","user":"UDDCM376D","text":"axios -&gt; server (302でgorillaにリダイレクトしてくれ\nserver -&gt; (302) axios -&gt; gorilla のリソースをとってくるぜ\ngorilla -&gt; (200) axios gorillaからリソースをとってきたぜ","ts":"1568412908.083900","edited":{"user":"UDDCM376D","ts":"1568412983.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4f3c4d33-91d6-43d3-ada7-1fd6c56f6eb0","type":"message","user":"UDDCM376D","text":"らしい","ts":"1568412910.084200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9c2253a6-ed0e-4a47-a837-0c5c93eef108","type":"message","user":"U78A6ESHM","text":"へー。どうしてもリダイレクトしたかったら `axios.interceptors().use()` とかでフックなんですかねぇ。","ts":"1568420785.000900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"42b9b8c7-7754-409b-964f-6493db154674","type":"message","user":"U03C71D7H","text":"Node.js だとしてくれるのか。挙動が統一されてない?","ts":"1568425382.001400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"14810D44-72E6-43DA-A929-DFB6E5A2BD65","type":"message","user":"UDDCM376D","text":"リダイレクトが目的ではなく、セッション切れたらログイン画面にリダイレクトしたかったんですが、401で返して画面側遷移するのも手って書いてあったそれもありだなと思ってその実装にしました","ts":"1568427000.003600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"A0865C8A-41B4-4A2C-A60A-19D2F5CF95AF","type":"message","user":"U78A6ESHM","text":"それは 401 で返した方が良いかと。","ts":"1568428788.004300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"94317461-0edc-40b0-8131-9fff8142d7c4","type":"message","user":"UDDCM376D","text":"ですね","ts":"1568429261.004700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"47014d77-3833-45bf-abf1-799e19dc31ae","type":"message","user":"UDDCM376D","text":"ここらへん知見がなく初めてなので、つまずきながらやっています（ツライ","ts":"1568429286.005300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"50875334-b11b-4c60-834b-ecdcac8ef813","type":"message","user":"U06BRP8VD","text":"APIなら401、HTMLなら302でログイン画面へリダイレクト&amp;ログイン成功後に同URLに戻ってこれる、ってのがよくあるやつ。","ts":"1568429856.006300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"C881E7FA-6885-4856-8F65-8665B834B4C0","type":"message","user":"U78A6ESHM","text":"ですねー。同じのようなのこの前実装しましたw","ts":"1568431061.006900","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d1523b24-824a-4b3c-8a8e-296bd880300f","type":"message","user":"U03C6TEAZ","text":"んー、axios の issue はりダイレクトしない、で正しいんでは。","ts":"1568431432.009100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0e8966cf-799c-4cf8-b5cd-2ac7e1184d62","type":"message","user":"UDDCM376D","text":"axiosは、リダイレクト先のURLにアクセスしてリソースを返す動きになっていますね。","ts":"1568431493.010100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9D61AE2D-3E15-4168-827D-EEB05E712279","type":"message","user":"UFHQ7TNT0","text":"ブラウザ自体のリダイレクトを axios はしないって話だから正しいですね","ts":"1568436009.011900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0ea56981-7552-4fae-84f2-09ed6d33e2bb","type":"message","user":"UDDCM376D","text":"あ、その認識です","ts":"1568436633.012100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"CABEBE53-CBC4-419A-929B-278D0E95B2FB","type":"message","user":"U78A6ESHM","text":"うん。正しい動きです。","ts":"1568437011.012600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b9f73cd2-67ea-43bd-a344-3ed9c2783d07","type":"message","user":"UDDCM376D","text":"確かにその動きは正しいなと思いました","ts":"1568437039.013100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"605B9A2F-3A1A-4F70-B56D-2BB5A4E7C305","type":"message","user":"U78A6ESHM","text":"自分はセッション切れで、ログイン画面遷移の時に元いたページの path をサーバーから一緒に返してもらって、ログイン成功したらそこに飛ばす、path 無ければデフォルトの path にリダイレクトと言う感じにしました。","ts":"1568437241.016300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"74ce3af2-9780-4ec6-9fc6-2e5c6c8faa68","type":"message","user":"UDDCM376D","text":"pathを返すようにするのも考えました\njs側でURLを指定するよりも、もらったパスをそのまま使用するのがそっちのが安全ですかね。","ts":"1568437416.017200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"69DF5672-1D3E-4834-BC9C-40B6101E6EA8","type":"message","user":"UFHQ7TNT0","text":"僕が React で書く時は、401エラーのハンドリングで、ルーターライブラリの props からリクエスト時のパスを取得して、ログインページのURLのクエリ文字列に入れてリダイレクトして、ログイン成功時にクエリがあれば、そちらへリダイレクトさせるみたいな感じの実装してますね","ts":"1568437666.021800","edited":{"user":"UFHQ7TNT0","ts":"1568437721.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"AAAD0C9A-1430-43E8-A790-6FBC0604443A","type":"message","user":"U78A6ESHM","text":"どうでしょうね。私はサーバー側にどこに行って欲しいってのを判断して欲しかったので。","ts":"1568437706.022400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"F2E33922-533E-4485-9BFF-2942979F5F1C","type":"message","user":"U78A6ESHM","text":"クライアント側で実装するのなら、ともやさんの書かれてる通りです。","ts":"1568437754.023300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5D2D5C9E-032C-498F-B389-1BF486E2DDC6","type":"message","user":"UFHQ7TNT0","text":"サーバー側だと確かに heavenshell さんの感じですね（最近サーバー側書いてないから忘れかけてる）","ts":"1568437852.025300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"794FFA0D-A1AB-42EF-8D5B-EF318DC10F29","type":"message","user":"U78A6ESHM","text":"アプリの要件にもよると思いますw スマホアプリとかもある場合なら、サーバー側はステータスだけ返すでしょうしw","ts":"1568438246.030300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0B1EAC70-95B7-4B13-ADB6-871F011EB1A6","type":"message","user":"UDDCM376D","text":"なるほど","ts":"1568438670.030500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
