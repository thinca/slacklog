[{"client_msg_id":"8c48f050-058b-44c4-a5ae-8b163d0ddb5e","type":"message","user":"U8996GYBF","text":"Fernでディレクトリ単位のrenameしたときも複数ファイルに対してcmdlineに確認が何回か出てきて、ちゃんと動いてたような気がする","ts":"1600515959.045800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vhl"}]},{"client_msg_id":"4073603d-5101-496b-b4d2-56ea1a2b0131","type":"message","user":"U8996GYBF","text":"tech-cocか迷ったけどTS以外で動かなさそうな予感がするのでこっちで\n`brew install watchman` しておくとファイル名の変更にvimでもimportがちゃんと追従してくれて感動しました！\n\u0026gt; Rename imports on file rename, require watchman installed in your $PATH.\n","ts":"1600515895.044700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HCL4e"}]},{"client_msg_id":"6e43936e-53af-41b1-816d-844c7f160bc0","type":"message","user":"U8996GYBF","text":"いきなりreduce書くとどうしてもぱっと見の可読性落ちる感じがするからentries考えるようにしよう","ts":"1600513547.041400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sn1M"}]},{"client_msg_id":"038b69f0-13e0-48fa-8da5-408cfd0bbd12","type":"message","user":"U8R597E9H","text":"entires の作例、意外とすごいシンプルにまとまるもんですね。今まで無意識に「使っても複雑なままになりそう」と避けていた節があります。","ts":"1600513509.040900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NRl"}]},{"client_msg_id":"9ec302bf-45ab-4751-b58f-1767c48a245b","type":"message","user":"U8996GYBF","text":"多分非破壊的に書くとしてもreduceよりこっちの方が見やすそうですよね","ts":"1600513459.040000","thread_ts":"1600513120.036000","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5qIE5"}],"root":{"client_msg_id":"2fb9bc9d-2ab2-4a31-9320-1c18e4fb9362","type":"message","user":"U776661HA","text":"よくわかってないけど\n\n```state.items = Object.fromEntries(Object.entries(state.items).map([k, val] =\u0026gt; {\n  return [k, val.filter(v =\u0026gt; v.id !== removedID)];\n}))```","ts":"1600513120.036000","thread_ts":"1600513120.036000","reply_count":1,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UOh"}]}},{"client_msg_id":"9664add0-7dee-4696-ac2b-cb2521cea096","type":"message","user":"U8996GYBF","text":"\u0026gt; パフォーマンス考慮してそういう形になることありますよね。。。自分だと、相当なことがないかぎり、items は FIle[] のままで、File.category を持たして参照時にフィルタしそうですが。\nなんというか、既存の実装の上に乗せる必要があって下手にその辺実装し直すと工数跳ね上がりそうなんですよね・・・\nむずい・・・","ts":"1600513420.039900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RZ/jS"}]},{"client_msg_id":"fbe18a87-302a-4101-97df-27a3d832de5a","type":"message","user":"U8996GYBF","text":"\u003c@U8R597E9H\u003e さんのがimmer素直に使ってる感じがする","ts":"1600513200.038000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1B4"}]},{"client_msg_id":"2f654a2e-da61-4f4e-add0-827413e2d79f","type":"message","user":"U8R597E9H","text":"なんだろう。immer を使ってるのに頑張って非破壊なコードにしようとしている。といいますか。。。","ts":"1600513187.037600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"O1G"}]},{"client_msg_id":"c573c342-43e9-4db9-b678-fcd6dd90ef9a","type":"message","user":"U8R597E9H","text":"```Object.keys(draft.items).forEach(key =\u0026gt; {\n  draft.items[key] = draft.items[key].filter(item =\u0026gt; item.id != removedID);\n});```","ts":"1600513159.036900","thread_ts":"1600513159.036900","edited":{"user":"U8R597E9H","ts":"1600513168.000000"},"reply_count":11,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"E+G6N"}]},{"client_msg_id":"56a84cf5-6b0e-4147-abc6-888b66b8d4f1","type":"message","user":"U776661HA","text":"こういうこと？","ts":"1600513123.036200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0ev6X"}]},{"client_msg_id":"2fb9bc9d-2ab2-4a31-9320-1c18e4fb9362","type":"message","user":"U776661HA","text":"よくわかってないけど\n\n```state.items = Object.fromEntries(Object.entries(state.items).map([k, val] =\u0026gt; {\n  return [k, val.filter(v =\u0026gt; v.id !== removedID)];\n}))```","ts":"1600513120.036000","thread_ts":"1600513120.036000","reply_count":1,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UOh"}]},{"client_msg_id":"40b98833-67c9-47e8-9306-9c4df07fd2eb","type":"message","user":"U8R597E9H","text":"ただ、immer をつかってるならもうちょいかんたんにかけそうかな。","ts":"1600513097.035400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jF3l9"}]},{"client_msg_id":"98acfb71-15c2-4eab-8fc6-4bf047274c83","type":"message","user":"U8R597E9H","text":"パフォーマンス考慮してそういう形になることありますよね。。。自分だと、相当なことがないかぎり、items は FIle[] のままで、File.category を持たして参照時にフィルタしそうですが。","ts":"1600513052.034900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RJXx"}]},{"client_msg_id":"d5294982-f820-4a1f-88b1-36b0ec44e2f6","type":"message","user":"UAZ33BKV2","text":"どの順序で処理するかによりますが、いいんじゃないかと...一度Categoryのmapをmapで作ってから生成も大丈夫でしょうが、途中の処理とかオブジェクト的に効率は悪くなりそう(ただ見やすくなるか?)","ts":"1600513051.034800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xEhd="}]},{"client_msg_id":"c133e781-b53d-4adc-8d71-1172b8bf8c82","type":"message","user":"U8996GYBF","text":"要件的には `items: File[]` だったのが `items: { [category: string]: File[] }` になったんですよね","ts":"1600512981.032700","edited":{"user":"U8996GYBF","ts":"1600513006.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6V83v"}]},{"client_msg_id":"d6054dac-52c7-4a3d-b72d-0d51cf42b99b","type":"message","user":"U8R597E9H","text":"items[cur] がさらに配列なのが少し不思議ですが、僕も reduce しそうです。","ts":"1600512888.031500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OOgm"}]},{"client_msg_id":"69030906-ef04-4054-adff-5883e455a9cf","type":"message","user":"U8996GYBF","text":"試してないけど動くよなこれ・・・","ts":"1600512727.031100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"y+a"}]},{"client_msg_id":"67cfcf68-1872-470d-815b-b1372cebe048","type":"message","user":"U8996GYBF","text":"話変わっちゃうんですけど、Objectのvalueでfilterしたくて昨日immerでこんな感じのコード書いてたんですけど、fromEntriesだともっと分かりやすくかけそう？\n```const removeItemID = '1';\nconst state = {\n  items: {\n    a: [{ id: 1 }, { id: 2 }, { id: 3 }],\n    b: [{ id: 4 }, { id: 5 }, { id: 6 }],\n  },\n};\nreturn produce(state, draft =\u0026gt; {\n  draft.items = Object.keys(state.items).reduce((acc, cur) =\u0026gt; {\n    const items = state.items[cur].filter(v =\u0026gt; v.id !== removeItemId);\n    return { ...acc, [cur]: items };\n  }, {});\n});```","ts":"1600512715.030800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iupI"}]},{"client_msg_id":"2bc5d5fa-bd8e-45d9-ae6a-a9db5a374e55","type":"message","user":"U8996GYBF","text":"ちょっとずつ効率落ちるのが積み重ねられてる","ts":"1600512256.029800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"STc"}]},{"client_msg_id":"d0490bc4-e14f-421c-a19e-630d17ca0f7c","type":"message","user":"UAZ33BKV2","text":"ちょっとつらいなあ","ts":"1600512235.029300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"b+y8"}]},{"client_msg_id":"9847feb4-210f-4d2f-848b-7eac3e8bb161","type":"message","user":"UAZ33BKV2","text":"「苛っ」「苛っ」「苛っ」「苛っ」 == イライラ","ts":"1600512222.029100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"i5X"}]},{"client_msg_id":"880c2e35-5970-413b-b1c9-e1b9563b5a5c","type":"message","user":"U776661HA","text":"一つ一つは小さな「苛っ」だけど、頻度が多いから結果として爆発って感じの辛さだ....","ts":"1600512200.028700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SD6"}]},{"client_msg_id":"7c7ec00e-4801-4097-aa0f-be681fb887f4","type":"message","user":"UAZ33BKV2","text":"\u003chttps://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries\u003e\nしろってことかしらん....?","ts":"1600512178.028100","attachments":[{"fallback":"MDN Web Docs: Object.fromEntries()","id":1,"title":"Object.fromEntries()","title_link":"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries","text":"Object.fromEntries() メソッドは、キーと値の組み合わせのリストをオブジェクトに変換します。","thumb_url":"https://developer.mozilla.org/static/img/opengraph-logo.72382e605ce3.png","blocks":null,"service_name":"MDN Web Docs","service_icon":"https://developer.mozilla.org/static/img/favicon144.e7e21ca263ca.png","thumb_width":600,"thumb_height":600,"from_url":"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries","original_url":"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VkPw"}]},{"client_msg_id":"06c54b5e-0c1b-483a-8ddf-79c2a58078f1","type":"message","user":"U78A6ESHM","text":"あるあるすぎてめっちゃ辛そう","ts":"1600512161.027700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fLh"}]},{"client_msg_id":"a5872723-5fe1-43c5-b92c-51b51ade5729","type":"message","user":"U8996GYBF","text":"昨日Mapって書いたらimmutableのMapをimportしてくれなくてJSのMapになってハマりました","ts":"1600512148.027200","team":"T03C4RC8V","reactions":[{"name":"totemoturai","count":1,"users":["U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8UNb5"}]},{"client_msg_id":"b9659391-2e91-4bc9-a22a-791f7d266cb4","type":"message","user":"U776661HA","text":"`Set` は使う","ts":"1600512139.026900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"A9O"}]},{"client_msg_id":"ae32b7de-cf46-41e0-8fec-b0f67e8243ec","type":"message","user":"U776661HA","text":"`Map` はシンタックスがあればもっと使ったのに...","ts":"1600512125.026500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MbOE"}]},{"client_msg_id":"215612e1-825f-45ce-9507-01cba93b1a82","type":"message","user":"U776661HA","text":"`object` だとおもったら `Map` で辛い気持ちと同じか","ts":"1600512112.026100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Erk3C"}]},{"client_msg_id":"584edfa8-0ebc-4d2a-8085-223d486d8a7d","type":"message","user":"U8996GYBF","text":"TSの型情報は多分そんなに落ちてないような気がします、今のところクリティカルに困ってはない","ts":"1600512102.025800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3vUZ"}]},{"client_msg_id":"9355ceea-2530-48df-8342-0b4a7f4d20b0","type":"message","user":"U8996GYBF","text":"あ、Arrayっぽいものが大半immutableのListなんですけどたまにArrayだったりとかあるんですよね・・・","ts":"1600512065.025000","edited":{"user":"U8996GYBF","ts":"1600512080.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cek"}]},{"client_msg_id":"3a8cb5db-f45f-4bbd-be3e-c4931539e118","type":"message","user":"U78A6ESHM","text":"Immutable.js TS の型情報ズッポリすり落ちた気がしてたんですけど、今はそんなことないんですか？","ts":"1600512031.024300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dEbk"}]},{"client_msg_id":"3522b908-5154-4300-9eed-d51d4cb86f8d","type":"message","user":"UAZ33BKV2","text":"JavaScriptの中でimmutableをmutableにするというオペレーションがいままで思いいたっていなかったので、なんという名前が最適か、まったく :wakaranai:","ts":"1600512019.023900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Leh=E"}]},{"client_msg_id":"31a4e815-dbbd-44b8-873c-712d6fe0193a","type":"message","user":"U8996GYBF","text":"今何扱ってるのか分からなくなるだけでリソース持っていかれる感じなんですよね、TSでこれだからJSなら100%キレてた","ts":"1600511987.022600","team":"T03C4RC8V","reactions":[{"name":"totemoturai","count":1,"users":["U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aSaDo"}]},{"client_msg_id":"4b6ab10b-d3cd-461e-b7a4-34ea26e37fab","type":"message","user":"U78A6ESHM","text":"Immutable じゃなくハマったの一度あったけど、大抵は Object.assign 相当で事足りる…","ts":"1600511984.022500","team":"T03C4RC8V","reactions":[{"name":"sorena","count":1,"users":["U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"b+=t"}]},{"client_msg_id":"7806e561-9638-45da-881e-780dbdbc82a2","type":"message","user":"U776661HA","text":"Immutable とか BigNumber とかの問題って演算しオーバーロードがない言語だと表記ブレが辛いってところだと思っていた","ts":"1600511944.020700","edited":{"user":"U776661HA","ts":"1600511955.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"euL"}]},{"client_msg_id":"e679bc99-ef7c-4ca5-aa99-5126d7edf6ad","type":"message","user":"U9S4G0LJW","text":"toJSONだと文字列返ってくるの想像してしまう","ts":"1600511933.020200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TZD"}]},{"client_msg_id":"c424c4af-7ddc-4892-8b1c-1a2a5dd18e84","type":"message","user":"U8996GYBF","text":"console.logしたときまともに見れないし","ts":"1600511925.019900","team":"T03C4RC8V","reactions":[{"name":"totemoturai","count":1,"users":["U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KlI"}]},{"client_msg_id":"328df613-ae6c-4739-b820-e8a20556c179","type":"message","user":"U9S4G0LJW","text":"オブジェクト返すならtoMutableとかにしてほしい","ts":"1600511922.019700","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":1,"users":["U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bpp"}]},{"client_msg_id":"6c8f164f-d744-4107-9464-b4a3b2e7e39c","type":"message","user":"U78A6ESHM","text":"わかる。","ts":"1600511916.019300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+Z="}]},{"client_msg_id":"898f2b49-20b1-4285-9d1e-f4cd9bcba786","type":"message","user":"U8996GYBF","text":"なんか致命的にクソってわけでもないとは思うんだけど、単純に開発体験が落ちてる感じ","ts":"1600511910.018700","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8E+jJ"}]},{"client_msg_id":"b4b01f16-c961-4b4a-b719-1617ff92cdee","type":"message","user":"U776661HA","text":"文字列を返して欲しい感じがある","ts":"1600511874.017600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"o0yA"}]},{"client_msg_id":"4d15b188-4a40-4e16-87a0-580c55d4e96f","type":"message","user":"U776661HA","text":"toJSON がオブジェクト返すのちょっとくすぐったい","ts":"1600511867.017400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GbD"}]},{"client_msg_id":"abbce115-8477-43b7-95cc-fec3c698a016","type":"message","user":"U78A6ESHM","text":"Facebook 製のフロントエンド割と好きだけど、Immutable.js お前だけはダメだ。","ts":"1600511852.017000","team":"T03C4RC8V","reactions":[{"name":"goodpoem","count":1,"users":["U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+U87"}]},{"client_msg_id":"8a224ce0-408c-4874-98f9-c5f450eecd3c","type":"message","user":"U78A6ESHM","text":"toJS か。","ts":"1600511821.016400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yOABl"}]},{"client_msg_id":"dce15eb5-f057-4272-9d8e-01533d31f2db","type":"message","user":"U776661HA","text":"Notation","ts":"1600511815.016100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cxt"}]},{"client_msg_id":"ec721838-ceb2-48ce-9574-799479b5d509","type":"message","user":"U9S4G0LJW","text":"JavaScriptObjectNotation","ts":"1600511812.015800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TwtN"}]},{"client_msg_id":"0963517c-0317-448f-b61d-fb353e5f9f40","type":"message","user":"U78A6ESHM","text":"せや全部 toJSON したらええんや！(immutable.js の意味ないしコストかかるだけ)","ts":"1600511811.015600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8HJrm"}]},{"client_msg_id":"b1503805-fe9f-4433-8374-c4bccfc69c13","type":"message","user":"U8996GYBF","text":"toJSもあるみたいで、違いを探してるけどよく分からない","ts":"1600511810.015500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GKA8t"}]},{"client_msg_id":"9a83be98-c0ae-46d9-afd6-de315f860e3a","type":"message","user":"U776661HA","text":"JSON の N ってなんなんだろう","ts":"1600511799.015100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bCxp"}]},{"client_msg_id":"ae944734-9242-4d3e-bb19-dd1c24be3cee","type":"message","user":"U8996GYBF","text":"ImmutableのListやMapが持ってるのもtoJSONのはずで、Entityをclassで定義してて中のプロパティがImmutable or class with Immutableなんで、toJSON書く感じです","ts":"1600511709.014200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ITi"}]},{"client_msg_id":"9fc617a0-8f7b-4d4e-b285-3cf73fbf0ab2","type":"message","user":"U776661HA","text":"`ON` おおくね？w","ts":"1600511662.013200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Qjne"}]},{"client_msg_id":"ab4334b1-e1b7-4958-9b6e-f9b65e50941d","type":"message","user":"U776661HA","text":"JS のオブジェクトに変換する関数が `toJSON` ?","ts":"1600511652.012900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Uyb"}]},{"client_msg_id":"4c3ae7b0-51e2-44fc-9ef1-d9bb14779597","type":"message","user":"U8996GYBF","text":"最終的にJSのオブジェクトに変換して使う時に `parent.toJSON()` するんですけど、 `toJSON` の実装が `this.children.map(child =\u0026gt; child.toJSON())` みたいにネストして全部 `toJSON` 書いてたりで、剥がすの大変そうですよね","ts":"1600511575.012500","edited":{"user":"U8996GYBF","ts":"1600511590.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"i86/F"}]},{"client_msg_id":"bee910a2-30f6-4667-a380-8e7d2ad8d9e6","type":"message","user":"U8996GYBF","text":"剥がすコストが高すぎて辛いのはDDDライクになっててエンティティが別リポジトリのnpm packageになってるんですけど、そっちがimmutable全依存","ts":"1600511431.010800","team":"T03C4RC8V","reactions":[{"name":"totemoturai","count":1,"users":["U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BQ0ZC"}]},{"client_msg_id":"67f19c9f-af18-47ee-802d-227a76b09821","type":"message","user":"U776661HA","text":"本当の immutable はもういらない...","ts":"1600511375.010000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"B9F8"}]},{"client_msg_id":"66c12109-3a2e-476c-8268-2eb552cd04ab","type":"message","user":"U776661HA","text":"それな","ts":"1600511365.009600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZasXa"}]},{"client_msg_id":"13f43040-2f43-4c55-bea9-267247f5650f","type":"message","user":"U8996GYBF","text":"全部TSになってるんでそもそもtscがReadonly弾いてくれるだけで多分十分なんですよね・・・","ts":"1600511357.009400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+nus"}]},{"client_msg_id":"9cc026a3-ac39-45be-9de5-9eb3063290bc","type":"message","user":"U8996GYBF","text":"今後のコードは `ReadonlyArray\u0026lt;Foo\u0026gt;` にしつつimmer併用しよう、って話してそうなりそうです","ts":"1600511329.008900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NBxrj"}]},{"client_msg_id":"f55793f8-0f0f-4d7e-9088-566c91c79812","type":"message","user":"U776661HA","text":"意識コスト辛そう","ts":"1600511310.008500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EkO"}]},{"client_msg_id":"5854f79e-023b-4839-b745-208f44b2e371","type":"message","user":"U8996GYBF","text":"たまに面倒なのか委託の人に任せたコードに混ざってるのかで `Map\u0026lt;Foo, List\u0026lt;Bar\u0026gt;\u0026gt;` と `Map\u0026lt;Foo, Bar[]\u0026gt;` みたいになってたりするんですよね","ts":"1600511271.007800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OBWt/"}]},{"client_msg_id":"d420b287-dda9-403f-8e86-39aa84f8375b","type":"message","user":"U8996GYBF","text":"あと普通の配列かimmutableなのかに意識割くのにコストかかってる気がする","ts":"1600511167.006600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4RP"}]},{"client_msg_id":"10a46026-bc3d-4d09-8a57-36eb0ef983e4","type":"message","user":"U8996GYBF","text":"なんだろう、今だと普通の配列なら分かることをいちいち調べるのが結構だるいですね","ts":"1600511142.006000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"g/Hv"}]},{"client_msg_id":"cd676a1b-a083-45fa-8362-ec969c0701e7","type":"message","user":"U776661HA","text":"的な辛さ？","ts":"1600511068.005000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OlJ"}]},{"client_msg_id":"284fe190-71de-484c-8e0e-0db86bca9cd5","type":"message","user":"U776661HA","text":"`a.add(b, c.add(d, e.mul(f, h)))`","ts":"1600511052.004800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rIfb6"}]},{"client_msg_id":"8289AC02-ED67-4E7C-9C0C-446AE7C3B50C","type":"message","user":"U8996GYBF","text":"転職して丁度immutableが負債になってる現場なんですけどマジで辛い","ts":"1600510937.004100","team":"T03C4RC8V","reactions":[{"name":"totemoturai","count":1,"users":["U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UFsO"}]},{"client_msg_id":"ba19bbe8-1e51-4352-9f71-caf2c418050d","type":"message","user":"U8996GYBF","text":"ちなみにこれ、immer的に `draft.items[key].filter(item =\u0026gt; item.id != removedID);` の部分は `state.items` と `draft.items` のどっちがいいとかあったりするんですかね？","ts":"1600513839.041500","thread_ts":"1600513159.036900","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"D1bW"}]},{"client_msg_id":"8c4694c7-a586-4bf7-a8d5-598ceb69423b","type":"message","user":"U8R597E9H","text":"基本的に draft しか触ってはいけません。","ts":"1600514042.041700","thread_ts":"1600513159.036900","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Vjko3"}]},{"client_msg_id":"2f77007b-3c80-4ffe-98f7-f2218c7e49fb","type":"message","user":"U8996GYBF","text":"あ、そうなんですね","ts":"1600514055.041900","thread_ts":"1600513159.036900","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"z+mi"}]},{"client_msg_id":"05d66b12-89e0-4344-920f-1bb87ec2bfec","type":"message","user":"U8R597E9H","text":"参照だけなら正直 draft じゃなくてもいいっちゃいいんですけどね。あまりいい作法ではないと思います。","ts":"1600514076.042100","thread_ts":"1600513159.036900","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"p2u"}]},{"client_msg_id":"053ab9ca-cb53-4afb-83bc-f26ff2650fac","type":"message","user":"U8996GYBF","text":"Readonlyで完全に元の状態であることを保証してくれるstateに触りたくなる感じがしたので気になってました","ts":"1600514084.042300","thread_ts":"1600513159.036900","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pyrjA"}]},{"client_msg_id":"da53a5ba-2275-44c8-bbf9-a13827f12c54","type":"message","user":"U8R597E9H","text":"なるほど。。。破壊的な変更をしつつ、破壊前の値も破壊後に見たい。みたいなケースは僕は知らないので、その限りではないかもしれません。。。","ts":"1600514126.042500","thread_ts":"1600513159.036900","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"C3xAV"}]},{"client_msg_id":"1d476d7f-9e0e-4458-ac49-f1230a2e1362","type":"message","user":"U8996GYBF","text":"でも基本draftでよさそうな気がするのでそうするようにします、最悪事前に\n`const foo = { ...draft.foo }` でいけますよね","ts":"1600514213.042700","thread_ts":"1600513159.036900","edited":{"user":"U8996GYBF","ts":"1600514221.000000"},"parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0/y3T"}]},{"client_msg_id":"9dafed98-e0e9-488a-b531-fc9c3fd713f5","type":"message","user":"U8R597E9H","text":"foo がプリミティブしか含んでないならそれでいけます！","ts":"1600514256.043000","thread_ts":"1600513159.036900","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LOC+"}]},{"client_msg_id":"9b1d3fb1-d70d-419d-b648-8d83336b0c84","type":"message","user":"U8996GYBF","text":"あー、プリミティブしか触りたくないな・・・","ts":"1600514279.043200","thread_ts":"1600513159.036900","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"S0l6J"}]},{"client_msg_id":"9e816b43-0bbc-41ae-be50-9efb9e04f86b","type":"message","user":"U8R597E9H","text":"↑にもありますが、本当に必要であれば「参照だけであれば」state 触るのも許容かもしれません。","ts":"1600514331.043400","thread_ts":"1600513159.036900","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cI+2"}]},{"client_msg_id":"b96f25a5-f578-4d2c-8a09-23c99c2dbab5","type":"message","user":"U8R597E9H","text":"かなりレアケースな気はします。","ts":"1600514335.043600","thread_ts":"1600513159.036900","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UwPP8"}]}]
