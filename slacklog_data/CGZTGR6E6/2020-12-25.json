[{"client_msg_id":"110397c4-f899-4aeb-93e1-49b47c8c7dad","type":"message","user":"U8R597E9H","text":"件数がめっちゃ多い場合があるなら、react-window 使います。（そもそも DOM を減らしたい。。。）","ts":"1608891923.293700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QKOG"}]},{"client_msg_id":"841e12c5-fb22-42bf-a6a8-3276342bdc41","type":"message","user":"U8R597E9H","text":"リストの中身の件数がたかが知れてるなら css で対応しちゃいますね。","ts":"1608891900.293200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lwa"}]},{"client_msg_id":"f12fd670-0ce6-44be-90ea-7786d910b58a","type":"message","user":"U8996GYBF","text":"今更ですが、さっきの問題（ちょっと面倒な）CSSだけで一応実現は不可能じゃないんですけどこういう場合ってどっち選びますかねぇ\nrenderのメモ化も管理追加したくないし・・・","ts":"1608890987.292800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OwdCP"}]},{"client_msg_id":"e12ba73a-6709-4cba-8741-9b3712e95dea","type":"message","user":"U78A6ESHM","text":"ですね…。","ts":"1608889422.291900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bo2qX"}]},{"client_msg_id":"8650616d-fced-4e86-8687-5286cd22573a","type":"message","user":"U8R597E9H","text":"この辺、難しいですよね。チリツモで重くなってくし。。。","ts":"1608889198.291600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6V7pX"}]},{"client_msg_id":"dbdb6c17-c6c6-4932-b960-2cc84e9213ce","type":"message","user":"U78A6ESHM","text":"\u003chttps://recruit-tech.co.jp/blog/2018/09/19/react_spa_performance_tuning/\u003e\n\u003chttps://recruit-tech.co.jp/blog/2020/02/14/performance-and-refactoring/\u003e","ts":"1608889016.290600","edited":{"user":"U78A6ESHM","ts":"1608889064.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5ObLl"}]},{"client_msg_id":"df307f0c-ccce-4b3a-9760-75e82fec7a87","type":"message","user":"U78A6ESHM","text":"maxmellon さんの記事めっちゃ読みまくりましたw","ts":"1608889001.290300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jnte"}]},{"client_msg_id":"f6d83ee0-4e6e-46a1-9944-77969edd2be0","type":"message","user":"U8R597E9H","text":"以前は無限スクロール対応してなかった気がするけど、いまの react-window は動くのか。。。","ts":"1608888893.289900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NLTYt"}]},{"client_msg_id":"dbe99830-b7e9-470a-8d15-6ac9abaf6c83","type":"message","user":"U8R597E9H","text":"固定領域内でスクロールするリスト UI なら react-window 一択なイメージを持っているｗ","ts":"1608888864.289500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QBLrj"}]},{"client_msg_id":"d74d7361-e940-467f-8319-aecd280090f3","type":"message","user":"U8996GYBF","text":"再レンダリング、人間が管理する限界がかなりきつい気がしてます","ts":"1608888837.288900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qgFBa"}]},{"client_msg_id":"a98c57f4-3fc9-4136-b3cd-a99cf0222e14","type":"message","user":"U78A6ESHM","text":"React の辛いところは再レンダリング周りの調整な気がしてるw 空気を吸うように最適化できるスキルが欲しい","ts":"1608888782.288400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WnMHc"}]},{"client_msg_id":"581039df-d83a-442d-a1c3-3d439368ffd5","type":"message","user":"U78A6ESHM","text":"react-intl は使ったことがないので何もわかりませんw react-i18next ばっかり。","ts":"1608888738.287700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ollei"}]},{"client_msg_id":"bedfd3ec-5987-4040-91be-2d9202e16476","type":"message","user":"U8996GYBF","text":"React辛いですね、ちょっと上の方の問題はreact-windowで試してみます","ts":"1608888726.287500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rFF"}]},{"client_msg_id":"62e30290-15ad-4817-a4eb-72a3385fdd8d","type":"message","user":"U8R597E9H","text":"\u003chttps://danbovey.uk/react-infinite-scroller/demo/\u003e\n↑ これとかは、固定の領域じゃないけど無限スクロールしているやつです。","ts":"1608888700.287000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xVY7A"}]},{"client_msg_id":"12f4d789-e730-4b26-93e5-bf863cc9f2b4","type":"message","user":"U8996GYBF","text":"別のところでハマっててreact-intlでstringだけ取得する方法がよく分からない・・・\n動的にstringだけ返す関数作りたいんだけど・・・","ts":"1608888676.286300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/fBN"}]},{"client_msg_id":"14323c52-2216-4113-b259-c281c09581d4","type":"message","user":"U78A6ESHM","text":"お。なるほど。","ts":"1608888641.285600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Heh5"}]},{"client_msg_id":"05f5d305-7eeb-4550-b311-c81a4a4b39a0","type":"message","user":"U8R597E9H","text":"ああ、モーダル内部の特定の領域でやる話ならいけそうです！","ts":"1608888621.285200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"a9K"}]},{"client_msg_id":"77e8bdf4-37a7-458f-958d-9a28dafb258f","type":"message","user":"U8R597E9H","text":"上の例も、仮想スクロールする領域自体は固定幅っぽいですね。","ts":"1608888609.284800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+LFU"}]},{"client_msg_id":"dc5150f4-63b5-4686-ba2a-0b01e787cff3","type":"message","user":"U8996GYBF","text":"Material UIでmodal出して検索させてるんですが、その中のdivにoverflow-y設定してinfinite scrollしてます","ts":"1608888586.284300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HZP"}]},{"client_msg_id":"15c805c7-67ae-464e-ad8f-c1a8998d7e0a","type":"message","user":"U8R597E9H","text":"実は react-window 歯科まともに触ってないし、固定幅の領域にしか適用したことないかもしれない。","ts":"1608888562.283600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9km"}]},{"client_msg_id":"6a0fb6d7-bd70-471e-ad24-eaca24896304","type":"message","user":"U78A6ESHM","text":"\u003chttps://github.com/bvaughn/react-window#can-i-lazy-load-data-for-my-list\u003e","ts":"1608888556.283100","attachments":[{"fallback":"GitHub: bvaughn/react-window","id":1,"title":"bvaughn/react-window","title_link":"https://github.com/bvaughn/react-window#can-i-lazy-load-data-for-my-list","text":"React components for efficiently rendering large lists and tabular data - bvaughn/react-window","thumb_url":"https://avatars3.githubusercontent.com/u/29597?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/bvaughn/react-window#can-i-lazy-load-data-for-my-list","original_url":"https://github.com/bvaughn/react-window#can-i-lazy-load-data-for-my-list"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"p7pSA"}]},{"client_msg_id":"8daa1516-c655-4b5b-8e77-98a9317ee853","type":"message","user":"U8R597E9H","text":"virtualized も基本は virtual scroll する領域が固定サイズ想定だった気がします。いけるのかな。","ts":"1608888535.282200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YNuEu"}]},{"client_msg_id":"fdbc133b-3252-4da8-8e20-afb7c14f396c","type":"message","user":"U78A6ESHM","text":"実は virtualized しか使ったことない","ts":"1608888463.281400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"isP3R"}]},{"client_msg_id":"34908370-793b-4c3a-abee-8f3e6e4a0c68","type":"message","user":"U78A6ESHM","text":"お。なるほど。となると virtualized の方がいいのかな。","ts":"1608888448.281100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jrwd"}]},{"client_msg_id":"31c207b0-429e-4f90-9fa0-266a622bfba7","type":"message","user":"U8R597E9H","text":"react-window は名前の通り、ウィンドウ的に区分けされた領域じゃないと適用しづらそうです。もし Google 検索結果みたいな、下にどんどん伸びていくやつなら難しいかもしれない。","ts":"1608888392.280600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=hkA/"}]},{"client_msg_id":"fde93572-1fa5-4187-abb8-810f13c9c3a6","type":"message","user":"U8R597E9H","text":"ホバーでレンダーする範囲を、ホバー対象だけにしたい。だけであれば、後者がよさそうです。","ts":"1608888337.279700","edited":{"user":"U8R597E9H","ts":"1608888352.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=qzz"}]},{"client_msg_id":"468262f8-55d0-42e9-9e07-d3124941679d","type":"message","user":"U78A6ESHM","text":"自分も hrsh7th さんがおっしゃるような作りにすると思います。","ts":"1608888286.278700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rZJk"}]},{"client_msg_id":"a587660d-cd6f-4c0b-a65f-ba54a4b171fc","type":"message","user":"U8R597E9H","text":"そうですね。リスト側で react-window 導入するか、`\u0026lt;img\u0026gt;` 一個一個をコンポーネントにして、そっちで hover 時の表示切り替えを実装するかになりそうですね。","ts":"1608888244.277900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8/u0u"}]},{"client_msg_id":"07caabc4-18b9-40f2-8faa-3581adc9ffe3","type":"message","user":"U78A6ESHM","text":"ですです \u0026gt; 前者\n後者はどっちも同じ作者で、virtualized が先です(割と古い)、作者は react-window 勧めますね。\n無限スクロールならなおさら、どっちか入れるのをお勧めします！とりあえず react-window 入れてみて試してみるのが良いかと。","ts":"1608888199.277100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"euJrN"}]},{"client_msg_id":"dc4d3201-550c-4f09-8b4e-5eb922e90146","type":"message","user":"U8R597E9H","text":"ステートをリストのレベルで持つと、再レンダリングはリストの単位になりそうですね。","ts":"1608888185.276700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5Ou"}]},{"client_msg_id":"4b68cf34-a341-4b92-96c4-d1cf22cc678e","type":"message","user":"U8996GYBF","text":"後者のパッケージ、両方入ってないならどっちがおすすめとかあるでしょうか\n細かい話だとwaypointでinfinite scrollさせつつ検索結果下に伸ばしていく感じになってます","ts":"1608887882.274400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"I8v"}]},{"client_msg_id":"0a18a9de-fc37-410f-b52a-808e5414717c","type":"message","user":"U8996GYBF","text":"\u003c@U78A6ESHM\u003e 前者はrenderItemでurlを受け取って自分をrenderした結果をuseMemoしておいて返すコンポーネントって感じですかね\n後者は知見不足だけど入れた方がいいなぁこれ・・・","ts":"1608887810.273300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"o2ZI8"}]},{"client_msg_id":"06181777-b436-4cee-8ca3-f054a62d9120","type":"message","user":"U8996GYBF","text":"大まかにこんな感じのコードです","ts":"1608887587.271700","files":[{"id":"F01HT3PAHFE","created":1608887586,"timestamp":1608887586,"name":"______.ts","title":"無題","mimetype":"text/plain","image_exif_rotation":0,"filetype":"typescript","pretty_type":"TypeScript","user":"U8996GYBF","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":392,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F01HT3PAHFE/______.ts","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F01HT3PAHFE/download/______.ts","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U8996GYBF/F01HT3PAHFE/______.ts","permalink_public":"https://slack-files.com/T03C4RC8V-F01HT3PAHFE-b6d7317d7f","edit_link":"https://vim-jp.slack.com/files/U8996GYBF/F01HT3PAHFE/______.ts/edit","preview":"export const ImgList = ({ urls }: Props) =\u003e {\n  const renderItem = (url: string) =\u003e {\n    return (\n      \u003c\u003e\n        \u003cimg src={url} /\u003e","preview_highlight":"\u003cdiv class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text/plain',window.getSelection().toString().replace(/\\u200b/g,''));event.preventDefault();event.stopPropagation();}\"\u003e\n\u003cdiv class=\"CodeMirror-code\"\u003e\n\u003cdiv\u003e\u003cpre\u003e\u003cspan class=\"cm-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"cm-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"cm-def\"\u003eImgList\u003c/span\u003e \u003cspan class=\"cm-operator\"\u003e=\u003c/span\u003e ({ \u003cspan class=\"cm-def\"\u003eurls\u003c/span\u003e }: \u003cspan class=\"cm-type\"\u003eProps\u003c/span\u003e) \u003cspan class=\"cm-operator\"\u003e=\u0026gt;\u003c/span\u003e {\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e  \u003cspan class=\"cm-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"cm-def\"\u003erenderItem\u003c/span\u003e \u003cspan class=\"cm-operator\"\u003e=\u003c/span\u003e (\u003cspan class=\"cm-def\"\u003eurl\u003c/span\u003e: \u003cspan class=\"cm-type\"\u003estring\u003c/span\u003e) \u003cspan class=\"cm-operator\"\u003e=\u0026gt;\u003c/span\u003e {\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e    \u003cspan class=\"cm-keyword\"\u003ereturn\u003c/span\u003e (\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e      \u003cspan class=\"cm-operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"cm-operator\"\u003e\u0026gt;\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e        \u003cspan class=\"cm-operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"cm-variable\"\u003eimg\u003c/span\u003e \u003cspan class=\"cm-variable\"\u003esrc\u003c/span\u003e\u003cspan class=\"cm-operator\"\u003e=\u003c/span\u003e{\u003cspan class=\"cm-variable-2\"\u003eurl\u003c/span\u003e} \u003cspan class=\"cm-string-2\"\u003e/\u0026gt;\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n","lines":26,"lines_more":21,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"svd"}]},{"client_msg_id":"e37eea0e-9641-41e2-8fec-aaa1e989fe00","type":"message","user":"U78A6ESHM","text":"自分がやるなら img 一つを描画するコンポーネントを切り出して、そいつを useMemo して効果あるか見そう。ついでに img のリストは react-virtualized か react-window で描画領域を限定させて効果があるか見ると思います。","ts":"1608887566.271600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kc/O"}]},{"client_msg_id":"c1fc4628-0985-4c25-be19-e2c9bc818b49","type":"message","user":"UKHUVMBJR","text":"カスタムデータ属性とか…（ぇ\n\u003chttps://qiita.com/arowM/items/e1af320e2755461649a0#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%83%87%E3%83%BC%E3%82%BF%E5%B1%9E%E6%80%A7\u003e","ts":"1608887440.269600","attachments":[{"fallback":"Qiita: 現代開発者のためのCSS基礎技術 - Qiita","id":1,"title":"現代開発者のためのCSS基礎技術 - Qiita","title_link":"https://qiita.com/arowM/items/e1af320e2755461649a0#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%83%87%E3%83%BC%E3%82%BF%E5%B1%9E%E6%80%A7","text":"ウェブアプリケーション開発における、現代的なCSSの基礎技術についてまとめました。 ちまたには「CSSとは何か」を学ぶ教材はたくさんあっても、「CSSをどうやってうまく使うか」についてはあまり詳しく触れられません。 仕様をたくさん記憶...","image_url":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-1.2.2\u0026w=1200\u0026mark=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D380%26txt%3D%25E7%258F%25BE%25E4%25BB%25A3%25E9%2596%258B%25E7%2599%25BA%25E8%2580%2585%25E3%2581%25AE%25E3%2581%259F%25E3%2582%2581%25E3%2581%25AECSS%25E5%259F%25BA%25E7%25A4%258E%25E6%258A%2580%25E8%25A1%2593%26txt-color%3D%2523333%26txt-font%3DHiragino%2520Sans%2520W6%26txt-size%3D54%26txt-clip%3Dellipsis%26txt-align%3Dcenter%252Cmiddle%26s%3Dd55554428a587a9865b4b023db75ae92\u0026mark-align=center%2Cmiddle\u0026blend=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D500%26txt%3D%2540arowM%26txt-color%3D%2523333%26txt-font%3DHiragino%2520Sans%2520W6%26txt-size%3D45%26txt-align%3Dright%252Cbottom%26s%3D432c56066f1be0e3eacc03372e0bec6b\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=44105e26477f9311854ae444f54c3ccc","blocks":null,"service_name":"Qiita","service_icon":"https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png","from_url":"https://qiita.com/arowM/items/e1af320e2755461649a0#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%83%87%E3%83%BC%E3%82%BF%E5%B1%9E%E6%80%A7","original_url":"https://qiita.com/arowM/items/e1af320e2755461649a0#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%83%87%E3%83%BC%E3%82%BF%E5%B1%9E%E6%80%A7"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+Yiq"}]},{"client_msg_id":"8d43d138-4b09-495d-a37b-383e426c929b","type":"message","user":"U8996GYBF","text":"imgのリストがあってhoverしたときに表示を切り替える処理を走らせたい（例えばclassNameを追加）んですけど、再レンダリングを抑制するためにどう書くべきか悩んでます。CSSのみでの回避は一旦できないとしてください。\nuseMemoでリストのレンダリング結果をキャッシュしてるんですけど、何番目がhoverされてるみたいなstateをコンポーネントに持たせてuseMemoのdepsに入れるとhoverの度に全部再レンダリングされるんじゃないかと思ってます。\nrender結果のキャッシュするときにReact.Memo（ほぼ使ったことない）使うのかなーとか思ったんですが、どういう対応ができそうでしょう。","ts":"1608887313.269100","edited":{"user":"U8996GYBF","ts":"1608887324.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ND7m"}]}]
