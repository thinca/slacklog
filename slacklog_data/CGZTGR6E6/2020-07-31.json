[{"client_msg_id":"3c3d0fd5-9eab-480e-a7a0-efea9b4a3cdb","type":"message","user":"U8996GYBF","text":"tsconfigのmoduleあたりですかね？","ts":"1596122464.085100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4VWT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eaa693ed-202a-4019-882e-88d3c20b0dd2","type":"message","user":"U03C71D7H","text":"JavaScript わからん…","ts":"1596123781.085300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/GnT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cc372be6-a126-4da5-9bde-146a7df9fc50","type":"message","user":"U03C71D7H","text":"package A で `require('foo')` したオブジェクトと、package B で `require('foo')` したオブジェクトって別物ですかね?","ts":"1596123826.086200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zZ5A"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cece81f1-3fc6-4293-ae20-069861775738","type":"message","user":"UP6PA1UBE","text":"同じ","ts":"1596124107.086400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fkJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d9c0b1cf-fba1-4c45-bb92-b139cdfcc12b","type":"message","user":"U03C71D7H","text":"同じだよな…","ts":"1596124458.086700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cvO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e956bc0e-4d70-4c9d-ade2-3149df758d14","type":"message","user":"U03C71D7H","text":"defineProperty ってすでにしてあるのを上書き可能だろうか","ts":"1596124475.087100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Vh2XC"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4bc056a1-1414-437c-9dda-3fb4de148ae9","type":"message","user":"UP6PA1UBE","text":"不可能","ts":"1596124483.087300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SfW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9a173261-0bc1-4662-aeea-af5fbad2dc15","type":"message","user":"UP6PA1UBE","text":"オブジェクトの設定による","ts":"1596124547.087500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"z0yk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"588a6eff-fb84-4aa0-9038-6be103ecccb7","type":"message","user":"U03C71D7H","text":"これのせいっぽいなー","ts":"1596124656.087800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BmTJb"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b1b21cea-0f3b-40c6-bc8c-033a236b6aed","type":"message","user":"UP6PA1UBE","text":"<https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty>","ts":"1596124658.087900","attachments":[{"fallback":"MDN Web Docs: Object.defineProperty()","id":1,"title":"Object.defineProperty()","title_link":"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty","text":"静的メソッドの Object.defineProperty() は、あるオブジェクトに新しいプロパティを直接定義したり、オブジェクトの既存のプロパティを変更したりして、そのオブジェクトを返します。","thumb_url":"https://developer.mozilla.org/static/img/opengraph-logo.72382e605ce3.png","blocks":null,"service_name":"MDN Web Docs","service_icon":"https://developer.mozilla.org/static/img/favicon144.e7e21ca263ca.png","thumb_width":600,"thumb_height":600,"from_url":"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty","original_url":"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EUop"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a71e27d0-8e7a-4869-b327-b30266bbc03f","type":"message","user":"UP6PA1UBE","text":"`configurable` 既定は false なので不可能ですね","ts":"1596124707.089300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"O8duS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7cf4254f-38e1-40d7-a34c-8a1c9d8de06f","type":"message","user":"U03C71D7H","text":"今まで、module A が require しているモジュールが持ってるクラスを、テスト側で先に require して別のものに差し替える (module に defineProperty で mock を返すようにする) ということをしていたのだけど、TypeScript にしたら生成されたコードが exports に defineProperty で値を設定していて変えられなくなってしまった","ts":"1596124766.090300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7oh2C"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"36abd62a-10ba-4514-ab22-f39723dd22be","type":"message","user":"U03C71D7H","text":"ちなみに node_modules の中のファイル (TS が生成した export してるファイル) を手で書き換えて試してみているのだけど、defineProperty をただの代入にしたら当然問題なく動いた。 `configurable: true` を足してみたけど、これではダメだった","ts":"1596124886.091800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"G1IS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"030602f1-ad11-4a7e-91c5-50421ec10a4a","type":"message","user":"U8996GYBF","text":"jestだと `jest.mock(\"@/module\")` みたいなのでimportをテスト側でmockに差し替えれるんですけど、そういうのない感じです？","ts":"1596125156.092700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fTU3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"09aa0a96-bdea-46c4-bf44-f41cf72aa817","type":"message","user":"U03C71D7H","text":"hubot のテストで、hubot-script がモジュールなんですが、テストファイルでは直接 require してなくて、hubot-test-helper ってのに「このスクリプトを読んでくれ」ってパスを渡すんですよね。そして中でスクリプトがロードされる感じなのでロード部分弄れない","ts":"1596125320.094600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"plY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f92fb004-6be2-462d-9bc8-69e7d4caab00","type":"message","user":"U8996GYBF","text":"なるほど、依存なかなか面倒そうですね","ts":"1596125422.094900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/PH"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e111191e-8bdc-406d-85f1-aac613174f04","type":"message","user":"U03C71D7H","text":"とてもつらい","ts":"1596125481.095100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eZN"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ff4b7422-743c-4d5b-86e5-732fe7f7f208","type":"message","user":"U8996GYBF","text":"<https://stackoverflow.com/questions/47297768/typescript-compilation-of-requirejs-module-generates-line-object-defineproperty>\nこれっぽい","ts":"1596125710.095300","attachments":[{"fallback":"Stack Overflow: TypeScript compilation of RequireJS module generates line Object.defineProperty(exports, \"__esModule\", { value: true }); How to get rid of it?","id":1,"title":"TypeScript compilation of RequireJS module generates line Object.defineProperty(exports, \"__esModule\", { value: true }); How to get rid of it?","title_link":"https://stackoverflow.com/questions/47297768/typescript-compilation-of-requirejs-module-generates-line-object-defineproperty","text":"This is how my tsconfig.json file looks: { \"compileOnSave\": true, \"compilerOptions\": { \"module\": \"amd\", \"noImplicitAny\": false, \"removeComments\": false, \"","thumb_url":"https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png?v=73d79a89bded","blocks":null,"service_name":"Stack Overflow","service_icon":"https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon.png?v=c78bd457575a","thumb_width":316,"thumb_height":316,"from_url":"https://stackoverflow.com/questions/47297768/typescript-compilation-of-requirejs-module-generates-line-object-defineproperty","original_url":"https://stackoverflow.com/questions/47297768/typescript-compilation-of-requirejs-module-generates-line-object-defineproperty"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"43D"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d9f8b969-623b-4140-92d4-e286cdbd1ce6","type":"message","user":"U03C71D7H","text":"これは?","ts":"1596126062.095700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vs3Y8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d9275c9e-4f51-4064-9ab6-40f804b2de21","type":"message","user":"U8996GYBF","text":"斜め読みした感じ `export =` でexportしたらdefinePropertyを生成するのではなくてすむのかなーと思ったんですが、ダメそうですかね？","ts":"1596126147.096400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ksoW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b0582ca5-110a-4a41-843b-dde5d38dc51a","type":"message","user":"U03C71D7H","text":"それだと export 方法が変わってしまう…","ts":"1596126226.096700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tbuB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fbf49006-161c-448b-b11f-d4bd95ea10e7","type":"message","user":"U8996GYBF","text":"うーん、自分もやったことないんだけどダメそうですか\n難しい・・・","ts":"1596126249.097300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/bEvz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e42fbed5-ff8a-4f43-8208-a7cb0ce6071e","type":"message","user":"U03C71D7H","text":"(ブラウザで npm のパッケージの中身見れるサイトなかったっけ)","ts":"1596126316.097600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"584"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"57b7ef59-7415-41e4-97bc-ce976ba678dd","type":"message","user":"U8996GYBF","text":"中身っていうとリポジトリ見るのとは違う感じですかね","ts":"1596126353.098000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Nbk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a3dfc111-68a0-4345-9cfd-15736ea55f7e","type":"message","user":"U03C71D7H","text":"リポジトリにはコンパイル済みのファイルは入ってないので","ts":"1596126380.098300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"z3yg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"05aa78d6-abb6-4b33-87ac-1b5d10703947","type":"message","user":"U8996GYBF","text":"build済みのやつ見たい感じですか、なんかあったっけな・・・","ts":"1596126420.098800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"k9G"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"985e7c44-0ba2-403f-97d2-effadaa87e0b","type":"message","user":"U03C71D7H","text":"あったはずなんだけど、ググっても全然出てこないw","ts":"1596126501.099200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jxr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e3408d38-4353-4def-9572-62504c31d88f","type":"message","user":"U03C71D7H","text":"実際に生成されたファイルの中身を貼ろうと思ったのだけど","ts":"1596126518.099600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZipL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6d1bdd7d-2326-4b70-9be1-4a6a51b2bcf7","type":"message","user":"U03C71D7H","text":"(まあ text で貼ってもいいのだけど…)","ts":"1596126532.099900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+LXu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9e724ec8-f766-4e96-80c5-4652c1e2b4c5","type":"message","user":"U03C71D7H","text":"<https://unpkg.com/> これだ","ts":"1596126972.100000","attachments":[{"fallback":"UNPKG","id":1,"title":"UNPKG","title_link":"https://unpkg.com/","text":"The CDN for everything on npm","blocks":null,"service_name":"unpkg.com","from_url":"https://unpkg.com/","original_url":"https://unpkg.com/"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zlP9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9949281b-21bb-4076-afb5-ef2b2b8bf2e4","type":"message","user":"U03C71D7H","text":"<https://unpkg.com/vimhelp@3.0.0/lib/index.js> これが require したいファイル","ts":"1596127038.100600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UXU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0ea0d9db-c3f4-476c-980c-23d4a938112e","type":"message","user":"U03C71D7H","text":"この URL だと plain なのか","ts":"1596127092.100900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oVmy"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"416461c3-fa19-46f9-82a0-a546b751b272","type":"message","user":"U03C71D7H","text":"<https://unpkg.com/browse/vimhelp@3.0.0/lib/index.js> こっちの方がみやすい","ts":"1596127108.101100","attachments":[{"fallback":"UNPKG - vimhelp","id":1,"title":"UNPKG - vimhelp","title_link":"https://unpkg.com/browse/vimhelp@3.0.0/lib/index.js","text":"The CDN for vimhelp","blocks":null,"service_name":"unpkg.com","from_url":"https://unpkg.com/browse/vimhelp@3.0.0/lib/index.js","original_url":"https://unpkg.com/browse/vimhelp@3.0.0/lib/index.js"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HSN"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"56d26e5e-2c1a-4586-9fd5-3bea0d0b67e4","type":"message","user":"U03C71D7H","text":"ちなみに TypeScript にする前はこう <https://unpkg.com/browse/vimhelp@2.0.0/lib/index.js>","ts":"1596127127.101600","attachments":[{"fallback":"UNPKG - vimhelp","id":1,"title":"UNPKG - vimhelp","title_link":"https://unpkg.com/browse/vimhelp@2.0.0/lib/index.js","text":"The CDN for vimhelp","blocks":null,"service_name":"unpkg.com","from_url":"https://unpkg.com/browse/vimhelp@2.0.0/lib/index.js","original_url":"https://unpkg.com/browse/vimhelp@2.0.0/lib/index.js"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IieNs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"45f0a6cd-4c0b-402a-a7d3-9236c3f54754","type":"message","user":"U03C71D7H","text":"`__esModule` はどうでもよくて、 `VimHelp` とかを mock したい","ts":"1596127171.102100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Q16"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0ea914c0-0410-4f2c-915e-211b0f108778","type":"message","user":"U78A6ESHM","text":"<https://sinonjs.org/> とか使って mock/stub するのが一番楽そう。","ts":"1596127618.102800","attachments":[{"fallback":"Sinon.JS - Standalone test fakes, spies, stubs and mocks for JavaScript. Works with any unit testing framework.","id":1,"title":"Sinon.JS - Standalone test fakes, spies, stubs and mocks for JavaScript. Works with any unit testing framework.","title_link":"https://sinonjs.org/","text":"Standalone test spies, stubs and mocks for JavaScript. Works with any unit testing framework.","blocks":null,"service_name":"sinonjs.org","service_icon":"https://sinonjs.org/assets/images/favicon.png","from_url":"https://sinonjs.org/","original_url":"https://sinonjs.org/"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"D8SiF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c613e32f-0e4a-4f92-b699-1cbbeb70426c","type":"message","user":"U8996GYBF","text":"webpackでlibrary target変えればいける？\n<https://qiita.com/jkr_2255/items/283bc12dd07bc237179e>","ts":"1596127684.103300","edited":{"user":"U8996GYBF","ts":"1596127714.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sbnZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"088e7b9e-24aa-4509-81a6-e38dee4fcc69","type":"message","user":"U78A6ESHM","text":"テスト時に webpack 通すんですか？","ts":"1596127744.103800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qYkgu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e5a609e3-e9f0-451f-8a5e-c4bd4f0f52ab","type":"message","user":"U8996GYBF","text":"あれ、よく分かってないかも\nテスト側で別npm packageのファイルをimportして、そこをmockしたいのかと思っていた","ts":"1596127815.105000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sb95"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1fbe9cbc-8de3-4433-9de4-6f30e8b8ff5a","type":"message","user":"U06ECBRTJ","text":"ツクールMVのプラグインが JSで、頑張ってるけど、進めない…","ts":"1596127848.105600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"N55"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1069d276-3379-47db-a68b-89f7aedbb457","type":"message","user":"U8996GYBF","text":"テスト時にトランスパイル済みのJSをimportしないといけない理由が分かっていない気がする","ts":"1596127923.106300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oVX9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"01204fad-2ef9-4bf3-bd27-1c2ff270a5c9","type":"message","user":"U78A6ESHM","text":":me-too:","ts":"1596127957.106600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gHF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ac81db01-5c06-4308-ab41-7137574accc7","type":"message","user":"U8996GYBF","text":"（なので、vimhelpパッケージを使うvimhelp-hubot側でimport時にmockしたいのかなって）","ts":"1596128028.107600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eMijZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"49b74b99-9228-4dc7-815a-bb9f33e63f05","type":"message","user":"U03C71D7H","text":"そうです","ts":"1596128969.107800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"n81"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f2c1b034-7359-41b4-9b55-fb34e1ab2207","type":"message","user":"U03C71D7H","text":"今書いてるテストは hubot-vimhelp のやつです","ts":"1596128999.108600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"d9cuK"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a4cf878e-20fb-4e86-8647-ee6d77b99615","type":"message","user":"U03C71D7H","text":"明日もうちょっと考え直そう…","ts":"1596129066.109200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xbqve"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
