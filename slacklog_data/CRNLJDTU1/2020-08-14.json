[{"client_msg_id":"daae34e4-3f46-454f-8921-e5872a2b6482","type":"message","user":"U03C71D7H","text":"…ファイル名に拡張子付いてなかったら全部ぶっ壊れてそうだけどなんかよくわからなくなってきたな。とりあえず全ファイル再 DL を走らせて今日はもうねよ","ts":"1597334343.036200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TpL"}]},{"client_msg_id":"2345b874-d396-4371-8060-b3dd2a26e0a3","type":"message","user":"U03C71D7H","text":"あと今あらためて調査して、実際にファイル名がぶっ壊れるのは添付ファイルのファイル名の拡張子とダウンロードするファイルの URL 末尾の拡張子の長さが一致していない場合だけということがわかった","ts":"1597334293.035500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"e0a"}]},{"client_msg_id":"effa9bf2-48c2-4e4b-ae7a-49ea98e9104e","type":"message","user":"U03C71D7H","text":"しかしまあ実際のところはやってみないとわからない","ts":"1597334241.034400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XZs=u"}]},{"client_msg_id":"48454574-5bb4-44c0-b3c9-6446f679953c","type":"message","user":"U03C71D7H","text":"ファイル名やら何やらは tree 側のオブジェクトが持ってる","ts":"1597334223.034100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SUZ3"}]},{"client_msg_id":"25a0e188-8a1c-4f3e-8a71-2db13ff7442c","type":"message","user":"U03C71D7H","text":"そもそも Go のオブジェクトデータベースの仕組みとして、完全に同一バイナリであれば同じ blob オブジェクトになるはず","ts":"1597334205.033700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ryL"}]},{"client_msg_id":"9eae6db1-3e4c-4ea5-bad6-b8ef83201aa8","type":"message","user":"U9S4G0LJW","text":"検知だけだと爆発しそう","ts":"1597333174.033100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qn7"}]},{"client_msg_id":"ecdcd7eb-b935-4e8e-979b-73d68ea7fe20","type":"message","user":"U9S4G0LJW","text":"あれっていい感じに検知してくれてるとかじゃなくてデータ構造レベルで対応してるんかな","ts":"1597333149.032900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jpdj"}]},{"client_msg_id":"4f95c88d-f373-4cce-92cb-efacf0f71ecb","type":"message","user":"U03C71D7H","text":"download-files でダウンロードしたファイル、ファイル名を付ける部分がバグってて最後の1バイトが全部削れていることが判明。\n全ファイル DL し直し。そして例によって全ファイルコミットすると容量で死ぬ…いや、blob は一致する(rename のみ)だから案外死なないか…?","ts":"1597332823.032400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uxXj"}]}]
