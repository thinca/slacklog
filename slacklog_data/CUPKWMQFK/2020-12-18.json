[{"client_msg_id":"02ba9f9c-5e65-40e3-b17f-7dcb0550f51f","type":"message","user":"UDDCM376D","text":"なるほどお","ts":"1608296820.040600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7pPk"}]},{"client_msg_id":"bbcc7cc1-d934-4d47-9606-fa8b2bb5f8f8","type":"message","user":"UAZ33BKV2","text":"現在カーソルの位置とは逆のところがとれる","ts":"1608296423.040200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+PJN"}]},{"client_msg_id":"f287f5e5-c720-47db-9a49-015670709f84","type":"message","user":"UAZ33BKV2","text":"`line('v),col('v')` もあるが、ちょっと不足か","ts":"1608296389.039500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"akC"}]},{"type":"message","user":"UPZHKAM7W","text":"```\n                                                        *col()*\ncol({expr})     戻り値は数値で、{expr}で与えられる位置の桁番号(バイトインデッ\n                クス)。有効な位置は:\n                    .       現在の位置\n                    $       カレント行の末尾(カレント行のバイト数+1を返す)\n                    'x      マークxの位置(マークが設定されていない場合0)\n                    v       ビジュアルモードでは: ビジュアル選択領域の開始行\n                            (カーソルがその端)。ビジュアルモード以外ではカーソ\n                            ル位置を返す。すぐに更新される点が |'\u0026lt;| と違う。\n                さらに {expr} は [lnum, col] という行番号と桁番号のリストで\n                あってもよい。col に \"$\" を指定して、ある行の最後の桁を取得す\n                るのにとても便利である。\"lnum\" か \"col\" が範囲外である場合は\n                0 を返す。\n                行番号を取得するには|line()|を使う。行番号と桁番号両方を取得す\n                るには|getpos()|を使う。\n                画面上の桁番号を取得するには|virtcol()|を使う。\n                Note 現在のファイルのマークしか使えないことに注意。\n                例:  \n                        col(\".\")                カーソルの桁\n                        col(\"$\")                カレント行の長さ+1\n                        col(\"'t\")               マークtの桁\n                        col(\"'\" . markname)     マークmarknameの桁\n                先頭の桁は1になる。戻り値0はエラーを意味する。\n                大文字のマークは他のバッファを指しているかもしれない。\n                'virtualedit' が有効なとき、カーソルが行末を越えていると、桁番\n                号は行の長さより1大きい値を返す。挿入モードで桁番号を取得する\n                には次のマップが使える:  \n                        :imap \u0026lt;F2\u0026gt; \u0026lt;C-O\u0026gt;:let save_ve = \u0026amp;ve\u0026lt;CR\u0026gt;\n                                \\\u0026lt;C-O\u0026gt;:set ve=all\u0026lt;CR\u0026gt;\n                                \\\u0026lt;C-O\u0026gt;:echo col(\".\") . \"\\n\" \u0026lt;Bar\u0026gt;\n                                \\let \u0026amp;ve = save_ve\u0026lt;CR\u0026gt;\n \n                |method| としても使用できる:  \n                        GetPos()-\u0026gt;col()\n```","ts":"1608296364.038600","bot_id":"BPM858KEE","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"a573d309-2aac-4410-80ab-7692e1abbcba","type":"message","user":"UAZ33BKV2","text":":help col()","ts":"1608296364.038500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"99V"}]},{"type":"message","user":"UPZHKAM7W","text":"```\nline({expr} [, {winid}])                                *line()*\n                結果は数値で、{expr}で与えられた位置のファイル内での行番号。受\n                け付けられる位置指定は次の通り:\n                    .       カーソルの位置\n                    $       現在のバッファの最後の位置\n                    'x      マークxの位置(マークが設定されていない場合、0が返\n                            る)\n                    w0      カレントウィンドウの最上行 (サイレント Ex モードの\n                            ように、画面が更新されない場合は 1)\n                    w$      カレントウィンドウの最下行 (行が表示されていない場\n                            合は \"w0\" より 1 小さい)\n                    v       ビジュアルモードでは: ビジュアル選択領域の開始行\n                            (カーソルがその端)。ビジュアルモード以外ではカーソ\n                            ル位置を返す。すぐに更新される点が |'\u0026lt;| と違う。\n                Note 他のファイルのマークも使える。その場合、戻り値はそのファ\n                イルの行番号となる。\n                桁番号を取得するには|col()|を使う。両方を取得するには\n                |getpos()|を使う。\n                オプションの {winid} 引数を使用すると、カレントウィンドウの代\n                わりにそのウィンドウの値が取得される。\n                例:  \n                        line(\".\")               カーソルの行番号\n                        line(\".\", winid)        ウィンドウ \"winid\" で同上\n                        line(\"'t\")              マークtの位置の行番号\n                        line(\"'\" . marker)      マークmarkerの位置の行番号\n \n                ファイルを開くときに最後の既知の位置にジャンプするには、\n                |last-position-jump| を参照。\n \n                |method| としても使用できる:  \n                        GetValue()-\u0026gt;line()\n```","ts":"1608296336.037800","bot_id":"BPM858KEE","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"efc738b1-4c55-48a2-ba7c-1ce9ac1461a5","type":"message","user":"UAZ33BKV2","text":":h line()","ts":"1608296336.037700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"f9Jc"}]},{"client_msg_id":"9d641dfe-c338-40c6-b7b4-41db8e3f7107","type":"message","user":"UDDCM376D","text":"なるほど","ts":"1608296319.037200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dRG"}]},{"client_msg_id":"fb294b48-bb50-4d70-b8dc-b3457b24f9d6","type":"message","user":"U78A6ESHM","text":"```  let mode = visualmode(1)\n  if mode == 'v' || mode == 'V' || mode == '^V'\n    let start_lineno = line(\"'\u0026lt;\")\n    let end_lineno = line(\"'\u0026gt;\")\n  endif```\nおまじないのようにこう書いてるなぁ。","ts":"1608296239.036900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oOc"}]},{"client_msg_id":"6fd17a3b-e247-490b-8798-389ae378d304","type":"message","user":"UDDCM376D","text":"あー","ts":"1608296224.036600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8jPJ"}]},{"client_msg_id":"d997d21e-0e44-486c-ba8d-7c5d43f96f9f","type":"message","user":"U01H161HVPS","text":"行番号とるだけなら `line(\"'\u0026lt;\")` / `line(\"'\u0026gt;\")` でいけそう？","ts":"1608296164.036000","team":"T03C4RC8V","reactions":[{"name":"tashikani","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"758"}]},{"client_msg_id":"dea071ef-de21-4ce9-8964-471faeed852a","type":"message","user":"U9S4G0LJW","text":"オペレータ自作しようとしてたまたま見た","ts":"1608296103.035100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WBm"}]},{"client_msg_id":"20b1a018-d72a-4d6b-acc5-d979c1b56c31","type":"message","user":"UAZ33BKV2","text":"ん、たしか翻訳でなんかあった気が","ts":"1608296094.034600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9ldw"}]},{"client_msg_id":"e28bb571-e7ef-4ba3-bc92-e09872664093","type":"message","user":"UDDCM376D","text":"ほんまやった\nヘルプ、欲しい情報を見つけるの、ムズカシイ","ts":"1608296077.034300","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TtI"}]},{"type":"message","user":"UPZHKAM7W","text":"```\n                                                        *getpos()*\ngetpos({expr})  {expr}の位置を返す。{expr}として指定できる値については\n                |line()|を参照。カーソル位置を得るには |getcurpos()| を参照。\n                結果は次の4個の要素を持つリスト|List|:\n                    [bufnum, lnum, col, off]\n                \"bufnum\" は、'0 や 'A のようなマークが指定されたときは、その\n                マークのバッファ番号となる。それ以外では0となる。\n                \"lnum\" と \"col\" はバッファ中の位置。桁番号は1から始まる。\n                \"off\" の値は、'virtualedit' がオフのときは常に0で、オンのとき\n                はその文字の始点からの画面上の桁のオフセットである。つまり、\n                カーソルが\u0026lt;Tab\u0026gt;の中や、その行の最後の文字より後にあるとき意味\n                を持つ。\n                Note: ビジュアルモードの '\u0026lt; と '\u0026gt; について: ビジュアルモードが\n                \"V\" (行選択モード) のとき、'\u0026lt; の桁番号はゼロ、'\u0026gt; の桁番号は大\n                きな値になる。\n                この関数はマークの位置を保存し、復元するために使われる:  \n                        let save_a_mark = getpos(\"'a\")\n                        ...\n                        call setpos(\"'a\", save_a_mark)\n                |getcurpos()| と |setpos()|も参照。\n \n                |method| としても使用できる:  \n                        GetMark()-\u0026gt;getpos()\n```","ts":"1608296055.033900","bot_id":"BPM858KEE","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"7ec34412-32c9-4b5b-8600-f57868b95137","type":"message","user":"UDDCM376D","text":":h getpos()","ts":"1608296054.033800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wN7Dj"}]},{"client_msg_id":"3a0f8b2c-ec0f-43bd-863e-d443c1336a72","type":"message","user":"UDDCM376D","text":"マークが使えると思わなかった","ts":"1608296013.033600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EuYR"}]},{"client_msg_id":"fee0bc69-085f-4d72-a3a9-409778d64226","type":"message","user":"UDDCM376D","text":"getposって意外と使える記号が多いっぽい","ts":"1608296002.033200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dEg"}]},{"client_msg_id":"5f6c57d0-1501-4415-9eba-05413b982aed","type":"message","user":"U9S4G0LJW","text":"helpにもこれしか書いてないですね","ts":"1608295880.031800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"P25DE"}]},{"client_msg_id":"3e5b470a-0658-4686-a799-3e2d0ec7977e","type":"message","user":"UDDCM376D","text":"なるほど","ts":"1608295741.031300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8Bn"}]},{"client_msg_id":"b03fe391-0141-47e3-b36f-b0edc8c2d65a","type":"message","user":"UDDCM376D","text":"```    let [lnum1, col1] = getpos(\"'\u0026lt;\")[1:2]\n    let [lnum2, col2] = getpos(\"'\u0026gt;\")[1:2]```","ts":"1608295738.031000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HLTyr"}]},{"client_msg_id":"d7a88d7a-e948-4178-866b-b13631a6bd16","type":"message","user":"UDDCM376D","text":"\u003chttps://takegue.hatenablog.com/entry/2014/12/20/140725\u003e","ts":"1608295736.030700","attachments":[{"fallback":"たけっぱ横丁: Vimで選択部分のテキストを取得する - たけっぱ横丁","id":1,"title":"Vimで選択部分のテキストを取得する - たけっぱ横丁","title_link":"https://takegue.hatenablog.com/entry/2014/12/20/140725","text":"Vimで選択した部分を取得する How to get visual selected text in Vim vimでscriptを書いていると，選択した部分にのみ結果を反映したいみたいなことがあります. この方法を自分で色々調べていたのですが How to get visually selected text in VimScrip こんな資料が見つかったりするわけです. 方法その１ 選択部分のエリアを探して，その部分を取得する function! GetVisualSelection() \" Why is this not a built-in Vim script function?! …","blocks":null,"ts":1419052045,"service_name":"たけっぱ横丁","from_url":"https://takegue.hatenablog.com/entry/2014/12/20/140725","original_url":"https://takegue.hatenablog.com/entry/2014/12/20/140725"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zACY"}]},{"client_msg_id":"74106482-95dd-4d7e-b87f-6439bfc6924e","type":"message","user":"UDDCM376D","text":"\u003chttps://nanasi.jp/articles/code/screen/visual.html\u003e\nビジュアルの開始と終了の行数ってこうやって取るしかないんでしたっけ…？","ts":"1608295690.030500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JGkXH"}]}]
