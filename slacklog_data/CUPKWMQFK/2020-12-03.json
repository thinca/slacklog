[{"client_msg_id":"5ac344fe-3a87-4eeb-b569-ed2283955df2","type":"message","user":"UDDCM376D","text":"\u0026gt; 前回のディレクトリをリストで覚えておいて、pathを前方一致で見て使えるところまで再利用する。そうするとディレクトリをたどる量が少なくなる。\nこれやったら結構早くなったけど、それでもVim scriptは遅い…","ts":"1607002327.430400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"baO7x"}]},{"client_msg_id":"fe66f61e-ab69-496c-8dbf-0112b4ef1dab","type":"message","user":"UDDCM376D","text":"ありがとうございます","ts":"1607000907.430000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"A8p"}]},{"client_msg_id":"a5cd7a7a-411b-4ec4-a9ba-484a0d2cc2a2","type":"message","user":"UDDCM376D","text":"改善してみます","ts":"1607000906.429700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tUJ"}]},{"client_msg_id":"9085ea7d-a7d1-41f8-ba61-82c1a4c974ac","type":"message","user":"UDDCM376D","text":":rikai:","ts":"1607000900.429500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"D=dBF"}]},{"client_msg_id":"89915700-6876-4c8d-93c1-1e518c0fab16","type":"message","user":"UDDCM376D","text":"なるほど","ts":"1607000863.429300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ufz5"}]},{"client_msg_id":"2f4f3b50-7baa-489c-adee-67e2595dc5dc","type":"message","user":"UDDCM376D","text":"あー","ts":"1607000861.429100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LqZ"}]},{"client_msg_id":"04e41ed3-3a93-451e-bda2-f55ad3bbd74b","type":"message","user":"U06BRP8VD","text":"事前にエントリをソートしとくと↑のアルゴリズムが機能するようになる。","ts":"1607000830.428900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VAmzS"}]},{"client_msg_id":"7c82ee77-30f7-4471-b4ab-71c7c479a7c4","type":"message","user":"U06BRP8VD","text":"前回のディレクトリをリストで覚えておいて、pathを前方一致で見て使えるところまで再利用する。そうするとディレクトリをたどる量が少なくなる。","ts":"1607000816.428500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=RDt"}]},{"client_msg_id":"92010ea6-8d49-4ea2-8f56-a08bf5f9b06b","type":"message","user":"U06BRP8VD","text":"事前処理すると良いっすよ。","ts":"1607000749.427300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Qjj"}]},{"client_msg_id":"804cecd9-b873-4a4b-988a-1797321e7da7","type":"message","user":"UDDCM376D","text":"3620個のファイルで","ts":"1606999296.426700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gyNmK"}]},{"client_msg_id":"fa1b51c0-f601-4d34-b9b0-3007e540ef6c","type":"message","user":"UDDCM376D","text":"Vimのリポジトリを開くのに4分くらいかかっている…","ts":"1606999281.426400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3cSH"}]},{"client_msg_id":"cad73c56-d7bb-43e1-8d0f-2025f322384b","type":"message","user":"UDDCM376D","text":"うん、実用性を考えると1000個までかなぁ","ts":"1606999129.426000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"USgs"}]},{"client_msg_id":"4dddd6b4-b2ce-4ee7-809c-3d906a18813e","type":"message","user":"UDDCM376D","text":"やばいな","ts":"1606999028.425200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bmav"}]},{"client_msg_id":"2527683a-5e1c-4ce6-8922-42e90a1f3071","type":"message","user":"UDDCM376D","text":"しかもだんだん遅くなってくる。。","ts":"1606999026.425000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oSkJu"}]},{"type":"message","user":"UDDCM376D","text":"↓でファイルツリーを開けるようになったんだけど、Goみたいに10000以上ファイルがあると、\nえげつない量の再帰をするので、めっちゃ時間かかる\n```\u003cgh://golang/go/master/files\u003e```","ts":"1606998983.424500","files":[{"id":"F01GFBZH2KT","created":1606998920,"timestamp":1606998920,"name":"image.png","title":"image.png","mimetype":"image/png","image_exif_rotation":0,"filetype":"png","pretty_type":"PNG","user":"UDDCM376D","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":4464,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F01GFBZH2KT/image.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F01GFBZH2KT/download/image.png","original_h":206,"original_w":258,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F01GFBZH2KT-fcd72169bf/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F01GFBZH2KT-fcd72169bf/image_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F01GFBZH2KT-fcd72169bf/image_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F01GFBZH2KT-fcd72169bf/image_360.png","thumb_360_gif":"","thumb_360_w":258,"thumb_360_h":206,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/UDDCM376D/F01GFBZH2KT/image.png","permalink_public":"https://slack-files.com/T03C4RC8V-F01GFBZH2KT-6d92373db5","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"thumb_tiny":"AwAmADCl/DSUv8NJQAUUUUAFFFFAC/w0lOUZwKfsTH3v1oAiop5VRjnPA/OnbE7tjnHWgCKin7Rj8M9aZQA/5fej5fem0UAO+X3o+X3ptFADvl96Pl96bRQB/9k=","username":""}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AMg"}]},{"type":"message","user":"UDDCM376D","text":"色付けたら、いい感じになったぁ","ts":"1606997608.422200","files":[{"id":"F01FVVCBCCW","created":1606997600,"timestamp":1606997600,"name":"image.png","title":"image.png","mimetype":"image/png","image_exif_rotation":0,"filetype":"png","pretty_type":"PNG","user":"UDDCM376D","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":94872,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F01FVVCBCCW/image.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F01FVVCBCCW/download/image.png","original_h":1150,"original_w":680,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F01FVVCBCCW-068d43bd48/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F01FVVCBCCW-068d43bd48/image_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F01FVVCBCCW-068d43bd48/image_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F01FVVCBCCW-068d43bd48/image_360.png","thumb_360_gif":"","thumb_360_w":213,"thumb_360_h":360,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-F01FVVCBCCW-068d43bd48/image_480.png","thumb_480_w":284,"thumb_480_h":480,"thumb_720":"https://files.slack.com/files-tmb/T03C4RC8V-F01FVVCBCCW-068d43bd48/image_720.png","thumb_720_w":426,"thumb_720_h":720,"thumb_960":"https://files.slack.com/files-tmb/T03C4RC8V-F01FVVCBCCW-068d43bd48/image_960.png","thumb_960_w":568,"thumb_960_h":960,"thumb_1024":"https://files.slack.com/files-tmb/T03C4RC8V-F01FVVCBCCW-068d43bd48/image_1024.png","thumb_1024_w":605,"thumb_1024_h":1024,"permalink":"https://vim-jp.slack.com/files/UDDCM376D/F01FVVCBCCW/image.png","permalink_public":"https://slack-files.com/T03C4RC8V-F01FVVCBCCW-17cb8e25e6","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"thumb_800":"https://files.slack.com/files-tmb/T03C4RC8V-F01FVVCBCCW-068d43bd48/image_800.png","thumb_800_h":800,"thumb_800_w":473,"thumb_tiny":"AwAwAByoMnvikJPrS8ZOM4pCB60ANxmjApaKAF70EUDrQaAG0UUUAOHWgmgEY5pKAEooooA//9k=","username":""}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AejZC"}]},{"client_msg_id":"e82c14ca-2b3a-4450-a3de-2acc625b3b7e","type":"message","user":"UDDCM376D","text":"長い戦いだった…","ts":"1606997345.421900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tHp5i"}]},{"type":"message","user":"UDDCM376D","ts":"1606997315.421200","files":[{"id":"F01GSGHFUAU","created":1606997311,"timestamp":1606997311,"name":"image.png","title":"image.png","mimetype":"image/png","image_exif_rotation":0,"filetype":"png","pretty_type":"PNG","user":"UDDCM376D","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":112874,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F01GSGHFUAU/image.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F01GSGHFUAU/download/image.png","original_h":1264,"original_w":850,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F01GSGHFUAU-7b7a436d00/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F01GSGHFUAU-7b7a436d00/image_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F01GSGHFUAU-7b7a436d00/image_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F01GSGHFUAU-7b7a436d00/image_360.png","thumb_360_gif":"","thumb_360_w":242,"thumb_360_h":360,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-F01GSGHFUAU-7b7a436d00/image_480.png","thumb_480_w":323,"thumb_480_h":480,"thumb_720":"https://files.slack.com/files-tmb/T03C4RC8V-F01GSGHFUAU-7b7a436d00/image_720.png","thumb_720_w":484,"thumb_720_h":720,"thumb_960":"https://files.slack.com/files-tmb/T03C4RC8V-F01GSGHFUAU-7b7a436d00/image_960.png","thumb_960_w":646,"thumb_960_h":960,"thumb_1024":"https://files.slack.com/files-tmb/T03C4RC8V-F01GSGHFUAU-7b7a436d00/image_1024.png","thumb_1024_w":689,"thumb_1024_h":1024,"permalink":"https://vim-jp.slack.com/files/UDDCM376D/F01GSGHFUAU/image.png","permalink_public":"https://slack-files.com/T03C4RC8V-F01GSGHFUAU-f93998e6e3","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"thumb_800":"https://files.slack.com/files-tmb/T03C4RC8V-F01GSGHFUAU-7b7a436d00/image_800.png","thumb_800_h":1190,"thumb_800_w":800,"thumb_tiny":"AwAwACCoM+tNJOadxnjgUhAoAbijFLRQAo60GgUhOaAEooooAcOhpMGlFBNACUlLSUAf/9k=","username":""}],"reactions":[{"name":"tada","count":5,"users":["U9S4G0LJW","UBQ2H65JQ","UEB0VGD7E","U78A6ESHM","U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"6ba402d3-d357-4918-a780-902a1f686212","type":"message","user":"UDDCM376D","text":"できたー","ts":"1606997314.421100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qmkD"}]},{"client_msg_id":"5cf91113-6a55-4446-ab60-1b2c46ba846f","type":"message","user":"UDDCM376D","text":"あー","ts":"1606996475.420800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UqxkS"}]},{"client_msg_id":"9D824B19-08A3-4E16-BCAC-AF8BD8046400","type":"message","user":"UBQ2H65JQ","text":"```let item['children'] = get(item, 'children', [])```\n私なら頭でさっさと初期化しそう\n","ts":"1606996453.420600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"k36"}]},{"client_msg_id":"93be5850-ce76-4cb7-9b54-e40168822cb4","type":"message","user":"UDDCM376D","text":"\u0026gt; `tree.children` が定義されてなくてエラーが出るとかなら予め空配列を定義しておくのでも良さそうですけど\nfileの場合はchildrenがないので…","ts":"1606996348.419300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VGHk"}]},{"client_msg_id":"990134c3-82d5-496c-9028-0fb02ce8a64e","type":"message","user":"U01D44KSY9Z","text":"`tree.children` が定義されてなくてエラーが出るとかなら予め空配列を定義しておくのでも良さそうですけど\nVim Scriptあまりガッツリ書かないのでfor回す時の挙動が分からない","ts":"1606996308.418700","edited":{"user":"U01D44KSY9Z","ts":"1606996326.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"R/zU"}]},{"client_msg_id":"f8321d44-7f37-4f6c-ac40-de9a1bfdb9cc","type":"message","user":"UDDCM376D","text":"いや、これでいいのか","ts":"1606996186.416900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Rk8u"}]},{"client_msg_id":"e4a4b2a2-2ef3-4b1c-9aa8-f5f99db97d1c","type":"message","user":"UDDCM376D","text":"順番が良くないすね…","ts":"1606996140.416700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pzuM"}]},{"client_msg_id":"aee695a9-791b-441e-866b-c99b6fd42b7d","type":"message","user":"UDDCM376D","text":"ないとだめでしたね","ts":"1606996109.416400","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UBQ2H65JQ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pkIO"}]},{"client_msg_id":"CAC89487-455B-4823-9CAD-F1C932A69286","type":"message","user":"UBQ2H65JQ","text":"その上でchildrenにアクセスしているし、そもそもif文自体いらそうですね","ts":"1606996060.416100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZJnr"}]},{"client_msg_id":"271dec42-ea41-4e9f-bd7b-da823ee73daf","type":"message","user":"UDDCM376D","text":"```                                          :let l = [1, 2, 3]\n                                          :echo exists(\"l[5]\")\n                                          0  \n                                          :echo exists(\"l[xx]\")```","ts":"1606996031.415300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TdA3"}]},{"type":"message","user":"UPZHKAM7W","text":"                        exists(\":make install\")\n \n                Note 引数は変数そのものではなく、文字列でなければならない。例\n                えば、次は動作しない:  \n                        exists(bufcount)\n                これは変数 \"bufcount\" の存在を判定するのではなく、bufcountの値\n                を渡し、それが存在するかどうか判定してしまう。\n \n                |method| としても使用できる:  \n                        Varname()-\u0026gt;exists()\n```","ts":"1606995998.414600","bot_id":"BPM858KEE","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"UPZHKAM7W","text":"```\n                                                        *exists()*\nexists({expr})  結果は数値で、変数{expr}が存在すれば|TRUE|となり、そうでなけれ\n                ば0となる。\n \n                ある機能がサポートされているか判定するには|has()|を使う。\n                ファイルが存在するかを判定するには|filereadable()|を使う。\n \n                引数{expr}は文字列で次のうちいずれかである。\n                        \u0026amp;option-name    Vimオプション(存在するかだけを判定し、\n                                        本当に動作するかは判定しない)\n                        +option-name    動作するVimオプション\n                        $ENVNAME        環境変数(空文字列と比較することでも判\n                                        定できる)\n                        *funcname       組み込み関数(|functions|参照)かユーザー\n                                        が定義した関数(|user-functions|参照)の\n                                        内、実装済みのもの。また Funcref であ\n                                        る変数に対しても動作する。\n                        ?funcname       実装されているかもしれない組み込み関数。\n                                        \"funcname\" が有効かチェックするのに利\n                                        用できる。\n                        varname         内部変数(|internal-variables|)\n                                        |curly-braces-names|, |Dictionary|の要\n                                        素、|List|の要素などに対しても動作する。\n                                        インデックスの評価で無効な式であるとエ\n                                        ラーメッセージが出る可能性があることに\n                                        注意。例:  \n                                           :let l = [1, 2, 3]\n                                           :echo exists(\"l[5]\")\n                                           0  \n                                           :echo exists(\"l[xx]\")\n                                           E121: Undefined variable: xx\n                                           0\n                        :cmdname        exコマンド: 組み込みコマンド、ユーザー\n                                        定義コマンド、コマンド修飾子|:command|。\n                                        戻り値:\n                                        1  コマンド名の先頭に一致\n                                        2  コマンド名に完全一致\n                                        3  複数のユーザー定義コマンドに一致\n                                        コマンドが定義されているかどうかを判定\n                                        するには、必ず戻り値が2であるかを確認\n                                        すること。\n                        :2match         |:2match|のコマンド。\n                        :3match         |:3match|のコマンド。\n                        #event          このイベントに対する自動コマンド定義\n                        #event#pattern  このイベントとパターンに対する自動コマ\n                                        ンド定義(パターンは文字そのままに解釈\n                                        され、自動コマンドのパターンと1文字ず\n                                        つ比較される)\n                        #group          自動コマンドグループが存在するか\n                        #group#event    このグループとイベントに対して自動コマ\n                                        ンドが定義されているか\n                        #group#event#pattern\n                                        このグループ、イベント、パターンに対す\n                                        る自動コマンド定義\n                        ##event         このイベントに対する自動コマンドがサ\n                                        ポートされているか\n \n                例:  \n                        exists(\"\u0026amp;shortname\")\n                        exists(\"$HOSTNAME\")\n                        exists(\"*strftime\")\n                        exists(\"*s:MyFunc\")\n                        exists(\"bufcount\")\n                        exists(\":Make\")\n                        exists(\"#CursorHold\")\n                        exists(\"#BufReadPre#*.gz\")\n                        exists(\"#filetypeindent\")\n                        exists(\"#filetypeindent#FileType\")\n                        exists(\"#filetypeindent#FileType#*\")\n                        exists(\"##ColorScheme\")\n                シンボルである\u0026amp;/$/*と名前の間には、空白文字があってはならな\n                い。\n                ある少数の場合では無視されるが、名前の後に余計な文字があっては\n                ならない。将来はもっと厳格になる可能性があるので、現在許される\n                からといって頼ってはならない。\n                正しい例:  \n                        exists(\":make\")\n                正しくない例:  ","ts":"1606995998.414500","bot_id":"BPM858KEE","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"515cf498-3ac5-4166-943a-d7d284fd49b0","type":"message","user":"UDDCM376D","text":":h exists()","ts":"1606995997.414400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SFfR"}]},{"client_msg_id":"ce504290-0522-40d5-8af6-e2cc9ba621d7","type":"message","user":"UDDCM376D","text":"has_key() ですね","ts":"1606995980.414200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jfH"}]},{"client_msg_id":"1DDEA09F-4960-4038-AE71-671FE701BF6E","type":"message","user":"UBQ2H65JQ","text":"どれだろう","ts":"1606995867.413900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nJSx9"}]},{"client_msg_id":"9433A777-4E1A-4B8A-A9FA-500AA22AD51C","type":"message","user":"UBQ2H65JQ","text":"いや、!empty()か。","ts":"1606995851.413600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"u68u"}]},{"client_msg_id":"1EFF9ADB-E5DA-4B0F-AD3B-C53067B653C8","type":"message","user":"UBQ2H65JQ","text":"has_key()のような気がする","ts":"1606995700.413000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"T+p"}]},{"client_msg_id":"F9515D90-3D2A-463E-A052-7F41A9311812","type":"message","user":"UBQ2H65JQ","text":"exists()、これ機能しているの？","ts":"1606995675.412400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Phmu"}]},{"client_msg_id":"05cfe9dd-23be-4e98-9bd8-ed391448c8ef","type":"message","user":"UDDCM376D","text":"これで行けたっぽい（細いところ確認はこれから…）","ts":"1606995549.411800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rXS"}]},{"client_msg_id":"aa0ec063-1c19-494c-b946-f4334ebc5778","type":"message","user":"UDDCM376D","text":"```function! s:make_node(tree, file) abort\n  let paths = split(a:file.path, '/')\n  let path = paths[:-2]\n  let tree = a:tree\n  let item = {\n        \\ 'name': paths[-1],\n        \\ 'path': a:file.path,\n        \\ 'state': 'close',\n        \\ }\n\n  if a:file.type is# 'tree'\n    let item['children'] = []\n  endif\n\n  if tree.path is# join(path, \"/\")\n    call add(a:tree.children, item)\n    return\n  endif\n\n  if exists('tree.children')\n    for node in tree.children\n      call s:make_node(node, a:file)\n    endfor\n  endif\nendfunction```","ts":"1606995531.411400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Pef6"}]},{"client_msg_id":"c5fc578d-8d33-4ff6-b7bb-17c52094de22","type":"message","user":"UDDCM376D","text":"\u0026gt; for node in tree\nこれforである意味ない感","ts":"1606991023.411100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NZoBo"}]},{"client_msg_id":"51a7f0b0-835f-4aa5-b815-4fd515e52368","type":"message","user":"UDDCM376D","text":"ディレクトリだけやってみたら、出来たけど","ts":"1606990996.410600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"S4fr"}]},{"client_msg_id":"55ede835-0323-4324-b444-59abc03c0e14","type":"message","user":"UDDCM376D","text":"```\" {\n\"   path: autoload/gh,\n\"   mode: 040000,\n\"   type: tree,\n\"   sha: 55792a91ee78828b8dd15238981760e074255d45,\n\"   url: \u003chttps://api.github.com/repos/skanehira/gh.vim/git/trees/55792a91ee78828b8dd15238981760e074255d45\u003e\n\" },\nfunction! s:mkdir(tree, file) abort\n  let paths = split(a:file.path, '/')\n  let path = paths[:-2]\n  let tree = a:tree\n  let item = {\n        \\ 'name': paths[-1],\n        \\ 'path': a:file.path,\n        \\ 'state': 'close',\n        \\ 'children': []\n        \\ }\n\n  for node in tree\n    if node.path is# path\n      call add(node.children, item)\n      return\n    else\n      call s:mkdir(node.children, a:file)\n      return\n    endif\n  endfor\n\n  call add(tree, item)\nendfunction```","ts":"1606990981.410200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9NB"}]},{"client_msg_id":"864105fe-e772-47ad-9939-3f028f60ade5","type":"message","user":"UDDCM376D","text":"今脳内混乱状態なので少しお待ちを…","ts":"1606988448.409900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"V/7"}]},{"client_msg_id":"4d6039b9-591b-4e86-80c3-4e12d5127d8d","type":"message","user":"UAZ33BKV2","text":"最初はmkdirもcreatefileもしないで、echoだけで期待動作かを見るところからやったほうがいいかも?(プロトタイプというかmockというか)","ts":"1606988418.409600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"264u"}]},{"client_msg_id":"1d4732da-d142-43ba-904f-727b5ead7335","type":"message","user":"UAZ33BKV2","text":"いや、ここでこの処理が動く、とい程度のメモの意味で","ts":"1606988384.408800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gjk"}]},{"client_msg_id":"535742b4-a768-424d-93b2-03beb0d080a5","type":"message","user":"UDDCM376D","text":"\u0026gt; 自分で構造の図を書いて整理したほうがいいかと思う\n構造図ってどんな感じですか？","ts":"1606988369.408500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LxfA"}]},{"client_msg_id":"3c326736-ee38-4fc8-8a58-ddc96f543496","type":"message","user":"UDDCM376D","text":"\u0026gt; 1エントリ毎にmkdir*n回+createFile 1回よぶだけでは。\nこれなはずなんだけどなぁ","ts":"1606988351.408000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5ch0"}]},{"client_msg_id":"e130493d-da20-4d0f-803a-609c3775008a","type":"message","user":"UAZ33BKV2","text":"自分で構造の図を書いて整理したほうがいいかと思う","ts":"1606988347.407800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nnnPj"}]},{"client_msg_id":"42ae0500-06d3-4909-b0a6-87e14e978157","type":"message","user":"UDDCM376D","text":"やばい、わからんくなってきた…","ts":"1606988298.407300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"M8U7"}]},{"client_msg_id":"48137a2b-1788-4571-a05a-c77756aea938","type":"message","user":"UDDCM376D","text":"ので頑張って書いてみます！","ts":"1606987555.406900","team":"T03C4RC8V","reactions":[{"name":"goodpoem","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3u1z"}]},{"client_msg_id":"4de7aa00-cb4b-43ae-8c89-77a57bea8efc","type":"message","user":"UDDCM376D","text":"なんかいろいろつながった感がある","ts":"1606987550.406700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8fWnW"}]},{"client_msg_id":"faea8af3-5359-44e9-b8d3-a76ce0bf72b5","type":"message","user":"UDDCM376D","text":"ありがとうございます！","ts":"1606987540.406300","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VUq"}]},{"client_msg_id":"f6344c6b-ef7e-40f0-8423-4a82763ea0aa","type":"message","user":"U06BRP8VD","text":"`createFile(dict, name, metainfo)`","ts":"1606987484.406000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aUt"}]},{"client_msg_id":"41c036b4-bbb4-45e3-a7e8-b0d6cb19a7b2","type":"message","user":"UDDCM376D","text":"あーーーーーー","ts":"1606987480.405800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Io5X0"}]},{"client_msg_id":"7acc9144-13ab-48a5-bed7-9c17fc0769f2","type":"message","user":"U06BRP8VD","text":"疑似的なI/Fでいうと `mkdir(dict, name) dict`","ts":"1606987462.405400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"o4/t"}]},{"client_msg_id":"c765ba3c-696f-4ded-855f-c1209459b738","type":"message","user":"U06BRP8VD","text":"dictで","ts":"1606987435.404800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"d830"}]},{"client_msg_id":"c1eaba09-5eef-405f-acc1-1f8ca762ef3b","type":"message","user":"U06BRP8VD","text":"別に型じゃなくても良いのでは","ts":"1606987418.404500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CNEV0"}]},{"client_msg_id":"8ab8916f-f6b0-422e-84eb-3338490c0b46","type":"message","user":"UDDCM376D","text":"\u0026gt; dir 型作って、mkdir と createFile メソッド定義して\nこれ、vim scriptだとどうやるんすかね","ts":"1606987405.404300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"x6hXF"}]},{"client_msg_id":"b4144c19-99e1-436c-a96c-fe0457cd52a3","type":"message","user":"UDDCM376D","text":"\u0026gt; 1エントリ毎にmkdir*n回+createFile 1回よぶだけでは。\nわかりやすい","ts":"1606987298.404000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NUqF"}]},{"client_msg_id":"ab0d96e5-b739-4ba4-b5b4-09373c605760","type":"message","user":"UDDCM376D","text":"なんとなく、イメージが湧いてきた","ts":"1606987256.403500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"M/rTG"}]},{"client_msg_id":"c09c6d98-f6dc-4a90-a492-7f28e65a90c7","type":"message","user":"UDDCM376D","text":"なるほど？","ts":"1606987234.403200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hzl"}]},{"client_msg_id":"d7d1f14a-f31e-4470-83b3-5d6ef34d2ff2","type":"message","user":"U06BRP8VD","text":"dir 型作って、mkdir と createFile メソッド定義して、1エントリ毎にmkdir*n回+createFile 1回よぶだけでは。","ts":"1606987208.403000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HKw"}]},{"client_msg_id":"d6997a73-e8c4-40a3-9133-f775b4b24db5","type":"message","user":"UDDCM376D","text":"\u0026gt; パスをスラッシュで分割したものをイテレートしながらオブジェクトに一つ一つ生やしていった\nですよねぇ\nどこの実装が変なのやら…","ts":"1606987154.402300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wCGLk"}]},{"client_msg_id":"caad31f1-7656-40e9-ba6c-e3d9625e046c","type":"message","user":"UDDCM376D","text":"Goは↑","ts":"1606987131.401600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hRN9"}]},{"client_msg_id":"06b79a00-c27c-411f-99fb-297787ad4c5e","type":"message","user":"UDDCM376D","text":"\u003chttps://github.com/skanehira/make-dir-structure/blob/master/main.go\u003e","ts":"1606987125.401100","attachments":[{"fallback":"GitHub: skanehira/make-dir-structure","id":1,"title":"skanehira/make-dir-structure","title_link":"https://github.com/skanehira/make-dir-structure/blob/master/main.go","text":"Contribute to skanehira/make-dir-structure development by creating an account on GitHub.","thumb_url":"https://avatars2.githubusercontent.com/u/7888591?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/skanehira/make-dir-structure/blob/master/main.go","original_url":"https://github.com/skanehira/make-dir-structure/blob/master/main.go"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/CzPr"}]},{"client_msg_id":"e015ae23-d1b5-459d-9efc-9f5cad1f9819","type":"message","user":"U9S4G0LJW","text":"パスをスラッシュで分割したものをイテレートしながらオブジェクトに一つ一つ生やしていった","ts":"1606987117.400800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kge7"}]},{"client_msg_id":"4c33afeb-983a-4382-9d8f-b69efeb96eb7","type":"message","user":"UDDCM376D","text":"はい、そうです","ts":"1606987112.400400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"r2f"}]},{"client_msg_id":"e1097347-bdcd-4e67-8533-946182456e80","type":"message","user":"U06BRP8VD","text":"んーpathで構造化するってこと?","ts":"1606987095.399600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mrx"}]},{"client_msg_id":"86c1c3a0-5bd3-4f94-b19e-3706af73a478","type":"message","user":"U9S4G0LJW","text":"Goでなら似たようなのを書いたことがあるな\nfilepath/walkの結果が直列なので","ts":"1606987078.399100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xtqt"}]},{"client_msg_id":"93e18454-ffed-40a3-bdad-4b2a586ccc45","type":"message","user":"UDDCM376D","text":"ムズカシイ","ts":"1606987051.398600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Qsf"}]},{"client_msg_id":"e79fd515-b585-4369-92aa-7be657f9cda1","type":"message","user":"UDDCM376D","text":"これがコード","ts":"1606987039.398200","files":[{"id":"F01G2FFAKRR","created":1606987037,"timestamp":1606987037,"name":"無題","title":"無題","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"プレーンテキスト","user":"UDDCM376D","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":1273,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F01G2FFAKRR/______","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F01G2FFAKRR/download/______","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/UDDCM376D/F01G2FFAKRR/______","permalink_public":"https://slack-files.com/T03C4RC8V-F01G2FFAKRR-54bb18343b","edit_link":"https://vim-jp.slack.com/files/UDDCM376D/F01G2FFAKRR/______/edit","preview":"function! gh#files#tree() abort\n  let body = json_decode(join(readfile('test_tree.json')))\n\n  call s:set_file_list(body)\n  call setline(1, json_encode(s:tree))","preview_highlight":"\u003cdiv class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text/plain',window.getSelection().toString().replace(/\\u200b/g,''));event.preventDefault();event.stopPropagation();}\"\u003e\n\u003cdiv class=\"CodeMirror-code\"\u003e\n\u003cdiv\u003e\u003cpre\u003efunction! gh#files#tree() abort\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e  let body = json_decode(join(readfile('test_tree.json')))\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e  call s:set_file_list(body)\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e  call setline(1, json_encode(s:tree))\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n","lines":53,"lines_more":48,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pgM"}]},{"client_msg_id":"66e66575-a0f3-4ec5-99e9-14bd23961dd8","type":"message","user":"UDDCM376D","text":"これが出力結果\n```{\n  \"name\": \"test\",\n  \"children\": [\n    {\n      \"name\": \"autoload\",\n      \"children\": [\n        {\n          \"name\": \"gh\",\n          \"children\": [\n            {\n              \"name\": \"actions.vim\",\n              \"path\": \"autoload/gh/actions.vim\"\n            }\n          ],\n          \"path\": \"autoload/gh/actions.vim\"\n        },\n        {\n          \"name\": \"gh\",\n          \"children\": [\n            {\n              \"name\": \"bookmark.vim\",\n              \"path\": \"autoload/gh/bookmark.vim\"\n            }\n          ],\n          \"path\": \"autoload/gh/bookmark.vim\"\n        }\n      ],\n      \"path\": \"autoload\"\n    }\n  ],\n  \"state\": \"open\",\n  \"path\": \"\"\n}```","ts":"1606987000.398000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MaISt"}]},{"client_msg_id":"df68fe6a-5d0d-4fff-9246-1cb2a915af73","type":"message","user":"UDDCM376D","text":"これがin\n```{\n  \"sha\": \"c1e66207dd04f20a7416d3772d10705f39cd1132\",\n  \"url\": \"\u003chttps://api.github.com/repos/skanehira/gh.vim/git/trees/c1e66207dd04f20a7416d3772d10705f39cd1132\u003e\",\n  \"tree\": [\n    {\n      \"path\": \"autoload\",\n      \"mode\": \"040000\",\n      \"type\": \"tree\",\n      \"sha\": \"d2ab9e6d8a57b93dce512a58ff4463b6de4ea2f9\",\n      \"url\": \"\u003chttps://api.github.com/repos/skanehira/gh.vim/git/trees/d2ab9e6d8a57b93dce512a58ff4463b6de4ea2f9\u003e\"\n    },\n    {\n      \"path\": \"autoload/gh\",\n      \"mode\": \"040000\",\n      \"type\": \"tree\",\n      \"sha\": \"55792a91ee78828b8dd15238981760e074255d45\",\n      \"url\": \"\u003chttps://api.github.com/repos/skanehira/gh.vim/git/trees/55792a91ee78828b8dd15238981760e074255d45\u003e\"\n    },\n    {\n      \"path\": \"autoload/gh/actions.vim\",\n      \"mode\": \"100644\",\n      \"type\": \"blob\",\n      \"sha\": \"0d9499d3c93050696ed3d1d7248f59ac267098af\",\n      \"size\": 6389,\n      \"url\": \"\u003chttps://api.github.com/repos/skanehira/gh.vim/git/blobs/0d9499d3c93050696ed3d1d7248f59ac267098af\u003e\"\n    },\n    {\n      \"path\": \"autoload/gh/bookmark.vim\",\n      \"mode\": \"100644\",\n      \"type\": \"blob\",\n      \"sha\": \"0d73fa57d2c30937aac04506e03c4e1f8ab8eb6e\",\n      \"size\": 1244,\n      \"url\": \"\u003chttps://api.github.com/repos/skanehira/gh.vim/git/blobs/0d73fa57d2c30937aac04506e03c4e1f8ab8eb6e\u003e\"\n    }\n  ],\n  \"truncated\": false\n}```","ts":"1606986933.397500","edited":{"user":"UDDCM376D","ts":"1606986960.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Bajf"}]},{"client_msg_id":"fb48bc51-e3e1-434f-8548-61ee206fc625","type":"message","user":"UDDCM376D","text":"Vimでファイルパスの配列を構造化するコード書いているけど、全然出来なくてツライ","ts":"1606986853.396600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1AV"}]}]
