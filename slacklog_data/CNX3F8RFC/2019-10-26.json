[{"client_msg_id":"34bfff21-ee53-47f1-9b44-912034e9cb5a","type":"message","user":"UAZ33BKV2","text":"最近のvimrcに更新した\n<https://github.com/tsuyoshicho/vimrc-reading>","ts":"1572076866.281900","attachments":[{"fallback":"GitHub: tsuyoshicho/vimrc-reading","id":1,"title":"tsuyoshicho/vimrc-reading","title_link":"https://github.com/tsuyoshicho/vimrc-reading","text":"split vimrc from dotfile repository for reading. Contribute to tsuyoshicho/vimrc-reading development by creating an account on GitHub.","thumb_url":"https://avatars2.githubusercontent.com/u/96727?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/tsuyoshicho/vimrc-reading","original_url":"https://github.com/tsuyoshicho/vimrc-reading"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c6073660-84f2-40f7-92f5-362da9038bb2","type":"message","user":"U8996GYBF","text":"fzfのpreviewオプションでgitでuntrackedなファイルならcatで、trackedなファイルならgit diffを呼びたいんだけど書き方が難しい\nシェルスクリプトちょっとできる人いたら教えて貰いたいです","ts":"1572085260.283100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c694d75a-1e9a-49b9-baff-4596065946bd","type":"message","user":"U8996GYBF","text":"```\nfunction _fzf_complete_git_add_file() {\n  local add_files\n  add_files=$(git status --short | awk '{if (substr($0,2,1) !~ / /) print $0}')\n  FZF_COMPLETION_OPTS='--multi --height 80% --prompt \"Git Add Files&gt;\" --preview \"git diff --color=always $(echo {} | awk '\\''{if (substr($0,2,1) !~ / /) print $2}'\\'')\" --bind ctrl-d:preview-page-down,ctrl-u:preview-page-up,?:toggle-preview'\n  _fzf_complete '' \"$BUFFER\" &lt; &lt;(\n  echo $add_files\n  )\n}\n```\n今zshからfzfで呼んでる処理がこれで","ts":"1572085290.283600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a5cc1072-5462-4a46-8bdf-048e8124c5e0","type":"message","user":"U8996GYBF","text":"`FZF_COMPLETION_OPTS='--preview \"git diff --color=always $(echo {} | awk '\\''{if (substr($0,2,1) !~ / /) print $2}'\\'')\"'`","ts":"1572085354.284100","edited":{"user":"U8996GYBF","ts":"1572085373.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"df9be3a9-0f01-48a6-8a4b-e79570132b5b","type":"message","user":"U8996GYBF","text":"このpreviewの部分を `git diff {} || cat {}` 的な処理にしたい\ngit diffの `--exit-code` オプション使って `||` でいけるかと思ったけどfzfのpreviewがexit codeで処理分けてなさそうでダメだったんですよね・・・","ts":"1572085458.285900","edited":{"user":"U8996GYBF","ts":"1572085505.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"17d88ab4-2064-40a7-b125-984443c84f4a","type":"message","user":"UAZ33BKV2","text":"untrackかどうか、git diffを出すか、catするかを処理するスクリプトファイルを用意して、それにまとめて処理させたほうが、たぶん確実なんじゃないかな...\nできなくは、ないとは思う","ts":"1572085605.287000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"54e421f1-7814-430b-8b8a-589b81b85363","type":"message","user":"U8996GYBF","text":"やっぱり普通にスクリプト外出しのがよさそうですかねー、余計すごいコードになっちゃいますよねこれ","ts":"1572085636.287600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"08ad3e33-53c2-4e18-afd8-cc56aafe3755","type":"message","user":"U8996GYBF","text":"エスケープ周りのせいで今でも限界感ある","ts":"1572085652.288000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"751a7489-0aff-44fe-a7f9-b26fb27eafd2","type":"message","user":"U7B4ZD49X","text":"fzfエスケープつらい","ts":"1572085667.288400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bf251641-3064-4c8e-b6ba-a17ae8d1e548","type":"message","user":"U8996GYBF","text":"めっちゃわかる","ts":"1572085691.288800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6fc73f4a-3f2f-487a-845a-3714ee9b766b","type":"message","user":"U7B4ZD49X","text":"関数に出さないなら最初にifでgit管理かそうでないかを判定したほうがよいですね。\nたぶんおなじくらい複雑にDEFAULT_OPTSいれてるけど参考になれば\n<https://github.com/yutakatay/dotfiles/blob/master/.vim/rc/pluginconfig.vim#L1836>","ts":"1572085916.290500","attachments":[{"fallback":"GitHub: yutakatay/dotfiles","id":1,"title":"yutakatay/dotfiles","title_link":"https://github.com/yutakatay/dotfiles/blob/master/.vim/rc/pluginconfig.vim#L1836","text":"The best and strongest dotfiles. Contribute to yutakatay/dotfiles development by creating an account on GitHub.","thumb_url":"https://avatars3.githubusercontent.com/u/8683947?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":312,"thumb_height":312,"from_url":"https://github.com/yutakatay/dotfiles/blob/master/.vim/rc/pluginconfig.vim#L1836","original_url":"https://github.com/yutakatay/dotfiles/blob/master/.vim/rc/pluginconfig.vim#L1836"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2b5286e0-89a5-4df6-b4e8-004d7f45e1a1","type":"message","user":"U8996GYBF","ts":"1572085932.290700","files":[{"id":"FPUAU8285","created":1572085834,"timestamp":1572085834,"name":"2019-10-26 18-44-41.2019-10-26 18_47_36.gif","title":"2019-10-26 18-44-41.2019-10-26 18_47_36.gif","mimetype":"image/gif","image_exif_rotation":1,"filetype":"gif","pretty_type":"GIF","user":"U8996GYBF","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":1239738,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FPUAU8285/2019-10-26_18-44-41.2019-10-26_18_47_36.gif","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FPUAU8285/download/2019-10-26_18-44-41.2019-10-26_18_47_36.gif","original_h":881,"original_w":1710,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-FPUAU8285-2a7c7ad512/2019-10-26_18-44-41.2019-10-26_18_47_36_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-FPUAU8285-2a7c7ad512/2019-10-26_18-44-41.2019-10-26_18_47_36_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-FPUAU8285-2a7c7ad512/2019-10-26_18-44-41.2019-10-26_18_47_36_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-FPUAU8285-2a7c7ad512/2019-10-26_18-44-41.2019-10-26_18_47_36_360.png","thumb_360_gif":"https://files.slack.com/files-tmb/T03C4RC8V-FPUAU8285-2a7c7ad512/2019-10-26_18-44-41.2019-10-26_18_47_36_360.gif","thumb_360_w":360,"thumb_360_h":185,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-FPUAU8285-2a7c7ad512/2019-10-26_18-44-41.2019-10-26_18_47_36_480.png","thumb_480_w":480,"thumb_480_h":247,"thumb_720":"https://files.slack.com/files-tmb/T03C4RC8V-FPUAU8285-2a7c7ad512/2019-10-26_18-44-41.2019-10-26_18_47_36_720.png","thumb_720_w":720,"thumb_720_h":371,"thumb_960":"https://files.slack.com/files-tmb/T03C4RC8V-FPUAU8285-2a7c7ad512/2019-10-26_18-44-41.2019-10-26_18_47_36_960.png","thumb_960_w":960,"thumb_960_h":495,"thumb_1024":"https://files.slack.com/files-tmb/T03C4RC8V-FPUAU8285-2a7c7ad512/2019-10-26_18-44-41.2019-10-26_18_47_36_1024.png","thumb_1024_w":1024,"thumb_1024_h":528,"permalink":"https://vim-jp.slack.com/files/U8996GYBF/FPUAU8285/2019-10-26_18-44-41.2019-10-26_18_47_36.gif","permalink_public":"https://slack-files.com/T03C4RC8V-FPUAU8285-7996829401","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"deanimate_gif":"https://files.slack.com/files-tmb/T03C4RC8V-FPUAU8285-2a7c7ad512/2019-10-26_18-44-41.2019-10-26_18_47_36_deanimate_gif.png","display_as_bot":false,"has_rich_preview":false,"thumb_480_gif":"https://files.slack.com/files-tmb/T03C4RC8V-FPUAU8285-2a7c7ad512/2019-10-26_18-44-41.2019-10-26_18_47_36_480.gif","thumb_800":"https://files.slack.com/files-tmb/T03C4RC8V-FPUAU8285-2a7c7ad512/2019-10-26_18-44-41.2019-10-26_18_47_36_800.png","thumb_800_h":412,"thumb_800_w":800,"thumb_tiny":"AwAYADClmiiigAooooAKKKKACiiigAooooAKKKKAP//Z","username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"48a141bc-0018-41c8-9195-7e29a5aec00d","type":"message","user":"U8996GYBF","text":"今これの改善やってるとこです、参考に見せて貰いますー","ts":"1572085947.291300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"653ceaa5-9637-4710-9bd0-39729674cd78","type":"message","user":"U8996GYBF","text":"あっこのDEFAULT_OPTSヤバい","ts":"1572085970.291700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"743f289a-70c0-4f06-a0ae-f64c84daa7f0","type":"message","user":"U8996GYBF","text":"bat派なんですね","ts":"1572085988.291900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"daee2695-e493-483d-8f3e-f6efdc1a33d1","type":"message","user":"U7B4ZD49X","text":"というかRust派ですね","ts":"1572086015.292200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"06c8c9ba-0b12-449a-ae19-810047e0ccb2","type":"message","user":"U8996GYBF","text":"あー、なるほど","ts":"1572086020.292400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"876a6567-10e9-49c6-8e46-6d6b6e9e573e","type":"message","user":"U8996GYBF","text":"こうやってfzf.vimに設定差し込んでるのか、自分はプラグイン作っちゃいました <https://github.com/yuki-ycino/fzf-preview.vim>","ts":"1572086130.293700","attachments":[{"fallback":"GitHub: yuki-ycino/fzf-preview.vim","id":1,"title":"yuki-ycino/fzf-preview.vim","title_link":"https://github.com/yuki-ycino/fzf-preview.vim","text":"fzf-preview-mode is a Vim plugin to provide some fzf sources to with large preview. - yuki-ycino/fzf-preview.vim","thumb_url":"https://avatars1.githubusercontent.com/u/5423775?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/yuki-ycino/fzf-preview.vim","original_url":"https://github.com/yuki-ycino/fzf-preview.vim"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"25769ed6-39d1-4c66-8d42-74b3e831365d","type":"message","user":"U7B4ZD49X","text":"お、よさそうですね。使われてもらおうかな","ts":"1572086262.294100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c3534bea-7453-4142-add2-aa3a74daf129","type":"message","user":"U8996GYBF","text":"ただいつかのneovimの更新からpreview最大化したら戻したときぶっ壊れるみたいな挙動になってるから調べて直さないといけないやつですね・・・、放置しちゃってる","ts":"1572086303.294900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4442db5a-7925-4e27-8ece-2a33e4a77d9c","type":"message","user":"U8996GYBF","text":"手元で一番ヘビーに使ってるプラグインにはなってます","ts":"1572086328.295300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9a25994f-0e75-4b3a-b0fb-6f77e074eb7a","type":"message","user":"UBNPMJJGM","text":"目的次第ですが `--intent-to-add` で全部 `git diff` に任せるのが早そう","ts":"1572087945.295400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"71506b69-675e-439c-99e6-541b19bcb655","type":"message","user":"UBNPMJJGM","text":"あープラグインなのか","ts":"1572088469.295500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"213662fb-b5e9-4109-88af-af5c9bb359fc","type":"message","user":"U8996GYBF","text":"intent-to-addを常に全てのファイルについて行うのはどうなんだろうなーって思ったんですよね","ts":"1572088964.295900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f18c255f-ee35-4168-b681-97cfe2a7043f","type":"message","user":"U8996GYBF","text":"<https://github.com/yukiycino-dotfiles/dotfiles/blob/3fd21cb10a964abd6da2a7af5b3c43624c651161/bin/fzf-complete-git-add-preview>\nこれをpreviewに使うようにしてできた、ありがとうございます","ts":"1572089222.296200","attachments":[{"fallback":"GitHub: yukiycino-dotfiles/dotfiles","id":1,"title":"yukiycino-dotfiles/dotfiles","title_link":"https://github.com/yukiycino-dotfiles/dotfiles/blob/3fd21cb10a964abd6da2a7af5b3c43624c651161/bin/fzf-complete-git-add-preview","text":"My configuration files. Contribute to yukiycino-dotfiles/dotfiles development by creating an account on GitHub.","thumb_url":"https://avatars0.githubusercontent.com/u/11812215?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/yukiycino-dotfiles/dotfiles/blob/3fd21cb10a964abd6da2a7af5b3c43624c651161/bin/fzf-complete-git-add-preview","original_url":"https://github.com/yukiycino-dotfiles/dotfiles/blob/3fd21cb10a964abd6da2a7af5b3c43624c651161/bin/fzf-complete-git-add-preview"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cdb34bf1-df18-4ee1-96f5-f27a69cf4213","type":"message","user":"UBNPMJJGM","text":"そうですね、プラグインが毎回強制 intent-to-add するのは微妙ですねー","ts":"1572089399.296400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f0ff4263-bf6a-4c47-a1ea-44b62bbd1aa8","type":"message","user":"U8996GYBF","text":"できた、便利になった感じ","ts":"1572090088.296600","edited":{"user":"U8996GYBF","ts":"1572090095.000000"},"team":"T03C4RC8V","reactions":[{"name":"tada","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ffc50f61-d45e-4a61-9283-1413bbc5bf9b","type":"message","user":"U8996GYBF","text":"シェル力の不足を感じる","ts":"1572090181.297100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2c375ea7-ba3b-4d4f-887d-3b534fe0bfba","type":"message","user":"U8996GYBF","text":"previewコマンド外出しできて読みやすくはなりました！","ts":"1572090274.297600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"14f6b665-443c-48a3-a856-68eb90b0d37a","type":"message","user":"U8996GYBF","text":"昔は数日に1回dotfilesいじるくらいだったのに今見たら2ヶ月ぶりの更新になっていて寂しい","ts":"1572091133.298300","team":"T03C4RC8V","reactions":[{"name":"blob_cry","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
