[{"client_msg_id":"4064945b-6718-4649-a005-eb01df42cd81","type":"message","user":"UAZ33BKV2","text":"`Async.Promise.Process` を適切に使うことで、  `System.Process.Vimproc` で動いている `ConcurrentProcess` を動かせる可能性...プロセスの維持はちょっと違うしなあ..\n`vimproc` の導入の動機が薄くなってきていて、だけど quickrunの非同期動作を考えるとどうにかできたらな感","ts":"1563516359.343800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d81e85fb-860d-4f9e-bd45-fa927d461bc6","type":"message","user":"UAZ33BKV2","text":"いや、jobは非同期なんだけど","ts":"1563516405.344100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ae72d6dc-64cf-4311-a929-47d6237c41d3","type":"message","user":"U03C4RC8X","text":"期待","ts":"1563517555.344300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"68bfaca6-f56c-4461-81ed-2aa0f1a4ea9c","type":"message","user":"U03C4RC8X","text":"quickrun runner-promise","ts":"1563517588.344700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"291a85f1-97aa-49d7-8d90-f731ab6f2569","type":"message","user":"UAZ33BKV2","text":"jobと比べての利点があるか、はありますねw\nまだ使い込んではないので、不満があるわけではないんですが、なにかあった時向けに検討だけ","ts":"1563518040.345900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2660404c-7fd7-4759-aa19-f371f3728bb1","type":"message","user":"U03C6TEAZ","text":"channel の延長で I/O に絡んでないのが欲しい。","ts":"1563518144.346200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"92736170-42f7-4a08-af04-1f26c762f336","type":"message","user":"U03C6TEAZ","text":"標準入出力でもないし、ソケットでもない。単なる FIFO","ts":"1563518166.346700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"edf4b9a4-4767-4228-904e-dc876fffe342","type":"message","user":"UAZ33BKV2","text":"vim内メッセージキュー?","ts":"1563518190.347100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f551995d-ad14-4fb0-ad96-245ad67dd06b","type":"message","user":"U03C6TEAZ","text":"スレッドセーフな FIFO、でもインタフェースは channel みたいな。","ts":"1563518217.347500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6a4a798c-1e7b-4d21-acb1-b7d0d9932aee","type":"message","user":"U03C6TEAZ","text":"```\nlet ch = ch_open(\"localhost:3333\")\n```\n```\nlet job = job_open(\"foo\", {})\nlet ch = job_getchannel(job)\n```\nこれが今の使い方。","ts":"1563518298.348900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"500a2fcd-030e-403c-a312-aa0cde498fbf","type":"message","user":"U03C6TEAZ","text":"```\nlet ch = ch_pipe(500) \" buffer size\n```\nみたいにして channel として扱いたい。","ts":"1563518309.349200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1452eb61-946c-4fda-b497-c2f98c5a339c","type":"message","user":"U03C6TEAZ","text":"そうすれば if_python で作ったスレッドから Vim script に out_cb として処理が流せられる。","ts":"1563518370.349900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c0ec81e4-f01c-4f56-a307-a7c60306eec2","type":"message","user":"UAZ33BKV2","text":"if_xxxでスレッド化での非ブロックかつchannelでの通信でいいのかな? かなりいいですね","ts":"1563518512.351100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f62b5c00-57b0-4ff1-b710-f86e52e944bf","type":"message","user":"U03C6TEAZ","text":"はい。Vim がブロックしない仕組みですね。","ts":"1563518592.351500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4f8dc9cf-18ff-4673-824c-49e47fe5a2db","type":"message","user":"U03C6TEAZ","text":"内部の実装もおそらく単にメモリの保護だけで出来るはず。","ts":"1563518612.351900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b4f8bcac-db97-4fb4-ada8-dc1b19d80d91","type":"message","user":"U03C6TEAZ","text":"これが出来ると if_xxx の意味が出て来る。","ts":"1563518664.352200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9fa5b32b-0048-447d-91b6-b465272cca1c","type":"message","user":"U03C6TEAZ","text":"python 側から `vim.ch_send(ch, \"foo\")` とか出来る必要があるか。","ts":"1563518860.354200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c53e51ea-67a2-4730-afab-bbb8c7a15c71","type":"message","user":"UAZ33BKV2","text":"そうすると、たとでばquickrunの pythonやrubyのデフォルトがif_xxxの `print(%s)` とかですが、これが非同期でちゃんと動くと...おおお(代りにラッパーになるコードが必要か、stdin/outを直結するオプションを付けるか)","ts":"1563519084.355900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1ea7c6ca-dc60-4fa2-a0e3-75a7b0aef649","type":"message","user":"U03C71D7H","text":"quickrun はそんなことはしてない…","ts":"1563519115.356200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5e29bce1-ac5b-4d4d-8686-78c18ef04fcd","type":"message","user":"UAZ33BKV2","text":"あれ、デフォルトのコマンド実行って..うう、よみときを誤ってましたか\nすみません。","ts":"1563519164.357300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"93983c20-9879-4f04-a7bf-f6f73ca24058","type":"message","user":"U03C6TEAZ","text":"スレッドとは言え、python から Vim script に要求出して、応答を貰うまで待てる仕組みがあった方が良いなぁ。","ts":"1563519169.357500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"668b9145-b104-4653-8723-f24c5dc9b168","type":"message","user":"U03C71D7H","text":"やるのは全然良さそうだけど、たぶん Bram は if_xxx 系の強化はもうあんまりしたくないんじゃないだろうか。個人的にもそこがんばるなら Vim script 自体を伸ばしたいと言う気持ちがあります","ts":"1563519252.358500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1cbdd7ea-3332-44d4-96ce-bea836c01578","type":"message","user":"U03C6TEAZ","text":"今って外からアクションを受け付ける仕組みがないんですよね。","ts":"1563519347.358800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d98d231a-0491-4aec-b841-e28d30a0abb5","type":"message","user":"U03C6TEAZ","text":"プロセスを起動してそいつに任せるって仕組みなら作れるんですけどね。","ts":"1563519383.359600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c2249724-37f1-4186-81af-f3b941328905","type":"message","user":"U03C71D7H","text":"ですね。if_xxx 関係なく、あると便利かもですね","ts":"1563519474.360100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5c09e0ab-8476-4b8a-ace5-a07a2e9eb662","type":"message","user":"U03C6TEAZ","text":"ファイルの変更検知とか。","ts":"1563519511.360300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"df56d4a5-38f1-438f-9bec-03b8f1370b5f","type":"message","user":"U03C6TEAZ","text":"<https://github.com/mattn/vim-filewatcher>\nこんな感じに外部コマンドに頼らざるを得ない。","ts":"1563519527.360700","attachments":[{"fallback":"GitHub: mattn/vim-filewatcher","id":1,"title":"mattn/vim-filewatcher","title_link":"https://github.com/mattn/vim-filewatcher","text":"Contribute to mattn/vim-filewatcher development by creating an account on GitHub.","thumb_url":"https://avatars1.githubusercontent.com/u/10111?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/mattn/vim-filewatcher","original_url":"https://github.com/mattn/vim-filewatcher"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e97205dd-fa39-4d75-a805-a6cb1f0f0b6e","type":"message","user":"UAZ33BKV2","text":"ポーリングをRxにする、的?","ts":"1563519578.361400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1135d29d-2dcd-4ab7-9b1c-7ae51d8fea93","type":"message","user":"U03C6TEAZ","text":"if_python で作れるんでしょうけど、if_python から安全に Vim script に渡すすべがないので。","ts":"1563519615.361900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a0c7a63c-6615-4a69-b4db-5e3f1edd78de","type":"message","user":"UAZ33BKV2","text":"はい","ts":"1563519622.362100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3fe6b9bd-1bf9-44ec-8a20-4041079b6bd3","type":"message","user":"UAZ33BKV2","text":"あ、quickrun での pythonの動き理解orz","ts":"1563519795.362500","edited":{"user":"UAZ33BKV2","ts":"1563519814.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
