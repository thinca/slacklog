[{"client_msg_id":"30a957a3-5bce-43f7-a023-64d19ee3b719","type":"message","user":"U8996GYBF","text":"Reduxで値を永続化していい感じに管理しようと思ってたら、コマンド実行や関数実行の度にstoreが初期化されていることが判明して無事死亡した・・・","ts":"1591176280.174200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"45u8g"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5cb6afde-5d6c-466f-8a0e-3da80dc15394","type":"message","user":"U8996GYBF","text":"fzf起動時にReduxのStoreに格納した値が、fzfでファイルを選択してからcallbackの関数が呼ばれたタイミングで初期化されて消えてる・・・","ts":"1591176332.175100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ezl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"759b553e-3909-4e4b-bf6c-00311071fcc0","type":"message","user":"U8996GYBF","text":"永続化はほぼVim scriptの世界に投げることになっちゃいそうかな、あんまりVim script側のコード量増やしたくなかったんだけど仕方ない感じ","ts":"1591177759.175700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"peH+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5db5d39b-1acb-43a8-b3f1-b237cb9e7c87","type":"message","user":"U8996GYBF","text":"無理矢理やるなら `/tmp` 以下にJSONを吐いて保存するっていう手を思いついてしまったけど複数のNeovim起動した時にバグるからダメ、UUID生成してファイル名にするとか？\n限界感ある","ts":"1591178695.176800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aDaF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U01553U9WEL","text":"<@U01553U9WEL> has joined the channel","ts":"1591181681.177000","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"eb7eaf84-567c-4ef9-8f21-6d7cc459fa39","type":"message","user":"U7B4ZD49X","text":"私はこれでいいですけどね。","ts":"1591110551.155600","thread_ts":"1591103395.153500","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qwHY="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5911fb6c-6fce-48c9-943c-5fe2d693890a","type":"message","user":"U8996GYBF","text":"今までFuncRefを使ってやってたところをTSの世界のfunctionの参照で持つようにするのと、ユーザがVim scriptでFuncRefを指定していた場合はVim script側にfallbackして関数を実行するみたいなことになりそう\n辛い感じだ","ts":"1591151484.157600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2q3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9a936804-c270-496c-9972-d9f711dcf48e","type":"message","user":"U8996GYBF","text":"ユーザがとりだして一部だけ変更することを考えるとここだけは全部Vim script側にどうにか持たせないといけない感じもしてきた、むずい","ts":"1591151545.158600","edited":{"user":"U8996GYBF","ts":"1591151638.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"G0/J"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4d644451-5399-40c0-bffc-c5c359e9cd2e","type":"message","user":"U8996GYBF","text":"FuncRefがリモートプラグインで扱えないの難しすぎる","ts":"1591151687.159400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"z2/h"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ff31ca0c-ba32-438a-a34c-dc691c071b8d","type":"message","user":"U776661HA","text":"TS世界である内側だけ function 参照で、外側は Vim script で固めるのが良い気がする。Shougoスタイル","ts":"1591151703.159800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mdKZ="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d2dcfdbc-01e5-4de1-8063-2a49f2d39682","type":"message","user":"U776661HA","text":"Vimプラグインなんだから外部（別プラグイン／ユーザー）とのやり取りはVim scriptで固める、的な","ts":"1591151725.160300","edited":{"user":"U776661HA","ts":"1591151743.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iji"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"adcca904-ba8a-48a1-ac6d-853c74755818","type":"message","user":"U8996GYBF","text":"既存実装でユーザが取りだして変更可能なんですよね、 `get_default_processors()` が存在してしまっていて、TSで閉じたいものをユーザに返すインターフェイスが存在してしまっている","ts":"1591151772.161900","edited":{"user":"U8996GYBF","ts":"1591151785.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VBrnc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eda1bb04-1c18-486d-8ab3-f3ab43ece7fe","type":"message","user":"U776661HA","text":"それは Vim script の FuncRef返せば良いのでは","ts":"1591151835.163200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"18m4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1fcbdae8-146a-4719-b459-4ea4966d7cdc","type":"message","user":"U8996GYBF","text":"昨日言ってたのがこのdefaultがFileOpenに閉じたものになってしまっているんで、defaultとはなにかってなてるんですけど","ts":"1591151856.163600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jef"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f86f0578-005e-42b3-baa8-b77d80100e73","type":"message","user":"U776661HA","text":"```function! fzf_preview#processors#open() abort\n  \" TS のコードを呼び出す\nendfunction```","ts":"1591151902.165100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"n+WT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a44b1fbb-3fee-42eb-94c5-a71a32cc063d","type":"message","user":"U776661HA","text":"みたいなの返せば良いのでは","ts":"1591151909.165300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DCSOl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1f0810c7-8375-4f1c-9953-87b090b53b82","type":"message","user":"U8996GYBF","text":"TSの関数をregisterFunctionした上でVim scriptでそのFuncRefを入れて返す感じですかね、それで確かにできる","ts":"1591151909.165400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LYiy"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b9bf33e3-0fa7-46e1-a600-d94a6bf3a064","type":"message","user":"U776661HA","text":"Shougoさんが基本このスタイルできれいに組んでるはず","ts":"1591151933.165900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Cdm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"59947c68-6ef1-41fe-9534-93be6a713d75","type":"message","user":"U8996GYBF","text":"なるほど、Pythonだけで閉じて書くこともできるけど、リモートプラグインからも使えるインターフェイスにしてVim側にregisterしてるのかな","ts":"1591151987.166900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QnvV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2fad08dd-98d0-40d9-8839-7da1957533aa","type":"message","user":"U8996GYBF","text":"その場合ってTSからその関数呼び出す場合もVim script経由してるんですかね？","ts":"1591152044.167400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Enp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8e706b4f-692a-47a8-a9be-ac7568fee5d2","type":"message","user":"U776661HA","text":"「その関数」がカスタマイズによって別実装に変わる可能性があるなら Vim script軽油じゃないですかね？","ts":"1591152084.168300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tTw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"75eb6f52-8017-423f-b18c-e67ae254ba8c","type":"message","user":"U8996GYBF","text":"ユーザが指定した場合はTS -&gt; Vim script -&gt; TSになるはずで、ユーザが指定してなかったら TS -&gt; TSで済む","ts":"1591152085.168400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ybg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d7a9b2fd-faf1-416b-93d7-edc81e75a561","type":"message","user":"U8996GYBF","text":"なるほどそこの経路複雑にしない方がいいですよね、了解です","ts":"1591152107.168900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eN2RB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"684e588d-801c-4c45-9c6c-0a446378a2eb","type":"message","user":"U776661HA","text":"パフォーマンスとか組み方とか色々関わるので、どこをカスタマイズ可能にするか？ってのは慎重に選んだ方がいいですね","ts":"1591152144.169500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/FA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"927a3fed-b904-408e-af16-ce3896ac8b69","type":"message","user":"U8996GYBF","text":"丁度そこで、あっ、ってなって考えてるとこでした\nむずい","ts":"1591152173.170100","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":1,"users":["U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"04g"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9e7d56ca-dbb0-4fbe-843d-ca2253f79e10","type":"message","user":"U8996GYBF","text":"リモートプラグインの制約がなかったら大分楽なんですけど","ts":"1591152197.170600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GKQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3b375cea-ccc0-48c5-af70-f21e8627111c","type":"message","user":"U8996GYBF","text":"とりあえずFuncRefのdictionaryを `console.log` したらこうなって返ってきました・・・\n`{\"message\":\"[fzf-preview.vim] {\\n  '': null,\\n  'ctrl-v': null,\\n  'ctrl-a': null,\\n  'ctrl-q': null,\\n  'ctrl-r': null,\\n  'ctrl-s': null,\\n  'ctrl-t': null,\\n  'ctrl-c': null\\n}\",\"level\":\"info\"}`","ts":"1591152241.171400","edited":{"user":"U8996GYBF","ts":"1591152253.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"S/V"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6b59f1b2-4615-41c5-8b56-398ac4980c4c","type":"message","user":"U8996GYBF","text":"この辺を一旦Vim script経由していい感じに呼び出すwrapper書かないとか、型が失われちゃう","ts":"1591152354.172500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BJk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
