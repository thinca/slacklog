[{"client_msg_id":"17aeafab-6fbe-4190-b744-4d09746a422c","type":"message","user":"U8996GYBF","text":"doautocmdで発行されるイベント名をautocmdの中で取得できたりするならもうちょっとコード綺麗になるかも","ts":"1609423188.212700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6yqE"}]},{"client_msg_id":"28861c07-3351-41ac-a65a-3ab924c8c09a","type":"message","user":"U8996GYBF","text":"ひとまずそれぞれ `fzf_preview#initialized` に加えて個別のイベント発行するようにはした・・・","ts":"1609423132.211900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Mn1I"}]},{"client_msg_id":"e77d1050-6486-4d51-bf65-a88c110f95e3","type":"message","user":"U7JL1UKKL","text":"はい。キャッシュありますね","ts":"1609422704.211400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PPl2"}]},{"client_msg_id":"436be09e-3e54-4de6-9673-d6541dc02e35","type":"message","user":"U8996GYBF","text":"ですね、起動した瞬間から `~/.local/share/nvim/rplugin.vim` 読んだ上でNodeと通信して関数登録とかの初期化終わってそう","ts":"1609422063.211000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GrKt6"}]},{"client_msg_id":"06f6f516-0e14-4a94-aa31-5e1b5534b827","type":"message","user":"U9S4G0LJW","text":"Remote Plugin、多分関数定義とかそういうのキャッシュしてますね\nUpdateRemotePluginsで走るアレ","ts":"1609421987.210000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"P9V"}]},{"client_msg_id":"9495cf67-1e2e-4f56-b9bc-06450bb0d98d","type":"message","user":"U8996GYBF","text":"Remote Pluginは組み込みだから、唯一Neovim起動した瞬間から関数登録とか終えて使える状態で起動するみたいですね\n他のNodeとRPCするやつは非同期で諸々するから初期化タイミングがどうしても遅れる","ts":"1609421867.209400","edited":{"user":"U8996GYBF","ts":"1609421881.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"m6gg"}]},{"client_msg_id":"e19270e2-cf66-402b-83bb-dcc1c5efd1d4","type":"message","user":"U8996GYBF","text":"いや、ダメか\nTS側にしても、Remote Pluginの初期化イベントで `fzf_preview#initialized` 発行すると、初期化終わってないCocCommand実行したときに死ぬ","ts":"1609421666.207800","edited":{"user":"U8996GYBF","ts":"1609421678.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+gx"}]},{"client_msg_id":"1840b18b-0d16-4d3e-b390-dbdd9ccf389d","type":"message","user":"U8996GYBF","text":"あー、そもそも初期化事にTSから全部発行したら（ちょっとできるか確認しないとだけど）問題ないですね\n今はRemote PluginがあるとVim script側でpluginロード時に発行してるから死ぬんですよね・・・","ts":"1609421611.206900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Lu1"}]},{"client_msg_id":"17ec54b6-b110-45f2-8c6b-98e2fd45464e","type":"message","user":"UAZ33BKV2","text":"それぞれにビルドしたときに、なんかタイプ値を持つ、合ってないのは拒否、とか?(masterは全部で自己責任)...","ts":"1609421454.205600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pj=cL"}]},{"client_msg_id":"6aad9766-c903-42a6-8e5e-9ecb0d0d3fdc","type":"message","user":"U8996GYBF","text":"`CocInstall coc-fzf-preview` されてるかをRemote Plugin側で検知してdoautocmdを抑制するみたいなのが必要になるはずで、coc extensionsが非同期ロードなのを含めると相当厳しいと思う・・・","ts":"1609420974.204600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dvrb"}]},{"client_msg_id":"dd4d7417-8384-4684-b3f8-b75d53644cbb","type":"message","user":"U8996GYBF","text":"同時にインストールされてるか確認できないんですよね、多分","ts":"1609420917.203700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4vm"}]},{"client_msg_id":"3b17dc43-10e3-4b53-b4f5-605a043354af","type":"message","user":"UAZ33BKV2","text":"どっかで初期化した状態をもって、他を抑制したい(悪手かもしれないが気分として)ですね...","ts":"1609420885.203300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DC2e"}]},{"client_msg_id":"a95649ea-acb9-4d7d-9458-cb991c61a7e7","type":"message","user":"U8996GYBF","text":"それぞれプラグイン読み込みでasync-awaitがいくつも走るみたいになってるからむずい\nこれそれぞれの環境で別々のイベント発行するべきだったし、既存のをdeprecatedにして別名作ろう・・・\n\n```- fzf_preview#remote#initialized\n- fzf_preview#coc#initialized\n- fzf_preview#rpc#initialized```","ts":"1609420754.202500","edited":{"user":"U8996GYBF","ts":"1609420776.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mR2"}]},{"client_msg_id":"f0d354a8-7a71-4651-a8a0-e07dd31b90e6","type":"message","user":"U8996GYBF","text":"クロスビルド前提での訳分からない挙動にはまりかけた（絶対忘れる）ので、多分自分にしか影響がない情報を書きました\n\u003chttps://scrapbox.io/yyano/%E8%A4%87%E6%95%B0%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89%E3%82%92%E6%8F%90%E4%BE%9B%E3%81%99%E3%82%8BVim%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E5%90%8C%E6%99%82%E5%B0%8E%E5%85%A5%E3%81%99%E3%82%8B%E9%9A%9B%E3%81%AE%E6%8C%99%E5%8B%95%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\u003e","ts":"1609419884.199200","attachments":[{"fallback":"Yuki Yano's project: 複数のビルドを提供するVimプラグインを同時導入する際の挙動について - Yuki Yano's project","id":1,"title":"複数のビルドを提供するVimプラグインを同時導入する際の挙動について - Yuki Yano's project","title_link":"https://scrapbox.io/yyano/%E8%A4%87%E6%95%B0%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89%E3%82%92%E6%8F%90%E4%BE%9B%E3%81%99%E3%82%8BVim%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E5%90%8C%E6%99%82%E5%B0%8E%E5%85%A5%E3%81%99%E3%82%8B%E9%9A%9B%E3%81%AE%E6%8C%99%E5%8B%95%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6","text":"前提としてRemote Plugin + coc extensionsをクロスビルドして読み込めるようにしているような状況で起こる Remote Pluginとcoc extensionsとVim script RPCでそれぞれ初期化のタイミングが違うので fzf_preview#remote#process#get_default_processes の扱いに気をつける必要がある 具体的には例え","thumb_url":"https://scrapbox.io/assets/img/content-logo.png","blocks":null,"service_name":"Yuki Yano's project","service_icon":"https://scrapbox.io/assets/img/favicon/apple-touch-icon.png","thumb_width":288,"thumb_height":288,"from_url":"https://scrapbox.io/yyano/%E8%A4%87%E6%95%B0%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89%E3%82%92%E6%8F%90%E4%BE%9B%E3%81%99%E3%82%8BVim%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E5%90%8C%E6%99%82%E5%B0%8E%E5%85%A5%E3%81%99%E3%82%8B%E9%9A%9B%E3%81%AE%E6%8C%99%E5%8B%95%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6","original_url":"https://scrapbox.io/yyano/%E8%A4%87%E6%95%B0%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89%E3%82%92%E6%8F%90%E4%BE%9B%E3%81%99%E3%82%8BVim%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E5%90%8C%E6%99%82%E5%B0%8E%E5%85%A5%E3%81%99%E3%82%8B%E9%9A%9B%E3%81%AE%E6%8C%99%E5%8B%95%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"}],"edited":{"user":"U8996GYBF","ts":"1609420010.000000"},"team":"T03C4RC8V","reactions":[{"name":"+1","count":3,"users":["U9S4G0LJW","U017BU3UZBQ","UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xRDd2"}]},{"client_msg_id":"5f3fae89-6405-42ae-b24d-407e5f0953eb","type":"message","user":"U8996GYBF","text":"\u003c@U7B4ZD49X\u003e （そういえば、今日の実装追加についてめっちゃ暇なときとかでいいんでファジーファインダー記事ちょっと変えといて貰えるとありがたいです）","ts":"1609416705.198000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"c6I"}]},{"client_msg_id":"6af90fb1-0c32-45ed-86fc-62df8f973c85","type":"message","user":"U8996GYBF","text":"Vim script RPCはhrsh7thさんのRPC基板が最初からあったからどうにかなった感は強いけど・・・","ts":"1609413295.189600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"najt0"}]},{"client_msg_id":"58a63fc6-423d-4144-ad08-d26e37c7c3fb","type":"message","user":"U8996GYBF","text":"最初に動くまでの最小コードが分かりにくい、多分 `module.exports` で書かないとダメだし、それがasync functionなら黙って死ぬとか","ts":"1609413223.188800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iaJmY"}]},{"client_msg_id":"0e2fd193-faa5-47e3-8231-303ffc47bc31","type":"message","user":"U8996GYBF","text":"cocとRemote PluginとVim script RPC触った上でRemote Pluginの挙動がぶっちぎりで分かりにくくて辛い感じがする","ts":"1609413157.187800","edited":{"user":"U8996GYBF","ts":"1609413165.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=tTc"}]},{"client_msg_id":"e6fb6c11-bfd0-424a-a461-9c83f9a72a33","type":"message","user":"U9S4G0LJW","text":"feedkeys便利（つらい）","ts":"1609413090.187200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qFtI"}]},{"client_msg_id":"cf123e5c-f227-458f-8cf7-6eb9e3549e82","type":"message","user":"U8996GYBF","text":"ありがとうございます！","ts":"1609411204.183500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nQoPG"}]},{"client_msg_id":"a2e4477b-8b97-41ca-8351-16fd3b8faef9","type":"message","user":"U9S4G0LJW","text":"\u003c@U8996GYBF\u003e パッチ送ってみました \u003chttps://github.com/yuki-ycino/fzf-preview.vim/pull/209\u003e","ts":"1609411121.183100","thread_ts":"1609411121.183100","edited":{"user":"U9S4G0LJW","ts":"1609411128.000000"},"reply_count":42,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2Ksd3"}]},{"client_msg_id":"0eaf7900-3e28-44b6-9cbc-601a70ce0a5a","type":"message","user":"U9S4G0LJW","text":"正直Vimの非同期周りの動作が微妙な気がしてる","ts":"1609409859.182700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"otR"}]},{"client_msg_id":"c43cb104-3f9b-49ec-a3c3-5b2aca195729","type":"message","user":"U9S4G0LJW","text":"前にvim-clapの処理を連結しようとした時にハマって数時間溶かした","ts":"1609409833.182200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ms1"}]},{"client_msg_id":"5510200a-85f9-4aa5-abf4-cecd95b55f23","type":"message","user":"U8996GYBF","text":"以前ハマったとき完全に原因分からなかったんだけど使って貰えて一瞬で原因特定できるのありがたい","ts":"1609409766.181700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bI6"}]},{"client_msg_id":"1b8ae170-c2de-43b8-ad8a-ad6c3172f3dc","type":"message","user":"U9S4G0LJW","text":"仮にsyncで動かせるならいけるだろうけど、asyncが特色なので難しそう","ts":"1609409606.181100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3U6"}]},{"client_msg_id":"8f75d905-8b5a-4ab4-991e-d4b70f388436","type":"message","user":"U8996GYBF","text":"ginaをsyncで叩く方法があればいける・・・？","ts":"1609409537.180400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"teJ"}]},{"client_msg_id":"b246eaf1-00e5-485b-8026-3ae303b2c972","type":"message","user":"U8996GYBF","text":"ginaがasyncだからダメなのか","ts":"1609409526.180100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IJsh"}]},{"client_msg_id":"03cce8fd-2426-4f4b-bc59-fd7aab08cd7a","type":"message","user":"U9S4G0LJW","text":"送るだけ送ってみよう","ts":"1609409487.179500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0hE2"}]},{"client_msg_id":"8f5615e8-9802-4004-8c4f-e8eb06180ce2","type":"message","user":"U9S4G0LJW","text":"`call feedkeys(':Gina patch ' .. a:file .. \"\\n\", 'n')` みたいなのを無限に生やす感じになるので多分つらいと思うんですが","ts":"1609409482.179200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"12gT"}]},{"client_msg_id":"99419261-2456-4653-8510-1a0ab5707809","type":"message","user":"U8996GYBF","text":"（よく分かってないんですが）ひとまず問題ないです、他のコマンドもそれで対応できるかな・・・","ts":"1609409461.178700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yZF"}]},{"client_msg_id":"af0741be-a416-4053-b4ef-293c1dcc5fe0","type":"message","user":"U9S4G0LJW","text":"feedkeysで強引にやる感じなんですが、それでもよければ送ります","ts":"1609409436.177900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=LN"}]},{"client_msg_id":"73c3f57b-f11d-4e12-9468-b536d3159c84","type":"message","user":"U8996GYBF","text":"`autoload/fzf_preview/remote/consumer/git.vim` ですよね","ts":"1609409426.177700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uTZE2"}]},{"client_msg_id":"a35dccbe-aea2-47ed-82ca-080d6b272cff","type":"message","user":"U8996GYBF","text":"え、よかったらパッチ貰えます？","ts":"1609409416.177300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OQcI"}]},{"client_msg_id":"c1bcf07f-8aa9-4957-96c4-e71a5d780439","type":"message","user":"U9S4G0LJW","text":"`has('nvim')` を消してもそのままじゃVimでは動かないと思う","ts":"1609409368.176800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"F3n"}]},{"client_msg_id":"69ddd788-1bba-4646-8a8c-401da95bf3e5","type":"message","user":"U8996GYBF","text":"今問題ないならhas('nvim')消せそう","ts":"1609409328.175900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sOum"}]},{"client_msg_id":"94f5eaf6-bb7f-4531-9814-bab92e1fd938","type":"message","user":"U8996GYBF","text":"\u003c@U9S4G0LJW\u003e あ、gina patchってじゃないと複数ファイルとかでなんかバグった（どうバグったか忘れてしまった）記憶あるんですけど問題ないです？","ts":"1609409282.175600","thread_ts":"1609409282.175600","reply_count":3,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wCXdM"}]},{"client_msg_id":"6322448c-3d3b-4c71-a0ce-bcc0b6d50199","type":"message","user":"UAZ33BKV2","text":"おー、まあWindowsで非cocなので、動くようになったら使うかもですw","ts":"1609408841.174700","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U8996GYBF"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GD="}]},{"client_msg_id":"1b3153da-2853-4349-814a-95e812f91432","type":"message","user":"U8996GYBF","text":"taketsさんにお願いしてRemote Pluginとcoc extensionsのどっちか忘れたけどPR使えばwinで動くのは確認できてるんですよね","ts":"1609408219.174000","edited":{"user":"U8996GYBF","ts":"1609408235.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fzK"}]},{"client_msg_id":"4f8a0667-d209-4dff-b8d2-14deacb25a78","type":"message","user":"UAZ33BKV2","text":"Windows Vim8 node fzf での fzf-preview(RPC版)w","ts":"1609408030.173400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"W8l=L"}]},{"client_msg_id":"9bd8475b-4b2c-436d-aa47-e35f9525ab35","type":"message","user":"UAZ33BKV2","text":"まあ、対応しにくい極みみたいな所なので、気がむいたらおねがいしますw","ts":"1609408009.172800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dSIlF"}]},{"client_msg_id":"18D23043-D456-4DB5-9D68-6F1D1E812173","type":"message","user":"U8996GYBF","text":"年始の課題にするか","ts":"1609408004.172600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WRLPP"}]},{"client_msg_id":"029B65DC-618A-4933-AB6F-3188A71B936A","type":"message","user":"U8996GYBF","text":"PRあるんですけど、放置気味（反応がないので自分で直して入れたい）","ts":"1609407979.172000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"s/Y"}]},{"client_msg_id":"5cfee2fb-98e3-49d3-86dc-ba730fd496cd","type":"message","user":"UAZ33BKV2","text":"あー、やっぱですか、コマンド無反応でnodeのneovim-rpcななにか必要だっけとは思いましたが、ちがうかw","ts":"1609407974.171700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=R1r"}]},{"client_msg_id":"CD9FA959-B782-4A5D-9529-49D58B79221B","type":"message","user":"U8996GYBF","text":"いらないです、ただwin対応がまだできてない感・・・","ts":"1609407940.170500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZWum"}]},{"client_msg_id":"6e8dc4e2-cb96-4b59-adb8-bcb7fe3cf21d","type":"message","user":"UAZ33BKV2","text":"いろいろあって今インストールしてるんですが、node側ってなんか必要でしたっけ?","ts":"1609407910.169700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8Qpj/"}]},{"client_msg_id":"864dba20-f03b-419d-b1fb-f866984bbb4d","type":"message","user":"UAZ33BKV2","text":"今年の課題、今年の内に～:musical_note:","ts":"1609407599.168800","team":"T03C4RC8V","reactions":[{"name":"laughing","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"14r"}]},{"client_msg_id":"C12B5E33-2DC9-4002-851A-5CCEDA095F0D","type":"message","user":"U8996GYBF","text":"年末年始の課題が年末で終わってしまった","ts":"1609407530.168300","team":"T03C4RC8V","reactions":[{"name":"warau","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NRh"}]},{"client_msg_id":"5d164e7c-9f2b-4edd-991b-52212eef721c","type":"message","user":"U8R597E9H","text":"割とさらっと新しい接続方法が追加できてるの、うまくいってる感じありますね。","ts":"1609407319.167700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kKXF"}]},{"client_msg_id":"A9CBEB67-C492-41F4-B3BA-A4524DDD68DB","type":"message","user":"U8996GYBF","text":"もうないと完全に死ぬ・・・","ts":"1609406782.166500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fpra"}]},{"client_msg_id":"4a70e277-8c77-48fe-9d70-2908483cc22c","type":"message","user":"U9S4G0LJW","text":"async-awaitめっちゃ便利だな","ts":"1609406737.166100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cOC"}]},{"client_msg_id":"6064f822-0b95-48bc-a34e-755ed8754ddc","type":"message","user":"U9S4G0LJW","text":"大体読んで理解した","ts":"1609406714.165900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TJNJ"}]},{"client_msg_id":"b8da0b50-d1dc-4402-8562-38929f875881","type":"message","user":"U9S4G0LJW","text":"ここまで綺麗に3つものIFで動くのすごい","ts":"1609406707.165700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Urf7C"}]},{"client_msg_id":"a329af3e-8afd-4bb4-9de4-43580f5e1636","type":"message","user":"U8996GYBF","text":"ここ以外でも最初からできる限り内部の設計は抽象化してるんで変えなくて（偶然）動いたんだと思ってます\n初期を考えるとオーバーエンジニアリングだったんだろうなとは思います","ts":"1609406615.165400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"76+"}]},{"client_msg_id":"d5030f98-a77a-4c6f-b245-cbc123aca772","type":"message","user":"U8996GYBF","text":"一回Vim scriptで破綻してしまったので、この辺かなり設計頑張った気はします\n綺麗にしてて本当によかった","ts":"1609406474.164200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RDeq"}]},{"client_msg_id":"93251875-78c6-4535-92ad-a31ddb040c90","type":"message","user":"UAZ33BKV2","text":"よくそんだけIF綺麗になったよね....という驚愕","ts":"1609406392.163500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uylLR"}]},{"client_msg_id":"903c8de9-a182-4d19-b372-01e7d1bb0289","type":"message","user":"U8996GYBF","text":"なんで、どの実装でもRPCクライアントを注入して、あとはfzf-previewのコマンドのエントリポイントになる関数を発火させてるだけって感じです","ts":"1609406260.163100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=sE"}]},{"client_msg_id":"a18e5004-05f6-413a-aeb9-729328c862a0","type":"message","user":"U8996GYBF","text":"大まかに\nRPCクライアントを区別して実際にVim側を叩くインターフェイスを提供してるのが\n\u003chttps://github.com/yuki-ycino/fzf-preview.vim/blob/master/src/plugin/index.ts\u003e\nRPCクライアントを使って実際にVimと繋ぐレイヤ(connector)が例えば\n\u003chttps://github.com/yuki-ycino/fzf-preview.vim/blob/master/src/connector/git.ts\u003e\n今回追加したRPCクライアントの実装とインターフェイスへの注入が\n\u003chttps://github.com/yuki-ycino/fzf-preview.vim/blob/master/src/rpc.ts\u003e\nって感じですね","ts":"1609406147.161700","edited":{"user":"U8996GYBF","ts":"1609406209.000000"},"team":"T03C4RC8V","reactions":[{"name":"eyes","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=j9"}]},{"client_msg_id":"c632a196-7cd5-46b7-8fbb-b010866decae","type":"message","user":"U9S4G0LJW","text":"競合しないのはRPCならではって感じする","ts":"1609406019.159800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CZhsG"}]},{"client_msg_id":"bbea0f76-ea94-4c3d-8d40-5c2cdfaf43f6","type":"message","user":"U9S4G0LJW","text":"完全に独立してるんだ:hee:","ts":"1609405977.159500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LqSws"}]},{"client_msg_id":"d07c7894-fc64-435d-9c01-3f662d0adc15","type":"message","user":"U8996GYBF","text":"coc extensionsとRPC混ぜて使ったりもできます（今そうやってる）","ts":"1609405951.159000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CXlOF"}]},{"client_msg_id":"5a2bdbc5-5173-48bf-8317-55cf907447f9","type":"message","user":"U8996GYBF","text":"Remote Pluginとcoc extensionsの両対応するときにインターフェイス抽象化しててめちゃくちゃ助かった\n今回の変更で実装内部はほぼ変更なくて外部インターフェイスと繋ぐところだけ書いてほぼほぼ完結した","ts":"1609405667.158100","team":"T03C4RC8V","reactions":[{"name":"goodpoem","count":3,"users":["U9S4G0LJW","UAZ33BKV2","UEB0VGD7E"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GSTHz"}]},{"client_msg_id":"da88a0a7-11a1-4c2d-8926-1bd11b125e77","type":"message","user":"U9S4G0LJW","text":"GinaPreviewとかいう自作のクソコマンド捨ててfzf-previewに置き換えたけどめちゃ快適","ts":"1609405452.156800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Y2d"}]},{"client_msg_id":"0ad3aced-1840-45eb-8bf4-d43561879f0c","type":"message","user":"U9S4G0LJW","text":"splitされるよりは好み","ts":"1609405405.156200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"A78+h"}]},{"client_msg_id":"c116d35b-8ead-457b-ad96-fa7d9dc347c8","type":"message","user":"U9S4G0LJW","text":"popupで出るの結構好きなのでそこは問題なさそう","ts":"1609405397.156000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TzXLG"}]},{"client_msg_id":"65878b5a-2f4b-431e-a5b0-5dec4ac37d24","type":"message","user":"U8996GYBF","text":"もしfzf自体をpopupwinじゃなくてsplitとかにしたかったら `g:fzf_preview_direct_window_option` で諸々渡せるはずです（popupwin重かったりするかもなので）","ts":"1609405369.155500","edited":{"user":"U8996GYBF","ts":"1609405381.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"x9/T"}]},{"client_msg_id":"ea448473-b120-4091-951c-ba232baf6ab3","type":"message","user":"U8996GYBF","text":"よかった・・・","ts":"1609405079.154800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DsQ2K"}]},{"client_msg_id":"687378f8-e72e-443e-9d01-162fb23f4744","type":"message","user":"U9S4G0LJW","text":"触りだけ色々試してるけど問題なく使えてそう","ts":"1609405002.154600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"H8Sy9"}]},{"client_msg_id":"634ac4fc-d95d-479c-b72f-20d03f1bc62c","type":"message","user":"U8996GYBF","text":"自分のmapはこんな感じ","ts":"1609404655.153700","files":[{"id":"F01HU646GKU","created":1609404653,"timestamp":1609404653,"name":"無題","title":"無題","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"プレーンテキスト","user":"U8996GYBF","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":1959,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F01HU646GKU/______","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F01HU646GKU/download/______","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U8996GYBF/F01HU646GKU/______","permalink_public":"https://slack-files.com/T03C4RC8V-F01HU646GKU-6125eef758","edit_link":"https://vim-jp.slack.com/files/U8996GYBF/F01HU646GKU/______/edit","preview":"noremap \u003cfzf-p\u003e \u003cNop\u003e\nmap     ;       \u003cfzf-p\u003e\nnoremap ;;      ;\n\nnnoremap \u003csilent\u003e \u003cfzf-p\u003er     :\u003cC-u\u003eFzfPreviewFromResourcesRpc buffer project_mru\u003cCR\u003e","preview_highlight":"\u003cdiv class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text/plain',window.getSelection().toString().replace(/\\u200b/g,''));event.preventDefault();event.stopPropagation();}\"\u003e\n\u003cdiv class=\"CodeMirror-code\"\u003e\n\u003cdiv\u003e\u003cpre\u003enoremap \u0026lt;fzf-p\u0026gt; \u0026lt;Nop\u0026gt;\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003emap     ;       \u0026lt;fzf-p\u0026gt;\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003enoremap ;;      ;\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003ennoremap \u0026lt;silent\u0026gt; \u0026lt;fzf-p\u0026gt;r     :\u0026lt;C-u\u0026gt;FzfPreviewFromResourcesRpc buffer project_mru\u0026lt;CR\u0026gt;\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n","lines":26,"lines_more":21,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Njo"}]},{"client_msg_id":"c466f2ed-eb86-4aec-ad67-8d2b1430e371","type":"message","user":"U8996GYBF","text":"設定入れるのは `fzf_preview#rpc#initialized` にautocmdしてください","ts":"1609404512.153500","edited":{"user":"U8996GYBF","ts":"1609404518.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Zow"}]},{"client_msg_id":"d7aa576f-5dd1-494f-a7ac-1b056f446dcd","type":"message","user":"U8996GYBF","text":"全部RPCだろっていうのは別にして、自前RPC版のことはVim script RPCって呼ぶ予定","ts":"1609404466.153100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HU2s"}]},{"client_msg_id":"df7697d0-7653-4c24-bfab-5a435d8f42f6","type":"message","user":"U8996GYBF","text":"ですね、suffixにRpc付けてます","ts":"1609404379.152500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Yqn"}]},{"client_msg_id":"42914b86-7dc3-4e1a-b633-d85b2ff8cfbe","type":"message","user":"U8996GYBF","text":"いけた、 `call dein#add('yuki-ycino/fzf-preview.vim', {'merged': 0, 'rev': 'release/rpc'})` で手元で確認できました","ts":"1609404353.152100","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dmIT"}]},{"client_msg_id":"89b6378c-644f-4848-ba72-c32980a9de97","type":"message","user":"U9S4G0LJW","text":"コマンドにRpc付けて使う感じか","ts":"1609404179.151800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"R9Z"}]},{"client_msg_id":"7b4dc525-a752-4d93-9040-edab26c230a2","type":"message","user":"U9S4G0LJW","text":":naruho:","ts":"1609403979.151500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1jD"}]},{"client_msg_id":"d018d02e-d59c-4df3-b134-45713a82456e","type":"message","user":"U8996GYBF","text":"今実装自体をmasterに入れて、ユーザにはrelease/rpcブランチ使って貰う予定です\nmasterにはビルド結果を入れずに、release/rpcブランチにビルドしたやつを入れてyarn install \u0026amp;\u0026amp; buildを不要にするので","ts":"1609403959.151300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"T3u"}]},{"client_msg_id":"1c06fd04-34af-4f65-b5d3-89778ce715ab","type":"message","user":"U9S4G0LJW","text":"正直新規ユーザーなので人柱としてはそこまで役に立てないかも","ts":"1609403903.150300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"J9E"}]},{"client_msg_id":"8a18c82e-5111-4840-9dbf-1bf0a9ab08ce","type":"message","user":"U8996GYBF","text":"一部オプション（--resume）が動作しないんですけど、これもしかしたら以前からバグってた疑惑あるんであとで直そうと思ってます\nクリティカルじゃないです","ts":"1609403879.149500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PqGU"}]},{"client_msg_id":"75b1db2c-1393-4fcf-988e-f0fa13927fea","type":"message","user":"U9S4G0LJW","text":"これは `feature/rpc` をbuildしたらいい感じですか？","ts":"1609403872.149300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"D12h"}]},{"client_msg_id":"11d88499-c0e8-4f41-8485-b0955bab6dab","type":"message","user":"U8996GYBF","text":"お、手元ではさっきから使ってるんですけど、どこまでちゃんと動くか分からないんでありがたいです","ts":"1609403819.148400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sVGt7"}]},{"client_msg_id":"b0bbc02a-3d6f-4d0f-b192-cb343e9204c7","type":"message","user":"U9S4G0LJW","text":"使ってみたい","ts":"1609403787.147900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7cU5"}]},{"client_msg_id":"a43999e1-7dd4-4e54-a5e2-a270f00c3364","type":"message","user":"U8996GYBF","text":"今日中にfzf-preview.vimのVim script RPC版をリリースしようと思ってるんですが、人柱になってくれる方募集してます！","ts":"1609403763.147600","edited":{"user":"U8996GYBF","ts":"1609403772.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"F00"}]},{"client_msg_id":"f2e58527-86cd-4d54-8ce9-3a0ed4d6fba4","type":"message","user":"U8996GYBF","text":"masterで使いたかったら `yarn install \u0026amp;\u0026amp; yarn build build:rpc` してもらうとかでいいかなって思ってます","ts":"1609380525.146600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"c2Ob"}]},{"client_msg_id":"b04f0c08-7dc3-4e00-93a9-6c91a63ad2db","type":"message","user":"UAZ33BKV2","text":"おー、なるほど、じゃあRPCのに切り替えないとな\nメンテがちょっと大変そうだw","ts":"1609380503.146300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bGVw3"}]},{"client_msg_id":"ff3cf338-9f82-4430-b9d4-51a76cb156e8","type":"message","user":"U8996GYBF","text":"今README書いてるんですけど\n`call dein#add('yuki-ycino/fzf-preview.vim', { 'rev': 'release/rpc' })`\n`call dein#add('yuki-ycino/fzf-preview.vim', { 'rev': 'release/remote' })`\n`CocInstall coc-fzf-preview`\nにしようかと","ts":"1609380468.145700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bllTK"}]},{"client_msg_id":"d4a0632f-5d51-4f4b-814b-ea7f791bd128","type":"message","user":"UAZ33BKV2","text":"あれ、じゃあ設定的にどれにするか、はどっかに持つ予定?","ts":"1609380367.145000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fCkP"}]},{"client_msg_id":"52aac381-fbf1-4d03-bef7-17862e533c36","type":"message","user":"U8996GYBF","text":"はい、Neovimで開発しつつvimで動作確認してます","ts":"1609380358.144800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sJ5E"}]},{"client_msg_id":"d90e366d-b56c-4576-b4e0-6e74b59641d9","type":"message","user":"UAZ33BKV2","text":"ああ、そうかneovimでもそれでいけるのか","ts":"1609380344.144300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=5PIb"}]},{"client_msg_id":"ded1a03e-a63c-4121-8e7b-1cda1c24161d","type":"message","user":"U8996GYBF","text":"厳密には `vim/neovim(RPC)` ですね","ts":"1609380330.144000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AtKPn"}]},{"client_msg_id":"10b38e86-c092-4f20-91b6-182ae0018826","type":"message","user":"UAZ33BKV2","text":"cocなしでvimで動くのは助かるな","ts":"1609380322.143800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xVmiN"}]},{"client_msg_id":"364f5207-fc5c-4f8b-aec5-497071f2c9c4","type":"message","user":"UAZ33BKV2","text":"fzf + node + vim/neovimで vim(RPC)かneovim(Remote Plugin)かvim/neovim(coc)かで動く、か","ts":"1609380293.143300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kJR3"}]},{"client_msg_id":"775f2d02-c318-4fb3-97ab-a99055d68a5c","type":"message","user":"U8996GYBF","text":"そもそもがRemote Pluginとcoc extensionsに両対応させるためにインターフェイスをある程度抽象化してたんで、そこに追加するだけではあったんですが","ts":"1609380277.142900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pgSkO"}]},{"client_msg_id":"25ea038c-038c-4306-b9c1-9dbda21adf84","type":"message","user":"U8996GYBF","text":"で、RPC版とRemote Pluginとcoc extensionsにそれぞれクロスビルドできてるって感じです","ts":"1609380207.141600","edited":{"user":"U8996GYBF","ts":"1609380218.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"caIb"}]},{"client_msg_id":"67c97d81-71b0-497b-9a3b-a03ec09be077","type":"message","user":"U8996GYBF","text":"Vim scriptでNeovim + coc extnsionsの既存実装にインターフェイス合わせるようにRPCでの通信実装してます","ts":"1609380182.141000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=mboQ"}]},{"client_msg_id":"8eedd45b-48c9-4478-9391-956fc64e758f","type":"message","user":"UAZ33BKV2","text":"おー。","ts":"1609380174.140800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZMMTh"}]},{"client_msg_id":"6e98a29d-025c-4a51-90e4-5b81c78655ea","type":"message","user":"U8996GYBF","text":"です","ts":"1609380099.139800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qtfLN"}]},{"client_msg_id":"2d80e0fa-141a-4503-bea3-0d59bf1c67c5","type":"message","user":"UAZ33BKV2","text":"ちなみにこれ、つまりVim(not neovim)でリモートプラグイン機構をそのための補助プラグインなしで動いた、ということでいい?","ts":"1609380021.139600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0QK6Q"}]},{"client_msg_id":"cb480cad-f58d-462c-ac52-9bd9f46abda3","type":"message","user":"UAZ33BKV2","text":":goodpoem: :goodjob:","ts":"1609379939.138900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JEL/"}]},{"client_msg_id":"ea853f5b-e57f-4b24-81e4-5d8f4a2183fc","type":"message","user":"U8996GYBF","text":"既存の部分にインターフェイス合わせる部分とかも含めて400行未満で乗せれたんで、RPCでちょっと通信する基板くらいなら100-200行で色々できそうで便利","ts":"1609379613.138600","edited":{"user":"U8996GYBF","ts":"1609379912.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"c2h"}]},{"client_msg_id":"54cc56c0-e095-40d6-9fc7-2b1180c06e3c","type":"message","user":"U8996GYBF","text":"hrsh7thさんのvital-vsを使ってVim scriptだけでRPCを使ってfzf-previewの動作に成功しました、神\n\u003chttps://github.com/yuki-ycino/fzf-preview.vim/pull/208\u003e","ts":"1609379267.137400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vxG"}]},{"client_msg_id":"3759802b-85f3-4bfd-9c2e-7c46f3f8941e","type":"message","user":"U9S4G0LJW","text":"coc extensionの基盤だけ欲しい(わがまま)","ts":"1609353322.136200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gIXNJ"}]},{"client_msg_id":"2a77e994-6c27-446a-a82c-0bd9ba261d2a","type":"message","user":"U9S4G0LJW","text":"この手のコードを入れたくなければ手元でパッチ打つのでrejectしてもらっても大丈夫です","ts":"1609411220.183600","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QQYGV"}]},{"client_msg_id":"b43e6aa2-fdc7-4edd-979e-1c43bebcb8d6","type":"message","user":"U8996GYBF","text":"これ、neovimでも動作が遅くなるみたいなことって基本的にはないです？","ts":"1609411244.183800","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"U=DtC"}]},{"client_msg_id":"298fd557-3e15-41a2-92fe-f114da606348","type":"message","user":"U8996GYBF","text":"`if !has('nvim')` とかを入れてこれ適用する方がいいかなってちょっと思ったんですが","ts":"1609411265.184000","thread_ts":"1609411121.183100","edited":{"user":"U8996GYBF","ts":"1609411271.000000"},"parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SiI"}]},{"client_msg_id":"d5d297a6-d912-4a87-8273-e2c2804db878","type":"message","user":"U9S4G0LJW","text":"呼び出しがちょっと変わるだけなので目に見えて遅くなりはしないはず","ts":"1609411279.184300","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pq9RT"}]},{"client_msg_id":"4ad9e84e-0b1e-4587-aec2-d7a49264fb1b","type":"message","user":"U8996GYBF","text":"了解です、入れちゃおうかな","ts":"1609411291.184500","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/LZTU"}]},{"client_msg_id":"9a2e0136-747c-4781-baa0-d7adbd0c04ba","type":"message","user":"U9S4G0LJW","text":":tashikani: その方がよければ変えますが","ts":"1609411295.184700","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZPY9A"}]},{"client_msg_id":"ad9a1316-fedc-4cef-beda-69c175752dc5","type":"message","user":"U9S4G0LJW","text":"一応手元で両方動くことは確認してます","ts":"1609411307.184900","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=aZU"}]},{"client_msg_id":"f5927e77-3998-42bc-a9d4-96764c25e5ba","type":"message","user":"U8996GYBF","text":"ちょっと迷いますね\nなんでfeedkey使ってんだって意図がコードレベルで分かりやすくはなると思います","ts":"1609411324.185100","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BLRCZ"}]},{"client_msg_id":"9eca395a-393a-491b-a973-89a7277f634e","type":"message","user":"U9S4G0LJW","text":"なるほど、修正するか","ts":"1609411346.185300","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","reactions":[{"name":"ari","count":1,"users":["U8996GYBF"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LScjf"}]},{"client_msg_id":"98d5a375-e53e-4bcc-84d9-66b1b4492acd","type":"message","user":"U8996GYBF","text":"fzf-previewのgit連携、全部使ってるわけじゃないけど便利だからGina使えるようになるのありがたい","ts":"1609411581.185600","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4xs1"}]},{"client_msg_id":"51f72541-ec58-418d-8ed4-e34000777549","type":"message","user":"U9S4G0LJW","text":"```function! fzf_preview#remote#consumer#git#patch(file) abort\n  if exists(':Gina') == 2\n    if !has('nvim')\n      call feedkeys(':Gina patch ' . a:file . \"\\\u0026lt;CR\u0026gt;\", 'n')\n    else\n      execute 'Gina patch ' . a:file\n    endif\n    return\n  elseif exists(':Git') != 0\n    execute 'tabedit ' . a:file . ' | Git diff'\n    return\n  endif\n\n  echoerr 'Fugitive and Gina not installed'\nendfunction```\n雑にやると多分こんな形になってしまうんですが、大丈夫です？","ts":"1609411851.185800","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dfR"}]},{"client_msg_id":"e44609c0-6549-4f6b-8c3f-f699b07cf7cb","type":"message","user":"U9S4G0LJW","text":"helper生やしたほうがよければそうします","ts":"1609411873.186000","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=5DV"}]},{"client_msg_id":"7504043d-589e-4a7e-a042-9a4ee7ed0fdf","type":"message","user":"U8996GYBF","text":"あー、なるほど\nこのままでも大丈夫ですがお任せします","ts":"1609411896.186200","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zAC"}]},{"client_msg_id":"c4eaa897-7776-4a18-8658-4da184ef2206","type":"message","user":"U9S4G0LJW","text":":man-gesturing-ok:","ts":"1609411918.186400","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EQ22u"}]},{"client_msg_id":"1cad7ea6-335a-4789-a64e-1943cc1a91a1","type":"message","user":"U9S4G0LJW","text":"force pushですみませんがやり直してみました","ts":"1609412935.186600","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+T6LT"}]},{"client_msg_id":"ef92c4c9-da1e-4249-a3b3-7d1173899783","type":"message","user":"U8996GYBF","text":"ありがとうございます、問題ないと思います","ts":"1609412976.186800","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4=n"}]},{"client_msg_id":"f7edc5f1-4efc-4cea-a487-588498822b33","type":"message","user":"U8R597E9H","text":"exexute の関数を使えば、戻り値が得られるので同期になりそうな気がしました。むしろ非同期にしたい話なのでしょうか","ts":"1609414253.189700","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mVy"}]},{"client_msg_id":"1aae3c1e-4241-4d1c-8ff0-d0cfa3e49f62","type":"message","user":"U8996GYBF","text":"この辺の挙動って多分一番自分がよく分かってないんですが、Ginaの実行の返り値でPromiseが返ってきて非同期で動作しちゃうみたいなのってないんでしょうか？","ts":"1609414357.189900","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PdOF3"}]},{"client_msg_id":"9034d612-c545-48e6-913d-a0363b150b97","type":"message","user":"U9S4G0LJW","text":"戻り値が欲しいわけではなくって、Vim8だとユーザーが入力するタイミング以外で非同期処理を更に呼ぼうとすると変な動作するケースがあるみたいなんですよね","ts":"1609414367.190100","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ijf"}]},{"client_msg_id":"93d009d4-2e90-40e0-834a-7fb5df530e89","type":"message","user":"U8996GYBF","text":"やりたいこととしては、複数のファイルに対してループでGinaコマンドを発行するときに前回の実行完了を待機したい感じです","ts":"1609414416.190300","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kk8t"}]},{"client_msg_id":"e97f022a-ea8f-4c16-a5ee-0f0e7f5202a8","type":"message","user":"U8R597E9H","text":"なるほど…。あとはタイマープラス execute 関数とかなら安定するかもしれないか。いや、わからないですね…。","ts":"1609414442.190500","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6nX"}]},{"client_msg_id":"1ec73d93-d736-48d4-9edf-a6e7f1010528","type":"message","user":"U9S4G0LJW","text":"あー、待機の方は分からないかも…","ts":"1609414467.190700","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xTVp"}]},{"client_msg_id":"61d1e94c-9a42-49b1-a5e0-6325caf9bc81","type":"message","user":"U9S4G0LJW","text":"多分ありすえさんに聞くのが一番早い","ts":"1609414481.190900","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3ly"}]},{"client_msg_id":"28ffb449-59be-4346-9c36-cc3e2962eafe","type":"message","user":"U8R597E9H","text":"なるほど。前回の実行完了を待つのは相当厳しそうだ…。コマンドじゃなくて関数の i/f かないと無理そう","ts":"1609414570.191100","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"omXDF"}]},{"client_msg_id":"8c9f7e81-3bae-4fcd-af36-9b27d2e8b0ca","type":"message","user":"U8R597E9H","text":"たしかに、作者が一番詳しそうw","ts":"1609414584.191300","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bSEY"}]},{"client_msg_id":"d3ba0fe1-7655-484f-b90d-6d8e9f872f23","type":"message","user":"U8996GYBF","text":"飛ばしちゃおう\n\u003c@U776661HA\u003e","ts":"1609414617.191500","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"21pKZ"}]},{"client_msg_id":"62c93153-6b1e-437e-af1a-8786edced632","type":"message","user":"U9S4G0LJW","text":"この前Gina statusの結果拾いたいって言ったら一瞬で解決したので（なお教えられたのは内部APIな模様）","ts":"1609414625.191700","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FWC"}]},{"client_msg_id":"4DED9C54-0D72-4653-B98C-CC7BB0F716B4","type":"message","user":"U776661HA","text":"んーない","ts":"1609414665.192000","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lGX"}]},{"client_msg_id":"D92FF451-C25A-4054-A721-EA9464716AFB","type":"message","user":"U776661HA","text":"Promiseタイプでは無いので待つというのを直接は出来ないです","ts":"1609414693.192800","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qKHU5"}]},{"client_msg_id":"d75f5688-83cf-445f-9c72-f4a580d0c635","type":"message","user":"U8996GYBF","text":"終了を待機してるわけじゃなくて、feedkeyだと擬似的にユーザに打たせてるから偶然上手くいくとかなんですかね","ts":"1609414695.193000","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cLfIk"}]},{"client_msg_id":"f320cfbb-b171-4b29-93db-b6186df6fb21","type":"message","user":"U8996GYBF","text":"なるほど、ありがとうございます","ts":"1609414705.193300","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"p2s"}]},{"client_msg_id":"114B120D-885E-4875-B5B5-6401B17EBCCB","type":"message","user":"U776661HA","text":"ただ内部イベントは発生してるので、それをキャッチすることは可能そう","ts":"1609414719.194000","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wpEyX"}]},{"client_msg_id":"760DF271-FD49-4101-9361-160CADC29FED","type":"message","user":"U776661HA","text":"\u003c@U9S4G0LJW\u003e さんに教えたやつですね。","ts":"1609414740.194500","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cuMLC"}]},{"client_msg_id":"10e19f60-e89a-4bdc-9fc9-42e7a7862c4e","type":"message","user":"U9S4G0LJW","text":"その節はお世話になりました","ts":"1609414751.195100","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kVToR"}]},{"client_msg_id":"6B3A93BF-3EE5-4E13-999C-A2AB6846D3D2","type":"message","user":"U776661HA","text":"いまpc触れないから詳しくはかけない","ts":"1609414753.195300","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"31xF9"}]},{"client_msg_id":"497dbd65-33e7-4557-b8f3-2fb0221126e0","type":"message","user":"U8996GYBF","text":"あ、問題ないです\n忙しい中ありがとうございます","ts":"1609414781.195500","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fFf"}]},{"client_msg_id":"DAB7C55E-1AAF-4E32-8851-1899ACD385F0","type":"message","user":"U776661HA","text":":+1:","ts":"1609414790.195800","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0Ka/5"}]},{"client_msg_id":"9275b9a5-ab11-4d6c-b0ef-1f1d10ae9231","type":"message","user":"U9S4G0LJW","text":"自分が送ったfeedkeysのやつはそれです \u0026gt; 擬似的にユーザーに打たせるから上手くいく\n色々試したけどこれ以外の方法は全部失敗した","ts":"1609414888.196000","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"l2uf"}]},{"client_msg_id":"6540b6d2-1eb9-4d60-9f16-ad20042b00af","type":"message","user":"U9S4G0LJW","text":"完全に説明抜けてて申し訳ないですが、複数送って上手くいくかは全然分からないです…","ts":"1609415102.196200","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NnbJ1"}]},{"client_msg_id":"b5a94d4c-51f3-49fd-81f0-3c5502cc16e2","type":"message","user":"U8996GYBF","text":"今試しにpatchを2ファイルでやって上手くいったんで、多分大丈夫かなと思います","ts":"1609415157.196400","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jCXJV"}]},{"client_msg_id":"578ded26-2934-4039-8d7f-9aa92a3e4d1f","type":"message","user":"U8996GYBF","text":"以前これでうまくいかなかった気がする","ts":"1609415165.196600","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XdNs"}]},{"client_msg_id":"f1d376f3-afd6-4929-bdbf-b7b8fa4069c9","type":"message","user":"U9S4G0LJW","text":"よかった","ts":"1609415180.196800","thread_ts":"1609411121.183100","parent_user_id":"U9S4G0LJW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Egc"}]},{"client_msg_id":"f373b0e2-3548-486a-96ac-ae0a6cfb98b6","type":"message","user":"U9S4G0LJW","text":"今の所複数ファイル渡したりしてないので問題起きてないですね","ts":"1609409341.176000","thread_ts":"1609409282.175600","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WIEn"}]},{"client_msg_id":"5285c110-a18e-4c9d-8156-262cb369736e","type":"message","user":"U8996GYBF","text":"消しちゃおう、ありがとうございます","ts":"1609409353.176300","thread_ts":"1609409282.175600","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LhAb"}]},{"client_msg_id":"2b475262-ea2a-4f32-98c3-52bbcc63771a","type":"message","user":"U9S4G0LJW","text":"複数ファイルじゃなくてVimの非同期の仕様の差でバグってる感じなので消すだけじゃ難しそうな気がします","ts":"1609409398.176900","thread_ts":"1609409282.175600","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2tIc"}]},{"client_msg_id":"29e0cb34-2602-4d96-9596-ef89c2b32aa9","type":"message","user":"U9S4G0LJW","text":"悩ましいな","ts":"1609352868.135500","edited":{"user":"U9S4G0LJW","ts":"1609352874.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JDRg"}]},{"client_msg_id":"eeecee64-56c6-4714-9205-59480e416e6d","type":"message","user":"U9S4G0LJW","text":"coc.nvim入れるかーみたいな所に来てvim-lsp\u0026amp;vim-lsp-settingsを割と気に入っていることに気付いた","ts":"1609352865.135300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6ZxP"}]}]
