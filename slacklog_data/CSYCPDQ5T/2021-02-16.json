[{"client_msg_id":"cb30dfe5-e81d-4862-9afc-277e92db742a","type":"message","user":"U03C6TEAZ","text":"dehydrated、ゴリゴリの bash script だった。","ts":"1613480816.150300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JNu"}]},{"client_msg_id":"e9d01331-4900-459e-8a7a-497479d9c3af","type":"message","user":"UBRTB4N5C","text":"certbot は依存とかが多すぎると思って、今は dehydrated を使ってる。","ts":"1613470036.149800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gf+i"}]},{"client_msg_id":"9a887fb6-eecc-44df-bbc7-836b914015e0","type":"message","user":"UAUFDS92N","text":"certbotで失敗したこと無いのでずっと使ってる","ts":"1613465536.149000","edited":{"user":"UAUFDS92N","ts":"1613465629.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Fk9"}]},{"client_msg_id":"820a8877-9194-4e58-8cf3-77433bcf147d","type":"message","user":"UAUFDS92N","text":"lego使ってみたいな〜という気持ちになりながらずっとcertbot使ってます","ts":"1613465514.148500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zrg"}]},{"client_msg_id":"0d0f793d-9990-404e-9c35-9025ba0ca319","type":"message","user":"U06BRP8VD","text":"これとかそもそもメールサーバーのアドレスがAレコードになってるのが???だなw\n\n\u003chttps://putcut.hatenablog.com/entry/2020/02/14/010236\u003e","ts":"1613464594.147900","attachments":[{"fallback":"glhf -\u0026gt; gg: SSL/TLS証明書をcertbotで発行に失敗 - glhf -\u0026gt; gg","id":1,"title":"SSL/TLS証明書をcertbotで発行に失敗 - glhf -\u0026gt; gg","title_link":"https://putcut.hatenablog.com/entry/2020/02/14/010236","text":"Let's EncryptのSSL/TLS証明書をcertbotで発行しようとしたら、なぜか「Congratulations!」にならなくて詰まった時の話。 環境 さくらのVPS（Ubuntu 18.04） エックスドメイン さくらのメールボックス あとはDjangoでNginxなんだけど、原因になっているっぽいのが上の3つだと思う。VPSとメールを同じドメインで使っていて、そのときのネームサーバー（DNSサーバー）のレコード設定が原因だったと思う。設定はさくらのVPSとメールボックスを同ドメイン利用するネームサーバ設定を参考に行った。※設定を間違えているわけではないと思う。 問題から解決まで…","image_url":"https://ogimage.blog.st-hatena.com/6653586347146889103/26006613511055033/1581609756","blocks":null,"ts":1581609756,"service_name":"glhf -\u0026gt; gg","service_icon":"https://putcut.hatenablog.com/icon/touch","from_url":"https://putcut.hatenablog.com/entry/2020/02/14/010236","original_url":"https://putcut.hatenablog.com/entry/2020/02/14/010236"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ou="}]},{"client_msg_id":"0bf74090-2e25-4b43-916b-fd71a8326280","type":"message","user":"U06BRP8VD","text":"ぼくcertbotで失敗したことまだないや","ts":"1613464475.147100","edited":{"user":"U06BRP8VD","ts":"1613464484.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+2oG"}]},{"client_msg_id":"41f4b53c-2674-44f8-9832-88a65b3b0ef9","type":"message","user":"UFHQ7TNT0","text":"とりあえず ghg で lego 入れた〜。晩飯作ろう :cook:","ts":"1613462890.146700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lqiKp"}]},{"client_msg_id":"5f959c6b-3fef-4b55-a735-f7b13faf7c93","type":"message","user":"U06ECBRTJ","text":"\u003chttps://i.pinimg.com/originals/35/d3/8a/35d38a164c117015b824a24eb2bada2f.png\u003e","ts":"1613462834.145800","attachments":[{"fallback":"450x271px image","id":1,"image_url":"https://i.pinimg.com/originals/35/d3/8a/35d38a164c117015b824a24eb2bada2f.png","blocks":null,"from_url":"https://i.pinimg.com/originals/35/d3/8a/35d38a164c117015b824a24eb2bada2f.png","original_url":"https://i.pinimg.com/originals/35/d3/8a/35d38a164c117015b824a24eb2bada2f.png"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FWfa0"}]},{"client_msg_id":"b54bd486-996a-4dbb-971c-9425f0cf3e16","type":"message","user":"U03C6TEAZ","text":"lego に変えてから事故った事ない。","ts":"1613462828.145600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kuY"}]},{"client_msg_id":"68ac9def-fbea-4513-ad8f-6677041a5de6","type":"message","user":"U03C6TEAZ","text":"\u003chttps://twitter.com/search?q=certbot%20%E5%A4%B1%E6%95%97\u003e","ts":"1613462796.145100","attachments":[{"fallback":"certbot 失敗 - Twitter Search","id":1,"title":"certbot 失敗 - Twitter Search","title_link":"https://twitter.com/search?q=certbot%20%E5%A4%B1%E6%95%97","text":"The latest Tweets on certbot 失敗. Read what people are saying and join the conversation.","blocks":null,"service_name":"twitter.com","service_icon":"https://abs.twimg.com/icons/apple-touch-icon-192x192.png","from_url":"https://twitter.com/search?q=certbot%20%E5%A4%B1%E6%95%97","original_url":"https://twitter.com/search?q=certbot%20%E5%A4%B1%E6%95%97"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"g0Rl"}]},{"client_msg_id":"e8612057-63cf-4dd4-bb04-80e085cebf63","type":"message","user":"U03C6TEAZ","text":"certbot はなんか事故りやすいんですよね。","ts":"1613462791.144900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Rc+4d"}]},{"client_msg_id":"5c62f962-d4bf-4216-b47e-a8d14b2af4be","type":"message","user":"U06ECBRTJ","text":"lego、踏んだら痛そうな名前ですね","ts":"1613462726.144400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SV==2"}]},{"client_msg_id":"c20f0f02-90a5-4584-ac10-e740f6ccbe66","type":"message","user":"U03C6TEAZ","text":"ちなみに最近の ubuntu であれば lego は apt で入ります。","ts":"1613462655.144000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2rEE"}]},{"client_msg_id":"94c065a5-c753-49ab-8f5e-adfe251b838c","type":"message","user":"U06ECBRTJ","text":"certbot-route53 にはお世話になってます","ts":"1613462499.143400","team":"T03C4RC8V","reactions":[{"name":"me-too","count":1,"users":["U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"e5JT"}]},{"client_msg_id":"e264a7c8-1ce3-42a1-abf8-3cee2cfbab95","type":"message","user":"U03C6TEAZ","text":"著名な DNS プロバイダだとプラグイン用意されますけどね。lego だとシングルバイナリで ok","ts":"1613462468.143000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sAW"}]},{"client_msg_id":"98fa01e1-76ef-43e9-8aec-80496b31ea0b","type":"message","user":"UFHQ7TNT0","text":"あぁ、やっぱりそれですか","ts":"1613462365.142000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"q819B"}]},{"client_msg_id":"e7e802fa-7db3-4c33-8711-8e2cea3dbf6e","type":"message","user":"U03C6TEAZ","text":"TEXT レコード使うやつ。","ts":"1613462286.141000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iuV"}]},{"client_msg_id":"34c4bae5-19eb-45c0-855d-40b776f8d188","type":"message","user":"U03C6TEAZ","text":"dev の場合は DNS-01 でないとできないかも。","ts":"1613462275.140700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Suh"}]},{"client_msg_id":"f4014849-963a-4263-b4ce-834a498c8a86","type":"message","user":"U03C6TEAZ","text":"dev はそうですね。","ts":"1613462244.140400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uST"}]},{"client_msg_id":"9dd42a4f-26b4-4483-8ed7-632538dc753f","type":"message","user":"U01D44KSY9Z","text":"devドメインって確か強制でHSTSかかってた気がするんですけどどうでしたっけ\nACME認証って80番に通らないといけなかった気がするけどdevドメイン持ってないので仕様が分からない……","ts":"1613462214.140000","edited":{"user":"U01D44KSY9Z","ts":"1613462244.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oL9"}]},{"client_msg_id":"6f6f1d8e-fc97-4738-a5a9-295c5ac4ce68","type":"message","user":"U03C6TEAZ","text":"certbot プラグインが system python でエラー吐くようになってて止まってたんですが、venv 作るくらいなら僕は lego かな。","ts":"1613462157.139100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"G/y5a"}]},{"client_msg_id":"3967b3cc-92fd-4ae9-9e05-030508f6e263","type":"message","user":"U01D44KSY9Z","text":"最近は趣味で雑にSSL環境作る時はCaddy使うようになった","ts":"1613462077.136600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Glzn"}]},{"client_msg_id":"30219781-4c87-41fd-bac9-15e1d1f09cae","type":"message","user":"U06BRP8VD","text":"それは…パッケージングが悪いのかしら?","ts":"1613462042.136100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"H4J"}]},{"client_msg_id":"becc5803-06a6-4d53-bb89-d32378a64b2a","type":"message","user":"U03C6TEAZ","text":"python 環境稀に壊れる事があって一度それで証明書切れた。","ts":"1613461878.135800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cb8"}]},{"client_msg_id":"bc6966fd-d539-4eae-82bc-2d3efd324a79","type":"message","user":"U06BRP8VD","text":"FreeBSDだとcertbotはportsで昔からあるからなぁ。あと実はPythonのほうがGoよりもインストールが速い。","ts":"1613461826.135200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6Zh"}]},{"client_msg_id":"dfe0af1b-98c1-4f91-b9cd-493c6c854e56","type":"message","user":"U03C6TEAZ","text":"あ、はいw","ts":"1613461790.134400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"spcsz"}]},{"client_msg_id":"4e88db87-09c6-4f5e-87d1-d32d707864fb","type":"message","user":"U06ECBRTJ","text":"python ですね","ts":"1613461779.134100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4We"}]},{"client_msg_id":"488d6e0f-a26f-4664-a47f-ff16dc192b68","type":"message","user":"U06BRP8VD","text":"pythonじゃなかったっけ?","ts":"1613461776.134000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"azPZ"}]},{"client_msg_id":"0eca7110-40dd-41b8-8796-75915b855016","type":"message","user":"U06BRP8VD","text":"ん?","ts":"1613461771.133700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pdS"}]},{"client_msg_id":"6952013d-e825-4624-879a-8e2a98e9635f","type":"message","user":"U03C6TEAZ","text":"~ruby~ python の環境作らなくていいのが楽。","ts":"1613461764.133500","edited":{"user":"U03C6TEAZ","ts":"1613461804.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"s85EX"}]},{"client_msg_id":"6e3318ce-3825-4b4a-a045-1f1c012d42d0","type":"message","user":"U03C6TEAZ","text":"\u003chttps://github.com/go-acme/lego\u003e","ts":"1613461670.133100","attachments":[{"fallback":"GitHub: go-acme/lego","id":1,"title":"go-acme/lego","title_link":"https://github.com/go-acme/lego","text":"Let's Encrypt client and ACME library written in Go - go-acme/lego","thumb_url":"https://avatars.githubusercontent.com/u/48337471?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/go-acme/lego","original_url":"https://github.com/go-acme/lego"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"etW22"}]},{"client_msg_id":"a8c38858-267a-4cd4-9808-94ff93efe114","type":"message","user":"U03C6TEAZ","text":"個人的には certbot より lego がオススメ。","ts":"1613461607.132900","team":"T03C4RC8V","reactions":[{"name":"hee","count":1,"users":["UFHQ7TNT0"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6z9"}]},{"client_msg_id":"8E2A6826-053B-45EE-9DCC-5310932F574B","type":"message","user":"UFHQ7TNT0","text":"おそらくやり方が悪かっただけだと思うので、たぶん行けると思います。ただ、なんか回数制限あるみたいなので、気軽にリトライできないのが心配ですね。","ts":"1613461390.132600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZnK2"}]},{"client_msg_id":"41dc5ac3-ae5c-427b-8f58-06f9088cf3a6","type":"message","user":"U06BRP8VD","text":"ちょっと状況が同じかわからないけど一応できてた。\n\n僕のあるサーバAは同一ドメインの別の名前のCNAMEで運用してるけども。","ts":"1613461095.130900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0XKiM"}]},{"client_msg_id":"0C4D87D0-8AEE-420A-87E9-6556AB730D4B","type":"message","user":"UFHQ7TNT0","text":"夜にでもmanualでリトライしてみます。","ts":"1613461022.129900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wmg"}]},{"client_msg_id":"D3C66A68-A412-4958-8445-9BB0AE7A0FDF","type":"message","user":"UFHQ7TNT0","text":"試しにreadme通りに—standaloneで試してみました。.dev ドメインが特殊なのかも。あるいはVPNのせいかも。","ts":"1613460947.128600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1iv"}]},{"client_msg_id":"5547dc9c-a275-4274-b9a3-905a44829dc1","type":"message","user":"U06BRP8VD","text":"あれ? cname できなかったっけ?","ts":"1613460944.128500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2ko09"}]},{"client_msg_id":"44238dd7-0933-49cf-be3b-8f34a8482dd3","type":"message","user":"U06ECBRTJ","text":"webroot ですか？ Webサーバプラグインですか？","ts":"1613460619.126400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EoHL"}]},{"client_msg_id":"E923A0DD-561E-46EF-99F0-5B46D3CAFB61","type":"message","user":"UFHQ7TNT0","text":"とりあえずcnameレコードドメインの証明書を対話的には発行できないことが分かりました","ts":"1613460534.125700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"f4wO"}]},{"client_msg_id":"c3227015-f829-4afa-98fb-e458598a2cec","type":"message","user":"U06ECBRTJ","text":"趣味なら、DNS 認証にして、ワイルドカード証明書取るのが楽です","ts":"1613460192.123800","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UFHQ7TNT0"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+Eg"}]},{"client_msg_id":"99D29D05-7CC3-4C0B-97C1-213D0CD18C5A","type":"message","user":"UFHQ7TNT0","text":"certbot 初めて使うのドキドキする","ts":"1613460128.123100","thread_ts":"1613460128.123100","reply_count":1,"team":"T03C4RC8V","reactions":[{"name":"sorena","count":1,"users":["U06BRP8VD"]},{"name":"wakaru","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DS5"}]},{"client_msg_id":"4058d533-7dc3-4bf2-a66c-ab3d59ccc1a0","type":"message","user":"U03C6TEAZ","text":"結局こういったサービス使う時にはセキュリティに気を付けないといけないし、ちゃんとやった方が本当はいい。","ts":"1613459448.122600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vtPQ"}]},{"client_msg_id":"3a8fd9b2-875e-4abe-9b0e-ea185f9b3ca3","type":"message","user":"U776661HA","text":"なるほど。ただ、こういうの仕事では使いにくいから社内に立てたい","ts":"1613458091.121700","edited":{"user":"U776661HA","ts":"1613458107.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Byc"}]},{"client_msg_id":"9023c8ce-70ea-44cf-88aa-fd7a28b3a35b","type":"message","user":"UFHQ7TNT0","text":"ほー","ts":"1613457357.121000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2eYB"}]},{"client_msg_id":"d9df39a8-7c8b-4971-b6fd-1ecb1aba7e2b","type":"message","user":"U06ECBRTJ","text":"これ、結局SSL できないから面倒っぽい…","ts":"1613457353.120900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cUHgB"}]},{"client_msg_id":"6cb6ab84-c140-48fc-a755-665ecfc267b1","type":"message","user":"U06ECBRTJ","text":"`\u003chttp://xip.io|xip.io\u003e` の後発って感じですか","ts":"1613457332.120400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qG0"}]},{"client_msg_id":"68989967-1c56-4016-952d-68bde68ef42d","type":"message","user":"U8CC7MDCL","text":"`\u003chttp://localaddress.nip.io|localaddress.nip.io\u003e` でよしなに出来るの便利ですよね","ts":"1613457279.120000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mMl"}]},{"client_msg_id":"f246160b-6b98-45fd-b137-3de49a0efede","type":"message","user":"U03C6TEAZ","text":"めっさ便利だ。","ts":"1613456874.119400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yXVxO"}]},{"client_msg_id":"ebccd286-9d97-463d-a550-af74eb4fd377","type":"message","user":"U03C6TEAZ","text":"\u003chttps://nip.io/\u003e","ts":"1613456870.119200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ehC="}]},{"client_msg_id":"89a5156e-98ff-4036-a4e2-7d2b2ea3f4b6","type":"message","user":"UFHQ7TNT0","text":"TailscaleのマジックDNSで発行される `\u003chttp://xn--xck0dwc890r.xn--cck3b4b8e3bi2i.beta.tailscale.net|マシン名.メールアドレス.beta.tailscale.net\u003e`のドメインを、自分のドメインのDNSにCNAMEレコード追加しておいたら、無事に `マシン名.vpn.tomoya.dev` でSSH接続できた〜","ts":"1613403096.118900","team":"T03C4RC8V","reactions":[{"name":"goodpoem","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/E2J"}]},{"client_msg_id":"bd71a644-cea0-43db-a940-ed55b53b19c1","type":"message","user":"U06BRP8VD","text":"renewにcronしかけてずいぶん経つけど、特に問題は起こってないので大丈夫なんだろう。たぶん。","ts":"1613460348.124100","thread_ts":"1613460128.123100","parent_user_id":"UFHQ7TNT0","team":"T03C4RC8V","reactions":[{"name":"goodpoem","count":1,"users":["UFHQ7TNT0"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"A8g"}]}]
