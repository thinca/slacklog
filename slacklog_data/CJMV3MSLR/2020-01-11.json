[{"client_msg_id":"b435ba7e-2ece-471f-baa4-0c26da398bce","type":"message","user":"URQDW4JUE","text":"fzfはHomebrewからインストールしており、fzf.vimはdein.vimで管理して以下のようにTOMLに書き出しています\n```[[plugins]]\nrepo = 'junegunn/fzf.vim'\ndepends = 'fzf'\nhook_add = '''\n  nnoremap &lt;C-f&gt; :Ag&lt;CR&gt;\n  nnoremap &lt;Space&gt;&lt;Space&gt; :Files .&lt;CR&gt;\n'''```","ts":"1578729620.035200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LzMq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e75fd280-c371-4a8a-808c-3357da7e6865","type":"message","user":"UAZ33BKV2","text":"えっと、まずコマンドのfzfがあり、これはhomebrewということでOKです。\n次に\n<https://github.com/junegunn/fzf>\nにはfzfのvimでの操作APIライブラリがはいっていて、これを\n<https://github.com/junegunn/fzf.vim>\nのプラグインが使っています。\nなので両方をインストールする必要がある(はず)","ts":"1578729931.037300","attachments":[{"fallback":"GitHub: junegunn/fzf","id":1,"title":"junegunn/fzf","title_link":"https://github.com/junegunn/fzf","text":":cherry_blossom: A command-line fuzzy finder. Contribute to junegunn/fzf development by creating an account on GitHub.","thumb_url":"https://avatars0.githubusercontent.com/u/700826?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/junegunn/fzf","original_url":"https://github.com/junegunn/fzf"},{"fallback":"GitHub: junegunn/fzf.vim","id":2,"title":"junegunn/fzf.vim","title_link":"https://github.com/junegunn/fzf.vim","text":"fzf :heart: vim. Contribute to junegunn/fzf.vim development by creating an account on GitHub.","thumb_url":"https://avatars0.githubusercontent.com/u/700826?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/junegunn/fzf.vim","original_url":"https://github.com/junegunn/fzf.vim"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fZx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"29e0ddd1-96f4-49ef-978d-8e53b8648741","type":"message","user":"UAZ33BKV2","text":"で、そのファイルが被る部分がるので merged 0 の設定が必要です","ts":"1578729953.037900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kZokS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9d97bbf2-9cf1-441d-b215-dbc20feec96e","type":"message","user":"URQDW4JUE","text":"なるほど。fzfもfzf.vimもインストールする必要があるということですね","ts":"1578729985.038900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"i=h"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"588ed1ad-66da-4bde-af06-0a76c1f7966c","type":"message","user":"UAZ33BKV2","text":"あと、その設定のdependの書き方だと\n<https://github.com/junegunn/fzf>\nへ依存していて、fzfコマンドのチェックにはなってないと思います...","ts":"1578730001.039600","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["URQDW4JUE"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8KOfx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8fb69e14-313d-4311-95ad-a53f665c1fa9","type":"message","user":"UAZ33BKV2","text":"はい","ts":"1578730005.040100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YmJ4s"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"884b328c-d6fc-47cd-8f38-20226d75ec12","type":"message","user":"URQDW4JUE","text":"ここを見ると、vim-plugを使っている場合にHomebrewでインストールしたものを使えるとあるのですが、dein.vimでは使えないという認識でしょうか\n<https://github.com/junegunn/fzf.vim#using-vim-plug>","ts":"1578730029.041100","attachments":[{"fallback":"GitHub: junegunn/fzf.vim","id":1,"title":"junegunn/fzf.vim","title_link":"https://github.com/junegunn/fzf.vim#using-vim-plug","text":"fzf :heart: vim. Contribute to junegunn/fzf.vim development by creating an account on GitHub.","thumb_url":"https://avatars0.githubusercontent.com/u/700826?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/junegunn/fzf.vim#using-vim-plug","original_url":"https://github.com/junegunn/fzf.vim#using-vim-plug"}],"edited":{"user":"URQDW4JUE","ts":"1578730036.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"G25"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"06FB80C4-7F38-4369-86B6-5C710E42866F","type":"message","user":"UDDCM376D","text":"最近似たような問題発生している\nsudo vimって実行すると、それ以降壊れる","ts":"1578730045.041900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RJ7L"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"F018B8B4-3B7F-4279-9813-3F46BBAE2490","type":"message","user":"UDDCM376D","text":"<https://github.com/skanehira/dotfiles/blob/b7314fa9ca08bb8e2acfdcf5d98df90448fb3a89/linux/vim/dein.toml#L38|https://github.com/skanehira/dotfiles/blob/b7314fa9ca08bb8e2acfdcf5d98df90448fb3a89/linux/vim/dein.toml#L38>","ts":"1578730091.042700","attachments":[{"fallback":"GitHub: skanehira/dotfiles","id":1,"title":"skanehira/dotfiles","title_link":"https://github.com/skanehira/dotfiles/blob/b7314fa9ca08bb8e2acfdcf5d98df90448fb3a89/linux/vim/dein.toml#L38","text":"my dotfiles. Contribute to skanehira/dotfiles development by creating an account on GitHub.","thumb_url":"https://avatars2.githubusercontent.com/u/7888591?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/skanehira/dotfiles/blob/b7314fa9ca08bb8e2acfdcf5d98df90448fb3a89/linux/vim/dein.toml#L38","original_url":"https://github.com/skanehira/dotfiles/blob/b7314fa9ca08bb8e2acfdcf5d98df90448fb3a89/linux/vim/dein.toml#L38"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zXCJz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5F52DA48-9AC0-44BE-A4E1-127DE8E338EE","type":"message","user":"UDDCM376D","text":"自分はこうしてますね","ts":"1578730097.043200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OtmC"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c5be9731-85f3-4d50-841d-d5a3130456da","type":"message","user":"UAZ33BKV2","text":"いえ、その時は参照先をbrewが入れるところにすればいい、ということなので、やってやれなくはないです。\n上記設定でうまくいってるかわかりませんが","ts":"1578730101.043400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"K0e"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"059afdcc-a9d1-43e6-8e8f-77ae41a0186f","type":"message","user":"URQDW4JUE","text":"ゴリラさんに載せていただいたtomlを参考にfzfとfzf.vimをどちらもインストールしてmerged: 0を指定したら動作しました","ts":"1578730375.045300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cC=K6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9b286ffc-2afc-4af1-be8a-f91172aad7af","type":"message","user":"UAZ33BKV2","text":"fzfバイナリとセットでvimの基本ライブラリが入るということですね\nでそのときならmerged 0 は不要ですが","ts":"1578730379.045500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=3Fe+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"98063dd0-2d56-4ab3-9ce8-b3002c3e778c","type":"message","user":"UAZ33BKV2","text":"よかったよかった","ts":"1578730387.045700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Yv2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f666dbdf-eb92-4973-a070-57b8d30cf13e","type":"message","user":"URQDW4JUE","text":"ただ、ちょっと謎だったのはlazy loadが関係してそうだってところです","ts":"1578730398.046100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kRmL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bb1a4339-a199-4e08-ba6d-4f24f469811d","type":"message","user":"UAZ33BKV2","text":"ちなみにその設定だと、fzfバイナリはbrewで、同リポジトリをdein配下に入れてライブラリだけ使ってる的です","ts":"1578730446.047700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0YZCa"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"07e2eb70-f357-4530-bf4e-af6a4079b064","type":"message","user":"URQDW4JUE","text":"lazy: 1だと一度閉じてしまうと:File コマンドはないよと言われてしまいました","ts":"1578730447.047800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/oZr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b2137a5f-fa5e-40f0-a0ae-3d5ac04b2ef8","type":"message","user":"UAZ33BKV2","text":"あ、lazyだと\n• merged 0を指定しなくても0相当\n• lazyだと読み込み契機を設定する必要がある","ts":"1578730483.048500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Iwgzt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"93174d81-2db8-4f07-83f1-8d9ee5f8c8c3","type":"message","user":"UAZ33BKV2","text":"なので契機がなくて使えなくなる(読まれない)になってたんじゃないかなと","ts":"1578730500.049000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ksY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"739af850-656d-48bd-8f7d-ba3080a11459","type":"message","user":"URQDW4JUE","text":"なるほどです! 完全に理解しました","ts":"1578730525.049300","team":"T03C4RC8V","reactions":[{"name":"rikai","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"di4P"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1e0297e8-d4fe-4944-a1e9-8f3d9402d411","type":"message","user":"URQDW4JUE","text":"<https://github.com/junegunn/fzf.vim#using-vim-plug> によると、おそらくHomebrewがインストールする先が /usr/local/opt/fzf なのでそちらを利用するように頑張ってみて、\nfzf.vimはlazy: 0に修正しようと思います","ts":"1578730602.051000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jeET"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d884dc7b-a6ef-4fc8-ae5a-bdbbc38d1dcb","type":"message","user":"UAZ33BKV2","text":"なるほど、がんばってみてください","ts":"1578730703.051900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yjk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"56f48535-deba-4528-8948-3fbdb4a5a126","type":"message","user":"URQDW4JUE","text":"`set runtimepath+=/usr/local/opt/fzf` をinit.vimに指定することでHomebrewからインストールしたfzfコマンドを参照することができました","ts":"1578730798.053900","team":"T03C4RC8V","reactions":[{"name":"+1::skin-tone-5","count":2,"users":["UAZ33BKV2","UGKP7RFUH"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2r="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f8f77ed7-b9a1-4f07-9a65-0d95e7774afb","type":"message","user":"U7986PPFH","text":"&gt;  sudo vimって実行すると、それ以降壊れる\nホームディレクトリ下のvim関連のファイル所有者がrootに変わってしまうのでは？\n初めからroot権限で編集するとわかっているなら `sudoedit` か `sudo -e` を使った方が良い","ts":"1578730830.054100","thread_ts":"1578730830.054100","reply_count":1,"replies":[{"user":"UDDCM376D","ts":"1578751000.066200"}],"team":"T03C4RC8V","reactions":[{"name":"benri","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7lFY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9545751e-7d39-4591-8d3b-12e94e454a04","type":"message","user":"U03C6TEAZ","text":"初めて vim を起動するユーザーで sudo vim して viminfo が root 権限になって以降動作がおかしくなるアレ。","ts":"1578731930.057000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"F/ZP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"02014586-8a1a-4088-83d3-001f34265e5c","type":"message","user":"U78A6ESHM","text":"危険。","ts":"1578731946.057200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sYq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"54b20eea-cb02-4eed-a450-b265b0d98212","type":"message","user":"UAZ33BKV2","text":"sudo vim打たれたら SUDO_EDITOR=vim sudoeditに差し替えてくれるシェル機能とかあると安全だけどどうだろうw?","ts":"1578732004.058100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"62Oj"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"26ce5efd-c340-4e02-8733-2d2354e92e4a","type":"message","user":"U7JL1UKKL","text":"一応deinはsudoを検出して動作しなくなる","ts":"1578748193.063500","team":"T03C4RC8V","reactions":[{"name":"subara","count":9,"users":["UAZ33BKV2","U9S4G0LJW","U8R597E9H","UEB17JJJE","UGKP7RFUH","UL6CFN8NR","UEBF2KQTD","U7TMPGWJ0","UJV2VRS9X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"r=MXL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3bea6919-a14f-494c-ab03-8915070533ff","type":"message","user":"U9S4G0LJW","text":"差し替えるよりは動作しなくなるほうが正しいですよね、やはり","ts":"1578748361.064500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"c8Hx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"49591267-5430-48b8-bed6-56f6f117131e","type":"message","user":"U9S4G0LJW","text":"差し替えてくれるのは確かに便利ではあるけど、シェル機能として積むべきではなく、ユーザーに明示的に設定させるべきだと思う","ts":"1578748391.065200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"S2b"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ed0d91e6-a6bb-4a01-a86b-0820bccd0b9d","type":"message","user":"UAZ33BKV2","text":"まあ、設定しないかぎりは動かないほうがいいですね...","ts":"1578748456.065600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mEo=Z"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9982A4FD-BC2C-464C-9C0B-1A3519CD408C","type":"message","user":"UDDCM376D","text":"なるほど！\nありがとうございます","ts":"1578751000.066200","thread_ts":"1578730830.054100","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2o3"}],"root":{"client_msg_id":"f8f77ed7-b9a1-4f07-9a65-0d95e7774afb","type":"message","user":"U7986PPFH","text":"&gt;  sudo vimって実行すると、それ以降壊れる\nホームディレクトリ下のvim関連のファイル所有者がrootに変わってしまうのでは？\n初めからroot権限で編集するとわかっているなら `sudoedit` か `sudo -e` を使った方が良い","ts":"1578730830.054100","thread_ts":"1578730830.054100","reply_count":1,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7lFY"}]}},{"client_msg_id":"6b8f7682-8c38-4ff4-92a3-cdd2a06f2100","type":"message","user":"URQDW4JUE","text":"dein.vimに読み込ませるTOMLファイルを、ローカルにクローンしたGitHubリポジトリからシンボリックリンクを貼っているのですが\nGitHubリポジトリを更新(pullとかpushとか)したタイミングでfzf.vimが読み込めなくなってしまって困っています\nfzf.vimで使うfzfはHomebrewからインストールしたものを使うように設定しており、vimから出るとfzfが使える状態です","ts":"1578729178.032300","edited":{"user":"URQDW4JUE","ts":"1578729234.000000"},"team":"T03C4RC8V","reactions":[{"name":"sumi","count":1,"users":["URQDW4JUE"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IkR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"de8e6dde-ac10-4995-b703-38ca0b278ae9","type":"message","user":"URQDW4JUE","text":"いまのところの解決策はdein.vimが使用しているcacheディレクトリ (ex. ~/.cache/dein/repos/github.com/junegunn/fzf.vim)を削除して `:call dein#install()`を実行することです","ts":"1578729367.033500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vgrf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7cc07d68-673f-4352-b283-5d9504a8767b","type":"message","user":"UAZ33BKV2","text":"fzfはfzf.vimもあるので、両方を入れてるならmerged : 0にしないといけないかと思いますが、その辺どうなっていますか?","ts":"1578729511.034500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Kz6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
