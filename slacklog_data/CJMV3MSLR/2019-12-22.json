[{"client_msg_id":"ae4094aa-14ee-4aa4-9a80-6cd8091d9ea0","type":"message","user":"UGXMRNBUM","text":"vim-ripgrepなどを使ってると、\n`\"teams/%v` みたいな文字列を検索したいとき、どうすれば良いのかわからないんですが、\n知見お持ちの方いらっしゃいませんか\n`:Rg '\"teams/\\%v'` とかはやってみてもだめでした。（not foundとなる）","ts":"1576946033.130500","thread_ts":"1576946033.130500","edited":{"user":"UGXMRNBUM","ts":"1576946043.000000"},"reply_count":2,"replies":[{"user":"UGXMRNBUM","ts":"1576946852.131200"},{"user":"UAZ33BKV2","ts":"1576970267.131400"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=iW4U"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e65373b6-0877-4c66-a0c1-e99b3fec874b","type":"message","user":"UGXMRNBUM","text":"`:grep` 使ったほうが良さそう","ts":"1576946852.131200","thread_ts":"1576946033.130500","parent_user_id":"UGXMRNBUM","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4zeg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5b64648f-c46b-45d4-a3b1-98b5d99e6c3c","type":"message","user":"UAZ33BKV2","text":"やってみないと分りませんが、\n`:Rg \\\"teams/\\%v`\n的な記法になりそう?\nあとでちょっと試してみよう","ts":"1576970267.131400","thread_ts":"1576946033.130500","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"T7kJP"}],"root":{"client_msg_id":"ae4094aa-14ee-4aa4-9a80-6cd8091d9ea0","type":"message","user":"UGXMRNBUM","text":"vim-ripgrepなどを使ってると、\n`\"teams/%v` みたいな文字列を検索したいとき、どうすれば良いのかわからないんですが、\n知見お持ちの方いらっしゃいませんか\n`:Rg '\"teams/\\%v'` とかはやってみてもだめでした。（not foundとなる）","ts":"1576946033.130500","thread_ts":"1576946033.130500","edited":{"user":"UGXMRNBUM","ts":"1576946043.000000"},"reply_count":2,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=iW4U"}]}},{"client_msg_id":"3ca3f66e-db05-4c8d-ab7e-187da4faa78b","type":"message","user":"U78A6ESHM","text":"autocmd のなかで以下のようにするとエラーになるんですけど、こういう仕様なんですかね？\n```let l:settings = {}\nautocmd User lsp_setup call lsp#register_server(l:settings)```\n```Error detected while processing User Auto commands for \"lsp_setup\":\nE121: Undefined variable: l:settings```\n","ts":"1576994003.132600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kOBG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"75f4f2f3-d903-46ca-a775-b39ed0636b46","type":"message","user":"U78A6ESHM","text":"`l:` とか `a:` とかつけないといける。\n\n```let settings = {}\nautocmd User lsp_setup call lsp#register_server(settings)```\n","ts":"1576994045.133500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EEeKM"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4efdab79-2bdd-49de-9d57-5dd190ce2016","type":"message","user":"U78A6ESHM","text":"ちなみに Vim のバージョンは 8.2","ts":"1576994082.133900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zwlh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0d6b3440-4bde-448d-8c0a-1fe37f3e731e","type":"message","user":"U9S4G0LJW","text":"`l:` って関数の中で使うためのローカル変数だからスコープの違いでこけてるように見える、多分仕様だと思う","ts":"1576994423.134700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gxsx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1e63c173-b125-450c-99aa-a656b9cf8cf3","type":"message","user":"U9S4G0LJW","text":":h local-variable","ts":"1576994427.135000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"O=wqh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UPZHKAM7W","text":"```\n                                                *local-variable* *l:var* *l:*\n関数の中からそのローカル変数にアクセスするには何も前置しなければ良い。明示的\nに \"l:\" を付けることも可能である。ただし \"l:\" をつけないと予約されている変数名\nと衝突してしまうことがある。例: \"count\" とすると \"v:count\" を参照してしまう。\n\"l:count\" とすればローカル変数countを参照できる。\n```","ts":"1576994428.135100","bot_id":"BPM858KEE","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"4b0c050c-d434-49a5-b5df-1a2c7c9f2f4e","type":"message","user":"U9S4G0LJW","text":"グローバルに置きたくないなら `s:` を使えばいいんじゃないかな","ts":"1576994542.135800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PbU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6f6a921a-12ce-43bf-b172-33e68a33793e","type":"message","user":"U78A6ESHM","text":"なるほど！あざます！\n<https://github.com/mattn/vim-lsp-settings/blob/26edd8428e36562e3bf58d5aa1360270ad166359/autoload/lsp_settings.vim#L72-L79>\n具体的にはここなんですが、 `a:settings` 何ですよね。わざわざ `let settings = a:settings` しないといけなくて :disappointed_relieved:","ts":"1576994642.137300","attachments":[{"fallback":"GitHub: mattn/vim-lsp-settings","id":1,"title":"mattn/vim-lsp-settings","title_link":"https://github.com/mattn/vim-lsp-settings/blob/26edd8428e36562e3bf58d5aa1360270ad166359/autoload/lsp_settings.vim#L72-L79","text":"Auto configurations for Language Server for vim-lsp - mattn/vim-lsp-settings","thumb_url":"https://avatars1.githubusercontent.com/u/10111?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/mattn/vim-lsp-settings/blob/26edd8428e36562e3bf58d5aa1360270ad166359/autoload/lsp_settings.vim#L72-L79","original_url":"https://github.com/mattn/vim-lsp-settings/blob/26edd8428e36562e3bf58d5aa1360270ad166359/autoload/lsp_settings.vim#L72-L79"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eFUi"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4b8f5295-b67c-45d3-abd7-979481758901","type":"message","user":"U9S4G0LJW","text":"あー、関数内でのautocmdの定義か、申し訳ないですがどんな扱いされてるのか僕には分からないです。helpにも詳しく書かれてないですし","ts":"1576994964.138200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5=5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ed01b319-6f1f-4b4e-a43b-65927b126d95","type":"message","user":"U78A6ESHM","text":"いえいえ、ありがとうございます！","ts":"1576994989.138400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hdg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f6522c7c-bdb5-412f-9ff4-470c1315fa05","type":"message","user":"U03C71D7H","text":"む、関数内で autocmd しても関数ローカル変数は参照できないはずだけど…","ts":"1576996016.139700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qDVB="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6cef3d10-cc23-4364-b9c6-29cc9e2b5c8c","type":"message","user":"U9S4G0LJW","text":"ということは、どこかにsettingsという名前のグローバル変数があって、それが上書きされているって事？","ts":"1576996111.140500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mi+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5ca2c53b-1060-4c5c-a145-b8f07a6fbcc0","type":"message","user":"U78A6ESHM","text":"お、てことはこれは lsp#register_server() には何が渡るんでしょう？","ts":"1576996118.140800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kMU8n"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f6f5651a-74dc-4ea1-b146-871b789bccc5","type":"message","user":"UAZ33BKV2","text":"関数を呼ぶなら、こうするから、変数も&lt;SID&gt;でいけるんじゃないかな\n`autocmd InsertEnter * nested call &lt;SID&gt;relativenumber_toggle('enter')`","ts":"1576996144.141400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1s3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a13cd5d9-e116-4957-a3c9-95a4e1dd13af","type":"message","user":"U03C71D7H","text":"いけないんだなこれが","ts":"1576996222.141800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ds5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"807190ec-0fcb-47d5-8d98-c6160c40b0c5","type":"message","user":"U78A6ESHM","text":"結局\n```let s:settings = a:settings\nautocmd User lsp_setup ++once call lsp#register_server(s:settings)```\nこうか。","ts":"1576996255.142300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oBKp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3b59a77a-4f43-4ffe-940d-613b7139a256","type":"message","user":"U78A6ESHM","text":"はえー知らなかった。勉強になった。","ts":"1576996323.142600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DOD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f4948215-20e7-4b31-bd8c-a1375ccd858f","type":"message","user":"UAZ33BKV2","text":"あれ、そうなのか...変数はやったことないからうーん","ts":"1576996359.143000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zMaeq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"25d6278d-957f-40d8-a724-2f9f83fb7a2f","type":"message","user":"UAZ33BKV2","text":"むう、変数はグローバルしかつかってないや(自分で定義したところ)","ts":"1576996460.143500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Z5eu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bf4cd640-1453-4361-be7c-f2867466e803","type":"message","user":"U03C6TEAZ","text":"あー、僕がよく考えないまま提案してしまったなぁ。","ts":"1577001003.144200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gRUrE"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"67a676c5-d2ce-4d46-bed6-622c18f18f0e","type":"message","user":"U03C6TEAZ","text":"コマンドの方が良かったのか。","ts":"1577001017.144600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9==P"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c466450c-0b70-4a09-be4d-9000b4d97b15","type":"message","user":"U03C6TEAZ","text":"autocmd するコマンド","ts":"1577001034.145000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TZ9d"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5c0d1ce2-34c4-4ca5-9707-8a8a332551ac","type":"message","user":"U03C71D7H","text":"今日の tips も埋めてもらえたので完全勝利\n<https://twitter.com/mnishz0/status/1208604523654025216>","ts":"1577001407.145800","attachments":[{"fallback":"<https://twitter.com/mnishz0|@mnishz0>: 以下の EX コマンドのような検索パターンを必要とする場面で、パターンに何も入力しないで実行すると最後に使った検索パターン (:reg / で表示) が使用されます。\n\n:substitute (置換)\n:global (検索ヒットした各行にコマンド実行)\n:vglobal  (検索ヒットしなかった各行にコマンド実行)\n\n#vimtips_ac","id":1,"author_name":"m_nishi @ 英語勉強1日3時間つらみ","author_subname":"@mnishz0","author_link":"https://twitter.com/mnishz0/status/1208604523654025216","author_icon":"https://pbs.twimg.com/profile_images/984064711946682371/xjXZJvQr_normal.jpg","text":"以下の EX コマンドのような検索パターンを必要とする場面で、パターンに何も入力しないで実行すると最後に使った検索パターン (:reg / で表示) が使用されます。\n\n:substitute (置換)\n:global (検索ヒットした各行にコマンド実行)\n:vglobal  (検索ヒットしなかった各行にコマンド実行)\n\n#vimtips_ac","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1576988747,"service_name":"twitter","from_url":"https://twitter.com/mnishz0/status/1208604523654025216","original_url":"https://twitter.com/mnishz0/status/1208604523654025216"}],"team":"T03C4RC8V","reactions":[{"name":"69b9bbe795f19442","count":7,"users":["UL6CFN8NR","UAZ33BKV2","UGXMRNBUM","U06BRP8VD","UEB130KJN","UGKP7RFUH","UMUPYCYN8"]},{"name":"clap","count":4,"users":["U06BRP8VD","U7B4ZD49X","UEB130KJN","UGKP7RFUH"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"J9T"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
