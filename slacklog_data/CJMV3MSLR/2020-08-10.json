[{"client_msg_id":"89201f10-5d80-4f35-a968-56864553f517","type":"message","user":"UP6PA1UBE","text":"OS側でキーを入れ替えらるプログラムを作成し、complete 開く時と閉じた時にモードをそのプログラムに通知するスクリプトを書いてvimに通知されるキーを入れかえる\nという魔術なら実装できなくもない\n(おとなしく本体修正するほうが楽","ts":"1597054557.281500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"c67Gb"}]},{"client_msg_id":"ce5737d9-f801-47ee-a008-7bde6eeac3aa","type":"message","user":"U7JL1UKKL","text":"本体を直すしかない。魔法はありません","ts":"1597052800.279200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"N1N"}]},{"client_msg_id":"470af59e-19c7-40bf-a8c4-977f94d5a275","type":"message","user":"U7JL1UKKL","text":"本体の制限はさすがに無理ですね","ts":"1597052791.278800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fw7sQ"}]},{"client_msg_id":"09ada36e-29bc-4742-8741-1e3f6af11334","type":"message","user":"US72PNNLQ","text":"なるほど，ありがとうございます．そうすると vim の方を修正しない限りマッピングはできるようにならないんですね．\n解決の可能性があるとすれば neovim に Ctrl-X mode へのマッピングをできるような修正を加えるとかでしょうか．あまり現実的ではなさそう……","ts":"1597048964.278400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QGGrZ"}]},{"client_msg_id":"30a1a31e-92ad-47ce-8737-e4c966bc1aed","type":"message","user":"U7JL1UKKL","text":"そもそも挿入モードでカーソル移動ということそのものが推奨されない","ts":"1597042861.276200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"joT"}]},{"client_msg_id":"96a92e1b-e3c0-4969-881c-537ed07b95b0","type":"message","user":"U7JL1UKKL","text":"同じ問題は自分も昔ハマった気がするんだよなぁ","ts":"1597042844.275600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dyb="}]},{"client_msg_id":"08e28803-ec95-4721-822d-afb35c788d65","type":"message","user":"U7JL1UKKL","text":"本来ならCtrl-X modeは別のモードなのだから個別でキーマッピングを定義できるべきであった","ts":"1597042557.275000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vGD"}]},{"client_msg_id":"d8ead649-18a6-4ca9-a800-29877b936cbd","type":"message","user":"U7JL1UKKL","text":"Ctrl-X modeのキーの扱いが特殊でマッピングを考慮してない非常にいびつなものになってしまっている","ts":"1597042513.274000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ba/"}]},{"client_msg_id":"a1f2e4d5-b219-4c93-8e01-0961dd27c3e0","type":"message","user":"U7JL1UKKL","text":"Vimの実装として","ts":"1597042483.273000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aMKb"}]},{"client_msg_id":"19619d82-fd27-4dbf-b27d-03c55a408fb2","type":"message","user":"U7JL1UKKL","text":"complete関数による補完もCtrl-X modeだから同じ","ts":"1597042306.271900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KEkOA"}]},{"client_msg_id":"b7aa9990-1608-420c-ad8e-de240961637a","type":"message","user":"U7JL1UKKL","text":"上の話を見ればわかるけど、Ctrl-X modeではマッピングが制限される","ts":"1597042291.271400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"t/0"}]},{"client_msg_id":"f2d15b4a-2bc7-4952-95e0-a777adb0be24","type":"message","user":"U7JL1UKKL","text":"completeはマッピングないでないと効果がないため","ts":"1597041527.270600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Fih5"}]},{"client_msg_id":"65d88464-5556-4e0d-ae17-1f288fea1937","type":"message","user":"U7JL1UKKL","text":"その補完はcompleteを呼ぶためのものです","ts":"1597041513.270100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9oM9"}]},{"client_msg_id":"68207cfa-6397-4020-ac3e-0727fc9c080a","type":"message","user":"U7JL1UKKL","text":"deopleteはcomplete関数を使って補完を呼び出しています","ts":"1597041502.269600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YcBG"}]},{"client_msg_id":"64bc854f-cae5-4224-8e4a-ac4bcd53450d","type":"message","user":"U7JL1UKKL","text":"問題は解決しないと思うよ","ts":"1597041153.269100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Xb3"}]},{"client_msg_id":"7f6f6710-299b-4909-b1f3-771db3e0a7e7","type":"message","user":"U7JL1UKKL","text":"deopleteの補完の開き方はわかるけども","ts":"1597041147.268800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"o29h"}]},{"client_msg_id":"28d0d2da-4708-4e01-b7cb-495232cbfef8","type":"message","user":"US72PNNLQ","text":"以前 omni 補完表示中に \u0026lt;C-p\u0026gt; へのリマップが動作しないことについて，\u003chttps://vim-jp.slack.com/archives/CJMV3MSLR/p1596481451183100|このチャンネルで質問させて\u003eいただきました．\nvim でのこの挙動については\u003chttps://vim.fandom.com/wiki/Improve_completion_popup_menu|以前から報告されていて\u003e，修正はされなさそうです．\n\n私は deoplete で自動で開かれる補完が表示されている状態で \u0026lt;C-p\u0026gt; をリマップしたいのですが，これが \u0026lt;C-x\u0026gt;\u0026lt;C-n\u0026gt; での omni 補完ポップアップメニューと同様に inoremap での \u0026lt;C-p\u0026gt; キーリマップができなくて困っています．\nそこで deoplete で自動での補完がどのように設定されているのか追いかけていたのですが，最終的に次の `call feedkeys(\"\\\u0026lt;Plug\u0026gt;_\", 'i')` で補完を開始するようになっているようなのですが，この行が何をしているのか分からなくてここから先に進めないでいます．\n\u003chttps://github.com/Shougo/deoplete.nvim/blob/a57980ab9d08b11affddc30439f6975e4eb01b41/autoload/deoplete/handler.vim#L84\u003e\n\ndeoplete の自動補完ポップアップメニューがどのように開かれているのか分かる方，あるいはこの先どのように調べればよいか分かる方いらっしゃいましたらお力添えいただけると助かります．よろしくおねがいします．","ts":"1597037789.268100","attachments":[{"fallback":"[August 3rd, 2020 12:04 PM] yoguchi1996: 試しに `noremap \u0026lt;expr\u0026gt; \u0026lt;C-p\u0026gt; pumvisible() ? '\\\u0026lt;C-y\u0026gt;\\\u0026lt;C-p\u0026gt;' : '\\\u0026lt;C-p\u0026gt;'` のように割り当ててみたのですが，\u0026lt;C-x\u0026gt;\u0026lt;C-n\u0026gt; の補完では動作しませんでした（\u0026lt;C-n\u0026gt; の補完では動作する）．\n私は普段 deoplete の補完を使っているのですが，そちらでも動作しませんでした．\nこれどうすれば割り当てられるんでしょうね…？","id":1,"author_id":"US72PNNLQ","author_name":"aiotter","author_subname":"aiotter","author_link":"https://vim-jp.slack.com/team/US72PNNLQ","author_icon":"https://avatars.slack-edge.com/2020-07-16/1251666533476_e5c5f7bd79e42dac04e7_48.jpg","text":"試しに `noremap \u0026lt;expr\u0026gt; \u0026lt;C-p\u0026gt; pumvisible() ? '\\\u0026lt;C-y\u0026gt;\\\u0026lt;C-p\u0026gt;' : '\\\u0026lt;C-p\u0026gt;'` のように割り当ててみたのですが，\u0026lt;C-x\u0026gt;\u0026lt;C-n\u0026gt; の補完では動作しませんでした（\u0026lt;C-n\u0026gt; の補完では動作する）．\n私は普段 deoplete の補完を使っているのですが，そちらでも動作しませんでした．\nこれどうすれば割り当てられるんでしょうね…？","mrkdwn_in":["text"],"blocks":null,"footer":"Posted in #question","ts":1596481451.183100,"from_url":"https://vim-jp.slack.com/archives/CJMV3MSLR/p1596481451183100","original_url":"https://vim-jp.slack.com/archives/CJMV3MSLR/p1596481451183100"},{"fallback":"Vim Tips Wiki: Improve completion popup menu | Vim Tips Wiki | Fandom","id":2,"title":"Improve completion popup menu | Vim Tips Wiki | Fandom","title_link":"https://vim.fandom.com/wiki/Improve_completion_popup_menu","text":"Please review this tip: This tip was imported from \u003chttp://vim.org|vim.org\u003e and needs general review. You might clean up comments or merge similar tips. Add suitable categories so people can find the tip. Please...","thumb_url":"https://vignette.wikia.nocookie.net/vim/images/b/bc/Wiki.png/revision/latest?cb=20070515145358","blocks":null,"service_name":"Vim Tips Wiki","service_icon":"https://vignette.wikia.nocookie.net/vim/images/b/bc/Wiki.png/revision/latest?cb=20070515145358","thumb_width":135,"thumb_height":155,"from_url":"https://vim.fandom.com/wiki/Improve_completion_popup_menu","original_url":"https://vim.fandom.com/wiki/Improve_completion_popup_menu"},{"fallback":"GitHub: Shougo/deoplete.nvim","id":3,"title":"Shougo/deoplete.nvim","title_link":"https://github.com/Shougo/deoplete.nvim/blob/a57980ab9d08b11affddc30439f6975e4eb01b41/autoload/deoplete/handler.vim#L84","text":":stars: Dark powered asynchronous completion framework for neovim/Vim8 - Shougo/deoplete.nvim","thumb_url":"https://avatars3.githubusercontent.com/u/41495?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/Shougo/deoplete.nvim/blob/a57980ab9d08b11affddc30439f6975e4eb01b41/autoload/deoplete/handler.vim#L84","original_url":"https://github.com/Shougo/deoplete.nvim/blob/a57980ab9d08b11affddc30439f6975e4eb01b41/autoload/deoplete/handler.vim#L84"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Rhd"}]},{"client_msg_id":"3c025892-1899-4d39-a0df-94b36aaa6ea5","type":"message","user":"U017BU3UZBQ","ts":"1597023654.257800","files":[{"id":"F0183S3TJCF","created":1597023653,"timestamp":1597023653,"name":"______.txt","title":"無題","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"プレーンテキスト","user":"U017BU3UZBQ","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":12,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F0183S3TJCF/______.txt","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F0183S3TJCF/download/______.txt","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U017BU3UZBQ/F0183S3TJCF/______.txt","permalink_public":"https://slack-files.com/T03C4RC8V-F0183S3TJCF-67cf0e9282","edit_link":"https://vim-jp.slack.com/files/U017BU3UZBQ/F0183S3TJCF/______.txt/edit","preview":"こんな方法もあったんですね、ありがとうございます","preview_highlight":"\u003cdiv class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text/plain',window.getSelection().toString().replace(/\\u200b/g,''));event.preventDefault();event.stopPropagation();}\"\u003e\n\u003cdiv class=\"CodeMirror-code\"\u003e\n\u003cdiv\u003e\u003cpre\u003eこんな方法もあったんですね、ありがとうございます\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n","lines":1,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"reactions":[{"name":"+1::skin-tone-5","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"86cdebcd-4003-4ba5-86a1-919e35b02ce7","type":"message","user":"U017BU3UZBQ","text":"```あ、コードブロックの存在に気づいていませんでした。\n\"…\"の中にありましたね…```","ts":"1597022115.257500","edited":{"user":"U017BU3UZBQ","ts":"1597022145.000000"},"team":"T03C4RC8V","reactions":[{"name":"+1::skin-tone-5","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"B92"}]},{"client_msg_id":"de7ef5b5-4e15-4779-bfb7-138154e864f1","type":"message","user":"UAZ33BKV2","text":"ささいな問題ですが\n```abc\n efg```\nってできます?\nあと、この量ならスニペットにしてもいいかも","ts":"1597016151.254700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6AoUO"}]},{"client_msg_id":"961a7dae-e111-4ecc-bd92-5253d3f6ea90","type":"message","user":"UAZ33BKV2","text":"あれ、なぜコードブロックになってないんだろ?","ts":"1597016118.253900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6cf"}]},{"client_msg_id":"51b212ea-bd40-4682-a621-5f1073e36b27","type":"message","user":"U9S4G0LJW","text":"お、本体バグだ","ts":"1597016114.253700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8Rn9"}]},{"client_msg_id":"6056f58d-be6f-43a6-9d6d-5674845bcdcc","type":"message","user":"U017BU3UZBQ","text":"Vim: Caught deadly signal SEGV 違う方法探すか","ts":"1596997616.253100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"57g6"}]},{"client_msg_id":"1ad1bd9f-76c7-4860-a6d9-6d0e8a64ea2e","type":"message","user":"U017BU3UZBQ","text":"なぜかVimが落ちる、","ts":"1596997401.252100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xHf/m"}]},{"client_msg_id":"649b0fc9-ec45-42d8-bbd1-300b0ea832ab","type":"message","user":"U017BU3UZBQ","text":"autocmd! ExitPre ** call term_sendkeys(bufnr(bufnr(g:Shell)), “exit\\n”)","ts":"1596997344.251200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"im1"}]},{"client_msg_id":"7adabc18-0f3e-47e9-8b5d-7ae3f529e5f0","type":"message","user":"U017BU3UZBQ","text":"exeコマンドを使わないといけないものなのか","ts":"1596996617.250900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2zB"}]},{"client_msg_id":"eb4e4640-0435-46eb-a33c-64ab0c44f5da","type":"message","user":"U017BU3UZBQ","text":"sbufferでやってみましたが、なんか違うような気も…\n`let g:isOpenTerm = 0`\n`let g:Shell = '!/usr/local/bin/zsh'`\n`function! ToggleTerm()`\n    `if !bufexists(g:Shell)`\n        `botright terminal`\n        `let g:isOpenTerm = 1`\n    `else`\n        `if g:isOpenTerm == 1`\n            `let l:bufnum = win_findbuf(bufnr(g:Shell))`\n            `if !(l:bufnum == [])`\n                `call win_gotoid(l:bufnum[0])`\n                `close`\n            `endif`\n            `let g:isOpenTerm = 0`\n        `elseif g:isOpenTerm == 0`\n            `exe \"botright sb \".bufnr(g:Shell)`\n            `resize 10`\n            `let g:isOpenTerm = 1`\n        `endif`\n    `endif`\n`endfunction`","ts":"1596996361.250500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eauz"}]},{"type":"message","user":"UPZHKAM7W","text":"```\n:[N]sb[uffer] [+cmd] [N]                                *:sb* *:sbuffer*\n                ウィンドウを分割しバッファリストのバッファ[N]を編集する。 [N]\n                が与えられなければ、そのままカレントバッファが編集される。ウィ\n                ンドウ分割の際には、'switchbuf' の \"useopen\" の設定に従う。\n                これはバッファリストにないバッファも 'buflisted' フラグを設定\n                することなく編集する。\n                |+cmd| も参照。\n \n:[N]sb[uffer] [+cmd] {bufname}\n                ウィンドウを分割しバッファリストの |{bufname}| バッファを編集\n                する。これはバッファリストにないバッファも 'buflisted' フラグ\n                を設定することなく編集する。\n                Note: 別名でカレントバッファのコピーを作って、それを別のウィン\n                ドウで表示したいのなら、次のようにすること:  \n                        :w foobar | sp #\n                |+cmd| も参照。\n```","ts":"1596994533.249700","bot_id":"BPM858KEE","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"270a7d76-ca11-4690-933c-e981e9a325e8","type":"message","user":"U03C6TEAZ","text":":help :sbuffer","ts":"1596994533.249600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UHc+T"}]},{"client_msg_id":"e0028c53-f435-465a-b112-21e74254a3c5","type":"message","user":"U03C6TEAZ","text":"bufnum が分かってるのであれば sbuffer を使うと良さそうです。","ts":"1596994524.249400","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["U017BU3UZBQ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"e5e"}]},{"client_msg_id":"d53d844e-b48a-415f-b458-3b9e13b2c0da","type":"message","user":"U9S4G0LJW","text":"手元(Linux)だと`!`をエスケープする必要があるな","ts":"1596994515.249100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YStE"}]},{"client_msg_id":"0ee5ea51-806c-45df-a0a1-b17472721365","type":"message","user":"U017BU3UZBQ","text":"`botright 10sp !/usr/local/bin/zsh`\nここ実は、すでにターミナルが実行されている時に動作します。\nTerminalのバッファを指定できればいいのですが、やり方がわからなかったので、無理やりバッファ名でウィンドウを開いています","ts":"1596994260.248100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PGtyK"}]},{"client_msg_id":"015f5f3f-7996-4540-a988-782421185ef6","type":"message","user":"U9S4G0LJW","text":"ところで`botright 10sp !/usr/local/bin/zsh`って動作します？手元で試しても上手くいかない","ts":"1596994084.245800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3JWZ"}]},{"client_msg_id":"6b61dc96-2702-4958-a2ba-661d826f6d08","type":"message","user":"U9S4G0LJW","text":"デスクトップ環境側でドロップダウンターミナルずっと使ってるけど手放せない、Vimの中でどうかはわからないけど","ts":"1596993924.245400","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":1,"users":["U017BU3UZBQ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AduU"}]},{"client_msg_id":"6020de6a-3d70-4fb6-9bba-bc4a061ad568","type":"message","user":"U9S4G0LJW","text":"ちゃんと作れば相当便利だとは思う","ts":"1596993743.244200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RLK"}]},{"client_msg_id":"ee336264-996c-4074-8825-9e556a6e662a","type":"message","user":"U017BU3UZBQ","text":"Terminalを:NERDTreeToggleのように開閉したく、関数を書いてみました(返信欄)\nVim scriptを 書いたことがほぼないので、ここはこうしたほうがいいというようなことはありますか？\nそもそも、このアプローチは効果的ですか？","ts":"1596992654.243000","thread_ts":"1596992654.243000","edited":{"user":"U017BU3UZBQ","ts":"1596993490.000000"},"reply_count":1,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7C2m7"}]},{"client_msg_id":"9e44938c-b074-4263-96c7-cba869040262","type":"message","user":"U017BU3UZBQ","text":"`let g:isOpenTerm = 0`\n`function! ToggleTerm()`\n    `if !bufexists(\"!/usr/local/bin/zsh\")`\n        `bo terminal`\n        `let g:isOpenTerm = 1`\n    `else`\n        `if g:isOpenTerm == 1`\n            `let l:bufnum = win_findbuf(bufnr(\"!/usr/local/bin/zsh\"))`\n            `if !(l:bufnum == [])`\n                `call win_gotoid(l:bufnum[0])`\n                `close`\n            `endif`\n            `let g:isOpenTerm = 0`\n        `elseif g:isOpenTerm == 0`\n            `botright 10sp !/usr/local/bin/zsh`\n            `let g:isOpenTerm = 1`\n        `endif`\n    `endif`\n`endfunction`","ts":"1596992667.243100","thread_ts":"1596992654.243000","parent_user_id":"U017BU3UZBQ","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DcEPS"}]}]
