[{"client_msg_id":"7bd2d20e-dc5b-4b65-9f9d-3aace892df74","type":"message","user":"UDDCM376D","text":"vim\nで、画面を出さずexコマンドだけ実行して終了する方法ってありますか？","ts":"1568469799.019100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a65fee95-df20-4fa8-9a6c-e0730e5c0b85","type":"message","user":"U03C71D7H","text":"バッチモード","ts":"1568469816.019300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b14880ac-a262-4f2a-b462-506e85db312b","type":"message","user":"U03C71D7H","text":":h -s-ex","ts":"1568469834.019500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U894RTUJY","text":"```\n                                                        *-s-ex*\n-s              サイレント(もしくはバッチ)モード。Vimが \"ex\" で起動されるか、\n                このオプションよりも先に \"-e\" が付いていた場合にだけ働く。そう\n                でない場合には|-s|を参照。|-s|として使うときには引数をとる。\n                端末の替わりにファイルからExコマンドを実行する場合に使用され\n                る。ほとんどのプロンプトとメッセージは抑制される。警告とエラー\n                のメッセージも抑制される。\n                次のコマンドの出力は標準出力へ表示される:\n                        :print\n                        :list\n                        :number\n                        :set      オプション値を表示するため。\n                'verbose' が0以外のときにはメッセージは抑制されずに標準エラー\n                出力へ表示される(デバッグ用)。\n                'term' と $TERM は考慮されない。\n                Vimが停止しているようだったら \"qa!&lt;Enter&gt;\" と入力してみてほし\n                い。Vimがユーザーの入力を待っているときでもプロンプトは表示さ\n                れない。\n                初期化処理はスキップされる(このオプションが引数 \"-u\" と一緒に\n                使われた場合は除く)。\n                例:  \n                        vim -e -s &lt; thefilter  thefile\n```","ts":"1568469834.019600","bot_id":"B894RTUCU","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"ec3710e9-3730-4a69-9cc5-8a4a8e198b2c","type":"message","user":"UDDCM376D","text":"ありがとうございます","ts":"1568470909.020000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UNDUKAJ87","text":"<@UNDUKAJ87> has joined the channel","ts":"1568415138.469700","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"b34d391a-846a-4369-bb0b-3883fbc1e70b","type":"message","user":"UAZ33BKV2","text":"`質問`\nコンソール上では whichでパスが取れるのに、そのコンソールから起動したvimでexepath/executableがNGな場合、どんな理由がありえるでしょう?\nご存知のかたがおられたら、知見をいただきたいです。\nPATHには場所設定されてるのになあ...","ts":"1568433047.001500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"740ba62a-975e-4be6-a3b8-b716c692a23e","type":"message","user":"UDDCM376D","text":"NGってfalseになるってことですか？","ts":"1568433128.001900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7001ba9f-9ede-4456-8a26-94fe0faaefae","type":"message","user":"UAZ33BKV2","text":"はい、executableは0/exepathは''が返ってきます","ts":"1568433249.002300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cde53089-59a7-430f-96e4-468eafe3dbc3","type":"message","user":"UDDCM376D","text":"権限周りくらいしか思いつかない…","ts":"1568433451.002700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7af210f2-8598-44a1-ab64-406d5f819cd6","type":"message","user":"UDDCM376D","text":"`executable()は$PATHと通常のプログラム検索ディレクトリを参照す`\n$PATHを見に行っているのは間違いなさそう","ts":"1568433534.003400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b0d5815d-c7ae-45da-ab77-9e42f075bad7","type":"message","user":"UDDCM376D","text":"`&amp;shell` の設定とコンソール上で実行した時のシェルが違うとか","ts":"1568433578.004100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5d37f03d-110b-49a5-b194-bdff63fe734a","type":"message","user":"UAZ33BKV2","text":"たしかにnyagosとcmdで違うというのはありますが...、素でWindows上から起動してもnyagosから起動してもcmdで起動してもNGっぽい(もう一度たしかめます)","ts":"1568433837.005200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e58369e5-978f-4094-a7ed-b59da79675d2","type":"message","user":"U06BRP8VD","text":"ああ、Windowsなんですね","ts":"1568433853.005500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"034b5482-0056-4c87-b41a-b781ab7fecad","type":"message","user":"UAZ33BKV2","text":"はい、そしていままでは問題ないんですが、新規ノートの環境チェックしてたらNGなものがあったという","ts":"1568433882.006400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c6772617-5b52-4b82-91b6-3f5adb84e5b7","type":"message","user":"U06BRP8VD","text":"vimのなかから `:echo $PATH` して、ターゲットのディレクトリが入ってるか、確認しました?","ts":"1568433961.007000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1a4a988e-bc82-439b-9348-7a9b751a1e42","type":"message","user":"UAZ33BKV2","text":"そっちももう一度確認します...(いまちょっとplugin更新しててさわれないので...)","ts":"1568434006.007600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"16a90e94-44a2-423b-b5c8-fbaf96fd8c2f","type":"message","user":"UAZ33BKV2","text":"ありがとうございます。一応解決したっぽいです。\nなぜかvim上のpathから該当箇所が見えず、再確認したところ項目が消えてました(誤操作?)\nいつ消えたのかは不明ですが、nyagos上だけは、自前で追加した箇所があり問題なかったようです。(=問題あったのはWIndowsから直にvim起動時)\nお手数おかけしました","ts":"1568435466.009300","team":"T03C4RC8V","reactions":[{"name":"tada","count":2,"users":["UDDCM376D","U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"43e8563f-d155-480d-a0fd-7224e6585900","type":"message","user":"U06BRP8VD","text":"Winの環境変数てちょっと特殊で、UNIXの感覚で普通にやる(POSIXのsetenvするだけ)と子プロセスに引き継がれないんですよね～そのせいでトラブルことは結構あります。","ts":"1568435828.010600","thread_ts":"1568435828.010600","reply_count":1,"replies":[{"user":"U06BRP8VD","ts":"1568435866.010700"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c20e8d63-0d4d-4cbb-b63d-6ad9e14f598a","type":"message","user":"U06BRP8VD","text":"exec とか system で子プロセス作ればよいのかもだけど、だいたいCreateProcess使っちゃうので、setenvの結果が反映されない。てきな。","ts":"1568435866.010700","thread_ts":"1568435828.010600","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a2bd88b7-0586-426b-ac03-4cdfa19f780c","type":"message","user":"UDDCM376D","text":"`UNIXの感覚で普通にやる(POSIXのsetenvするだけ)と子プロセスに引き継がれないんですよね～そのせいでトラブルことは結構あります。`\n\nマジか","ts":"1568436661.011100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"db9703a7-dd00-4395-a6b5-bba876e82b59","type":"message","user":"UDDCM376D","text":"子プロセスに引き継がれないのか","ts":"1568436672.011400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"67387ed8-3631-4772-9714-739cf3e2761f","type":"message","user":"U06BRP8VD","text":"生のWin32でプロセス作るとき、親のプロセスの環境変数をそのまま適用するのは楽なんですが、そこに変更を加えたものを適用するのはちょっと手間なんですよ。そのためにC","ts":"1568436965.014400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"966322cc-5afa-4c96-aa78-d9343dccbf3c","type":"message","user":"U06BRP8VD","text":"ランタイムはゴニョゴニョやってるんだけど、プロセス作るのはだいたい生のWin32APIでやっちゃうので、アレ?ってバグを埋め込んじゃうのが多い。","ts":"1568437000.015300","edited":{"user":"U06BRP8VD","ts":"1568437046.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"57a66a57-7fd2-4f05-b631-74d06f296e83","type":"message","user":"U03C6TEAZ","text":"あと executable がらみで少しややこしいのが、Windows の場合 .exe や .cmd なくても executable が 1 を返すけど、job_start には直接渡せない問題があるんですよね。","ts":"1568442220.018300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a3b393bb-f34f-4bd5-ad6c-a3660f29014c","type":"message","user":"UAZ33BKV2","text":"おおう、それは知らなかった","ts":"1568443299.018500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
