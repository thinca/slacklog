[{"type":"message","text":"<https://teratail.com/questions/222552?rss=all|urxvtでvimのcolorschemeが正しく表示されない>\nurxvtでvimのcolorschemeが正しく表示されない\ngvimではcolorschemeは正しく表示されるのですが、\nurxvtでvimを実行したときは背景や行番号の色などが正しく表示されません。\n■OS : Manjaro\n■起動shell : bash → fish (.bashrc 内に exec fish)\n■terminal : urxvt\n■$TERM : rxvt-unicode-256color\n■colorscheme : iceberg\n<https://github.com/cocopon/iceberg.vim>  \ngvim 実行画面　正しい！\n  \nurxvt vim 実行画面　正しくない！\n  ...\n\n<https://teratail.com/questions/222552?rss=all|続きを見る>","ts":"1573499768.363600","attachments":[{"fallback":"teratail[テラテイル]: urxvtでvimのcolorschemeが正しく表示されない｜teratail","id":1,"title":"urxvtでvimのcolorschemeが正しく表示されない｜teratail","title_link":"https://teratail.com/questions/222552?rss=all","text":"urxvtでvimのcolorschemeが正しく表示されないgvimではcolorschemeは正しく表示されるのですが、urxvtでvimを実行したときは背景や行番号の色などが正しく表示されません。■OS : Manjaro■起動shell : bash&amp;","thumb_url":"https://teratail.com/img/imgFacebookShare.png","blocks":null,"service_name":"teratail[テラテイル]","service_icon":"https://teratail.com/img/ios/apple-touch-icon.png","thumb_width":1200,"thumb_height":630,"from_url":"https://teratail.com/questions/222552?rss=all","original_url":"https://teratail.com/questions/222552?rss=all"},{"fallback":"GitHub: cocopon/iceberg.vim","id":2,"title":"cocopon/iceberg.vim","title_link":"https://github.com/cocopon/iceberg.vim","text":":antarctica: Dark blue color scheme for Vim and Neovim - cocopon/iceberg.vim","thumb_url":"https://repository-images.githubusercontent.com/15625247/4389d780-d957-11e9-9435-35fd554481b7","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":500,"thumb_height":250,"from_url":"https://github.com/cocopon/iceberg.vim","original_url":"https://github.com/cocopon/iceberg.vim"}],"subtype":"bot_message","bot_id":"BPV6T0C1J","username":"[Vim]の新着質問一覧｜teratail（テラテイル）","icons":{"image_48":"https://s3-us-west-2.amazonaws.com/slack-files2/bot_icons/2019-10-29/814941997319_48.png"},"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"f1cacf8d-f1ff-4add-a146-82d39750093e","type":"message","user":"UDDCM376D","text":"質問\nssh越しにVimで `*`もしくは `+`レジスタを使うことってできますか？","ts":"1573533346.364000","edited":{"user":"UDDCM376D","ts":"1573533352.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"81c102fc-0a8d-4dbf-9802-3d977c6bd052","type":"message","user":"UAZ33BKV2","text":"クリップボードで、ということですか?","ts":"1573533387.364300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0a16fd81-7947-477a-a5b7-95ce2455582b","type":"message","user":"UDDCM376D","text":"です","ts":"1573533392.364500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3af8f785-728a-43d4-8905-4a174cbfcb00","type":"message","user":"U03C6TEAZ","text":"fakeclip","ts":"1573533397.364800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"43cbc572-7721-4fba-bca8-8092457bc7d9","type":"message","user":"UAZ33BKV2","text":"<https://www.vim.org/scripts/script.php?script_id=2098>","ts":"1573533423.365100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2dc31b47-99f9-4db4-b968-1032aef32dfc","type":"message","user":"UAZ33BKV2","text":"ですか、なるほどscreen/tmuxのpaste処理について対応と...いうことかな?","ts":"1573533443.365600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2d74b99e-8d62-4e09-b43d-8fdddc98be51","type":"message","user":"UDDCM376D","text":"kanaさんか","ts":"1573533450.365900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0d8b567b-7cd1-4d1f-ae5e-7d92c21486d3","type":"message","user":"UDDCM376D","text":"これは、普通にキーマッピングすれば良い感じですか？","ts":"1573533579.366400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fddd8079-bb41-4a5a-b8af-4fd96b0c3c60","type":"message","user":"UAZ33BKV2","text":"g:fakeclip_no_default_key_mappings\nでマップするか制御方式っぽい","ts":"1573533622.367000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f3be2c68-8d4b-4014-89d2-71552e611f99","type":"message","user":"UDDCM376D","text":"デフォルトマッピングがあるのか","ts":"1573533624.367100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"54453ce5-edee-4554-a458-9875fd919277","type":"message","user":"U03C6TEAZ","text":"vimrc で `FakeclipDefaultKeyMappings` かいとくといいんじゃないすかね。","ts":"1573533640.367500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1a1284e4-f7ad-4d78-bb65-07747f7baa18","type":"message","user":"UDDCM376D","text":"vimrcに書いたらコマンドがないって怒られた","ts":"1573533767.367800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b95d4fd0-3eb0-4751-85d8-4da6b929a2e0","type":"message","user":"UDDCM376D","text":"読み込みの順番かな","ts":"1573533773.368000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"36129c34-d969-453a-bf4f-a35cc6568799","type":"message","user":"U03C6TEAZ","text":"あぁデフォルトだった。","ts":"1573533839.369000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7f07f210-255e-4245-a0e5-719b17256742","type":"message","user":"UDDCM376D","text":"んー、yank&amp;putできない","ts":"1573533930.369600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"82cee9e4-5997-4c29-844f-91cf5a4c63d4","type":"message","user":"UDDCM376D","text":"マッピングはされている","ts":"1573533994.369700","files":[{"id":"FQE399DGC","created":1573533991,"timestamp":1573533991,"name":"image.png","title":"image.png","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"UDDCM376D","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":66284,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FQE399DGC/image.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FQE399DGC/download/image.png","original_h":432,"original_w":558,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-FQE399DGC-1edeb6dbf5/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-FQE399DGC-1edeb6dbf5/image_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-FQE399DGC-1edeb6dbf5/image_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-FQE399DGC-1edeb6dbf5/image_360.png","thumb_360_gif":"","thumb_360_w":360,"thumb_360_h":279,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-FQE399DGC-1edeb6dbf5/image_480.png","thumb_480_w":480,"thumb_480_h":372,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/UDDCM376D/FQE399DGC/image.png","permalink_public":"https://slack-files.com/T03C4RC8V-FQE399DGC-45070c4730","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"thumb_tiny":"AwAlADCj/CfwptOH3DTaAJB90UjfdpR90UHofpQBHRRRQA7+E/hTad/CfwptAEg+6KQ9KUfdFI33aAGUUUUAO/hP4U2l/hP4UlAEg+6KRulA+6KD0oAZRRS0Af/Z","username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"98b94872-3517-49be-99bf-43912d03ac24","type":"message","user":"UAZ33BKV2","text":"素のscreen/tmuxでのpasteは使えてます?","ts":"1573534023.370300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2b1e110f-07e5-4533-825e-92d1e889c85c","type":"message","user":"UDDCM376D","text":"はい","ts":"1573534049.370500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2c21c28e-0f43-422e-a02b-f53cfcf7d280","type":"message","user":"UAZ33BKV2","text":"helpで設定が他に必要ないか確認したほうがいいかな...とかくらいしか思いつかない","ts":"1573534120.371400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"aa368320-0674-461c-8478-1bfe1dc46d31","type":"message","user":"UDDCM376D","text":"これって、\n`y` と `p` するだけでいいんですよね？","ts":"1573534215.372400","edited":{"user":"UDDCM376D","ts":"1573534220.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"08e730e6-053b-4ec5-b80e-a62d3ede95b1","type":"message","user":"UDDCM376D","text":"使い方が今いち理解できていない…","ts":"1573534232.372800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6a1392ec-7d6e-4e1e-8890-6718ac1e1ad0","type":"message","user":"UJ70JTGR3","text":"割り込みで申し訳ないんですが、vim-lspを使っているとよくvisualモードが解除されるんですが同じ現象になってる人いませんか？\nものすごいざっくりなんですが、具体的には\n1. 何かを編集\n2. **すぐ** に編集した行を含む範囲を選択\n3. normalモードになる\nみたいな感じです\n`:call lsp#disable()` をすると発生しなくなるのでおそらくvim-lspが関与しているんだろうと思ってます","ts":"1573538714.375900","thread_ts":"1573538714.375900","edited":{"user":"UJ70JTGR3","ts":"1573538759.000000"},"reply_count":2,"replies":[{"user":"U8R597E9H","ts":"1573539446.382800"},{"user":"UJ70JTGR3","ts":"1573539488.383200"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"874dbf41-ea9f-4749-afaf-c0f511156ca2","type":"message","user":"UJ70JTGR3","text":"vim起動直後は発生しなくて、起動後しばらくすると発生します\n発生後は常に再現します","ts":"1573538823.377100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8c035330-a16f-4864-8ca0-1895e8d9582e","type":"message","user":"U03C71D7H","text":"非同期で色々処理するプラグインだと割とありがち","ts":"1573538908.377500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e2e7ffd7-17bb-4137-b469-14136eba1404","type":"message","user":"U8R597E9H","text":"win_gotoid/wincmd/bufdo/windo 辺りを使ってるところが候補になるんですかね。。。","ts":"1573538944.377900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"308c1024-36d6-4e3c-8a44-2a1a9f586968","type":"message","user":"U03C71D7H","text":"割と最近の Vim だと `state()` 関数とか `SafeState` autocmd とか出てきたのでこの辺りをうまく使うといいんだろうけど…この辺りを使うとめっちゃ新しい Vim でしか動かないかつ多分 Neovim にはまだ入ってなさそうなのでつらいかも","ts":"1573539058.379600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"566732d0-719c-470b-9d3e-cb07bccd4a97","type":"message","user":"U03C71D7H","text":"<@UDDCM376D> 参考: <https://thinca.hatenablog.com/entry/introduce-lemonade>","ts":"1573539098.380200","thread_ts":"1573539098.380200","attachments":[{"fallback":"永遠に未完成: ssh 越しにクリップボード共有したり URL 開いたりする lemonade の便利設定 - 永遠に未完成","id":1,"title":"ssh 越しにクリップボード共有したり URL 開いたりする lemonade の便利設定 - 永遠に未完成","title_link":"https://thinca.hatenablog.com/entry/introduce-lemonade","text":"私は普段は Windows マシンから自宅サーバの Linux に ssh で接続して作業しており、端末内で作業が完結している間はいいのだけど、Web ブラウザはローカル側なので、URL を開いたりクリップボードのやりとりなどが面倒。 そこで便利なのが lemonade! GitHub - lemonade-command/lemonade: Lemonade is a remote utility tool. (copy, paste and open browser) over TCP. ssh 越しから URL を飛ばしてローカルでブラウザを開いたり、リモート側からローカルのクリップボー…","image_url":"https://cdn-ak.f.st-hatena.com/images/fotolife/t/thinca/20161024/20161024234419.png","blocks":null,"ts":1477320999,"service_name":"永遠に未完成","service_icon":"https://cdn.blog.st-hatena.com/images/touch-icon-iphone-retina.png","from_url":"https://thinca.hatenablog.com/entry/introduce-lemonade","original_url":"https://thinca.hatenablog.com/entry/introduce-lemonade"}],"reply_count":1,"replies":[{"user":"UDDCM376D","ts":"1573548583.397600"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"24eedbb1-1280-415e-906f-31d9ea07bb97","type":"message","user":"U72TB62UF","text":"lemonadeがないと生きていけない身体になってる","ts":"1573539265.381500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3c2b451d-2450-43e1-9510-31e4e1203807","type":"message","user":"UJ70JTGR3","text":"&gt; 割と最近の Vim だと ｀state()｀ 関数とか ｀SafeState｀ autocmd とか出てきたのでこの辺りをうまく使うといいんだろうけど\n\nこれってプラグインレベルの話で、ユーザーレベルでは何もできないですよね？","ts":"1573539300.382100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ad2197bd-53ab-45d7-996f-43a4e7e338c6","type":"message","user":"U8R597E9H","text":"vim-lsp の各種オプションを disabled にしながら試してみるとどこが原因なのかあたりがつけられるかもしれません。\n<https://github.com/prabirshrestha/vim-lsp/blob/master/plugin/lsp.vim#L6>","ts":"1573539446.382800","thread_ts":"1573538714.375900","attachments":[{"fallback":"GitHub: prabirshrestha/vim-lsp","id":1,"title":"prabirshrestha/vim-lsp","title_link":"https://github.com/prabirshrestha/vim-lsp/blob/master/plugin/lsp.vim#L6","text":"async language server protocol plugin for vim and neovim - prabirshrestha/vim-lsp","thumb_url":"https://avatars1.githubusercontent.com/u/287744?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/prabirshrestha/vim-lsp/blob/master/plugin/lsp.vim#L6","original_url":"https://github.com/prabirshrestha/vim-lsp/blob/master/plugin/lsp.vim#L6"}],"parent_user_id":"UJ70JTGR3","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5c44f846-6daa-4cc0-858b-9a41da3f973d","type":"message","user":"U03C6TEAZ","text":"プラグインが原因なら直せますが、再現性がないと直すのが難しそう。","ts":"1573539451.383100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8362c363-c883-4209-b8a3-c5b2c247747d","type":"message","user":"UJ70JTGR3","text":"ありがとうございます！\n試してみます","ts":"1573539488.383200","thread_ts":"1573538714.375900","parent_user_id":"UJ70JTGR3","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UJ70JTGR3","text":"一旦これを試してみます","ts":"1573539519.383400","attachments":[{"color":"D0D0D0","fallback":"[November 12th, 2019 3:17 PM] hrsh7th: vim-lsp の各種オプションを disabled にしながら試してみるとどこが原因なのかあたりがつけられるかもしれません。\n<https://github.com/prabirshrestha/vim-lsp/blob/master/plugin/lsp.vim#L6>","author_id":"U8R597E9H","author_name":"hrsh7th","author_subname":"hrsh7th","author_link":"https://vim-jp.slack.com/team/U8R597E9H","author_icon":"https://secure.gravatar.com/avatar/754fe8f7bc26c7dff2a8f709fea09751.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0008-48.png","text":"vim-lsp の各種オプションを disabled にしながら試してみるとどこが原因なのかあたりがつけられるかもしれません。\n<https://github.com/prabirshrestha/vim-lsp/blob/master/plugin/lsp.vim#L6>","mrkdwn_in":["text"],"blocks":null,"footer":"From a thread in #question","ts":1573539446.382800,"from_url":"https://vim-jp.slack.com/archives/CJMV3MSLR/p1573539446382800?thread_ts=1573538714375900&cid=CJMV3MSLR"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"193be7ba-58c0-4085-87dc-0ae6224c21af","type":"message","user":"U03C71D7H","text":"あ、そうです。ユーザーレベルではなくてプラグイン側がそれらを利用する感じです。","ts":"1573539604.383800","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UJ70JTGR3"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0ccc6e07-72b6-4d28-bb9b-cbddc5b9fbee","type":"message","user":"UJ70JTGR3","text":"`let g:lsp_fold_enabled = 0 `\nこれで発生しなくなりました\n自分としてはfoldとかは使う気は無いので解決しました\nありがとうございます！\n<@U8R597E9H>","ts":"1573540041.384900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"aca82a06-3348-4f20-8d16-c5e7eebb4cd7","type":"message","user":"U8R597E9H","text":"_全然予想していた関数使ってなさそうなところだ。。。_","ts":"1573540076.385300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e680f3b8-d96d-4567-aa39-32cf4be72d34","type":"message","user":"U03C71D7H","text":"逆に言うと fold の辺りのそのような問題を含んだコードがあるってことですねー。\nLSP はサーバとセットだから問題を報告する時に再現方法の手順がむずくてつらいな","ts":"1573540162.386100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1764f87d-3e82-48d1-b699-96c23246aad9","type":"message","user":"UJ70JTGR3","text":"ちなみに自分の環境では一度発生すると `solargraph` と `html-language-server` の双方で起こるようになりましたね","ts":"1573540258.387200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"47872702-ef99-438f-879c-7880132df9cd","type":"message","user":"UJ70JTGR3","text":"最小構成探すのも何がトリガーで発生してるかがわからないので難しいですね…","ts":"1573540387.388600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9c937eed-ef1f-4af0-8155-ea30975c6844","type":"message","user":"U03C71D7H","text":"あとはログをたくさん吐くようにしていると思うので再現した時のログを貼ってもらうとかくらいかなぁ","ts":"1573540428.389700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fbf55561-d3e3-422b-ab1a-554cb2776fe1","type":"message","user":"UGP5AJKU4","text":"似たような症状に当たったことあります。\n自分の場合もvim-lspの設定値をdisableにしていくうちに改善されましたが…\n同じ設定値かは定かでは無いです","ts":"1573540428.389800","edited":{"user":"UGP5AJKU4","ts":"1573540464.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"afefb693-4d04-491a-a254-42be3b83b275","type":"message","user":"U03C6TEAZ","text":"foldexpr を更新した際に visual mode が抜けるのかな。","ts":"1573540441.390100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"66c819a4-4502-4455-b077-3edcc47e4c04","type":"message","user":"U03C6TEAZ","text":"選択は gv で復帰できるけど戻すなら foldexpr が実行された後なので gv 実行しづらいな。","ts":"1573540526.391100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"577868f4-e02e-4796-95f0-2836a0caa9d0","type":"message","user":"U03C71D7H","text":"foldexpr に副作用がある?","ts":"1573540558.391400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5f30e229-bd11-4511-ad6c-376c79c2d79a","type":"message","user":"UJ70JTGR3","text":"ログ吐くように設定してもう一度再現してみます\n発生頻度自体は結構高めなので","ts":"1573540717.392100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"22dd79e6-79b3-47c7-b034-6b24fcb4434f","type":"message","user":"U03C6TEAZ","text":"おきるファイルタイプ教えて貰えますか。","ts":"1573540836.392700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7da55d27-d96a-47e5-a0b8-e5836238b053","type":"message","user":"UJ70JTGR3","text":"確認できたのは `rb` と `html` です\nどちらもlanguage-serverが動いている状態です","ts":"1573540876.393500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"30cb492a-4216-4dde-baca-0abadee85c51","type":"message","user":"U03C6TEAZ","text":"ありがとうございます。","ts":"1573540902.393800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9eaccf1e-3b1c-4a8b-8fad-1e475a9fb007","type":"message","user":"UJ70JTGR3","text":"あ、再現した","ts":"1573540910.394100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1f880315-d683-45e5-b026-ec0bb3d3fa97","type":"message","user":"UAZ33BKV2","text":"はや","ts":"1573540928.394300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f475e8d2-7aca-4983-b059-f4b1a322265e","type":"message","user":"U03C6TEAZ","text":"編集中の\n```\necho &amp;foldmethod &amp;foldexpr &amp;foldtext\n```\nの結果教えて貰えますか","ts":"1573541085.395000","edited":{"user":"U03C6TEAZ","ts":"1573541090.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2ab8e8b1-5e71-4e3d-861d-9921efb96ede","type":"message","user":"UJ70JTGR3","text":"`manual 0 foldtext()` です","ts":"1573541154.395700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"580ff475-284c-409e-b72a-1a616ad5a500","type":"message","user":"UJ70JTGR3","text":"編集中という言葉の意味を履き違えているかもしれないので一応補足で\n問題の起こるファイルでのノーマルモードでの結果です","ts":"1573541192.396400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"39619bd0-a8f3-4aaa-8fd6-26a698a31bf6","type":"message","user":"UJ70JTGR3","text":"問題発生時のログです\nvimの操作的にはノーマルモードから\no→&lt;CTRL-[&gt;→v\nを素早くすると強制的にノーマルモードに移行します","ts":"1573541453.396900","files":[{"id":"FQGRDAY8N","created":1573541452,"timestamp":1573541452,"name":"無題","title":"無題","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"Plain Text","user":"UJ70JTGR3","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":4231,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FQGRDAY8N/______","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FQGRDAY8N/download/______","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/UJ70JTGR3/FQGRDAY8N/______","permalink_public":"https://slack-files.com/T03C4RC8V-FQGRDAY8N-1cd1fad36e","edit_link":"https://vim-jp.slack.com/files/UJ70JTGR3/FQGRDAY8N/______/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"FDD0370A-C884-4554-9C59-D0295DE04DC1","type":"message","user":"UDDCM376D","text":"ありがとうございます\nあとで読みます","ts":"1573548583.397600","thread_ts":"1573539098.380200","parent_user_id":"U03C71D7H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1588e84e-2bc5-4005-920e-a1d77b5d43d3","type":"message","user":"U03C6TEAZ","text":"んー、まだ深く見れてないけど再現しない。","ts":"1573551493.398100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6e88c3b0-09dd-41dc-98ee-9433a0e1ed96","type":"message","user":"U8R597E9H","text":"```\nfunction! Hoge() abort\n  let l:winnr = winnr()\n  execute printf('windo echomsg winnr()')\n  execute printf('%swincmd w', l:winnr)\n  call timer_start(1000, { -&gt; Hoge() }, { 'repeat': 1 })\nendfunction\n\ncall Hoge()\n```\nこれを試して、1sec 置きに visual モードが解除されることが確認できました。","ts":"1573552498.398800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c83959d8-c4a1-4198-a32d-399df92cb2a6","type":"message","user":"U8R597E9H","text":"そして、folding.vim に <https://github.com/prabirshrestha/vim-lsp/blob/master/autoload/lsp/ui/vim/folding.vim#L189> こういうコードがあるので\nこの可能性が濃厚なのかなと考えています。","ts":"1573552554.399200","attachments":[{"fallback":"GitHub: prabirshrestha/vim-lsp","id":1,"title":"prabirshrestha/vim-lsp","title_link":"https://github.com/prabirshrestha/vim-lsp/blob/master/autoload/lsp/ui/vim/folding.vim#L189","text":"async language server protocol plugin for vim and neovim - prabirshrestha/vim-lsp","thumb_url":"https://avatars1.githubusercontent.com/u/287744?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/prabirshrestha/vim-lsp/blob/master/autoload/lsp/ui/vim/folding.vim#L189","original_url":"https://github.com/prabirshrestha/vim-lsp/blob/master/autoload/lsp/ui/vim/folding.vim#L189"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b501d026-52d9-4e13-8b03-31ebd1f0e3b7","type":"message","user":"U8R597E9H","text":"ただ、複数のウィンドウに同じバッファを表示しているケースをケアするコードに見えるので、どう直したものかという感じです。。。","ts":"1573552630.400300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e51807a2-cadb-4598-9227-5c5ec42b9eaa","type":"message","user":"U03C71D7H","text":"winid 使えば直すのはそんなに難しくなさそうだが… neovim への影響がわからぬ","ts":"1573552766.400900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"16503ad2-6100-4d67-84cc-969d7dafa3e4","type":"message","user":"U8R597E9H","text":"あ、getwinvar 使えば移動なしで設定できそうかもしれない。。。？環境用意するのができてないので、あとで見よう。","ts":"1573552884.401900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a43e4f49-47ba-4044-a042-04228a7ab9bd","type":"message","user":"U03C6TEAZ","text":"最悪 gv で","ts":"1573553561.402400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5b7823c9-80e3-4973-97e0-aa4e76c904d1","type":"message","user":"U8R597E9H","text":"再現しました。やはり当該コードの部分で visual mode が解除されている模様です。","ts":"1573557554.403000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"57bfbaf0-5e52-482f-aec2-3ddf6afbfa9d","type":"message","user":"U8R597E9H","text":"typescript-language-server が folding 対応してました。","ts":"1573557572.403400","thread_ts":"1573557572.403400","reply_count":1,"replies":[{"user":"U8R597E9H","ts":"1573558050.403600"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"77f2272d-49de-4fea-9c4d-9b850bc93aa5","type":"message","user":"U8R597E9H","text":"ていうか、foldmethod が expr だったら expr にするというコードになっていた。。。意図があるのか不具合なのかよくわからないので、メンテナに意見を聞いたほうがいいかもしれない。。。\n```\n    let l:current_window = winnr()\n    windo if &amp;l:foldmethod ==# 'expr' &amp;&amp; bufnr('%') == l:bufnr | let &amp;l:foldmethod = 'expr' | endif\n    execute l:current_window . 'wincmd w'\n```","ts":"1573558050.403600","thread_ts":"1573557572.403400","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
