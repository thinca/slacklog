[{"client_msg_id":"385f0772-3c1f-4cb2-8820-5f3b7b1e6cf6","type":"message","user":"U06ECBRTJ","text":"確かに、 `set LANG=C.UTF-8` してから、 git log したらちゃんと表示されました","ts":"1597817099.161000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fhC5"}]},{"client_msg_id":"45595cc0-7ce7-481f-a4e1-c5265cef6ec6","type":"message","user":"U06BRP8VD","text":"Windows Terminalでもmsys系を通して日本語出すときは↑を足さないと化ける。","ts":"1597817043.160400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aNaJ"}]},{"client_msg_id":"bd39a41a-a731-4b4f-a49c-18250c276e51","type":"message","user":"U06BRP8VD","text":"`LANG=C.utf-8` とか指定して実行したらどうなります?","ts":"1597816997.159700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rQ7m"}]},{"client_msg_id":"326f1735-a39f-4daa-ad43-0b699bdce538","type":"message","user":"U06ECBRTJ","text":"msys な bash を叩いたほうが早いですかね？","ts":"1597816929.158800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"d=Mn"}]},{"client_msg_id":"15ca72c1-05f7-461b-9fba-1aed8f89f2a0","type":"message","user":"U06ECBRTJ","text":"Windows で `:term` (cmd.exe) 使ってるんですが、 msys/mingw64 なコマンド叩くと、UTF-8 で出力されます。\nそこで chcp 65001 しても、文字化けしたままの表示になるんですが、ちゃんと表示する方法ありませんか？","ts":"1597816906.158400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/Yl"}]},{"client_msg_id":"d18d1c5f-0987-430c-9b4e-b755a0fbc753","type":"message","user":"U03C6TEAZ","text":"せっかく書いたけど断念した。\n```function! s:test(cmd) abort\n  let l:dic = {}\n  for l:v in split(execute('scriptnames'), \"\\n\")\n    let l:tok = split(l:v, ':')\n    let l:dic[expand(trim(l:tok[1]), ':p')] = trim(l:tok[0])\n  endfor\n  let l:name = expand(matchstr(split(execute(printf('verbose command %s', a:cmd)), \"\\n\")[-1], 'Last set from \\zs\\S\\+'), ':p')\n  echo printf('\u0026lt;SNR\u0026gt;%d_', l:dic[l:name])\nendfunction\n\ncall s:test('Foo')```","ts":"1597814586.156600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gqTA"}]},{"client_msg_id":"e7cfea09-aa3f-4959-b440-5b58d8634df6","type":"message","user":"U03C6TEAZ","text":"nvim_get_command() で辞書が返る。","ts":"1597814540.156200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pI4"}]},{"client_msg_id":"5c0c4cfb-79f0-4cc3-924d-a43082ea7a75","type":"message","user":"U03C6TEAZ","text":"neovim は関数があるらしい。","ts":"1597814530.155900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pM0U"}]},{"client_msg_id":"18db2fd7-ad3b-4c7d-9237-a1dd3a7061d6","type":"message","user":"U03C71D7H","text":"だからどうやって取ってるのかなーと。ソースコード直接読み込めば取れそう","ts":"1597814182.155700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oBQv5"}]},{"client_msg_id":"eb1d216b-2dd9-4120-a250-9d05a295f1ac","type":"message","user":"U03C71D7H","text":"せやねん","ts":"1597814164.155300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zV4Ro"}]},{"client_msg_id":"4efa246f-c48a-4470-98f9-025723825e89","type":"message","user":"U03C6TEAZ","text":"Vim だと `verbose command` で customlist の関数名取れないやんん。","ts":"1597814041.155100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zFQJe"}]},{"client_msg_id":"04bea2d7-7dd6-4fb4-b522-7a484f81af78","type":"message","user":"U03C6TEAZ","text":"Vim script に with みたいなのは欲しい時ある。","ts":"1597813219.154700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NbC4"}]},{"client_msg_id":"b1184067-a4d1-46f7-ad7f-ed9e2aa13c3f","type":"message","user":"U03C6TEAZ","text":"`verbose command XXX` した時にでるパスを `scriptnames` からマッチして、その番号を `\u0026lt;SNR\u0026gt;N_` に当てて `s:` と置換する。","ts":"1597812770.154000","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["U7B4ZD49X"]},{"name":"yabai","count":1,"users":["UAZ33BKV2"]},{"name":"benri","count":1,"users":["U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5X2CZ"}]},{"client_msg_id":"30d79de3-7743-4113-9f4d-530992a2c697","type":"message","user":"U03C6TEAZ","text":"`complete_arg` に書かれている `s:...` の SID はコマンド自身が定義されてる script になるので、実は割と難しい説。","ts":"1597812722.153100","team":"T03C4RC8V","reactions":[{"name":"cry","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xSr9"}]},{"client_msg_id":"d1fd9a0b-0379-4faa-8cf8-674d247058f7","type":"message","user":"U7B4ZD49X","text":"\u003chttps://github.com/gelguy/wilder.nvim/blob/7b1a5810c45e561738c56678ef036f6c64737047/autoload/wilder/cmdline.vim#L619\u003e\nここらへんに例のハックコードをかけばいけるのかな・・・あとでやってみよう","ts":"1597812616.152200","edited":{"user":"U7B4ZD49X","ts":"1597812622.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"I8cZ4"}]},{"client_msg_id":"f5a82047-3ea3-4e79-9be2-a957b20f8aa2","type":"message","user":"UAZ33BKV2","text":"「ワイルドだろう?」という幻聴が聞こえそう","ts":"1597812389.151600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RIE"}]},{"client_msg_id":"a9736d48-f86b-4e0e-a091-26b2f9d1f932","type":"message","user":"U7B4ZD49X","text":"\u003chttps://github.com/gelguy/wilder.nvim/blob/7b1a5810c45e561738c56678ef036f6c64737047/autoload/wilder/cmdline.vim#L697\u003e\n\u003chttps://github.com/gelguy/wilder.nvim/blob/7b1a5810c45e561738c56678ef036f6c64737047/autoload/wilder/cmdline.vim#L392\u003e\n\n結構がんばってますね・・・","ts":"1597812214.150900","edited":{"user":"U7B4ZD49X","ts":"1597812224.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IQNNb"}]},{"client_msg_id":"1a6732e1-a4a6-41e2-8e83-32d12b622d9d","type":"message","user":"U03C6TEAZ","text":"これ lazy でコマンドを定義する様なプラグインマネージャも死ぬのでは。","ts":"1597812160.150600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pyFmt"}]},{"client_msg_id":"63969b6e-6b4d-4ed8-9247-68cd8cc290f1","type":"message","user":"U03C71D7H","text":"そもそも wilder は補完関数の取得はどうやっているんだろう","ts":"1597811633.150000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JtJzv"}]},{"client_msg_id":"082100e9-5bfb-4a02-92c8-8a8b7f51fd0c","type":"message","user":"U7B4ZD49X","text":"投げるのやめとこう・・・","ts":"1597811585.149500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JDcS9"}]},{"client_msg_id":"60d751b0-2b48-43b5-abfe-96bace473f05","type":"message","user":"U7B4ZD49X","text":"ですよねー。Issue書いててそんな気がしてきました。\nこれ補完効かなかったらその都度そのプラグインにIssue投げなくちゃいけなくてつらいんで・・・","ts":"1597811566.149000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Nupk"}]},{"client_msg_id":"364fce2a-3fa8-441e-bd58-104d15bc8d41","type":"message","user":"U03C71D7H","text":"wilder 側で対処するべきでしょうね","ts":"1597811487.148000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XA0d"}]},{"client_msg_id":"8a88c2c5-e3dc-41d7-9fed-7f06cefc3bf6","type":"message","user":"U03C71D7H","text":"そして謎プラグインのために補完関数を公開しろと言われたら私なら閉じる","ts":"1597811451.147600","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gYbI"}]},{"client_msg_id":"1777bcc8-40d8-4ad2-82da-cf628c5bbda1","type":"message","user":"U03C71D7H","text":"ローカルできますね","ts":"1597811355.147100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xuDa"}]},{"client_msg_id":"749a014b-9f90-4897-a069-d1d5664181dc","type":"message","user":"UAZ33BKV2","text":"でも帰ってるくのは(あたりまえだけど) `\u0026lt;SNR\u0026gt;123_`","ts":"1597811331.146800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/DO"}]},{"client_msg_id":"23de4112-2a3f-48ac-90cb-7a83d44a2bd5","type":"message","user":"U7H4TJEG0","text":"`expand(\"\u0026lt;SID\u0026gt;\")`","ts":"1597811256.146200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"202d8"}]},{"client_msg_id":"856f2d86-a41c-40ef-b283-5fbf4eb5578d","type":"message","user":"U7B4ZD49X","text":"SID無理やり引き抜くやつ前mattnさんのやつみてやってみたんですが、普通に関数とコマンド上書きするほうが楽でした。\nけど、coc側の修正に自分で追従するのがだるいんですよね。。。でcoc側に手をいれたくなった形です。","ts":"1597811117.145600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"soEHE"}]},{"client_msg_id":"1e603747-a77c-4786-9579-e4dcc277ccb1","type":"message","user":"U03C6TEAZ","text":"SID を無理やり取って呼び出す方法はありますけど、そういうハックが入れづらい感じですかね。","ts":"1597810965.143400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"v3v+"}]},{"client_msg_id":"609ac1bb-c1e8-4c38-8db4-b2750536fbc5","type":"message","user":"U7B4ZD49X","text":"ですね。ありがとうございます。そうします。","ts":"1597810863.142900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"E2g"}]},{"client_msg_id":"6d1c7310-f31d-4ae7-a5ef-2f3fcf6633ea","type":"message","user":"U9S4G0LJW","text":"まあissue立てるだけ立ててもいいのでは、対応する気無かったら閉じられるだけだろうし","ts":"1597810852.142700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dJ4"}]},{"client_msg_id":"6eedbff0-c5a1-4fbd-b64c-07e2cc79e27d","type":"message","user":"U03C6TEAZ","text":"あぁ、そういう意味でしたか。納得。","ts":"1597810771.141600","team":"T03C4RC8V","reactions":[{"name":"man-bowing","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WAz"}]},{"client_msg_id":"4f53595a-6e05-4533-8fa7-b5c940b70c94","type":"message","user":"U7B4ZD49X","text":"で、それを公開しろって言いたいけどいかがなものかって感じです","ts":"1597810712.141300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"P3n"}]},{"client_msg_id":"dd84caaf-56c3-45d7-a81b-923307b1d380","type":"message","user":"U7B4ZD49X","text":"ですね","ts":"1597810686.140800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bIc"}]},{"client_msg_id":"f182f8c5-c4be-499f-9736-aa3eeb974521","type":"message","user":"U9S4G0LJW","text":"で、外部から無理に拾おうとして死んでいると","ts":"1597810682.140600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WlX"}]},{"client_msg_id":"73d1dd04-c1bb-4539-b51d-a4c9178802c1","type":"message","user":"U7B4ZD49X","text":"確かに","ts":"1597810681.140500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aow"}]},{"client_msg_id":"563d1530-f517-4574-a3b2-d65a20ea3c3b","type":"message","user":"U9S4G0LJW","text":"コマンドの翻訳結果自体はスクリプトローカル含められるので別におかしくはないなーとは思う","ts":"1597810669.139800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dgYS"}]},{"client_msg_id":"3009d906-fe0b-4b99-b092-47f3aedbfe35","type":"message","user":"U7B4ZD49X","text":"あ、すみません。wilderでCocCommandを補完しようとするとs:CommandListがエラーになってしまうんです。言葉が足りてなかった","ts":"1597810626.138600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"l=Idb"}]},{"client_msg_id":"d27bcc2d-ac8d-4baa-8160-aa3e871150cf","type":"message","user":"U9S4G0LJW","text":"コマンドってスクリプトの文脈で定義されてるけどそれ？","ts":"1597810617.138000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Wai"}]},{"client_msg_id":"f5603118-e6a6-4c52-bf9f-51e1ac815597","type":"message","user":"U03C6TEAZ","text":"wilder のどこでそれやってるか見たいのですが、場所分かりますか？","ts":"1597810549.136500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QRjy"}]},{"client_msg_id":"64b03229-083c-48b6-af6b-1b1cd5e3702a","type":"message","user":"U03C6TEAZ","text":"コマンド補完は実行スコープが global だと思ってるので `s:` にはアクセスできないっと思ってました。","ts":"1597810488.136000","edited":{"user":"U03C6TEAZ","ts":"1597810516.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0XS7M"}]},{"client_msg_id":"655e8469-c140-49cf-87ae-0de364017e9c","type":"message","user":"U7B4ZD49X","text":"私もその認識なんですよね・・・どうやってアクセスできてるんだろう・・・","ts":"1597810444.135400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dd6z"}]},{"client_msg_id":"8624efbb-2835-4aa0-91b9-c88336df6cc8","type":"message","user":"U03C6TEAZ","text":"てかローカル行けたのか... という感想。","ts":"1597810408.134700","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wcu6"}]},{"client_msg_id":"9979d74f-9a88-4d7b-887b-f600cd0cfe05","type":"message","user":"U7B4ZD49X","text":"【質問】\n一般的にコマンドの補完の関数ってscript localな関数にしますか？？ ( ` -complete=custom,s:CommandList` )\n\nwilder.nvimってプラグイン使ってるんですが、cocのコマンドのいくつかがそうなってて普通はどうなのか知りたいです。ちなみにginaとかはグローバルになってるんで普通に補完できるんですが・・・\n普通じゃないならcoc側にissue立てたい\n\n\u003chttps://github.com/neoclide/coc.nvim/blob/164bd6b6113eecc52ae193966783a453bcc04158/plugin/coc.vim#L415\u003e","ts":"1597810289.134000","attachments":[{"fallback":"GitHub: neoclide/coc.nvim","id":1,"title":"neoclide/coc.nvim","title_link":"https://github.com/neoclide/coc.nvim/blob/164bd6b6113eecc52ae193966783a453bcc04158/plugin/coc.vim#L415","text":"Intellisense engine for Vim8 \u0026amp; Neovim, full language server protocol support as VSCode - neoclide/coc.nvim","thumb_url":"https://repository-images.githubusercontent.com/131770422/11ead600-81d9-11e9-8028-45f8617ba5bd","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":527,"thumb_height":250,"from_url":"https://github.com/neoclide/coc.nvim/blob/164bd6b6113eecc52ae193966783a453bcc04158/plugin/coc.vim#L415","original_url":"https://github.com/neoclide/coc.nvim/blob/164bd6b6113eecc52ae193966783a453bcc04158/plugin/coc.vim#L415"}],"edited":{"user":"U7B4ZD49X","ts":"1597810392.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"u/E2Q"}]},{"client_msg_id":"c3ef1b5f-861e-4692-8e52-1be8dbe777bf","type":"message","user":"UKHUVMBJR","text":"って、今手元で再現しようとしたけど起こらないな… :thinking_face:","ts":"1597794890.131400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"P5pO"}]},{"client_msg_id":"6f7c1b61-1c2b-4a65-9158-e0e268a2e35a","type":"message","user":"UKHUVMBJR","text":"(\u003c#CQ57P4XU4|tech-lsp\u003e かも) Goを書いてる途中にファイル名を変更したり大きな変更をすると、\nduplicated symbolのような前のファイルが残ってるかのようなエラーが出て、\nvim自体を開き直さないと治らないんですがこれって開きっぱなしでもできる対処法ってありますか？","ts":"1597794742.131000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2Qwu"}]}]
