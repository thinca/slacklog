[{"client_msg_id":"4cef4961-548e-4329-81da-71c8e0c6e56f","type":"message","user":"UEB0VGD7E","text":"ちなみにupdatetimeは300になっています。","ts":"1609253188.319300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KdnW"}]},{"client_msg_id":"fc3ab737-edcc-47ef-b505-0ce7187f93d6","type":"message","user":"UEB0VGD7E","text":"どなたかcoc+airlineでclangdかrust-analyzer使っている方いますか？\n何かしらファイルを開くとステータスラインにindex進捗が表示されると思うのですが、\n以前はカーソル操作などなしでも動的に進捗が増加していったと思うのですが、\n今確認するとどうもカーソル移動しないとステータスライン更新が走らないようで不思議に思っています。\n\n多分単に私の環境問題と踏んでいるのですが。。。","ts":"1609253076.318800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+lk"}]},{"client_msg_id":"8e69e3b9-a0d7-4030-81ad-6899f0bff682","type":"message","user":"U8996GYBF","text":"\u003c@U8R597E9H\u003e vital-vsをnodeで動かす最小構成作りたくて色々試してるんですが、挙動について質問させてもらってもいいでしょうか・・・？","ts":"1609242972.297900","thread_ts":"1609242972.297900","edited":{"user":"U8996GYBF","ts":"1609242982.000000"},"reply_count":72,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4=qRC"}]},{"client_msg_id":"7f16ccbf-5dff-4c20-b92a-5f6cf3e6972b","type":"message","user":"U72TB62UF","text":"issue立てたほうがいい気がしてきた","ts":"1609242038.297100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rRLR"}]},{"client_msg_id":"436047a0-0eea-4e91-9c40-e1a780c25b76","type":"message","user":"U72TB62UF","text":"マルチバイトの問題かと思い全部アルファベットにしてもみましたが、変わらず。","ts":"1609239468.296500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0W9Ke"}]},{"client_msg_id":"677212d3-bdc7-468d-b2cf-337fb6f679b3","type":"message","user":"UAZ33BKV2","text":"じゃあ、ジャンプもできるし、ファイル/ctagsとしてはたぶんなんも問題はないんだろうと思うけど...","ts":"1609239210.295900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"m7wJ3"}]},{"client_msg_id":"f037546c-d163-49f4-833b-bdb13cdbd253","type":"message","user":"U72TB62UF","text":"```!_TAG_FILE_FORMAT\t2\t/extended format; --format=1 will not append ;\" to lines/\n!_TAG_FILE_SORTED\t0\t/0=unsorted, 1=sorted, 2=foldcase/\n!_TAG_PROGRAM_AUTHOR\tUniversal Ctags Team\t//\n!_TAG_PROGRAM_NAME\tUniversal Ctags\t/Derived from Exuberant Ctags/\n!_TAG_PROGRAM_URL\t\u003chttps://ctags.io/\u003e\t/official site/\n!_TAG_PROGRAM_VERSION\t5.9.0\t/6222334/\n!_TAG_FILE_ENCODING\tUTF-8\t//\n!_TAG_OUTPUT_MODE\tu-ctags\t/u-ctags or e-ctags/\n!_TAG_OUTPUT_FILESEP\tslash\t/slash or backslash/\n!_TAG_PATTERN_LENGTH_LIMIT\t96\t/0 for no limit/```\nヘッダはこんな感じ。UTF-8はついてます","ts":"1609238676.295400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FfWH+"}]},{"client_msg_id":"04933acd-a787-47af-8a40-58edfa9c280d","type":"message","user":"U8996GYBF","text":"ctagsコマンドで情報の表示？的なのは通ります？","ts":"1609238364.294900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wE0"}]},{"client_msg_id":"f877a04d-7c65-4e91-a981-468cb27f2b98","type":"message","user":"UAZ33BKV2","text":"ctagsのヘッダにファイルUTF-8でちゃんと定義されてます?","ts":"1609238335.294300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"J=Zi"}]},{"client_msg_id":"5bb31f07-a2d1-40b7-8c24-6d8faea867eb","type":"message","user":"UAZ33BKV2","text":"タグジャンプしててctags側っていっても問題あるとも思えないけど...難しいな","ts":"1609238299.293900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wuYD"}]},{"client_msg_id":"53f03da8-8be7-4016-8beb-93652483a9ee","type":"message","user":"U72TB62UF","text":"Tagbarでも動作しないので、ctags側を疑っているところです。","ts":"1609237675.293000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4tLV3"}]},{"client_msg_id":"b23fcde5-1fa7-4393-b1ba-78318ca7e08c","type":"message","user":"U72TB62UF","text":"echo \u0026amp;ftでxyzと出るんですよねえ……\n理窟の上では問題なさそうなので、独自ファイルタイプはダメなのかと疑いたくなってます。","ts":"1609237594.292600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rrQC9"}]},{"client_msg_id":"ae30e77d-a820-4263-ad19-d673bf035878","type":"message","user":"UAZ33BKV2","text":"あとは \u0026amp;ft が xyz と認識されてないくらいしか思いつかないなあ","ts":"1609237133.291400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"X8KaO"}]},{"client_msg_id":"c1786e1d-b2cb-4873-91a7-015a7be02064","type":"message","user":"U72TB62UF","text":"`let g:vista_xyz_executive = 'ctags'` としています。","ts":"1609236808.291000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GVS"}]},{"client_msg_id":"9d04708f-a40d-453b-bf4b-d27945d1f9ee","type":"message","user":"UAZ33BKV2","text":"tabgarは `g:tagbar_type_xx` ?","ts":"1609236715.290700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tOY"}]},{"client_msg_id":"fca01896-95c5-4ffd-a6ed-6f4d9f173b11","type":"message","user":"UAZ33BKV2","text":"`g:vista_executive_for` で、ctagsにはしてるんですよね?\nあと、ジャンプもできてるそうなので、としたらctagsはむしろ設定は間違ってないんないかな","ts":"1609236567.290300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"n5fFm"}]},{"client_msg_id":"7090c2c8-0e87-488a-98c2-7235aa1f6de5","type":"message","user":"U72TB62UF","text":"```起承転結\t/Users/takets/project/xxxx.xyz\t/^起承転結 {{{1$/;\"\tf```\nのように抽出されています。タグジャンプもできています。","ts":"1609236079.289200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bEj"}]},{"client_msg_id":"89d92248-7075-45da-bf06-fd787516b4b6","type":"message","user":"UAZ33BKV2","text":"まず、tagsファイル内に実際に値が保持されてるかは見ました?","ts":"1609234660.288100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0aY"}]},{"type":"message","user":"U01HR37RDMZ","text":"\u003c@U01HR37RDMZ\u003e has joined the channel","ts":"1609233377.287700","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"c4005467-eed3-4096-b96c-fe389d5e2024","type":"message","user":"U72TB62UF","text":"`質問です`\n独自ファイルタイプxyzのタグファイルを、以下のコマンドでtagsを作って読み込んだのですが、\n\n```ctags -R --langdef=xyz --langmap=xyz:.xyz --sort=no --regex-xyz=\"/^(.*) {{{[0-9]/\\1/f,Function/\" -f /Users/takets/project/tags /Users/takets/project/doc.xyz\n\nset tags=/Users/takets/project/tags```\nvista.vimでtagsが読み込まれません。`Ctrl-[` でタグジャンプはできます。\nvista.vimだけかと思っていたのですが、tagbar.vimでも発生するため、ctagsの設定がどこかおかしい気がしています……","ts":"1609232095.287400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hKI5s"}]},{"client_msg_id":"2ae06ccb-b0c7-41ab-aca9-edae1e18c755","type":"message","user":"UAZ33BKV2","text":":goodpoem:","ts":"1609229614.286000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Eb6V"}]},{"client_msg_id":"5912dd30-54cd-4fec-ba12-6e9d6cbe3afe","type":"message","user":"U8996GYBF","text":"`[:fname:]` 使うとなんかdeviconsに反応してダメでした","ts":"1609229416.285400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ApfrK"}]},{"client_msg_id":"1bedb531-a543-4bb9-b3c1-3f87efe73a7b","type":"message","user":"U8996GYBF","text":"`echo matchstr(getline('.'), ([-./[:alnum:]_]\\+')` がやりたいやつだった","ts":"1609229392.285000","edited":{"user":"U8996GYBF","ts":"1609229749.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5wV81"}]},{"client_msg_id":"eaec9c72-e6d5-4d37-aa4d-52005092a722","type":"message","user":"U8996GYBF","text":"`\"[-./[:alnum:]_~]\\+\"` でいけました、便利","ts":"1609229370.284700","team":"T03C4RC8V","reactions":[{"name":"tada","count":2,"users":["U9S4G0LJW","UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YCrhg"}]},{"type":"message","user":"UPZHKAM7W","text":"```\n*[:fname:]*       [:fname:]             ファイル名の文字 (\"\\f\" と同じ)\n          角カッコで囲んだ文字クラス表現を、コレクションの角カッコ内に書きま\n          す。たとえば、\"[-./[:alnum:]_~]\\+\" は、UNIX のファイル名として妥当な\n          パターンです。このパターンは、'-'、'.'、'/'、英数字、'_'、'~'、のど\n          の文字の組合せでも、1 文字以上の文字列にマッチします。\n          これらのものは、8 ビット文字のみマッチします。ただし、新しい正規表現\n          エンジンを使用している場合は [:lower:] と [:upper:] のみマルチバイト\n          文字にも作用します。|two-engines| を参照。将来的にはこれらの項目は、\n          マルチバイト文字に作用するようになるでしょう。現状 \"alpha\" の全てを\n          得るには [[:lower:][:upper:]] を使う事ができます。\n \n          \"関数\" 列はどのライブラリ関数が使われるかを示しています。実装はシス\n          テムに依存します。特殊なものは以下の通りです:\n          (1) ASCII には islower()、それ以外には、Vim の組み込みルールが使用さ\n          れます。\n          (2) Vim の組み込みルールが使用されます。\n          (3) (1)と同じですが、代わりに isupper() が使用されます。\n```","ts":"1609229344.284400","bot_id":"BPM858KEE","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"c6bc1a0e-4cde-4667-a315-0c61ebb073c8","type":"message","user":"U8996GYBF","text":":h [:fname:]","ts":"1609229342.284300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cGP"}]},{"type":"message","user":"UPZHKAM7W","text":"```\n*[:alnum:]*       [:alnum:]   isalnum   ASCII の英数字\n```","ts":"1609229279.284100","bot_id":"BPM858KEE","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"da3421d7-3b17-4125-92d2-75b3e94c0a6e","type":"message","user":"U8996GYBF","text":":h [:alnum:]","ts":"1609229278.284000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"b6iRZ"}]},{"client_msg_id":"a8adf7c5-934b-4263-8603-9319127a2032","type":"message","user":"U8996GYBF","text":"単純に正規表現がむずい","ts":"1609228584.283800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"S2ZCU"}]},{"client_msg_id":"db295d86-97a6-40c0-a5ec-a94b9c0aec24","type":"message","user":"UAZ33BKV2","text":"がんば","ts":"1609228295.283600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FGN+"}]},{"client_msg_id":"6d2f4193-9f30-4ff6-9832-2dc271d01f35","type":"message","user":"U8996GYBF","text":"あれ、いけてないかもしれない\nもうちょい見てみます","ts":"1609228229.283400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Lqj"}]},{"type":"message","user":"U01J3CK2SQH","text":"\u003c@U01J3CK2SQH\u003e has joined the channel","ts":"1609227995.283000","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"030c431d-de14-44f1-9480-ab7a0f63eb05","type":"message","user":"UAZ33BKV2","text":"なんかの処理作るときに、あー、こうすればと思ってでもなんも活用事例がなかったw","ts":"1609227991.282800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7kimB"}]},{"client_msg_id":"d2985780-6a5c-454f-8f42-df17b8998471","type":"message","user":"UAZ33BKV2","text":"よかった","ts":"1609227964.282200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kdGHl"}]},{"client_msg_id":"d1a2e31a-bef9-487e-8b3f-e2e3adf8e2d0","type":"message","user":"U8996GYBF","text":"いけました、便利","ts":"1609227956.282000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kGuFk"}]},{"client_msg_id":"cdba9525-a1a6-494f-a390-4a1a32b70dad","type":"message","user":"U8996GYBF","text":"天才だ・・・","ts":"1609227952.281800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MVW"}]},{"client_msg_id":"763d4243-1d4c-4060-9782-906ff9b04dd0","type":"message","user":"UAZ33BKV2","text":"`PP matchlist(getline('.'), '[^[:blank:]]*\\(.\\+\\)' . \"\\\u0026lt;C-_\u0026gt;\" . '\\s\\(\\[.\\+\\]\\)\\?$')`  とか","ts":"1609227908.281600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/36u"}]},{"client_msg_id":"32c611d7-e09f-4f80-84f0-9e65c5751c7a","type":"message","user":"UAZ33BKV2","text":"キーコードを素直に使うなら、そこだけダブルクオートにして連結する手がある","ts":"1609227879.281100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Wni"}]},{"client_msg_id":"443ea9e7-732a-414f-897b-fe5872e9b677","type":"message","user":"U9S4G0LJW","text":"やるなら連結かprintfかなぁ","ts":"1609227868.280800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"icw"}]},{"client_msg_id":"5ad509aa-be72-4e9a-b33d-a791d9bbe4b1","type":"message","user":"U9S4G0LJW","text":"後バックスラッシュ付きのキーコードが解釈されるようになる","ts":"1609227855.280200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3l6"}]},{"client_msg_id":"a5c56cd3-2b24-410c-a9d5-94ea2da6e50f","type":"message","user":"U8996GYBF","text":"あー、ですよね\nむずい・・・","ts":"1609227847.280000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Z7HB"}]},{"client_msg_id":"5cfe89cc-35d5-4cf4-a89b-814df2c6c9be","type":"message","user":"U9S4G0LJW","text":"バックスラッシュの解釈が変わってしまいますね…","ts":"1609227828.279600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"58a/"}]},{"client_msg_id":"0fb269b8-1948-4aac-a695-d64d9da4cc00","type":"message","user":"U8996GYBF","text":"ありがとうございます\n\n`PP matchlist(getline('.'), '[^[:blank:]]*\\(.\\+\\)\\(\\[.\\+\\]\\)\\?$')` の結果が\n```['  lib/^_ [!!]', '  lib/^_ [!!]', '', '', '', '', '', '', '', '']```\nで\n\n`PP matchlist(getline('.'), '[^[:blank:]]*\\(.\\+\\)\\\u0026lt;C-_\u0026gt;\\s\\(\\[.\\+\\]\\)\\?$')` の結果が `[]` になっちゃうんでなんか惜しい気がします、これってダブルクォートで括ったら正規表現の意味変わるんでしたっけ","ts":"1609227781.278800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ei9"}]},{"client_msg_id":"dcfc1801-64f0-4407-abc7-bf85b2a2dc7c","type":"message","user":"U9S4G0LJW","text":"Vimの表現で入力するのであれば `\"\\\u0026lt;C-_\u0026gt;\"` でいけそう","ts":"1609227545.277300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Dfo"}]},{"client_msg_id":"a216927f-19d2-4420-b00d-f0d001d8b5fb","type":"message","user":"U9S4G0LJW","text":"`\u0026lt;C-v\u0026gt;\u0026lt;C-/\u0026gt;` を挿入モードで入力すると入るな","ts":"1609227484.276800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"N7V/"}]},{"client_msg_id":"d4a2798b-5145-454b-a6c7-4bc1808f0a01","type":"message","user":"U8996GYBF","text":"やりたいこととして\n\u003chttps://vim-jp.slack.com/archives/CLKR04BEF/p1608707205437700\u003e\nでgit statusを入れるときに最後の `[!!]` が取れてしまうので、それを弾いてファイル名のみを取ろうとしてます","ts":"1609227466.276300","attachments":[{"fallback":"[December 22nd, 2020 11:06 PM] hrsh7th: fern のドロワー表示を使っていますが、自分の vimrc に以下を追加して「ファイル名が見切れる場合」でもファイル名が見れる対応を入れてみました。\n```    augroup fern\n      autocmd!\n      autocmd CursorMoved \u0026lt;buffer\u0026gt; echo trim(matchstr(getline('.'), '[^[:blank:]]*$'))\n    augroup END```","id":1,"author_id":"U8R597E9H","author_name":"hrsh7th","author_subname":"hrsh7th","author_link":"https://vim-jp.slack.com/team/U8R597E9H","author_icon":"https://avatars.slack-edge.com/2020-02-25/956372982963_479264cbe2e1ea3d83ee_48.png","text":"fern のドロワー表示を使っていますが、自分の vimrc に以下を追加して「ファイル名が見切れる場合」でもファイル名が見れる対応を入れてみました。\n```    augroup fern\n      autocmd!\n      autocmd CursorMoved \u0026lt;buffer\u0026gt; echo trim(matchstr(getline('.'), '[^[:blank:]]*$'))\n    augroup END```","mrkdwn_in":["text"],"blocks":null,"footer":"Posted in #plugins","ts":1608707205.437700,"from_url":"https://vim-jp.slack.com/archives/CLKR04BEF/p1608707205437700","original_url":"https://vim-jp.slack.com/archives/CLKR04BEF/p1608707205437700"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"G5VE"}]},{"client_msg_id":"13cedbc4-1ae1-4274-8c86-6fd55d97f436","type":"message","user":"U9S4G0LJW","text":"一応nr2char(31)というのはわかった","ts":"1609227444.275700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6LIrl"}]},{"client_msg_id":"0e1a3149-77d8-47d3-ae87-718d93cf2061","type":"message","user":"U8996GYBF","text":"registerに入るのはfernでgit statusを表示したときの文字列をyankした場合です","ts":"1609227393.275200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kWQlh"}]},{"type":"message","user":"U8996GYBF","text":"vimで貼り付けてこの画像のようになる文字列ってどういうものを指しているでしょうか\n具体的にはこれを正規表現で弾きたいんですがいまいち何が入っているか分からず・・・","ts":"1609227341.274300","files":[{"id":"F01HA0C7FST","created":1609227310,"timestamp":1609227310,"name":"CleanShot 2020-12-29 at 16.34.53.png","title":"CleanShot 2020-12-29 at 16.34.53.png","mimetype":"image/png","image_exif_rotation":0,"filetype":"png","pretty_type":"PNG","user":"U8996GYBF","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":4751,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F01HA0C7FST/cleanshot_2020-12-29_at_16.34.53.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F01HA0C7FST/download/cleanshot_2020-12-29_at_16.34.53.png","original_h":20,"original_w":122,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F01HA0C7FST-aecae69fe7/cleanshot_2020-12-29_at_16.34.53_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F01HA0C7FST-aecae69fe7/cleanshot_2020-12-29_at_16.34.53_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F01HA0C7FST-aecae69fe7/cleanshot_2020-12-29_at_16.34.53_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F01HA0C7FST-aecae69fe7/cleanshot_2020-12-29_at_16.34.53_360.png","thumb_360_gif":"","thumb_360_w":122,"thumb_360_h":20,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U8996GYBF/F01HA0C7FST/cleanshot_2020-12-29_at_16.34.53.png","permalink_public":"https://slack-files.com/T03C4RC8V-F01HA0C7FST-386a661a9f","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"thumb_tiny":"AwAHADCj26UuV7im0UAKSOwoGMjPSkooAXI9KUkU2igD/9k=","username":""}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"W9O6r"}]},{"client_msg_id":"9f0707f4-8bf5-47e1-ae6b-45601b491bb7","type":"message","user":"U72TB62UF","text":"確認してみます。","ts":"1609225237.273500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vz0dX"}]},{"client_msg_id":"f098bd68-67b8-4a8c-a106-880f1f788d76","type":"message","user":"U8996GYBF","text":"あぁなるほど、ひとまずそれ直して使うのが一番楽そうですね\n内部の関数が露出しててquickfixに入れる前のオブジェクトみたいの取れるんだったらfzf-previewに機能実装も可能ですけど","ts":"1609225007.271500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2j0Mo"}]},{"client_msg_id":"319cd232-7564-414d-9507-b25e6ca8d62f","type":"message","user":"U72TB62UF","text":"これで全ての結果を取得して、流し込めないかと考えていました。","ts":"1609224968.270700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rBU"}]},{"client_msg_id":"8d2e2ebc-55fe-4909-a66c-6aad2bec62d8","type":"message","user":"U72TB62UF","text":"APIではないのですが、Voomgrepというgrepしてquickfixに吐き出すコマンドがあって、","ts":"1609224948.270000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9B0"}]},{"client_msg_id":"8ef72509-1eae-4cec-93c6-2cbbffd35601","type":"message","user":"U8996GYBF","text":"既存の使うとそんな感じですかねー\nそもそもVooMからオブジェクト的なのを取り出すAPI的なのってあります？","ts":"1609224807.269600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fzj"}]},{"client_msg_id":"0f50b6c4-9e34-475e-ab94-1886c8500e06","type":"message","user":"U72TB62UF","text":"\u003c@U8996GYBF\u003e foldingの絞込をしたいときは、ctagsに吐き出してFzfPreviewVistaCtagsになりますでしょうか。","ts":"1609224749.268900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4DA"}]},{"client_msg_id":"f58bd594-3482-4279-b59e-cbe768256800","type":"message","user":"U72TB62UF","text":"ですね。","ts":"1609224386.267900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LslX"}]},{"client_msg_id":"85039d80-da2f-4745-9721-57f6d9d98981","type":"message","user":"U8996GYBF","text":"なるほど、それだと何やるにしても困りそうなんでそっち直した方がよさそうですね","ts":"1609224373.267500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SMf"}]},{"client_msg_id":"63bd905e-de21-471a-9d8f-a5ff1b03fc4b","type":"message","user":"U72TB62UF","text":"VooMのほうがおかしいです。","ts":"1609224356.267100","edited":{"user":"U72TB62UF","ts":"1609224376.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+ir"}]},{"client_msg_id":"759f4ef2-dc13-4132-ace6-ec0363a586aa","type":"message","user":"U8996GYBF","text":"そっちは正しくてfzf-preview側の挙動が変？","ts":"1609224323.266800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2q0q+"}]},{"client_msg_id":"eaa9f8c9-0f72-4e1f-992e-528e92ce96ba","type":"message","user":"U8996GYBF","text":"ん、VooMのquickfixがおかしいんですかね？","ts":"1609224312.266500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bBz"}]},{"client_msg_id":"4d0c79e2-bb28-41c8-94cb-4b9973753b06","type":"message","user":"U72TB62UF","text":"試した見たところ、吐き出されたquickfixの情報が変な形式になっていて、単純にはできないぽいので、\nFzfPreviewQuickFixが動くところまで試してみます。ありがとうございますー","ts":"1609224280.266200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LzPT"}]},{"client_msg_id":"bb55116e-2559-424b-b301-10405ea70beb","type":"message","user":"U8996GYBF","text":"ひとまずquickfix使いたいだけなら、吐き出してからFzfPreviewQuickFix叩くだけで足りたりしませんか？（それ用の関数作るとか）","ts":"1609223896.264700","edited":{"user":"U8996GYBF","ts":"1609223908.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8yxf"}]},{"client_msg_id":"e74bf0b8-0377-4c1b-a739-a1d8671758c4","type":"message","user":"U8996GYBF","text":"この辺なんかやりたいんですけどね・・・","ts":"1609223852.264200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nKE"}]},{"client_msg_id":"c91e2ded-ccc9-4527-9a44-9d6d74147bc6","type":"message","user":"U8996GYBF","text":"fzf-preview、多分現状のインターフェイス的に外から何かを注入するの難しいんですよね\n本体にコミットして貰うのが今のところは現実的かもしれないです","ts":"1609223839.264000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YgOB"}]},{"client_msg_id":"d7f47e73-d8fb-4b65-bd23-b745f92f2c85","type":"message","user":"U72TB62UF","text":"\u003c@U8996GYBF\u003e\n`質問です`\n\nfzf-preview.vimからVooM（\u003chttps://log.yostos.org/2017/05/03/vim-voom/\u003e）というアウトライナープラグインを使いたいのですが、開発時はこのAPIを使うのが作法などありますでしょうか。\n\nやりたいこととしては、VooMに見出しの項目をquickfixに吐き出して、該当見出しにジャンプできる機能があり、\nこの機能で取得した情報をfzf-previewに流し込み、絞込＆見出しの周囲の文章プレビューができるようにしたいというのがあります。","ts":"1609223786.263200","attachments":[{"fallback":"Notes Inegales: Vimでアウトラインを操る VOom","id":1,"title":"Vimでアウトラインを操る VOom","title_link":"https://log.yostos.org/2017/05/03/vim-voom/","text":"ここしばらく Vimで愛用しているアウトラインプロセッサがvim-scripts/VOoMです。 VOom とは 現在以下のような言語のアウトライン表示に対応しています。 fmr, fmr1, fmr2 wiki vimwiki dokuwiki viki org rest markdown pandoc hashes txt2tags asciidoc latex html thevimout","blocks":null,"ts":1493777100,"service_name":"Notes Inegales","service_icon":"https://log.yostos.org/favicon.ico","from_url":"https://log.yostos.org/2017/05/03/vim-voom/","original_url":"https://log.yostos.org/2017/05/03/vim-voom/"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wY7"}]},{"type":"message","user":"U01H9T2HPPZ","text":"\u003c@U01H9T2HPPZ\u003e has joined the channel","ts":"1609221221.262800","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"f85178d0-8a71-4bd3-9830-d0d760b9d45a","type":"message","user":"U8R597E9H","text":"はいー。大丈夫です。","ts":"1609243016.298200","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"m39fw"}]},{"client_msg_id":"c1baab89-50a7-4f12-98b0-d5b182f9fde9","type":"message","user":"U8996GYBF","ts":"1609243062.298400","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","files":[{"id":"F01J3MA5ZGR","created":1609243060,"timestamp":1609243060,"name":"無題","title":"無題","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"プレーンテキスト","user":"U8996GYBF","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":469,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F01J3MA5ZGR/______","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F01J3MA5ZGR/download/______","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U8996GYBF/F01J3MA5ZGR/______","permalink_public":"https://slack-files.com/T03C4RC8V-F01J3MA5ZGR-2f735ae846","edit_link":"https://vim-jp.slack.com/files/U8996GYBF/F01J3MA5ZGR/______/edit","preview":"function! fzf_preview#rpc#start() abort\n  try\n    let server = s:server()\n    call server.request('start', {\n    \\   'id': 'foo',","preview_highlight":"\u003cdiv class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text/plain',window.getSelection().toString().replace(/\\u200b/g,''));event.preventDefault();event.stopPropagation();}\"\u003e\n\u003cdiv class=\"CodeMirror-code\"\u003e\n\u003cdiv\u003e\u003cpre\u003efunction! fzf_preview#rpc#start() abort\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e  try\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e    let server = s:server()\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e    call server.request('start', {\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e    \\   'id': 'foo',\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n","lines":22,"lines_more":17,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"3d3a0002-cb98-4e42-b1ac-135f84165ac3","type":"message","user":"U8996GYBF","text":"ありがとうございます、Vim script側はこんな感じです","ts":"1609243065.298800","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KbnyA"}]},{"client_msg_id":"47f3cdbc-a369-4250-ba21-1823722d5570","type":"message","user":"U8996GYBF","text":"Nodeがこれです\n`readInput` の結果を返そうかと思ったんですが、ひとまず最小限のJSONを返してみてます","ts":"1609243125.299000","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","files":[{"id":"F01HX7LN32Q","created":1609243123,"timestamp":1609243123,"name":"無題","title":"無題","mimetype":"text/plain","image_exif_rotation":0,"filetype":"typescript","pretty_type":"TypeScript","user":"U8996GYBF","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":643,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F01HX7LN32Q/______","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F01HX7LN32Q/download/______","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U8996GYBF/F01HX7LN32Q/______","permalink_public":"https://slack-files.com/T03C4RC8V-F01HX7LN32Q-aedec1c808","edit_link":"https://vim-jp.slack.com/files/U8996GYBF/F01HX7LN32Q/______/edit","preview":"import _readline from \"readline\"\n\nconst readline = _readline.createInterface({\n  input: process.stdin,\n  output: process.stdout,","preview_highlight":"\u003cdiv class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text/plain',window.getSelection().toString().replace(/\\u200b/g,''));event.preventDefault();event.stopPropagation();}\"\u003e\n\u003cdiv class=\"CodeMirror-code\"\u003e\n\u003cdiv\u003e\u003cpre\u003e\u003cspan class=\"cm-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"cm-def\"\u003e_readline\u003c/span\u003e \u003cspan class=\"cm-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"cm-string\"\u003e\u0026quot;readline\u0026quot;\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e\u0026#8203;\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e\u003cspan class=\"cm-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"cm-def\"\u003ereadline\u003c/span\u003e \u003cspan class=\"cm-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"cm-variable\"\u003e_readline\u003c/span\u003e.\u003cspan class=\"cm-property\"\u003ecreateInterface\u003c/span\u003e({\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e  \u003cspan class=\"cm-property\"\u003einput\u003c/span\u003e: \u003cspan class=\"cm-variable\"\u003eprocess\u003c/span\u003e.\u003cspan class=\"cm-property\"\u003estdin\u003c/span\u003e,\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e  \u003cspan class=\"cm-property\"\u003eoutput\u003c/span\u003e: \u003cspan class=\"cm-variable\"\u003eprocess\u003c/span\u003e.\u003cspan class=\"cm-property\"\u003estdout\u003c/span\u003e,\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n","lines":30,"lines_more":25,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"68S"}]},{"client_msg_id":"fcc58323-56c3-4ba0-b828-c5452410610f","type":"message","user":"U8996GYBF","text":"JSを直で実行すると\n```$ lib/rpc.js\nInput: a\n{\"a\":\"a\",\"b\":\"b\"}\n\n\nInput: b\n{\"a\":\"a\",\"b\":\"b\"}```\nみたいになってます","ts":"1609243169.299400","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sd/z"}]},{"client_msg_id":"959a224e-d570-4b52-a3ae-f8ae9f1c6a2f","type":"message","user":"U8996GYBF","text":"`:call fzf_preview#rpc#start()` したときに `then` や `finally` を付けてみても多分解決してないっぽいです\n根本的におかしいことをしてるんじゃないかと思うんですが、もし何か分かれば教えていただきたいです・・・","ts":"1609243236.299600","thread_ts":"1609242972.297900","edited":{"user":"U8996GYBF","ts":"1609243264.000000"},"parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yT+s"}]},{"client_msg_id":"5fbd8495-8120-4981-b194-8a49dbf77c6f","type":"message","user":"U8996GYBF","text":"期待としては最小限のJSONをconsole.logで標準出力に出したら、 `server.request` のfetchで取得したPromiseのthenが実行されることだったんですが","ts":"1609243335.299900","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LnQBr"}]},{"client_msg_id":"5cbad51f-9923-45b2-8db4-e5ed697d08d9","type":"message","user":"U8996GYBF","text":"TSなんで、もしwebpackとかの設定が必要であれば言ってください","ts":"1609243389.300100","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"o7865"}]},{"client_msg_id":"a3828f59-a359-4342-a5e5-87fd695f6952","type":"message","user":"U8R597E9H","text":"s:RPC のインスタンスが s:server ということですか？","ts":"1609243646.300500","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wy6"}]},{"client_msg_id":"7440819a-82e0-4b1d-9746-f4cc3a605273","type":"message","user":"U8R597E9H","text":"まず、Node 側のバインディングは試したことがないので、なんらかの jsonrpc のモジュールを探してもらう必要があります。\nで、Vim script 側については参考コードを出してみますね。","ts":"1609243791.300800","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XsL2Y"}]},{"client_msg_id":"82790b4e-cac2-4511-8ecf-c45367ececf6","type":"message","user":"U8R597E9H","text":"これが一番小さいかな。。。\n\u003chttps://github.com/hrsh7th/vim-candle/blob/master/autoload/candle/server.vim\u003e","ts":"1609243856.301000","thread_ts":"1609242972.297900","attachments":[{"fallback":"GitHub: hrsh7th/vim-candle","id":1,"title":"hrsh7th/vim-candle","title_link":"https://github.com/hrsh7th/vim-candle/blob/master/autoload/candle/server.vim","text":"Candidates listing engine for vim/nvim built on yaegi on golang. - hrsh7th/vim-candle","thumb_url":"https://avatars0.githubusercontent.com/u/629908?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/hrsh7th/vim-candle/blob/master/autoload/candle/server.vim","original_url":"https://github.com/hrsh7th/vim-candle/blob/master/autoload/candle/server.vim"}],"parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VnCf"}]},{"client_msg_id":"cfe3eeba-15dc-44ad-b3f5-c43a82ac7016","type":"message","user":"U8R597E9H","text":"この s:Server をインスタンス化したあとに、`s:server.start({ 'command': ['node', './script.js'] })` こんな感じのコードを叩いてもらって、","ts":"1609243937.301300","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vpT"}]},{"client_msg_id":"7243feda-7ae4-480d-a14b-085446cb60f0","type":"message","user":"U8R597E9H","text":"そのあと、request を送信すれば node 側に届くはずです。","ts":"1609243953.301500","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vfF"}]},{"client_msg_id":"00666038-4161-4969-98a5-75bf64d2a158","type":"message","user":"U8996GYBF","text":"遅れてすみません、RPCについてはCandleのコードをひとまず参考にさせて貰ってこんな風にしていました","ts":"1609244403.301700","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","files":[{"id":"F01HR9L7HR9","created":1609244402,"timestamp":1609244402,"name":"無題","title":"無題","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"プレーンテキスト","user":"U8996GYBF","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":708,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F01HR9L7HR9/______","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F01HR9L7HR9/download/______","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U8996GYBF/F01HR9L7HR9/______","permalink_public":"https://slack-files.com/T03C4RC8V-F01HR9L7HR9-1870229fd6","edit_link":"https://vim-jp.slack.com/files/U8996GYBF/F01HR9L7HR9/______/edit","preview":"let s:JSON = vital#fzf_preview#import('VS.RPC.JSON')\nlet s:Server = {}\n\nfunction! fzf_preview#rpc#server#import() abort\n  return s:Server","preview_highlight":"\u003cdiv class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text/plain',window.getSelection().toString().replace(/\\u200b/g,''));event.preventDefault();event.stopPropagation();}\"\u003e\n\u003cdiv class=\"CodeMirror-code\"\u003e\n\u003cdiv\u003e\u003cpre\u003elet s:JSON = vital#fzf_preview#import('VS.RPC.JSON')\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003elet s:Server = {}\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003efunction! fzf_preview#rpc#server#import() abort\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e  return s:Server\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n","lines":32,"lines_more":27,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8iY"}]},{"client_msg_id":"7e9f8ae6-e490-4bd8-99cf-a96770541056","type":"message","user":"U8996GYBF","text":"s:serverはこうしてます\n```function! s:server() abort\n  try\n    if !empty(s:state.server)\n      return s:state.server\n    endif\n    let s:state.server = s:Server.new({ 'command': s:command() })\n    call s:state.server.events.on('stderr', { err -\u0026gt; fzf_preview#rpc#log('[ERROR]', err) })\n    call s:state.server.events.on('request', { request -\u0026gt; s:on_request(request) })\n    call s:state.server.events.on('notify', { notification -\u0026gt; s:on_notification(notification) })\n    call s:state.server.start()\n    return s:state.server\n  catch /.*/\n    echomsg string({ 'exception': v:exception, 'throwpoint': v:throwpoint })\n  endtry\nendfunction```","ts":"1609244428.302100","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MoedL"}]},{"client_msg_id":"986addbb-3358-4487-8c5b-a2c433eed3ff","type":"message","user":"U8996GYBF","text":"commandは実行可能にしてフルパス渡ってるのを確認してるのでおそらく大丈夫なはず・・・","ts":"1609244527.302300","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3yc6"}]},{"client_msg_id":"b3cf4170-19c9-4f68-83f3-5793400606b2","type":"message","user":"U8R597E9H","text":"ああああ","ts":"1609244586.302500","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JZdJ"}]},{"client_msg_id":"969e10f9-f776-466b-9db9-625dcd14b94a","type":"message","user":"U8996GYBF","text":"記事を読んだ感じ、stdin, outで通信しているのでひとまず適当なJSONをミニマムで返せばいけるのかと思ったんですが何らかのフォーマットに則ってないといけない、であってるでしょうか？","ts":"1609244598.302700","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"27if1"}]},{"client_msg_id":"c0e8e7cf-07fa-4b02-8732-8e59e7f72191","type":"message","user":"U8R597E9H","text":"そういえば、あの記事に書いてあるのですが現状の RPC クラスは VSCode 形式の通信をしています…","ts":"1609244651.302900","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"l6w4"}]},{"client_msg_id":"69097ccc-f825-4f31-b118-7104a387df7c","type":"message","user":"U8996GYBF","text":"あ、なるほど\ngoの実装見たときにそれっぽいことやってるなって思ったんですが、それのスキーマに則る必要があります？","ts":"1609244682.303100","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5u7r"}]},{"client_msg_id":"2113bc0d-4bee-41c7-bd75-9f9be681be60","type":"message","user":"U8R597E9H","text":"\u003chttps://www.npmjs.com/package/vscode-jsonrpc|https://www.npmjs.com/package/vscode-jsonrpc\u003e","ts":"1609244697.303300","thread_ts":"1609242972.297900","attachments":[{"fallback":"npm: vscode-jsonrpc","id":1,"title":"vscode-jsonrpc","title_link":"https://www.npmjs.com/package/vscode-jsonrpc","text":"A json rpc implementation over streams","thumb_url":"https://static.npmjs.com/338e4905a2684ca96e08c7780fc68412.png","blocks":null,"service_name":"npm","service_icon":"https://static.npmjs.com/58a19602036db1daee0d7863c94673a4.png","thumb_width":1200,"thumb_height":630,"from_url":"https://www.npmjs.com/package/vscode-jsonrpc","original_url":"https://www.npmjs.com/package/vscode-jsonrpc"}],"parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0AV"}]},{"client_msg_id":"e7ecd682-9ac4-478c-9c12-bea0b41fe555","type":"message","user":"U8996GYBF","text":"```jsonrpc2.VSCodeObjectCodec{}```\nですよね","ts":"1609244700.303600","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DJZpw"}]},{"client_msg_id":"14e08e48-0d91-47b3-ad7f-56f8d3eec29b","type":"message","user":"U8996GYBF","text":"これのサーバサイドのやつそのままコピペでいけそうかな\nちょっとみてみます","ts":"1609244743.303800","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"w1syM"}]},{"client_msg_id":"cadcf07a-4bcc-4ecf-8425-a66b28530a1b","type":"message","user":"U8R597E9H","text":"そうですね。\nstdio/stdout なので、なんらかの区切りが必要なんですよね…","ts":"1609244848.304000","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ufA1"}]},{"client_msg_id":"e37baaf4-7d7c-4247-9d19-6b50a387525e","type":"message","user":"U8996GYBF","text":"ちゃんと見れてなかったんですが、改行とかでやってるのかと思い込んでました\nちょっとやってみます","ts":"1609244886.304200","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DSVwt"}]},{"client_msg_id":"60c85c11-4c21-4cab-927e-fc75a289b31e","type":"message","user":"U8996GYBF","text":"試してみてるんですが、これデバッグめっちゃむずそうですね\nどうしようかな・・・","ts":"1609245325.304400","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xzY"}]},{"client_msg_id":"d3cc177e-9804-4ce6-a3e9-1027e31b818c","type":"message","user":"U8996GYBF","text":"```import * as rpc from \"vscode-jsonrpc\"\n\nconst connection = rpc.createMessageConnection(\n  new rpc.StreamMessageReader(process.stdin),\n  new rpc.StreamMessageWriter(process.stdout)\n)\n\nconst notification = new rpc.NotificationType\u0026lt;string, void\u0026gt;(\"testNotification\")\nconnection.onNotification(notification, (param: string) =\u0026gt; {\n  console.log(param)\n})\n\nconnection.listen()```\nが実行できて、 `s:command()` が `['path/to/rpc.js']` になっているところまでは確認できました","ts":"1609245375.304600","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wws"}]},{"client_msg_id":"557e6f98-b9ff-45a5-8680-c65890d396ff","type":"message","user":"U8R597E9H","text":"おお。あってそうですね。\nコマンドが ['node', 'path to rpc.js'] じゃないとだめかもです","ts":"1609246278.305000","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ewjYh"}]},{"client_msg_id":"ffbda1c1-2dc5-4db6-8702-ecdf8244962c","type":"message","user":"U8996GYBF","text":"あ、それも考えたんですけど一旦webpackでchmodして実行可能にしてます\n引数配列で渡せるのあとで知ったんですよね・・・","ts":"1609246318.305200","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"s4jcs"}]},{"client_msg_id":"08b6307b-db82-47b9-bebe-64824bdcc785","type":"message","user":"U8996GYBF","text":"一応nodeにしてみようかな","ts":"1609246330.305400","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"F+AD"}]},{"client_msg_id":"6065b186-7d32-4f66-a990-514338745c08","type":"message","user":"U8996GYBF","text":"手動ではnodeで起動するのと、commandsの方も修正できました\nこれシェルから起動してstdinでそれっぽいの渡してデバッグしたいですね・・・","ts":"1609246417.305600","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=Eo"}]},{"client_msg_id":"a468665c-d01c-490c-8b05-87e92a58e4a5","type":"message","user":"U8R597E9H","text":"ちなみにおっしゃるとおりで、デバッグ向けの機能とかも全然充実してないんてすよね…","ts":"1609246427.305800","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fr1"}]},{"client_msg_id":"446cb28d-5dc9-4003-a6ae-920d7042b4ee","type":"message","user":"U8R597E9H","text":"なるほど。","ts":"1609246434.306000","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BCC"}]},{"client_msg_id":"82fe6104-eba0-4541-a23d-b97cc0832488","type":"message","user":"U8996GYBF","text":"今これみてます\n\u003chttps://github.com/Microsoft/vscode-languageserver-node/blob/master/server/src/node/test/connection.test.ts\u003e","ts":"1609246439.306200","thread_ts":"1609242972.297900","attachments":[{"fallback":"GitHub: microsoft/vscode-languageserver-node","id":1,"title":"microsoft/vscode-languageserver-node","title_link":"https://github.com/Microsoft/vscode-languageserver-node/blob/master/server/src/node/test/connection.test.ts","text":"Language server protocol implementation for VSCode. This allows implementing language services in JS/TS running on node.js - microsoft/vscode-languageserver-node","thumb_url":"https://avatars2.githubusercontent.com/u/6154722?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/Microsoft/vscode-languageserver-node/blob/master/server/src/node/test/connection.test.ts","original_url":"https://github.com/Microsoft/vscode-languageserver-node/blob/master/server/src/node/test/connection.test.ts"}],"parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/YM0"}]},{"client_msg_id":"440befba-5226-4ccd-bf8f-a207c1bf3f42","type":"message","user":"U8R597E9H","text":"まだ動かない系ですか？","ts":"1609246484.306500","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZEoG0"}]},{"client_msg_id":"cb9dfc75-28f8-4f27-9f66-412470a066c9","type":"message","user":"U8R597E9H","text":"あってるようにしか見えないのだが…","ts":"1609246516.306700","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rZMJs"}]},{"client_msg_id":"31268061-a6e9-4f37-bf24-3a3f4c0f8a9c","type":"message","user":"U8996GYBF","text":"ですね・・・\n```function! fzf_preview#rpc#start() abort\n  try\n    let server = s:server()\n    call server.request('start', {\n    \\   'id': 'foo',\n    \\ })\n\n    call server.request('fetch', {\n    \\   'id': 'foo',\n    \\   'query': 'bar',\n    \\   'index': 'foobar',\n    \\   'count': '1',\n    \\ }).then({ response -\u0026gt; s:on_response(response) })\n  catch /.*/\n    call fzf_preview#rpc#on_exception()\n  endtry\nendfunction```\nしてます","ts":"1609246516.306900","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MhfOZ"}]},{"client_msg_id":"93ec12c1-3834-403a-acca-b7d41d6ff8d2","type":"message","user":"U8996GYBF","text":"process見たんですが、関数叩いてvim終了するまではサーバ立っていそうです","ts":"1609246593.307100","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"upfbA"}]},{"client_msg_id":"59795281-92a5-4581-a1c3-92862648abc0","type":"message","user":"U8996GYBF","text":"```yuki_yano        17494   0.0  0.1  4944116  22688   ??  Ss    9:57PM   0:00.07 node /Users/yuki_yano/repos/github.com/yuki-ycino/fzf-preview.vim/lib/rpc.js```\n裏で動いてはいそう・・・","ts":"1609246655.307300","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2Nfc"}]},{"client_msg_id":"396547e8-2bcb-483b-86d0-83ad5c391b9d","type":"message","user":"U8R597E9H","text":"リクエストはどんな感じに投げてますか？","ts":"1609246706.307500","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1WDm"}]},{"client_msg_id":"d92276bd-4263-472b-818a-9ff2a13d1c90","type":"message","user":"U8R597E9H","text":"この fetch か…","ts":"1609246730.307700","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ku4X"}]},{"client_msg_id":"e38d2d83-89be-4b1d-aa9c-76a572434c17","type":"message","user":"U8996GYBF","text":"上の `server.request('fetch', ...)` のつもりでした\nあとはもしかしてstartの中でthenして起動待つとか必要でしょうか・・・","ts":"1609246759.307900","thread_ts":"1609242972.297900","edited":{"user":"U8996GYBF","ts":"1609246795.000000"},"parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Qaq"}]},{"client_msg_id":"8c7e6e31-9193-4c6f-a617-c24ea0fa314d","type":"message","user":"U8R597E9H","text":"s:Promise.on_unhandled_rejection({ ...  -\u0026gt; some_log_function(...) })","ts":"1609246806.308200","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"F8Vr"}]},{"client_msg_id":"3f44f540-b3de-4c0e-b411-4b9cb1078b5d","type":"message","user":"U8R597E9H","text":"みたいなことしないとエラーが食べられてしまっているかもしれません","ts":"1609246821.308400","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZwT"}]},{"client_msg_id":"2f11596b-420c-48b8-9006-c78e7ac1a086","type":"message","user":"U8996GYBF","text":"あー、コピペさせて貰って `call s:Promise.on_unhandled_rejection({ err -\u0026gt; fzf_preview#rpc#log('[ERROR]', err) })` してるけどdebug有効にしてませんでした\nやります","ts":"1609246872.308600","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"c=2l"}]},{"client_msg_id":"b7ca82e4-1d74-4bd0-9a52-7e8fbdc4adff","type":"message","user":"U8996GYBF","text":"出てました\n```$ cat /tmp/fzf_preview.log\n22:01:45        [ERROR] {'code': -32601, 'message': 'Unhandled method start'}\n22:01:45        [ERROR] {'code': -32601, 'message': 'Unhandled method fetch'}```\n情報少なめですがちょっと追います","ts":"1609246945.308800","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Dxdq"}]},{"client_msg_id":"99bda79c-9291-477c-9c37-00f5893a595b","type":"message","user":"U8R597E9H","text":"あら、でもログも拾ってるのにだめなのか…。だとしたら、普通に僕のモジュールがだめな可能性があるんだろうか…？","ts":"1609246945.309000","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sHrw+"}]},{"client_msg_id":"bc821d85-1844-4b23-8644-9661aa595a81","type":"message","user":"U8R597E9H","text":"うーん。でもこれで html-language-server と通信できているからな…","ts":"1609246980.309200","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"282d4"}]},{"client_msg_id":"6d293905-7b6b-4cbd-b2ff-ad24de1ebbb6","type":"message","user":"U8996GYBF","text":"上のエラーってstderrだからサーバ側が返してるエラーって認識であってるでしょうか","ts":"1609247054.309400","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oEb"}]},{"client_msg_id":"d53364b6-4ff5-4b0c-8260-8e6329399433","type":"message","user":"U8996GYBF","text":"いや、stderrとは限らない・・・？","ts":"1609247079.309600","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"S2rAg"}]},{"client_msg_id":"31ffaf9d-5f71-4e13-81da-09232c02acd2","type":"message","user":"U8R597E9H","text":"ちゃんと動いてそうでよかった。\n\n- fetch というサーバ側に存在しないメソッドを叩いている\n- サーバはエラーを返却する\n- vim 側の Promise が reject される\n- それをキャッチしていない","ts":"1609247315.309800","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"39v"}]},{"client_msg_id":"c346aee6-1e9b-4913-bc45-c297c91f0df4","type":"message","user":"U8996GYBF","text":"あ、catchしたらエラー出ますね\nすみません・・・","ts":"1609247432.310000","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Wbd6i"}]},{"client_msg_id":"db01bb93-abcf-4fe8-8c20-e0f73fc599fe","type":"message","user":"U8996GYBF","text":"つまりサーバでメソッドを実装すればOKって感じですね","ts":"1609247489.310200","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+AK"}]},{"client_msg_id":"a64c34f0-2211-474e-a69d-462dabd9f9a3","type":"message","user":"U8R597E9H","text":"そうなりますね！","ts":"1609247754.310400","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OZ04Z"}]},{"client_msg_id":"bfcf0f97-3f98-4708-ae26-9ea9e79a1ed7","type":"message","user":"U8996GYBF","text":"型エラーが出てるんですが\n```const request = new rpc.RequestType\u0026lt;string, string, void\u0026gt;(\"test\")\nconnection.onRequest(request, (param) =\u0026gt; {\n  console.log(param)\n})\n\nconnection.listen()```\nで\n```    call server.request('test', {\n    \\   'id': 'foo',\n    \\   'query': 'bar',\n    \\   'index': 'foobar',\n    \\   'count': '1',\n    \\ }).then({ response -\u0026gt; s:on_response(response) })```\nが叩けるようになりました。\nresponseが `v:null` みたいなのでもうちょっとやってみます・・・","ts":"1609248616.310600","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"czo"}]},{"client_msg_id":"afe934bc-8829-403b-a67a-97fd11e5d0e0","type":"message","user":"U8996GYBF","text":"多分console.logじゃなくて、vim側でも同じフォーマットで受け取らないとなんですよね\n調べてみます","ts":"1609248642.310800","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"prpOt"}]},{"client_msg_id":"d0a8f62f-e0fb-4760-8861-fa0bd8006849","type":"message","user":"U8R597E9H","text":"多分、onRequest で返した値がかえるんじゃないですかね？","ts":"1609248673.311000","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4x+"}]},{"client_msg_id":"c4ea4a4f-ccd2-4b6e-aad6-8b4886f7705d","type":"message","user":"U8996GYBF","text":"returnした値ですかね？\nちょっとやってみよう","ts":"1609248690.311200","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wHu"}]},{"client_msg_id":"9027fbf6-0f53-4b94-996e-d3489cb871ca","type":"message","user":"U8996GYBF","text":"返ってきた！","ts":"1609248708.311400","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3pWz"}]},{"client_msg_id":"9deee144-cb5b-4752-9931-a39c6cbce63c","type":"message","user":"U8R597E9H","text":"そこから先はライブラリの作法なのでわからないです…申し訳ない","ts":"1609248713.311600","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vbl"}]},{"client_msg_id":"bd30eb8d-0e39-4e7b-9f22-845b23a833c5","type":"message","user":"U8996GYBF","text":"ありがとうございます！","ts":"1609248714.311800","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"x=OZ"}]},{"client_msg_id":"fa83aa93-4635-4ce4-ae02-e9270b73237d","type":"message","user":"U8R597E9H","text":"おお。","ts":"1609248717.312000","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PWU"}]},{"client_msg_id":"5bfae759-0612-49ac-9cc0-8dc150b0f911","type":"message","user":"U8996GYBF","text":"paramとresultに型付けつつ頑張れるみたいなんで、この辺ちょっと触ってみます\nめっちゃ助かりました、ありがとうございます・・・","ts":"1609248798.312200","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hVd"}]},{"client_msg_id":"55be873e-2e84-438b-b47d-fd9162c5e594","type":"message","user":"U8996GYBF","text":"TSでのvs-vital実装成功例になれそうかも","ts":"1609248823.312400","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yoBg"}]},{"client_msg_id":"22f596fd-b9e0-4e6a-a726-1b5bc6106aeb","type":"message","user":"U8R597E9H","text":"\u003chttps://github.com/hrsh7th/deno-json-rpc|https://github.com/hrsh7th/deno-json-rpc\u003e","ts":"1609248905.312600","thread_ts":"1609242972.297900","attachments":[{"fallback":"GitHub: hrsh7th/deno-json-rpc","id":1,"title":"hrsh7th/deno-json-rpc","title_link":"https://github.com/hrsh7th/deno-json-rpc","text":"Strongly typed json-rpc module for deno. Contribute to hrsh7th/deno-json-rpc development by creating an account on GitHub.","thumb_url":"https://avatars0.githubusercontent.com/u/629908?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/hrsh7th/deno-json-rpc","original_url":"https://github.com/hrsh7th/deno-json-rpc"}],"parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"V/+YE"}]},{"client_msg_id":"0a927493-4f05-4c0f-ac5e-b86d9c2530c4","type":"message","user":"U8R597E9H","text":"こういうことをしてみたりしています。","ts":"1609248912.312900","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3TK6"}]},{"client_msg_id":"dc8f8344-eb7c-4231-9f80-00c8048575b5","type":"message","user":"U8996GYBF","text":"denoとvs-vitalの通信っぽい？\nなるほど・・・","ts":"1609248981.313100","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FS5"}]},{"client_msg_id":"8095dfe5-2db9-4b06-b382-922a343a8bad","type":"message","user":"U8996GYBF","text":"ひとまず動作した最小構成はっておきますー","ts":"1609249074.313300","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","files":[{"id":"F01HN3W8ERK","created":1609249072,"timestamp":1609249072,"name":"無題","title":"無題","mimetype":"text/plain","image_exif_rotation":0,"filetype":"typescript","pretty_type":"TypeScript","user":"U8996GYBF","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":471,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F01HN3W8ERK/______","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F01HN3W8ERK/download/______","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U8996GYBF/F01HN3W8ERK/______","permalink_public":"https://slack-files.com/T03C4RC8V-F01HN3W8ERK-4d8dae5164","edit_link":"https://vim-jp.slack.com/files/U8996GYBF/F01HN3W8ERK/______/edit","preview":"import * as rpc from \"vscode-jsonrpc\"\n\n/* eslint-disable @typescript-eslint/no-unsafe-call */\nconst connection = rpc.createMessageConnection(\n  // @ts-ignore","preview_highlight":"\u003cdiv class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text/plain',window.getSelection().toString().replace(/\\u200b/g,''));event.preventDefault();event.stopPropagation();}\"\u003e\n\u003cdiv class=\"CodeMirror-code\"\u003e\n\u003cdiv\u003e\u003cpre\u003e\u003cspan class=\"cm-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"cm-keyword\"\u003e*\u003c/span\u003e \u003cspan class=\"cm-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"cm-def\"\u003erpc\u003c/span\u003e \u003cspan class=\"cm-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"cm-string\"\u003e\u0026quot;vscode-jsonrpc\u0026quot;\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e\u0026#8203;\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e\u003cspan class=\"cm-comment\"\u003e/* eslint-disable @typescript-eslint/no-unsafe-call */\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e\u003cspan class=\"cm-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"cm-def\"\u003econnection\u003c/span\u003e \u003cspan class=\"cm-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"cm-variable\"\u003erpc\u003c/span\u003e.\u003cspan class=\"cm-property\"\u003ecreateMessageConnection\u003c/span\u003e(\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e  \u003cspan class=\"cm-comment\"\u003e// @ts-ignore\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n","lines":18,"lines_more":13,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0LV85"}]},{"client_msg_id":"6fe2e0a6-b3b8-43f5-ae7c-61733ad861f2","type":"message","user":"U8996GYBF","text":"TS側から `connection.sendRequest(\"testvim\", \"foobar\")` で逆方向もいけました！","ts":"1609249330.313700","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6e71m"}]},{"client_msg_id":"9fe89173-3c24-4c74-a2b3-80a5ded66dcd","type":"message","user":"U8R597E9H","text":"エラーログも一応出てそうだしそこまで使いにくすぎて死ねるって感じでもないですかね？フィードバックあれば頂きたいです。","ts":"1609249791.313900","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JIvhs"}]},{"client_msg_id":"7b95e2f2-ea47-4eb2-a3cb-2dc268590534","type":"message","user":"U8996GYBF","text":"今のところここまで動けば作れる気がしてます\n多分vim側でメソッド的なの入れてfzf-previewと類似の挙動実装していくと思うんで、途中で何かあればお伝えしようと思います","ts":"1609249861.314100","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Yjcxd"}]},{"client_msg_id":"b3a229a0-31e6-4852-af18-38ab91c33e02","type":"message","user":"U8R597E9H","text":"一応、VSCode の on_request みたいな方式に変えようとは思ってます。(vital は埋込み型なので破壊的変更も安心)","ts":"1609249923.314300","thread_ts":"1609242972.297900","parent_user_id":"U8996GYBF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yZx"}]}]
