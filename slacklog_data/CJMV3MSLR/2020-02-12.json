[{"client_msg_id":"b47449a5-c98f-4382-bca1-c6f9279fce09","type":"message","user":"U78UYGX8W","text":"`質問` です。バッファごとに環境変数を違う値にすることはできたりするんでしょうか？ *.rb ファイルなら rubyの実行パスを $PATHに登録して、他のファイルなら登録しない。といったことがしたいのですが。。。","ts":"1581478777.360000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"W6y"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2fdb2382-c5c6-4d0f-b9e6-f5398fdbccbf","type":"message","user":"U9S4G0LJW","text":"ぱっと思いつくのはBufEnter使って書き換えるくらいか","ts":"1581478841.361100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fjjr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2c595599-29f2-4fc8-8281-27546b6edc26","type":"message","user":"U9S4G0LJW","text":"ベースの$PATH用意しといてファイルタイプごとに足すような","ts":"1581478913.361900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7A+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"73DE04ED-7CE1-451A-BD3D-E12264A454B3","type":"message","user":"U78A6ESHM","text":"after/ftplugin とかに書くとか。","ts":"1581480065.362600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mJyz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5f6924ce-1bfa-40ba-9639-f822755cc342","type":"message","user":"UAZ33BKV2","text":"あと、バッファにrubyの実行パスを...と設定したとして、それをどう使うか、によりそう\nコマンド実行 `!ruby` とか?\nだとすると、`b:ruby_path` を使う&lt;buffer&gt;なコマンドでも定義しちゃうほうがいい?","ts":"1581480210.366700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ob9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4a4bf7a0-cb58-4349-a56f-17de2fe8817b","type":"message","user":"U78A6ESHM","text":"とか思ったけど、ruby 開いて、他のファイル開いたら、PATH に残ったままだな。BufEnter が良さそう。","ts":"1581480214.367000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GJjB1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"53e64932-4d54-441f-8b5f-68abdf617b94","type":"message","user":"U03C71D7H","text":"グローバルな値なのでどうしてもやるなら kuu さんの言うように都度書き換えになりそうですね\nruby の実行パスを登録してそれによってどうしたいか次第では別の解決策もありそうな気もします","ts":"1581480216.367100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/CeO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"04f5608e-0419-4a76-99ad-adb0453cbbe1","type":"message","user":"UGP5AJKU4","text":"求めてるものと違うかもしれないですが\n自分の場合はターミナルごとにPATHを変えるとかはやります。\n(厳密にはtmuxのペイン)\n同一のコードベースでPATHを細かく変えたいケースにまだ出会ってないので…","ts":"1581480271.367900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/An"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"86ecbeee-6bf1-4374-acaa-8b45c253ad16","type":"message","user":"U03C6TEAZ","text":"ruby の実行をどうやってるかにもよりますね。例えば自作プラグインなら実行前に `b:ruby_path` からとるとか。","ts":"1581480296.368500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UUuvY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6abc7d86-84c2-4bff-a4ec-8fc7433f3088","type":"message","user":"U78UYGX8W","text":"kuuさんの回答をもとに、BufEnterを使って$PATHを書き換えるようにしてみたのですが、他のバッファに移動するときに$PATHが書き換えた状態で残ってしまってしまいました。BufLeaveで削除するようにもしてみたのですが、次は :terminal で $PATHが削除されてしまいました。\n皆さんの回答を見ていて、よくよく考えると、やりたいことはファイルタイプごとに:terminalを起動したときに$PATHを書き換えるようなことができれば良いことに気づきましたので、そういう方面で設定を変えてみます。ありがとうございました。:grinning:\nちなみに、BufEnter, BufLeave の設定は以下のようにしていました。\n```augroup fileTypeIndent\n\tau!\n\tlet s:basePath = $PATH\n\tau BufEnter *.rb call AddRubyExecPath()\n\tfunction AddRubyExecPath()\n\t\tlet $PATH = s:basePath . \";&lt;Rubyのパス&gt;\"\n\tendfunction\n\tau BufLeave *.rb call RemoveRubyExecPath()\n\tfunction RemoveRubyExecPath()\n\t\tlet $PATH = s:basePath\n\tendfunction\naugroup END```\n","ts":"1581481455.370000","team":"T03C4RC8V","reactions":[{"name":"tada","count":4,"users":["U9S4G0LJW","U03C6TEAZ","U776661HA","U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ubUDU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"db34a620-3604-43b5-9d0c-eaa3b05d894b","type":"message","user":"U9S4G0LJW","text":"そういえば、今更かもしれませんが、terminalがどうかは `'buftype'` 見れば判定できるので、if仕込むのも手かもしれないですね","ts":"1581484449.372700","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["U78UYGX8W"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JSAw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f49b3126-6f61-41e1-9826-5d548fb1ad77","type":"message","user":"URH8C3NCW","text":"autocmd にする理由は薄いですね。\nあと、pumvisible のときにも lexima を動かすほうが便利でしょうからそっちの `&lt;CR&gt;` もマッピングしたほうが良さそうですね。\n\n```call lexima#init()\ninoremap &lt;expr&gt; &lt;CR&gt; pumvisible() ? \"\\&lt;c-y&gt;\" .  lexima#expand('&lt;cr&gt;', 'i') : lexima#expand('&lt;cr&gt;', 'i')```\n","ts":"1581493103.372900","thread_ts":"1581239417.259100","parent_user_id":"URH8C3NCW","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"j1w4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
