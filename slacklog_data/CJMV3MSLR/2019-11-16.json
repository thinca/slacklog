[{"type":"message","text":"<https://teratail.com/questions/223524?rss=all|solargraphでgemに定義ジャンプする設定>\nvimでrubyの開発環境を整えているのですが、solargraphの定義ジャンプで、gemのmoduleやclassにジャンプすることは可能でしょうか。  \n.solargraph.ymlを色々触ってみたのですが、まだうまくいっていません。\n詳しい方いましたら教えていただけると嬉しいです。\n\n<https://teratail.com/questions/223524?rss=all|続きを見る>","ts":"1573880762.053300","attachments":[{"fallback":"teratail[テラテイル]: solargraphでgemに定義ジャンプする設定｜teratail","id":1,"title":"solargraphでgemに定義ジャンプする設定｜teratail","title_link":"https://teratail.com/questions/223524?rss=all","text":"vimでrubyの開発環境を整えているのですが、solargraphの定義ジャンプで、gemのmoduleやclassにジャンプすることは可能でしょうか。 .solargraph.ymlを色々触ってみたのですが、まだうまくいっていません。詳しい方いましたら教えていただけると嬉しいです。","thumb_url":"https://teratail.com/img/imgFacebookShare.png","blocks":null,"service_name":"teratail[テラテイル]","service_icon":"https://teratail.com/img/ios/apple-touch-icon.png","thumb_width":1200,"thumb_height":630,"from_url":"https://teratail.com/questions/223524?rss=all","original_url":"https://teratail.com/questions/223524?rss=all"}],"subtype":"bot_message","bot_id":"BPV6T0C1J","username":"[Vim]の新着質問一覧｜teratail（テラテイル）","icons":{"image_48":"https://s3-us-west-2.amazonaws.com/slack-files2/bot_icons/2019-10-29/814941997319_48.png"},"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"cb649794-547c-44b4-86ef-943072f9c382","type":"message","user":"U8R597E9H","text":"`質問` です。\nVim script 実行中に「即座に」insert-mode -&gt; normal-mode と切り替える方法はありますでしょうか？\nもしくは、インサートモードのまま特定のテキストを select-mode で選択する方法はありますでしょうか。\nやりたいこととしては、スニペット展開時に\n```\n  call cursor(a:vim_range['end'])\n  normal! hgh\n  call cursor(a:vim_range['start'])\n```\nこんなコードで、展開されたスニペットの一部を select-mode で選択しようとしているのですが、まず normal モードに戻らないとうまくいかなそうで、\nstopinsert を試してみたのですが、これは同期的にモードが切り替わるわけではなさそうでした。\n現状は\n```\n let l:fn = {}\n function! l:fn.next_tick(timer_id, vim_range) abort\n   if mode()[0] !=# 'n'\n     return\n   endif\n\n   call cursor(a:vim_range['end'])\n   normal! hgh\n   call cursor(a:vim_range['start'])\n   startinsert\n   call timer_start(0, { -&gt; timer_stop(a:timer_id) }, { 'repeat': 1 })\n endfunction\n stopinsert\n call timer_start(0, { timer_id -&gt; l:fn.next_tick(timer_id, a:vim_range) }, { 'repeat': -1 })\n\n```\nこんなことをしています。（タイマー 0ms でひたすらモードがノーマルになるのを待ち続けるコードです。）\nこれだと動き自体は期待通りなのですが、チラツキが発生してしまうのです。。。","ts":"1573891562.057300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"EE4B9E5B-15C7-40FB-9415-FB556A557574","type":"message","user":"UDDCM376D","text":"feedkeys(名前うろ覚え\nって関数を使ってescを指定すればノーマルモードに戻れそう","ts":"1573891794.058600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"104D41D9-6BC4-4C25-8595-16190FCCEC43","type":"message","user":"UDDCM376D","text":":h feed keys","ts":"1573891923.059200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UPZHKAM7W","text":"E149: 残念ですが feed keys にはヘルプがありません","ts":"1573891923.059300","bot_id":"BPM858KEE","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"16f3a5ab-1ba0-4348-b147-8350b1220472","type":"message","user":"U8R597E9H","text":"feedkeys も Vim script とは別のタイミングなんですよね。","ts":"1573891931.059600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4FA59C2A-AAAE-4DC1-9976-8A45B9B3113D","type":"message","user":"UDDCM376D","text":"なんと","ts":"1573891940.059800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"80822EB1-8C67-4C0A-8AFD-5AA6F076D812","type":"message","user":"UDDCM376D","text":"同期的かと思ってました","ts":"1573891955.060300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0BD4BE43-BAFD-4225-898F-753759BF6D12","type":"message","user":"UDDCM376D","text":":h feedkeys","ts":"1573891982.060900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UPZHKAM7W","text":"```\nfeedkeys({string} [, {mode}])                           *feedkeys()*\n                {string}中の各文字を、あたかもマッピングまたはユーザーによって\n                タイプされたかのように、処理キューに入れる。\n                \n                デフォルトではこれらの文字は先行入力バッファの末尾に付け足され\n                る。そのためマッピングを展開している途中であれば、これらの文字\n                はマッピングを展開した後に来ることになる。他の文字の前に挿入す\n                るには、'i' フラグを使用する。それらはマッピングからの任意の文\n                字の前の挿入の次に実行される。\n \n                この関数は、{string}中の文字が処理されるまでは待たない。\n \n                特殊なキーを{string}に含めるにはダブルクォートと \"\\...\" 記法を\n                使う(|expr-quote|を参照)。例えば、feedkeys(\"\\&lt;CR&gt;\")は&lt;Enter&gt;\n                キーの押下をシミュレートする。しかしfeedkeys('\\&lt;CR&gt;')とすると、\n                この文字の通り5文字を挿入する。\n \n                {mode}は以下の文字フラグを含む文字列:\n                'm'     キーをマップ展開する。これが既定である。{mode}が省略さ\n                        れたときは、挿入されたキーはマップ展開の対象になる。\n                'n'     キーをマップ展開しない。\n                't'     キーをタイプされたかのように扱う。そうでない場合は\n                        マッピングから展開されたかのように扱われる。これは\n                        undoや折り畳みの展開などで違いが現れる。\n                'L'     低レベル入力。UnixまたはGUIを使用している場合にのみ機\n                        能する。キーは端末から来ているかのように使われる。他の\n```","ts":"1573891982.061000","bot_id":"BPM858KEE","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"3722E2AC-3BE1-4634-9EFB-B0CCBA82EECB","type":"message","user":"UDDCM376D","text":"処理キューに入る","ts":"1573892003.061600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8593B598-D173-47A3-8E97-B5ACD7BBBFC3","type":"message","user":"UDDCM376D","text":"なるほど","ts":"1573892005.061800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"AFB7EDF4-6393-4A4B-8B19-6F29D07F49C1","type":"message","user":"UDDCM376D","text":"そうだったのか","ts":"1573892008.062100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"84438a35-a8ee-464e-82b7-f77f074a5b8c","type":"message","user":"U8R597E9H","text":"_feedkeys は個人的に何故か無意識的に避けていて詳しくないので、もしかしたらいけるのかもしれないです。_","ts":"1573892023.062400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b62eb4a4-e95c-4c98-9b60-a50f9c410cfa","type":"message","user":"UAZ33BKV2","text":":h i_esc","ts":"1573892892.062600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UPZHKAM7W","text":"```\n                                                        *i_esc*\n                移動先のモード                                       \n                Normal  Visual  Select  Insert    Replace   Cmd-line  Ex  \n現在のモード                                                              \nノーマル                v V ^V    *4     *1        R gR     : / ? !   Q\nビジュアル       *2               ^G     c C        --        :       --\n選択             *5     ^O ^G            *6         --        --      --\n挿入             &lt;Esc&gt;    --      --              &lt;Insert&gt;    --      --\n置換             &lt;Esc&gt;    --      --    &lt;Insert&gt;              --      --\nコマンドライン   *3       --      --     :start     --                --\nEx               :vi      --      --     --         --        --\n \n-- 不可\n \n*1 ノーマルモードから挿入モードへは、コマンド \"i\"、\"I\"、\"a\"、\"A\"、\"o\"、\"O\"、\n   \"c\"、\"C\"、\"s\"、\"S\" で入ります。\n*2 ビジュアルモードからノーマルモードへは非移動コマンドで入れますが、そのコマ\n   ンドは実行されてしまいます。&lt;Esc&gt;、\"v\"、\"V\"、\"CTRL-V\" (|v_v|を参照) を入力\n   すれば、副作用なしにビジュアルモードから出られます。\n*3 コマンドラインモードからノーマルモードへ移行するには次のようにします:\n   - &lt;CR&gt; か &lt;NL&gt; を入力する。入力途中のコマンドは実行されます。\n   - 行の全てを削除し (例、CTRL-Uを使う)、そして、&lt;BS&gt; を入力する。\n   - CTRL-C または &lt;Esc&gt; を入力する、入力途中のコマンドを実行せずに終了できま\n     す。\n   最後の方法ですが、&lt;Esc&gt; が 'wildchar' に設定されている場合があります。その\n   場合、コマンドライン補完が実行されますが、それを無視して、再び &lt;Esc&gt; を入力\n   してください。{Vi では、&lt;Esc&gt; を入力すると、そのコマンドラインが実行されま\n   す。これは多くの人が期待するような動作ではないので、Vim では変更されまし\n   た。しかし、その &lt;Esc&gt; がマップの一部であるような場合には、コマンドラインは\n   実行されます。&lt;Esc&gt; を入力したときに、Vi と同じように動作して欲しいときは、\n   \":cmap ^V&lt;Esc&gt; ^V^M\" を使ってください}\n*4 ノーマルモードから選択モードに移行するには次のようにします:\n   - 'selectmode' が \"mouse\" を含んでいるときは、マウスでテキストを選択する。\n   - 'selectmode' が \"key\" を含んでいるときは、シフトキーを押しながら、特殊\n     キーでカーソルを動かします。(:set keymodel+=startsel が必要)\n   - 'selectmode' が \"cmd\" を含んでいるときは、\"v\"、\"V\"、\"CTRL-V\" を使う。\n   - \"gh\"、\"gH\"、\"g CTRL-H\" を使う。|g_CTRL-H|\n*5 選択モードからノーマルモードに移行するには、シフトキーを押さずに特殊キーで\n   カーソルを動かします。(:set keymodel+=stopsel が必要)\n*6 選択モードから挿入モードへ移行するには、印字可能文字 (普通の文字) を入力し\n   ます。選択範囲は削除され、入力した文字が挿入されます。\n \n'insertmode' がオンのときは、編集作業は挿入モードで始まります。\n```","ts":"1573892893.062700","bot_id":"BPM858KEE","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"e471f4fc-6c65-4723-9636-be45e348c318","type":"message","user":"UAZ33BKV2","text":"これの 4としてでてる情報は役に立つかな...?","ts":"1573892922.063300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6f79ab8b-f594-4c08-9d36-b184b3333684","type":"message","user":"U03C71D7H","text":"stopinsert で行けそうな気もするけどダメなのか。あとは normal! はどうです?","ts":"1573893033.064300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8e88f49e-399b-4523-a5e9-ec121ca4676e","type":"message","user":"UDDCM376D","text":"`normal` でも行けそうだな","ts":"1573893073.064700","edited":{"user":"UDDCM376D","ts":"1573893079.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"778fc105-21b9-4f5d-ba88-75d07bb43c97","type":"message","user":"U72TB62UF","text":"`質問です`\nバッファの文字数を取得したいのですが、vimscriptのみで実装すると10万文字くらいから\n極端に遅くなります。\ngolangとかで文字数カウントの実行ファイルを作って、それを介して文字数を取得したほうが\n高速になるとかあるのでしょうか。","ts":"1573893244.066400","thread_ts":"1573893244.066400","edited":{"user":"U72TB62UF","ts":"1573893259.000000"},"reply_count":19,"replies":[{"user":"UDDCM376D","ts":"1573893393.067500"},{"user":"U72TB62UF","ts":"1573893550.068100"},{"user":"UDDCM376D","ts":"1573893861.070600"},{"user":"UPZHKAM7W","ts":"1573893861.070800"},{"user":"UDDCM376D","ts":"1573893896.071000"},{"user":"UPZHKAM7W","ts":"1573893897.071200"},{"user":"UDDCM376D","ts":"1573893906.071400"},{"user":"UDDCM376D","ts":"1573894156.073000"},{"user":"UDDCM376D","ts":"1573894167.073400"},{"user":"U8R597E9H","ts":"1573894629.074300"},{"user":"UDDCM376D","ts":"1573896026.075500"},{"user":"UDDCM376D","ts":"1573896031.075700"},{"user":"UPZHKAM7W","ts":"1573896031.075900"},{"user":"UDDCM376D","ts":"1573896038.076100"},{"user":"UPZHKAM7W","ts":"1573896038.076300"},{"user":"UDDCM376D","ts":"1573896066.076500"},{"user":"U72TB62UF","ts":"1573901430.076900"},{"user":"U72TB62UF","ts":"1573901469.077100"},{"user":"U72TB62UF","ts":"1573901476.077300"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"72a05977-b89e-4ce3-b5d1-64dc30babe5f","type":"message","user":"UDDCM376D","text":"Goだと未保存のテキスト文字数を取得できないと思いますが、どういうユースケースかによりそうです\n\nあと、Vim scriptでどのように文字数をカウントしているのかを書いておくともう少し細かい話ができるかと～","ts":"1573893393.067500","thread_ts":"1573893244.066400","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4132cffc-928f-4597-8e50-42cea4c57c06","type":"message","user":"U8R597E9H","text":"normal! stopinsert ッテイメージでしょうか？試してみます。","ts":"1573893397.067700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9b030e78-9f02-47c2-a5af-bb359ab9c371","type":"message","user":"U72TB62UF","text":"実行タイミングは保存後でも構いません。\n取得方法は、すべての文字を適当な文字に置換して、その文字数を行ごとのループで回してカウントしているだけです。\n\n```\nfunction! s:CharCount()\n    let l:count = 0\n    let l:current = 0\n    let l:last = line('$')\n    while l:current &lt;= l:last\n        let l:line = getline(l:current)\n        let l:count += strlen(substitute(l:line, \".\", \"x\", \"g\"))\n        let l:current += 1\n    endwhile\n    return l:count\nendfunction\n\n```","ts":"1573893550.068100","thread_ts":"1573893244.066400","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":null,"root":{"client_msg_id":"778fc105-21b9-4f5d-ba88-75d07bb43c97","type":"message","user":"U72TB62UF","text":"`質問です`\nバッファの文字数を取得したいのですが、vimscriptのみで実装すると10万文字くらいから\n極端に遅くなります。\ngolangとかで文字数カウントの実行ファイルを作って、それを介して文字数を取得したほうが\n高速になるとかあるのでしょうか。","ts":"1573893244.066400","thread_ts":"1573893244.066400","edited":{"user":"U72TB62UF","ts":"1573893259.000000"},"reply_count":19,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null}},{"client_msg_id":"99c4f73e-ce39-4865-bebe-520b9dd4dc32","type":"message","user":"U8R597E9H","text":"<@UAZ33BKV2> さんのヘルプ参考になりそうです。が、見る限り「挿入モード状態でセレクトモードに移行」はなさそうだ。。。","ts":"1573893572.068800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5ee8a770-e958-4357-8ba5-ff38e8dc64e6","type":"message","user":"UAZ33BKV2","text":"まあ、仕組み的にはどうにかノーマルに一度戻るのは必要なはず\n去年のVimConfの... <@U03C4RC8X> さんの <https://speakerdeck.com/ujihisa/vimconf-2018> は参考になりそう","ts":"1573893743.069800","attachments":[{"fallback":"Speaker Deck: Modes / VimConf 2018","id":1,"title":"Modes / VimConf 2018","title_link":"https://speakerdeck.com/ujihisa/vimconf-2018","text":"<https://vimconf.org/2018/sessions/#link-ujihisa>","image_url":"https://speakerd.s3.amazonaws.com/presentations/e3a98b1395ba4bdab15b3fa69324662b/slide_0.jpg?477791","blocks":null,"service_name":"Speaker Deck","service_icon":"https://d2dfho4r6t7asi.cloudfront.net/assets/favicon-c0fe5475f88a65b817c8cc7c0fedc01b7acc17fe27628fa13ca3f96e56e16977.png","from_url":"https://speakerdeck.com/ujihisa/vimconf-2018","original_url":"https://speakerdeck.com/ujihisa/vimconf-2018"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"928d0029-c661-4454-bd71-745b2eb29fa1","type":"message","user":"UAZ33BKV2","text":"なんか GitHub Actionsのwindows環境での themisのテストがいまいち安定しない...","ts":"1573893801.070500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e10656a5-39d7-4d3a-a6ac-55e57255ea46","type":"message","user":"UDDCM376D","text":":h g_CTRL-g","ts":"1573893861.070600","thread_ts":"1573893244.066400","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UPZHKAM7W","text":"```\n                                        *g_CTRL-G* *word-count* *byte-count*\ng CTRL-G                カーソルの現在の位置を、列、行、単語、文字、バイト、の\n                        5種類の単位で表示する。文字数とバイト数が同じのときは\n                        文字位置が省略される。\n                        行の中に画面上で1文字分以上の幅を占める文字 (&lt;Tab&gt; ま\n                        たは特殊文字) があるときは、「実際」の列番号と画面上の\n                        列番号の両方が、ダッシュで区切られて表示される {訳注:\n                        例えば、タブ幅 'tabstop' が8のとき、行頭の &lt;Tab&gt; の次\n                        では「実際」の列番号は2、画面上の列番号は9となり、\n                        \"1-8\" と表示される}。\n                        オプション 'ruler' と |wordcount()| 関数も参照。\n                        {Vi にはない}\n```","ts":"1573893861.070800","thread_ts":"1573893244.066400","bot_id":"BPM858KEE","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"28aed988-454b-451a-8332-70bfbf101b82","type":"message","user":"UDDCM376D","text":":h wordcount()","ts":"1573893896.071000","thread_ts":"1573893244.066400","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UPZHKAM7W","text":"```\nwordcount()                                             *wordcount()*\n                この結果は現在のバッファのバイト/文字/単語統計情報の辞書である。\n                これは|g_CTRL-G|が提供する情報と同じである。\n                この値には下記が含まれる:\n                        bytes           バッファ内のバイト数\n                        chars           バッファ内の文字数\n                        words           バッファ内の単語数\n                        cursor_bytes    カーソル位置より前のバイト数\n                                        (ビジュアルモードでない)\n                        cursor_chars    カーソル位置より前の文字数\n                                        (ビジュアルモードでない)\n                        cursor_words    カーソル位置より前の単語数\n                                        (ビジュアルモードでない)\n                        visual_bytes    ビジュアル選択領域内のバイト数\n                                        (ビジュアルモードのみ)\n                        visual_chars    ビジュアル選択領域内の文字数\n                                        (ビジュアルモードのみ)\n                        visual_words    ビジュアル選択領域内の単語数\n                                        (ビジュアルモードのみ)\n```","ts":"1573893897.071200","thread_ts":"1573893244.066400","bot_id":"BPM858KEE","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"a909da5b-35c9-4f02-98a5-b10781ee3f40","type":"message","user":"UDDCM376D","text":"これで行けそう","ts":"1573893906.071400","thread_ts":"1573893244.066400","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a1c0496b-4bb8-4026-a341-686b1bd6b758","type":"message","user":"UDDCM376D","text":"`{'chars': 3612, 'cursor_chars': 2643, 'words': 279, 'cursor_words': 207, 'bytes': 3612, 'cursor_bytes': 2643}`\n\n`chars` が文字数に当たるかと","ts":"1573894156.073000","thread_ts":"1573893244.066400","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"11dc056f-5cca-4545-8404-ba9637f326e6","type":"message","user":"UDDCM376D","text":"ただ、日本語はどうなるのか試していないです","ts":"1573894167.073400","thread_ts":"1573893244.066400","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4f98a9f2-715f-40cc-80c3-04d97483b679","type":"message","user":"U8R597E9H","text":"while 1\n  if mode() ==# 'n'\n    break\n  endif\n  sleep 10m\nendwhile\n\nとかいう作戦試してみます。","ts":"1573894173.073600","thread_ts":"1573894173.073600","reply_count":7,"replies":[{"user":"U8R597E9H","ts":"1573894259.073900"},{"user":"U8R597E9H","ts":"1573894417.074100"},{"user":"U03C71D7H","ts":"1573894993.074500"},{"user":"U03C71D7H","ts":"1573895018.074700"},{"user":"U8R597E9H","ts":"1573895491.074900"},{"user":"U8R597E9H","ts":"1573895536.075100"},{"user":"U8R597E9H","ts":"1573895808.075300"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f5cf8d42-094e-4404-abae-85541280b26c","type":"message","user":"U8R597E9H","text":"永遠に normal-mode にならない。。。","ts":"1573894259.073900","thread_ts":"1573894173.073600","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"47191214-ee2c-4131-870f-7b8088061a3c","type":"message","user":"U8R597E9H","text":"`normal! :stopinsert` も遅れている模様。同期にする方法はなさそうですね。","ts":"1573894417.074100","thread_ts":"1573894173.073600","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"967ff108-f803-4583-9d37-f60f2385db22","type":"message","user":"U8R597E9H","text":"ゴリラさんの方法が一番よさそうですが、最近の vim なら getchars() という文字数を返す関数がありますね。","ts":"1573894629.074300","thread_ts":"1573893244.066400","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a191f29a-79df-48cc-998b-8a5e04e157df","type":"message","user":"U03C71D7H","text":"いや、 `execute \"normal! \\&lt;Esc&gt;\"` です","ts":"1573894993.074500","thread_ts":"1573894173.073600","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7cb8af73-8c54-4db6-978a-7b12b983a68b","type":"message","user":"U03C71D7H","text":"でも自分で書いててこれもなんか違う気もしてきた","ts":"1573895018.074700","thread_ts":"1573894173.073600","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7b01c909-e90e-473e-b54f-11930bf74e97","type":"message","user":"U8R597E9H","text":"すいません。いろんなアプローチを試してみたのですが、一つ行ける方法がありました。（質問事項とは別のアプローチなので皆様に申し訳ないですが。。。）","ts":"1573895491.074900","thread_ts":"1573894173.073600","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"37e15995-194b-485d-8214-3b2cf7ade2ab","type":"message","user":"U8R597E9H","text":"```\n    let l:mode = mode()\n    call cursor(a:vim_range['end'])\n    normal! hgh\n    if l:mode[0] ==# 'i'\n      call cursor([a:vim_range['start'][0], a:vim_range['start'][1] + 1])\n      stopinsert\n    else\n      call cursor(a:vim_range['start'])\n    endif\n```\nこれでいけました。（insert-mode で呼ばれた場合は、stopinsert でカーソルが左に一つ分移動することを最初から計算にいれて、stopinsert を呼ぶというアプローチです。）","ts":"1573895536.075100","thread_ts":"1573894173.073600","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"50066d5b-bc4e-461d-9a73-999a1145436c","type":"message","user":"U8R597E9H","text":"これ、内部的な動きは想像でしかないですが少し気持ちわるいですね。。。\ninsert-mode 時に `normal gh` を呼んで vim の内部にセレクト範囲を覚えさせて、あとから normal-mode に戻ると、適切にセレクトモードになるという。。。（ヘルプ的にはインサートモード時にセレクトはできない的な扱いに見えるが、因果関係が逆でもちゃんと動くという）","ts":"1573895808.075300","thread_ts":"1573894173.073600","parent_user_id":"U8R597E9H","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"94e5aa3c-e26c-4f4e-9767-d8b18cba8795","type":"message","user":"UDDCM376D","text":"なんと","ts":"1573896026.075500","thread_ts":"1573893244.066400","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1c7d6e93-5ab6-4495-9a7a-3c2180f09964","type":"message","user":"UDDCM376D","text":":h getchars)(","ts":"1573896031.075700","thread_ts":"1573893244.066400","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UPZHKAM7W","text":"E149: 残念ですが getchars)( にはヘルプがありません","ts":"1573896031.075900","thread_ts":"1573893244.066400","bot_id":"BPM858KEE","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"fd04dc73-fc40-4e00-be38-96b4caf6ba9e","type":"message","user":"UDDCM376D","text":":h getchars()","ts":"1573896038.076100","thread_ts":"1573893244.066400","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UPZHKAM7W","text":"E149: 残念ですが getchars() にはヘルプがありません","ts":"1573896038.076300","thread_ts":"1573893244.066400","bot_id":"BPM858KEE","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"9ba7cbb1-552c-4322-a794-da3d9093782f","type":"message","user":"UDDCM376D","text":"ない…","ts":"1573896066.076500","thread_ts":"1573893244.066400","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fcebbf0e-22f4-418c-8d7e-accff805207c","type":"message","user":"U72TB62UF","text":"neovimだとないのかな","ts":"1573901430.076900","thread_ts":"1573893244.066400","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3e0ffef8-0476-4386-a0ab-5d9fe32535ea","type":"message","user":"U72TB62UF","text":"そもそもwordcount()なんてあったのか……","ts":"1573901469.077100","thread_ts":"1573893244.066400","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a0650608-6a77-4726-9be7-de9e3216c697","type":"message","user":"U72TB62UF","text":"試してみます！","ts":"1573901476.077300","thread_ts":"1573893244.066400","parent_user_id":"U72TB62UF","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UGB5B3V4G","text":"<@UGB5B3V4G> has joined the channel","ts":"1573910358.077700","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null}]
