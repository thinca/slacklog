[{"client_msg_id":"ed15d59a-163e-4827-b0ac-4109dda12d8c","type":"message","user":"U03C71D7H","text":"thx!","ts":"1598863154.090700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"B=W=a"}]},{"client_msg_id":"a1651c9a-7d0d-46fb-b02b-a608700f1d7f","type":"message","user":"U776661HA","text":"\u003c@U03C71D7H\u003e メモも兼ねて issue \u003chttps://github.com/thinca/vim-themis/issues/68\u003e","ts":"1598863110.090400","attachments":[{"fallback":"GitHub: themis should exit with non 0 exit-status on unexpected termination · Issue #68 · thinca/vim-themis","id":1,"title":"themis should exit with non 0 exit-status on unexpected termination · Issue #68 · thinca/vim-themis","title_link":"https://github.com/thinca/vim-themis/issues/68","text":"For example, the following Vimspec succeeded Describe Test It quits qa! End It fails Assert Equals(\u0026amp;quot;hoge\u0026amp;quot;, \u0026amp;quot;fuga\u0026amp;quot;) End End But I believe that the above test should be failed at ...","thumb_url":"https://avatars1.githubusercontent.com/u/20474?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/thinca/vim-themis/issues/68","original_url":"https://github.com/thinca/vim-themis/issues/68"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"n/aDB"}]},{"client_msg_id":"139949cd-e6a0-44a1-9b74-14dc1c4b1d7f","type":"message","user":"U7JL1UKKL","text":"リリース面倒くさい問題というのはある","ts":"1598862848.090100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DMs"}]},{"client_msg_id":"7b4f9b23-5ad6-46e5-8fa0-f88789a2e4e0","type":"message","user":"U8R597E9H","text":"コミットハッシュがバージョンです。。。","ts":"1598862766.089600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"glst"}]},{"client_msg_id":"f226d4a3-8c1b-44ae-a592-c1b3b2c89924","type":"message","user":"U776661HA","text":"利便性を追い求めるなら v1.2 みたいなパッチなしとか v1 みたいなマイナーなしなタグも打つべきですが、流石に面倒","ts":"1598862587.089300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"07P8m"}]},{"client_msg_id":"926643bd-52d3-4f5a-91c9-2b78245ab465","type":"message","user":"U03C71D7H","text":"とはいえ私は切らなすぎなのでパッチリリースはもっとこまめにやらないとなって感じはある","ts":"1598862570.088900","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1Xt"}]},{"client_msg_id":"6657bad3-7348-4cb5-89da-fa8b4100cd42","type":"message","user":"U776661HA","text":"まぁパッチ／マイナー／メジャーの違いがあるので意味はある","ts":"1598862532.088200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jJt"}]},{"client_msg_id":"4b0450a3-4a15-40b8-ae8f-b0925654dd40","type":"message","user":"U03C71D7H","text":"ぶっちゃけそれやるならもう git hash 使って適当に随時最新使ってよ、ってなるのもある","ts":"1598862508.087800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"k2dcr"}]},{"client_msg_id":"45a38299-43e8-4e61-a337-f8b30f5951ba","type":"message","user":"U9S4G0LJW","text":"壊れたら直す主義の人以外はつらい可能性","ts":"1598862505.087700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/H85"}]},{"client_msg_id":"482d4459-dbee-48f0-aa20-c74dd3f56495","type":"message","user":"U7JL1UKKL","text":"私は巨大な変更するときにタグを入れる","ts":"1598862502.087400","team":"T03C4RC8V","reactions":[{"name":"subara","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uFKdt"}]},{"client_msg_id":"0a194ce6-fe7f-4bf6-a53d-8a445f5de013","type":"message","user":"U03C71D7H","text":"ちょっと考えさせられるものがある","ts":"1598862479.086200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"e86v4"}]},{"client_msg_id":"1358c24c-e6ba-4ca4-971d-a51049bb4f3c","type":"message","user":"UAZ33BKV2","text":"むずかしい...","ts":"1598862477.086100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9/6r3"}]},{"client_msg_id":"2935e07c-0832-47d3-a5ae-018f269624d3","type":"message","user":"U9S4G0LJW","text":"ローリングリリース結構便利","ts":"1598862476.086000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=Xb"}]},{"client_msg_id":"323071ee-75d5-467e-90e8-df8f0afaa5bf","type":"message","user":"U776661HA","text":"まぁテストコード修正とかではタグ切らないですがw","ts":"1598862459.085600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7fD"}]},{"client_msg_id":"92b8918b-2ccb-4920-b21a-6dc495f5aa36","type":"message","user":"U03C71D7H","text":"冷静に考えると Vim がそう","ts":"1598862455.085400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3pXvY"}]},{"client_msg_id":"e8899eb4-975f-4a0b-a780-94d24f3f0229","type":"message","user":"U03C71D7H","text":"リリースという概念なんて必要なかったんや","ts":"1598862444.085100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HNn0a"}]},{"client_msg_id":"f13c0038-0d4d-4259-9c80-9ea0b6867515","type":"message","user":"U776661HA","text":"むっちゃタグ増えるけどそっちの方が便利だし","ts":"1598862444.085000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QFqjE"}]},{"client_msg_id":"ab2811e8-acd4-4313-bcb0-0976f7504328","type":"message","user":"U03C71D7H","text":"すごい","ts":"1598862430.084600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JchqI"}]},{"client_msg_id":"a7e32788-7862-4d62-80a7-4747d46fec2f","type":"message","user":"U776661HA","text":"fern は考えるのが怠いから変更入れるたびにリリースタグ打つようにしてる","ts":"1598862416.084300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XO5O7"}]},{"client_msg_id":"78e31305-cad7-42f4-b59a-f0f2e4f28635","type":"message","user":"U03C71D7H","text":"リリースタグ打ってよって Issue 立てられてる。すまぬすまぬ","ts":"1598862378.083700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HV=i"}]},{"client_msg_id":"89c981dd-0c0a-404b-9681-79cd3d966151","type":"message","user":"U03C71D7H","text":"あとそもそもの問題があって、最近リリースタグ打ててないんだよねw","ts":"1598862362.083300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/yB"}]},{"client_msg_id":"b5dd6b77-2434-4e17-a763-2d71f787d1a5","type":"message","user":"U03C71D7H","text":"fm","ts":"1598862346.082900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dOhv"}]},{"client_msg_id":"af650b73-a9b0-4242-9b9f-368406680fdd","type":"message","user":"U776661HA","text":"二個目のテストが失敗するはずだけど、その前に死ぬから exitcode が 0 になる","ts":"1598862330.082600","edited":{"user":"U776661HA","ts":"1598862337.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JZJ"}]},{"client_msg_id":"2e3ae848-0ddd-4332-b189-225ca4614d2f","type":"message","user":"U776661HA","text":"最小構成","ts":"1598862316.082200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TWay"}]},{"client_msg_id":"eefd41e4-c7bb-49c7-9588-fed698f6762b","type":"message","user":"U776661HA","text":"```Describe Test\n  It quit unexpectedly\n    qa!\n  End\n\n  It is not executed thus exit code would become 0\n    Assert Equals(\"hoge\", \"fuga\")\n  End\nEnd```","ts":"1598862313.082000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iMO/W"}]},{"client_msg_id":"1e6289fb-bbfe-4411-90e5-fc23ac7199bc","type":"message","user":"U776661HA","text":":wakaru:","ts":"1598862271.081700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UO65"}]},{"client_msg_id":"b93d2dd9-58a7-4b7c-a428-abd2063c8fec","type":"message","user":"U03C71D7H","text":"sh 側であんまり複雑なことはしたくない…とくに Windows でつらい","ts":"1598862265.081500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5Kg"}]},{"client_msg_id":"5bdfcf36-8a80-45ab-a5f1-213868a3b737","type":"message","user":"U03C71D7H","text":"今考えてるのは、 `VimLeavePre` イベントを仕込んで、themis が最後まで走ってなかったら(走ったら何かフラグを立てる)エラーにする\nイベントを全部吹き飛ばすようなお行儀の悪いことをされると無力","ts":"1598862249.081100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zEjA"}]},{"client_msg_id":"984ca82a-08bb-4d31-9b66-d2821ade543f","type":"message","user":"U776661HA","text":"あ、されねぇ","ts":"1598862205.080300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/A9e"}]},{"client_msg_id":"503d1853-aea9-4a64-93fd-49281cc0a9ca","type":"message","user":"U03C71D7H","text":"それはなんなんだろうなぁ","ts":"1598862188.079800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HtZ"}]},{"client_msg_id":"5a2f7b5d-a2b3-4083-b12e-3afda70580e8","type":"message","user":"U776661HA","text":"`:qa!` しても失敗はちゃんと通知されるか","ts":"1598862179.079500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"p6/"}]},{"client_msg_id":"06b2f73c-fa59-4991-bbde-2ac69776819c","type":"message","user":"U8R597E9H","text":"feedkeys(‘…’, ‘!’) なんかは、テストが完走せずに途中で終わって、ステータスは成功扱い。みたいな動きしますね。","ts":"1598862151.079000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VT6J"}]},{"client_msg_id":"08e79df6-259f-4e22-8b9b-f6f272a46959","type":"message","user":"U776661HA","text":"それこそ `:qa!` はだめです？","ts":"1598862108.078300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YLo"}]},{"client_msg_id":"0e5f311c-e3d4-44ef-aac3-69cac50b06dd","type":"message","user":"U776661HA","text":"適切に themis が終了した場合だけ 0 になるようなハックを入れると良さそう","ts":"1598862084.077700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QFF"}]},{"client_msg_id":"39ce549a-b761-4055-8ecd-5a1b9910f646","type":"message","user":"U03C71D7H","text":"ちなみに「予期しない終了」の再現ってできます?","ts":"1598862083.077600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"n0pf"}]},{"client_msg_id":"b5317f4b-afd8-4b87-bc5e-202d3c7939e3","type":"message","user":"U03C71D7H","text":"何かしら対策はできるかも","ts":"1598862028.076900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xAI5"}]},{"client_msg_id":"c87d6f51-a811-4ef3-8eb7-62b90b0ab6a4","type":"message","user":"U776661HA","text":"予期しない終了時は必ず 1 になるようにする","ts":"1598862011.076600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lk1"}]},{"client_msg_id":"66868442-0025-4a64-a0ed-e342574d6727","type":"message","user":"U776661HA","text":"それが最後に出力されていたら OK みたいな実装はダメ？","ts":"1598861988.076200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WntTA"}]},{"client_msg_id":"0beb85cf-c1da-47cf-a9f0-1bbaf630ef9b","type":"message","user":"U776661HA","text":"これ、事前に UUID みたいなランダム文字列を sh -\u0026gt; Vim に渡して","ts":"1598861976.075800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Cdfx"}]},{"client_msg_id":"fe7fcbb4-6464-4de1-a95f-8ff2d29edfb7","type":"message","user":"U03C71D7H","text":"死に方がわからないとどうも…例えば Vim を普通に `:qa!` されていたらどうしようもない","ts":"1598861950.075300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0Yl"}]},{"client_msg_id":"30e7b6e7-256d-47b9-b066-a92a4802ce62","type":"message","user":"U03C71D7H","text":"なんか次から次へとやることが重なっていく","ts":"1598861916.074600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qwe"}]},{"client_msg_id":"0115419c-0c9a-4dd0-afc7-d7dac5f23b3f","type":"message","user":"U776661HA","text":"0 になっちゃうから気がつかないので厳しい","ts":"1598861913.074500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wwV"}]},{"client_msg_id":"6fec722f-b9a5-4f03-a8ea-b9362e460546","type":"message","user":"U776661HA","text":"これ themis が途中で死んだ時に exitstatus が 0 になるの、なんとかならないですかね？","ts":"1598861898.073900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YNoI1"}]},{"client_msg_id":"03d02cbe-112f-4435-913b-91867661c6bb","type":"message","user":"U03C71D7H","text":"すまぬ…すまぬ…","ts":"1598861862.073200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7Ss"}]},{"client_msg_id":"1caa0564-9c70-4db6-8aee-769ea8b92b19","type":"message","user":"U776661HA","text":"非同期はテクいことしないとテストすらできなくて辛いですw","ts":"1598861788.072300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Kf6"}]},{"client_msg_id":"43282b0f-d3b0-4e40-b71f-315009832790","type":"message","user":"U8R597E9H","text":"そうか、fern-wait を `x` で呼び出しているので同期になるのか。テクいｗ","ts":"1598861748.071800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"llr"}]},{"client_msg_id":"0e9cf85c-ab5d-47ac-bb15-5485292179e7","type":"message","user":"U8R597E9H","text":"well tested で素晴らしい。。。あれ","ts":"1598861711.071400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JVy"}]},{"client_msg_id":"68b4932a-dbf1-4979-8c02-c191b79f3c3f","type":"message","user":"U776661HA","text":"Neovim の場合は `timer_start(0, { -\u0026gt; feedkeys(\"...\") })` の代わりに `nvim_input(\"...\")` を使うように修正すると回避できました","ts":"1598861409.070500","thread_ts":"1598861409.070500","reply_count":1,"team":"T03C4RC8V","reactions":[{"name":"tiken","count":3,"users":["U9S4G0LJW","UAZ33BKV2","U8R597E9H"]},{"name":"hee","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"av9yu"}]},{"client_msg_id":"b1b9c583-c592-4be9-a61f-76384f1e96e7","type":"message","user":"U776661HA","text":"どないしよ、って感じですw","ts":"1598848159.069500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"o=7"}]},{"client_msg_id":"54aa1cd5-e045-412e-b8f2-a4139a95333c","type":"message","user":"U776661HA","text":"たぶんこれ CI だと TUI じゃないからスキップされるとか、そういうことな気がしてます","ts":"1598848132.069300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7bWEQ"}]},{"client_msg_id":"11a3f4e1-b54c-4d01-bd30-1a5a60e299b3","type":"message","user":"U8R597E9H","text":"なるほど。それならたしかに非同期じゃなくなるのかｗ input がブロックするから、同期の流れに戻る。面白いです。なるほど。","ts":"1598848103.068900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"re8DJ"}]},{"client_msg_id":"53656faf-af3d-4acf-b0ef-8cb0340c94e8","type":"message","user":"U776661HA","text":"なので即時実行 `x` だとダメだったわけです","ts":"1598848088.068500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VDb"}]},{"client_msg_id":"8546f7bd-765b-4cc4-a246-ce44e2a2de1d","type":"message","user":"U776661HA","text":"fern 非同期なので非同期 wait と timer_start 噛ませる必要があって難易度","ts":"1598848047.067500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qiCtq"}]},{"client_msg_id":"dba5779b-4649-4356-93ee-1cab319b524b","type":"message","user":"U776661HA","text":"通常であれば feedkeys だけでいけるんですが","ts":"1598848030.066800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pZz"}]},{"client_msg_id":"f19de430-651d-404f-a3db-c801ea30bb68","type":"message","user":"U8R597E9H","text":"！そんなことが可能なのか。。。","ts":"1598848012.066300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wYdQ"}]},{"client_msg_id":"b9e1f021-9ee2-4e40-be27-21c6c583a820","type":"message","user":"U776661HA","text":"`\u0026lt;Plug\u0026gt;(fern-action-remove)` がプロンプト開くので、そこに入力する内容を事前に `feedkeys` で与えているんですよね","ts":"1598847994.065900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mBRD"}]},{"client_msg_id":"d01d3329-8a8e-4ad7-82d5-95131631a3b1","type":"message","user":"U776661HA","text":"```    call timer_start(0, { -\u0026gt; feedkeys(\"y\\\u0026lt;CR\u0026gt;\") })\n    execute \"normal ggj\\\u0026lt;Plug\u0026gt;(fern-action-remove)\\\u0026lt;Plug\u0026gt;(fern-wait)\"```","ts":"1598847970.065400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Kw2"}]},{"client_msg_id":"6678c612-059e-4b72-a56f-5307b34252ca","type":"message","user":"U776661HA","text":"いえ、これ結構難易度で","ts":"1598847953.065000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3wy"}]},{"client_msg_id":"5726b77e-21fe-4440-bdee-ee73b4998dfd","type":"message","user":"U8R597E9H","text":"もしかして feedkeys のあとに normal! すると、溜まってたキーを全部吐き出してくれるのだろうか。擬似的な x flag というか。。。","ts":"1598847924.064700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dih"}]},{"client_msg_id":"bbf61197-c4e4-45f3-b22d-3bca4bb672da","type":"message","user":"U8R597E9H","text":"はい！","ts":"1598847896.064100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"E3a"}]},{"client_msg_id":"75c675d3-aa98-4c84-9e9d-f68df72a8330","type":"message","user":"U776661HA","text":"テスト側を直すことで対応します :bow:","ts":"1598847832.063800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"s3i"}]},{"client_msg_id":"3136a25d-ad4c-4d9f-ac58-fa232cce8197","type":"message","user":"U776661HA","text":"ムッチャタイミングがシビアなテストになっちゃってるっぽいです","ts":"1598847816.063500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eXfM"}]},{"client_msg_id":"c469e779-182c-49a1-be94-8a6280795846","type":"message","user":"U776661HA","text":"なんとなくわかった","ts":"1598847804.063200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Z2VW"}]},{"client_msg_id":"d07d3462-a519-4111-bdee-1a0c20560688","type":"message","user":"U776661HA","text":"タイマー使わないと再現するな。","ts":"1598847787.062900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"A9U8"}]},{"client_msg_id":"3b99a6ce-af10-4532-98e8-68b355cdd54d","type":"message","user":"U8R597E9H","text":"themis のコード読みやすいので非同期の仕組み入れるのそんなに苦じゃなさそうと思っている","ts":"1598847782.062700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gFf"}]},{"client_msg_id":"138f523a-7eb1-4da9-8b9c-8a521a4330e5","type":"message","user":"U8R597E9H","text":"なるほど…なんでだろう。。。","ts":"1598847589.061200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"V9S"}]},{"client_msg_id":"f3317634-b663-490e-a934-18c8530c326f","type":"message","user":"U8R597E9H","text":"あと、アプリコード側で feedkeys 使っててもテスト不可能という理解","ts":"1598847576.060700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Yts7f"}]},{"client_msg_id":"ae7e5eaf-d668-4fa0-89a8-ca643b4b7093","type":"message","user":"U776661HA","text":"`x` つけるとローカルで停止が再現した","ts":"1598847574.060500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1V8D"}]},{"client_msg_id":"5db2d47b-2006-4dd5-8af7-e800c1cf017d","type":"message","user":"U776661HA","text":"逆だ","ts":"1598847557.059700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aF+hj"}]},{"client_msg_id":"92b9ef45-804d-4aca-99db-04a4ef7b52d7","type":"message","user":"U776661HA","text":"あ","ts":"1598847556.059400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HQ5"}]},{"client_msg_id":"8f51a561-8c4d-44ce-af10-dfe2960b07f0","type":"message","user":"U8R597E9H","text":"タイマー挟むとテスト不可能になる。という理解をしています。","ts":"1598847548.059100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"js7Ya"}]},{"client_msg_id":"d932b7d7-9a70-4668-935a-e8953f859c1a","type":"message","user":"U776661HA","text":"試してみます！","ts":"1598847530.058500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IGha"}]},{"client_msg_id":"db954ba7-90b1-43c1-9181-ecf1a41d12dc","type":"message","user":"U8R597E9H","text":"即時実行してくれる feedkeys です","ts":"1598847457.058300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mwi"}]},{"client_msg_id":"6e0af2d5-c337-467d-b9b6-dfe3a6efbfe8","type":"message","user":"U776661HA","text":"x flag","ts":"1598847439.057600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"j=a3"}]},{"client_msg_id":"c177f2bb-2095-48bf-89f6-23431b945650","type":"message","user":"U8R597E9H","text":"うーん。少なくとも vsnip では feedkeys 噛ませるテストには x フラグ使ってますね","ts":"1598847429.057200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"h07"}]},{"client_msg_id":"c2184b88-d2a6-4daa-93dd-661a2ac859d7","type":"message","user":"U776661HA","text":"ローカルで動くのなんでだろう....","ts":"1598847386.055900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GlNE"}]},{"client_msg_id":"2ab6e639-c41d-4c64-9d79-e852a68d54fe","type":"message","user":"U8R597E9H","text":"いえいえ！原因わかってよかったです。","ts":"1598847369.055400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fXN"}]},{"client_msg_id":"b1ac0bd8-7f98-4e80-822c-4ad51b449bb6","type":"message","user":"U8R597E9H","text":"非同期のテストになってるので、そのアサーション効いてないかもしれません。","ts":"1598847354.055000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/z0"}]},{"client_msg_id":"324b3533-4bde-403c-86be-e30102d3b989","type":"message","user":"U776661HA","text":"十中八九 feedkeys っぽいです。ありがとうございます \u003c@U8R597E9H\u003e","ts":"1598847350.054800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4tcwu"}]},{"client_msg_id":"ac3b46f3-668e-4dc2-b3ec-773ec0be77d0","type":"message","user":"U776661HA","text":"\u003chttps://github.com/lambdalisue/fern.vim/blob/fix-neovim-ci/test/behavior/buffer-rename.vimspec\u003e\n\nこのテストが原因でした。`feedkeys` 使ってるので、そこかな？第二引数はつかってないですが...","ts":"1598847123.053600","attachments":[{"fallback":"GitHub: lambdalisue/fern.vim","id":1,"title":"lambdalisue/fern.vim","title_link":"https://github.com/lambdalisue/fern.vim/blob/fix-neovim-ci/test/behavior/buffer-rename.vimspec","text":":herb: General purpose asynchronous tree viewer written in Pure Vim script - lambdalisue/fern.vim","thumb_url":"https://avatars3.githubusercontent.com/u/546312?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/lambdalisue/fern.vim/blob/fix-neovim-ci/test/behavior/buffer-rename.vimspec","original_url":"https://github.com/lambdalisue/fern.vim/blob/fix-neovim-ci/test/behavior/buffer-rename.vimspec"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"B=4g2"}]},{"client_msg_id":"ac4588a2-e42e-44e7-8dd9-179e3ffcc33f","type":"message","user":"U776661HA","text":"まず `--reporter spec` で当たりをつけるところからか....","ts":"1598846778.052500","edited":{"user":"U776661HA","ts":"1598846788.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=j7"}]},{"client_msg_id":"d2335b12-806b-4993-9ad3-94ca040b275d","type":"message","user":"U7B4ZD49X","text":"つらいやつだ・・・","ts":"1598846725.052200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WdM"}]},{"client_msg_id":"276dea4b-f6b7-4803-805e-2d445484ef91","type":"message","user":"U776661HA","text":"Vimの場合は問題なく最後まで行ってちゃんと失敗するんですよね。あとローカル(Nvim)でも最後まで行って失敗します","ts":"1598846685.051900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ul7u"}]},{"client_msg_id":"4f0e80a1-2692-4f2a-b635-4c325e41a7af","type":"message","user":"U8R597E9H","text":"自分の場合、feedkeys の第２引数の ! を使うと途中で止まりました。使ってないなら関係はなさそうです。","ts":"1598846645.051200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GkK"}]},{"type":"message","user":"U776661HA","text":"こんな感じ","ts":"1598846567.049700","files":[{"id":"F019SJ0F6AF","created":1598846560,"timestamp":1598846560,"name":"fern.vim 2020-08-31 13-02-24.png","title":"fern.vim 2020-08-31 13-02-24.png","mimetype":"image/png","image_exif_rotation":0,"filetype":"png","pretty_type":"PNG","user":"U776661HA","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":102078,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F019SJ0F6AF/fern.vim_2020-08-31_13-02-24.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F019SJ0F6AF/download/fern.vim_2020-08-31_13-02-24.png","original_h":569,"original_w":917,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F019SJ0F6AF-ba572c5aed/fern.vim_2020-08-31_13-02-24_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F019SJ0F6AF-ba572c5aed/fern.vim_2020-08-31_13-02-24_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F019SJ0F6AF-ba572c5aed/fern.vim_2020-08-31_13-02-24_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F019SJ0F6AF-ba572c5aed/fern.vim_2020-08-31_13-02-24_360.png","thumb_360_gif":"","thumb_360_w":360,"thumb_360_h":223,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-F019SJ0F6AF-ba572c5aed/fern.vim_2020-08-31_13-02-24_480.png","thumb_480_w":480,"thumb_480_h":298,"thumb_720":"https://files.slack.com/files-tmb/T03C4RC8V-F019SJ0F6AF-ba572c5aed/fern.vim_2020-08-31_13-02-24_720.png","thumb_720_w":720,"thumb_720_h":447,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U776661HA/F019SJ0F6AF/fern.vim_2020-08-31_13-02-24.png","permalink_public":"https://slack-files.com/T03C4RC8V-F019SJ0F6AF-e2139c6f65","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"thumb_800":"https://files.slack.com/files-tmb/T03C4RC8V-F019SJ0F6AF-ba572c5aed/fern.vim_2020-08-31_13-02-24_800.png","thumb_800_h":496,"thumb_800_w":800,"thumb_tiny":"AwAdADCoPu+1HA7ClTpSH6igBtFKfrSUAFOiAMgBGRz/ACptPh/1q/j/ACoAEpT9cU1RkdaGG3HNADT1oozRmgAp8X+tX8f5UylVtrAjtQB//9k=","username":""}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VgVhg"}]},{"client_msg_id":"96d55a7c-2952-4520-979d-1705f3454816","type":"message","user":"U776661HA","text":"Neovim のテストを themis でやってるのですが F がでても成功になってしまって困ってます。どうも最後まで出力されてないっぽいんですが、なにかご存知の方いませんか？\n\u003chttps://github.com/lambdalisue/fern.vim/pull/189/checks?check_run_id=1049434869\u003e","ts":"1598846525.049400","attachments":[{"fallback":"GitHub: Add --headless to Neovim on themis by lambdalisue · Pull Request #189 · lambdalisue/fern.vim","id":1,"title":"Add --headless to Neovim on themis by lambdalisue · Pull Request #189 · lambdalisue/fern.vim","title_link":"https://github.com/lambdalisue/fern.vim/pull/189/checks?check_run_id=1049434869","thumb_url":"https://avatars3.githubusercontent.com/u/546312?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/lambdalisue/fern.vim/pull/189/checks?check_run_id=1049434869","original_url":"https://github.com/lambdalisue/fern.vim/pull/189/checks?check_run_id=1049434869"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"R4V"}]},{"client_msg_id":"d981e00f-dba9-42ab-886a-6200c6b2165c","type":"message","user":"U776661HA","text":"\u003chttps://github.com/lambdalisue/fern.vim/pull/189\u003e\n\nこんな感じ","ts":"1598861551.070800","thread_ts":"1598861409.070500","attachments":[{"fallback":"GitHub: Fix CI silently fails on Neovim by lambdalisue · Pull Request #189 · lambdalisue/fern.vim","id":1,"title":"Fix CI silently fails on Neovim by lambdalisue · Pull Request #189 · lambdalisue/fern.vim","title_link":"https://github.com/lambdalisue/fern.vim/pull/189","text":"CI passed even the themis report failure on Neovim","thumb_url":"https://avatars3.githubusercontent.com/u/546312?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/lambdalisue/fern.vim/pull/189","original_url":"https://github.com/lambdalisue/fern.vim/pull/189"}],"parent_user_id":"U776661HA","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NGUq2"}]}]
