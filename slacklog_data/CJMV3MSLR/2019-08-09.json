[{"client_msg_id":"f124edcf-1ac2-4a29-9ae7-f055ba5579cc","type":"message","user":"UB88NP1PY","text":"質問です。バグっぽい動きのように思うのですがどうでしょうか。\n```\n$ Vim -Nu NONE\n2ifoo&lt;esc&gt;\n:s/foo/bar\\r/gc&lt;cr&gt;\nyy -&gt; 二つとも置き換え\nu -&gt; undo\n```","ts":"1565343251.369800","edited":{"user":"UB88NP1PY","ts":"1565343311.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3b0427c7-92fa-4ffb-be6f-f6d8216824b3","type":"message","user":"UB88NP1PY","text":"期待する結果\n```\nbar\nfoo\n```\n実際の結果\n```\nbar\nfoofoo\n```","ts":"1565343288.370600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e3245590-9581-46c5-8310-33fc4d9370ea","type":"message","user":"U06BRP8VD","text":"`\\r` がなくても発生しますね","ts":"1565343429.371000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a3c81eca-df26-4f86-82d9-13d34b6c2ab3","type":"message","user":"U06BRP8VD","text":"`:%s//gc` で、も1行に複数回あったら発生するのかな…","ts":"1565343479.371700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9c27b22d-2376-4598-a061-48a24e394cd9","type":"message","user":"U06BRP8VD","text":"発生するな…","ts":"1565343503.371900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6b3792f5-c261-42ce-b908-e822ac84cf48","type":"message","user":"UB88NP1PY","text":"あれ、 `\\r` ありでもおかしいですか？私の環境だと `barbar` から `foofoo` に一度に戻って、それ自体は問題ない気がします。","ts":"1565343596.373700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"234131b7-6c31-4441-8545-3802c69fa8e3","type":"message","user":"U03C71D7H","text":"`\\r` がない場合は問題なさそうですが `\\r` がある場合は再現ができて、バグのように思いますね","ts":"1565343627.374900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6600880d-c41e-4e19-aa0d-0af6132b6be1","type":"message","user":"U06BRP8VD","text":"1. `:s//gc` で1行が複数箇所書き換わっていた場合、undo は行単位になる\n2. 置き換え先の語句に改行が含まれてると、行数とundoの関係が考慮されてない\n\nって2つの振る舞いがあるっていうイメージ。","ts":"1565343686.375700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2301feb2-4d9c-4c3a-920e-cdc5e0946076","type":"message","user":"U06BRP8VD","text":"期待する結果としては `foofoo` まで1回で戻るのが、他の動作との兼ね合いを考えると正しそう。","ts":"1565343719.376500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3e310e0a-d266-40d6-9687-61e1c8c24430","type":"message","user":"U06BRP8VD","text":"`bar` が残ってしまう(どこからか現れる?)ことが問題","ts":"1565343747.377000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fdf310ca-8c68-42f8-93cd-dfee8aef7230","type":"message","user":"U06BRP8VD","text":"cでyして改行が入ると、そこでundoが切れちゃうんだな…","ts":"1565343801.377900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8ebddedb-4b87-44e0-9625-551abbe41fcb","type":"message","user":"UAZ33BKV2","text":"行単位で戻す際に複数行化したテキストをまとめて処理できてないカンジですかね?","ts":"1565343803.378000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0698433e-2d74-493a-9cdb-1a2a0b270f3e","type":"message","user":"UAZ33BKV2","text":"あ、undo側か...","ts":"1565343826.378500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"811c8acf-1e5b-4a4e-abdb-58fdf7dfd0a2","type":"message","user":"U06BRP8VD","text":"vimはなにか操作するとundoしたときのために逆操作を記録してるはずなんです。で、どこをundoの区切りとするかを制御してる。その制御がおかしくなっているように見受けられる。","ts":"1565343873.379400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"82eefacb-f010-492d-9128-44bfa59a30fd","type":"message","user":"U03C71D7H","text":"あー確かに。試した例が小さなかったので気付かなかったけど、 `:s` 全体が1つの undo ブロックなのではなくて本来は1箇所毎に undo になるのだけど同じ行のがまとめられてしまっていますね。これは不自然な挙動かも","ts":"1565343947.380600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"618ca33b-8a9d-4000-b6e5-9872b34d77ae","type":"message","user":"UB88NP1PY","text":"なるほど、1 行内に複数の変更があると undo が行単位になるのか。いまいちこのあたりの挙動の違いが分かっていなかった。","ts":"1565344003.381800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1381f7c3-6420-4013-a075-30850ffb88e5","type":"message","user":"U03C71D7H","text":"`c` がなければ全部まとめて戻るのか","ts":"1565344009.381900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7ea86698-6789-4534-a33e-17d05b098367","type":"message","user":"UB88NP1PY","text":"あと `c` があっても、 'a' で全部置き換えのときも大丈夫ですね。","ts":"1565344042.383000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2aaee4a2-9796-40a2-86f8-d40aea3b225d","type":"message","user":"UAZ33BKV2","text":"cで分割されるのは、それはそれで正しそう?","ts":"1565344071.384100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f3c48322-93fd-4de7-b903-6d567be70e4f","type":"message","user":"U03C71D7H","text":"途中で `y` や `n` が入るので、 `c` の時に undo ブロックが区切れるのは理解できる。同じ行の別々の変更(`y` `y`)が1つにまとめられてしまうのはおかしいように思える","ts":"1565344084.384500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"152f646b-5118-4e0a-bac8-cfb5851754f2","type":"message","user":"UB88NP1PY","text":"c で分割されるのは正しくって、ただし同じ行内での複数の変更は 1 個にまとまるはず、という感じですかね。","ts":"1565344170.385400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5cfeb346-8983-42ff-8d0e-75e6b3c56369","type":"message","user":"UB88NP1PY","text":"とりあえず issue をあげておくか","ts":"1565344238.385800","team":"T03C4RC8V","reactions":[{"name":"+1","count":2,"users":["U06BRP8VD","UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UM74XG5MJ","text":"<@UM74XG5MJ> has joined the channel","ts":"1565352891.387800","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"108b3029-82cb-4e3b-9dcc-b618892ada14","type":"message","user":"U8996GYBF","text":"<#CLKR04BEF|plugins> かもしれないんですが、neovim, lightline使っててcmdwin開いたときにNormalモードに戻るまでステータスラインに適用されなくなってる（Normalモードに戻ったら適用される）っぽいんですが、原因知ってる方っていらっしゃるでしょうか。","ts":"1565352960.388600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"40d36bc7-bacf-45d2-a6e4-c0265ae6e4d9","type":"message","user":"U7H4TJEG0","text":"見てみます","ts":"1565354654.388800","team":"T03C4RC8V","reactions":[{"name":"pray","count":1,"users":["U8996GYBF"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bbd2413c-b83a-44f4-9517-a7dbc4ed12e8","type":"message","user":"UDDCM376D","text":"あれ、なんかエラー出ている\n```\n$ vim --startuptime=prof\nVIM - Vi IMproved 8.1 (2018 May 18, compiled Aug  9 2019 08:32:34)\nGarbage after option argument: \"--startuptime=prof\"\nMore info with: \"vim -h\"\n```","ts":"1565357748.389400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a9346db0-1c7b-4cc4-aa36-300cf868e699","type":"message","user":"UDDCM376D","text":"`vim --startuptime prof` なのか\n途中で引数の形が変わったんだ","ts":"1565357798.390100","edited":{"user":"UDDCM376D","ts":"1565357804.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a86f2d7e-a449-449b-9af6-c559b3c693f5","type":"message","user":"ULSHV7A6R","text":"nvim-qtで、GUIのタブじゃなくて、CUIベースのタブを使用する方法はあるのでしょうか？","ts":"1565295479.352300","thread_ts":"1565295479.352300","reply_count":2,"replies":[{"user":"UDDMEDNNP","ts":"1565303257.352400"},{"user":"ULSHV7A6R","ts":"1565363126.391100"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"007d1e72-2e2d-4581-b2ac-02067b71c945","type":"message","user":"UDDMEDNNP","text":"<https://github.com/notomo/dotfiles/blob/3b34f93842b132be5f956c06dcb9e3a90b9e055e/vim/rc/ginit.vim#L2>\nこんな感じで書けます :man-raising-hand:\n`:Gui&lt;Tab&gt;`とかでコマンドの候補を見ると色々できるようです","ts":"1565303257.352400","thread_ts":"1565295479.352300","attachments":[{"fallback":"GitHub: notomo/dotfiles","id":1,"title":"notomo/dotfiles","title_link":"https://github.com/notomo/dotfiles/blob/3b34f93842b132be5f956c06dcb9e3a90b9e055e/vim/rc/ginit.vim#L2","text":"My configuration files. Contribute to notomo/dotfiles development by creating an account on GitHub.","thumb_url":"https://avatars2.githubusercontent.com/u/18519692?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/notomo/dotfiles/blob/3b34f93842b132be5f956c06dcb9e3a90b9e055e/vim/rc/ginit.vim#L2","original_url":"https://github.com/notomo/dotfiles/blob/3b34f93842b132be5f956c06dcb9e3a90b9e055e/vim/rc/ginit.vim#L2"}],"parent_user_id":"ULSHV7A6R","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6ca1af34-f5a6-4137-9730-78ff9746908a","type":"message","user":"UDDCM376D","text":"[質問]\n```\necho \"gorilla\"\n```\nって中身のバッファで\n`:w !bash` を実行すると `gorilla`になると思いますが、これって内部で `echo \"gorilla\"` をbashに標準入力として渡しているのでしょうか？","ts":"1565306384.354300","edited":{"user":"UDDCM376D","ts":"1565306583.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"90e86aa9-3c81-4d1f-9f82-fc094f2ff222","type":"message","user":"UDDCM376D","text":"ちなみにPHPの場合も\n```\n&lt;?php\nprint \"gorilla\";\n```\nを `:w !php` で実行すると結果が得られたので、 `:w !{cmd}` は標準入力として{cmd}に渡しているのかなと","ts":"1565306661.356100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"578fe28d-618e-4d1e-9425-6761d079dfbb","type":"message","user":"U03C6TEAZ","text":"はい。実際はバッファの内容を一旦テンポラリファイルに書き出して指定のコマンドの入力としてリダイレクトし、出力を別のテンポラリファイルにリダイレクト、その中身を vim がバッファとして読み込みます。","ts":"1565307684.360400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UM7732GQG","text":"<@UM7732GQG> has joined the channel","ts":"1565319235.360600","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"40da3893-f080-4234-972d-5531cd40b1db","type":"message","user":"UDDCM376D","text":"あ、内部でテンポラリファイルを使っているのですね\n理解しました、ありがとうございます","ts":"1565322190.361300","edited":{"user":"UDDCM376D","ts":"1565322198.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8DBEEF4B-AD70-4EC5-8499-2AE7034E917C","type":"message","user":"UDDCM376D","text":"[質問]\nVimの起動時に、なんのプラグイン(ファイル)がどういった順番で読み込まれるのかを知りたいのですが、やり方ありますか？\n\nプロファイリングすればわかりますか？(まだ調べてない","ts":"1565330631.363400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"35381960-e099-4aa5-90ff-3b9a7423603d","type":"message","user":"UA1GWETAA","text":"scriptnamesでいける？","ts":"1565331109.363800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d126b309-c933-4d7b-ba3f-824721e2e0e0","type":"message","user":"UA1GWETAA","text":":h scriptnames","ts":"1565331128.364100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U894RTUJY","text":"```\n                                                *:scr* *:scriptnames*\n:scr[iptnames]          読み込まれているスクリプトを読み込まれた順番どおりに\n                        全て表示する。数字はスクリプトのID(識別子)|&lt;SID&gt;|に使\n                        われている。\n                        {Vi にはない} {|+eval|付きでコンパイルしないと使えない}\n```","ts":"1565331128.364200","bot_id":"B894RTUCU","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"ULVSFJL5R","text":"<@ULVSFJL5R> has joined the channel","ts":"1565331146.364400","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"9433835d-3deb-48aa-bd07-14f6beecf23f","type":"message","user":"UAZ33BKV2","text":"`--startuptime` オプションでいいかなと思う","ts":"1565331351.364900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c3b4d1b0-40a4-4fef-b06e-ba4185a6b26a","type":"message","user":"UAZ33BKV2","text":"<https://mattn.kaoriya.net/software/vim/20091104214557.htm>","ts":"1565331353.365100","attachments":[{"fallback":"Big Sky: Big Sky :: vimmer必読！読み込みの遅いvimscriptを見つけ出す方法","id":1,"title":"Big Sky :: vimmer必読！読み込みの遅いvimscriptを見つけ出す方法","title_link":"https://mattn.kaoriya.net/software/vim/20091104214557.htm","text":"システム開発屋がひっそり語るぼやき","thumb_url":"https://mattn.kaoriya.net/images/logo.png","blocks":null,"service_name":"Big Sky","service_icon":"https://mattn.kaoriya.net/favicon.ico","thumb_width":113,"thumb_height":113,"from_url":"https://mattn.kaoriya.net/software/vim/20091104214557.htm","original_url":"https://mattn.kaoriya.net/software/vim/20091104214557.htm"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4bc281fc-ddb4-4e80-96c7-7b8379c2f97a","type":"message","user":"U03C71D7H","text":"読まれたファイルが知りたいだけなら rapan931 さんの言う通り `:scriptnames` で見れます","ts":"1565331385.365700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c3192f3d-d386-4e18-8f37-827f3e3c0c23","type":"message","user":"UAZ33BKV2","text":"そっか、順序だけなら十分ですね","ts":"1565331423.366100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"416FEAA6-438E-4111-9D28-A55F362A3501","type":"message","user":"UDDCM376D","text":"あー、startupのやつあったなぁ","ts":"1565331914.366600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"D21CDE1D-0047-43A3-A2C5-DB55364CD9F4","type":"message","user":"UDDCM376D","text":"ありがとうございます\n問題解決しました\nプロファイルのような内容を見たかったので、ぴったりでした","ts":"1565331941.367500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"ULVT1UJ5Q","text":"<@ULVT1UJ5Q> has joined the channel","ts":"1565333124.367700","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"UM9F21XHC","text":"<@UM9F21XHC> has joined the channel","ts":"1565333578.368000","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null}]
