[{"type":"message","user":"U01P07ETTEY","text":"\u003c@U01P07ETTEY\u003e has joined the channel","ts":"1613912285.031000","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"4d935444-6462-465d-a80b-26d733e77a8f","type":"message","user":"U7JL1UKKL","text":"deinを更新してください","ts":"1613910878.030800","team":"T03C4RC8V","reactions":[{"name":"otz","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eu+y"}]},{"client_msg_id":"06c4b854-4f56-4348-811b-0a5c20c693d7","type":"message","user":"U7JL1UKKL","text":"置換をやめました","ts":"1613910870.030500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Gw=C"}]},{"client_msg_id":"bae40e46-d2b2-42c4-98a0-6b9adc1d904c","type":"message","user":"U7JL1UKKL","text":"ゲッ、これは困ったな","ts":"1613909897.030200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iaE"}]},{"client_msg_id":"5dc4c479-5a0b-4c08-980e-d8a0f0a2d23f","type":"message","user":"U01D9BALEKU","text":"L174のほうか。。。\n先頭`\"`から始まる行を高速化のために削除しているからっぽい\nでもこれ一行ずつじゃLuaブロックかどうか判定できんし難しそう","ts":"1613905505.029700","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UL6CFN8NR"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7Mu0u"}]},{"client_msg_id":"9cdbf93b-ecbc-45e3-8a1e-7d445fa0e0e3","type":"message","user":"U01D9BALEKU","text":"このへんかな","ts":"1613905033.028400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PkYIr"}]},{"client_msg_id":"d439e311-515b-4c38-9c18-bbf0abd61444","type":"message","user":"U01D9BALEKU","text":"\u003chttps://github.com/Shougo/dein.vim/blob/ddfe638a48/autoload/dein/parse.vim#L192\u003e","ts":"1613905029.028100","attachments":[{"fallback":"GitHub: Shougo/dein.vim","id":1,"title":"Shougo/dein.vim","title_link":"https://github.com/Shougo/dein.vim/blob/ddfe638a48/autoload/dein/parse.vim#L192","text":":zap: Dark powered Vim/Neovim plugin manager. Contribute to Shougo/dein.vim development by creating an account on GitHub.","thumb_url":"https://avatars.githubusercontent.com/u/41495?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/Shougo/dein.vim/blob/ddfe638a48/autoload/dein/parse.vim#L192","original_url":"https://github.com/Shougo/dein.vim/blob/ddfe638a48/autoload/dein/parse.vim#L192"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NJqE"}]},{"client_msg_id":"191cb408-92e7-4bd7-9ca4-ff2fc686565a","type":"message","user":"U01D9BALEKU","text":"しょーもない書き間違いしてたので微修正しました（結果には変更ないです）","ts":"1613903333.027700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HNRjT"}]},{"client_msg_id":"f987bf73-3989-4d4a-8883-3818292063c0","type":"message","user":"U01D9BALEKU","text":"起票しました","ts":"1613902953.026700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oge"}]},{"client_msg_id":"bbebcbab-7048-4a5f-8425-6a1fde0d5894","type":"message","user":"U01D9BALEKU","text":"\u003chttps://github.com/Shougo/dein.vim/issues/403\u003e","ts":"1613902917.026400","attachments":[{"fallback":"GitHub: A line starting \" in lua block in hook_* is executed as a comment. · Issue #403 · Shougo/dein.vim","id":1,"title":"A line starting \" in lua block in hook_* is executed as a comment. · Issue #403 · Shougo/dein.vim","title_link":"https://github.com/Shougo/dein.vim/issues/403","text":"Warning: I will close the bug issue without the minimal init.vim and the reproduce ways. Problems summary A line starting \u0026amp;quot; in lua block in hook_* is executed as a comment. Expected It should ...","thumb_url":"https://avatars.githubusercontent.com/u/41495?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/Shougo/dein.vim/issues/403","original_url":"https://github.com/Shougo/dein.vim/issues/403"}],"team":"T03C4RC8V","reactions":[{"name":"bow","count":2,"users":["UL6CFN8NR","U7JL1UKKL"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"k13dZ"}]},{"client_msg_id":"fe747e01-991b-4c34-93f4-1b0ee1446d56","type":"message","user":"U7JL1UKKL","text":"luaのインデックスはそうですね","ts":"1613902042.026000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yh=3"}]},{"client_msg_id":"0f6b9a9e-ea19-4c86-9ece-ca23f750f431","type":"message","user":"UL6CFN8NR","text":"`a[1]` ではないかと。Lua のインデックスは1始まりです","ts":"1613902025.025400","edited":{"user":"UL6CFN8NR","ts":"1613902031.000000"},"team":"T03C4RC8V","reactions":[{"name":"eyes","count":1,"users":["U01D9BALEKU"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZUDW"}]},{"client_msg_id":"ce920b70-c7a3-451b-bf7a-ade945b94403","type":"message","user":"U01D9BALEKU","text":"この書き方はさっき動いたはず。。。","ts":"1613902012.025000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7qyhE"}]},{"client_msg_id":"183d3ea5-55d3-47e2-8727-dd87f3595813","type":"message","user":"U01D9BALEKU","text":"```lua \u0026lt;\u0026lt; EOF\nlocal a = {\n  [[hoge]]\n}\nprint(a[0])\nEOF```\nとやってもnilになっちゃうんですが、呼び方間違ってますかね","ts":"1613902000.024700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=9R"}]},{"client_msg_id":"835c12bd-d008-4d39-b3f1-19473602f6ee","type":"message","user":"U01D9BALEKU","text":"（quickrunとかいれてないのでこういう検証作業のフットワークが悪い）","ts":"1613901836.023900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ELJW"}]},{"client_msg_id":"9cfe415b-da27-4b30-b9c8-d2469fbdcac7","type":"message","user":"UAZ33BKV2","text":"たぶん、これに渡されて呼ばれるはず\n\u003chttps://github.com/Shougo/dein.vim/blob/ddfe638a4837b74a6c1170c1bc84c2cb94151de2/autoload/dein/util.vim#L746\u003e\n各行を分割して配列にしてexecuteか...","ts":"1613901759.023400","attachments":[{"fallback":"GitHub: Shougo/dein.vim","id":1,"title":"Shougo/dein.vim","title_link":"https://github.com/Shougo/dein.vim/blob/ddfe638a4837b74a6c1170c1bc84c2cb94151de2/autoload/dein/util.vim#L746","text":":zap: Dark powered Vim/Neovim plugin manager. Contribute to Shougo/dein.vim development by creating an account on GitHub.","thumb_url":"https://avatars.githubusercontent.com/u/41495?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/Shougo/dein.vim/blob/ddfe638a4837b74a6c1170c1bc84c2cb94151de2/autoload/dein/util.vim#L746","original_url":"https://github.com/Shougo/dein.vim/blob/ddfe638a4837b74a6c1170c1bc84c2cb94151de2/autoload/dein/util.vim#L746"}],"edited":{"user":"UAZ33BKV2","ts":"1613902329.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CJ3+i"}]},{"client_msg_id":"387ec6cf-cfab-471c-9121-2897e826d556","type":"message","user":"U9S4G0LJW","text":"Neovim単体で\n```lua \u0026lt;\u0026lt; EOF\nlocal a = {\n\"hoge\"\n}\nEOF```\nとやってみたけど通るな","ts":"1613901702.022600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uF3"}]},{"client_msg_id":"4c13fb22-a0ce-44e3-b99c-ce947afcaf2c","type":"message","user":"U7JL1UKKL","text":"手元で確認するのでissue作ってもらえますか","ts":"1613901645.022000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"q6aY"}]},{"client_msg_id":"6cc47867-e40d-48c1-a419-fd79981fdaed","type":"message","user":"U7JL1UKKL","text":"ん？\ndein側のバグ？","ts":"1613901622.021500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"d2UE2"}]},{"client_msg_id":"5edd4699-4b9c-40f1-aa7d-2fc61d788851","type":"message","user":"U9S4G0LJW","text":"いや、Luaとしてもinvalidか、これは","ts":"1613901617.021200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IiHeF"}]},{"client_msg_id":"66d7a451-668c-47aa-8200-198e253d9e0d","type":"message","user":"U9S4G0LJW","text":"普通にNeovimで\n```lua \u0026lt;\u0026lt; EOF\n\"hoge\nEOF```\nとしたらこけましたね","ts":"1613901586.020800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mhc8"}]},{"client_msg_id":"90ffe5cf-b69f-4408-b75b-6617ce7272b7","type":"message","user":"UL6CFN8NR","text":"やはりダブルクオートから開始する行が（Lua のコードブロック内であっても）コメント行とみなされているような気がします。","ts":"1613901542.020200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"A7V"}]},{"client_msg_id":"ce433e75-1c69-40fb-9818-1d8b23a470eb","type":"message","user":"UL6CFN8NR","text":"```hook_post_source = '''\nlua \u0026lt;\u0026lt; EOF\nlocal dial = require(\"dial\")\ndial.config.searchlist.normal = {\"number#decimal\", \"number#hex\", \"number#binary\", \"date#[%Y/%m/%d]\",\n\"markup#markdown#header\" }\nEOF\n'''```\nとしてみると\n`[dein] Vim(lua):E5107: Error loading lua [string \":lua\"]:3: unexpected symbol near '\u0026lt;eof\u0026gt;'` というエラーがでてきますね。","ts":"1613901491.019500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yXzEG"}]},{"client_msg_id":"36aa1dae-142f-4086-84bb-b3f482213528","type":"message","user":"UAZ33BKV2","text":"だね...よくなさそう","ts":"1613901334.018700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yO7zO"}]},{"client_msg_id":"99dbf3b4-776c-4f9c-b8ca-8cd814dfd6b7","type":"message","user":"U01D9BALEKU","text":"ダブルクオート開始がコメント扱いされている説が正しそう","ts":"1613901317.018400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bPo57"}]},{"client_msg_id":"4b171e8c-1984-4cda-bffc-52c74a4e535d","type":"message","user":"U01D9BALEKU","text":"全部シングルクオートにしたら動きますね","ts":"1613901298.017800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yV5"}]},{"client_msg_id":"90749bcb-bba5-4501-9cca-9107f79f1bd7","type":"message","user":"UAZ33BKV2","text":"lua他のcodeblockをちゃんとevalできないなら、それはそれでまずいんだよな...","ts":"1613901200.017400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"b3x"}]},{"client_msg_id":"0960731c-a266-4fe8-ad83-cafbcd6f7cfc","type":"message","user":"U01D9BALEKU","text":"ああーそれっぽいと思ったけど luaブロック内でも起きるんですかね？","ts":"1613901184.017100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7Cl"}]},{"client_msg_id":"3a67df88-be41-45fc-882d-ab11d35abf7c","type":"message","user":"UAZ33BKV2","text":"deinのソースちょっと見たことあるけど、文字列としてevalするかなにかだったので、それ単体で悪いことにはならないはず\nというか、なったらバグかも...","ts":"1613901158.016100","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UL6CFN8NR"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UUG2="}]},{"client_msg_id":"87a15438-32b1-4972-91b4-6b2e4c8c6d4d","type":"message","user":"UL6CFN8NR","text":"もしかして、`hook_post_source` の引数の中に `\"number#decimal\",` のようにダブルクオートから始まる行を与えるとコメント行とみなされる、とかですかね…？","ts":"1613901116.015300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dmJA"}]},{"client_msg_id":"04edf37f-6ae9-437b-9e2f-fb68bfd932db","type":"message","user":"U01D9BALEKU","text":"`#` がなんかおかしくなるとかですかね","ts":"1613901072.014700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/lrT"}]},{"client_msg_id":"c857e774-31ef-41fc-8191-faed64637ce2","type":"message","user":"U01D9BALEKU","text":"うごきました","ts":"1613901018.013500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mzwhU"}]},{"client_msg_id":"f878e314-88ec-4039-9a5d-a29b084211c5","type":"message","user":"UL6CFN8NR","text":"私の環境で `dein.vim` を入れて最小構成で動かした限りだと、上のコードで動いたんですよね。","ts":"1613900954.013300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OM78q"}]},{"client_msg_id":"87bc6d0f-5053-4b51-b3d7-1cb20b6d70f4","type":"message","user":"UL6CFN8NR","text":"\u003c@U01D9BALEKU\u003e 上記の設定での指定ですが、以下のようにやってみてもらえますか？\n```hook_post_source = '''\nlua \u0026lt;\u0026lt; EOF\nlocal dial = require(\"dial\")\ndial.config.searchlist.normal = {\n    [[number#decimal]],\n    [[number#hex]],\n    [[number#binary]],\n    [=[date#[%Y/%m/%d]]=],\n    [[markup#markdown#header]]\n}\nEOF\n'''```\n単純に、ダブルクオートによる指定ではなく Lua の string literal 記法 `[[ ... ]]` を用いただけなんですが。","ts":"1613900899.012700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DvMJ"}]},{"client_msg_id":"ab3e9d9e-8092-475c-be12-9f2b72a14d6e","type":"message","user":"U01D9BALEKU","text":"ありがとうございます。tomlの外で設定すれば動くのでdialのせいではないと思いますが、不思議","ts":"1613899844.011500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XIX"}]},{"client_msg_id":"27db947b-f4d9-4103-a3f8-60d90f98874f","type":"message","user":"UL6CFN8NR","text":"`dial.config.searchlist.normal` が空テーブルとして扱われてる感じですかね。ちょっと見てみます。","ts":"1613899734.010800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RYIz"}]},{"client_msg_id":"41f7e611-d767-4353-a3b7-4f3258f58d3a","type":"message","user":"U01D9BALEKU","text":"（たぶんluaについて）質問：\ndial.nvimを使おうとしているのですが、`searchlist` を変更しようとするとうまくいきません\nプラグインマネージャはdein.vimです\n```[[plugins]]\nrepo = 'monaqa/dial.nvim'\nhook_post_source = '''\nlua \u0026lt;\u0026lt; EOF\nlocal dial = require(\"dial\")\ndial.config.searchlist.normal = {\n    \"number#decimal\",\n    \"number#hex\",\n    \"number#binary\",\n    \"date#[%Y/%m/%d]\",\n    \"markup#markdown#header\"\n}\nEOF\n'''```\n↑はエラーを吐きますが、hook_post_source内を普通のinit.vim内に書くと意図通りに動きました。\nhook部分がなければデフォルトの通りに動作するのを確認しています\nhook_post_sourceが呼ばれているのも確認してます（deinの読み込み後に`dein#call_hook('post_source')`してます）\n\nエラーは以下で、normalモードでだけエラーを吐きます\n```E5108: Error executing lua ...zuno/.cache/dein/.cache/init.vim/.dein/lua/dial/util.lua:70: The search_augends[2] is nil. nil is not allowed in valid list.```\nノーマルモードの設定がnilになってしまっているので、luaの変数スコープの理解がふわっとしてるからだと思うんですが\nどうしてこうなるんでしょうか？","ts":"1613895414.010100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"u76Hm"}]},{"type":"message","user":"U01P6EB6JRX","text":"\u003c@U01P6EB6JRX\u003e has joined the channel","ts":"1613890149.001800","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null}]
