[{"client_msg_id":"853ee36c-fff7-4e49-a24b-29b0e5af8104","type":"message","user":"UP6PA1UBE","text":"自作のバッチファイル使ってます、Windowsの Vim/gVim で Terminal API 動作してるんですが\n<https://gist.github.com/Milly/69d4aaaad1d4bd596f3ba43f5498374d>","ts":"1586765121.382600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mDWGv"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"474e7fda-2cc2-459e-ba12-d8c111fc389f","type":"message","user":"UP6PA1UBE","text":"なお、バッチファイルに普通にバイトコードが含まれている","ts":"1586765278.383100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CzflX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c490ae0c-fcc2-4c30-81ee-8d4eea7bb661","type":"message","user":"UA1GWETAA","text":"おおー、すごい！参考にさせてもらって、これで自分がやりたかったことはできました！ありがとうございます。\n```@echo off\nsetlocal\nset target=%~1\ngvim --servername %VIM_SERVERNAME% --remote-silent \"%target%\nendlocal```\nちなみに、gvim...の部分を `echo | set /p=]51;[\"drop\",\"%target:\\=\\\\%\"]` (gistの8行目)に変えると私の環境だとファイル開いてくれないですね。。何が違うのか。。","ts":"1586769501.386400","edited":{"user":"UA1GWETAA","ts":"1586770070.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"u+=F"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"A6B500B8-BE7A-401D-8AC2-F416B9A82DB4","type":"message","user":"UP6PA1UBE","text":"最近Windows10のcmd.exeの改良が進んでるのでバージョン違いの可能性\n古い環境無いので試せず","ts":"1586772833.388800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QMhsD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4D2CCC23-6388-44FB-92E3-5A94AFC7E401","type":"message","user":"UP6PA1UBE","text":"あ、vimはchocolateyのです","ts":"1586773090.389700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tv/W"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7ADC2CAD-E5C4-4872-A902-0B508B3CCAFA","type":"message","user":"UA1GWETAA","text":"なるほどです。 &gt; cmd.exeの改良\n自分のVimはinstallerで入れた8.2.0145?くらいだったはず。\n\nやりたいことできたと言いつつ任意のwindowで開くというのはやはり厳しかった。。\n任意のwindowで開くにはtsuyoshi_cho さんが言われたように&lt;c-w&gt;:して コマンド実行とかが良さそうですね。","ts":"1586775934.396100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XsD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"33222819-0822-4300-ace2-d6e56f12b49c","type":"message","user":"U6XP9LZ6V","text":"あれ？Win32版はTerminal APIは使えないのでは？\n<https://vim-jp.slack.com/archives/CJMV3MSLR/p1586746300373200>","ts":"1586779508.397000","attachments":[{"fallback":"[April 12th, 2020 7:51 PM] mattn: Windows は現状 Terminal API が動作しません。terminal の中で ESC を出力した場合 winpty は明示的に ESC を ? に置換しています。conpty はそもそも何も返さない(ESCを消してる)ので、vim でハンドルできない状況です。","id":1,"author_id":"U03C6TEAZ","author_name":"mattn","author_subname":"mattn","author_link":"https://vim-jp.slack.com/team/U03C6TEAZ","author_icon":"https://avatars.slack-edge.com/2018-07-31/407982080133_30e238cd92e6c88883f9_48.png","text":"Windows は現状 Terminal API が動作しません。terminal の中で ESC を出力した場合 winpty は明示的に ESC を ? に置換しています。conpty はそもそも何も返さない(ESCを消してる)ので、vim でハンドルできない状況です。","mrkdwn_in":["text"],"blocks":null,"footer":"Posted in #question","ts":1586746300.373200,"from_url":"https://vim-jp.slack.com/archives/CJMV3MSLR/p1586746300373200","original_url":"https://vim-jp.slack.com/archives/CJMV3MSLR/p1586746300373200"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dF9Iv"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"294590de-1e69-468b-b0df-af3324aea37f","type":"message","user":"UAZ33BKV2","text":"生でescのコードが書いてあるのは見えるけど、これも除去されたり置換されます、よね?\n/pでセットしてる?...よくわからない、というか難しい","ts":"1586779909.398200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Tka9H"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"add88d1c-64da-451f-aa2c-ef947ed6b8f2","type":"message","user":"U03C6TEAZ","text":"端末内のアプリが吐く ESC が vterm の中で取れればハンドルできるんですが、現状は vterm で取れないんです。","ts":"1586779986.399100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+neMB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5022612c-1701-49d8-a23e-bd6d39aa8df1","type":"message","user":"U03C6TEAZ","text":"winpty は昔はいけたけど、","ts":"1586780013.399500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uQ5ez"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1f60a927-aa7e-480f-9951-1b2f9763e491","type":"message","user":"U03C6TEAZ","text":"ある地点で ? に置換する修正が入った。","ts":"1586780024.400000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hkX0i"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b4585a9a-e4f8-469b-a8e9-bf0ebf4a9abd","type":"message","user":"U03C6TEAZ","text":"僕が言ってるのは直せば Windows でも Terminal API 動くって話をしました。直しようがないという意味で。","ts":"1586780148.401200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QBVe"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"34925529-c435-44ca-9499-371dc319eb48","type":"message","user":"UAZ33BKV2","text":"ええ、この中の人だとvimとかwindowsとか自体を直す話しなんだな、とわかりますが、初見だと誤解しやすいかもですねw","ts":"1586780205.402100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Si=5B"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5514c28f-7666-4a5b-8843-5d2b1484f33c","type":"message","user":"UP6PA1UBE","text":"なぜ動いてるんでしょうね？ `set /p=`  は改行を出力しないためのおまじないなので `echo` だけでも動作します。","ts":"1586781543.411200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"E9Lxl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c82832e5-a44f-4b6a-8862-97d5abc1c16b","type":"message","user":"U03C6TEAZ","text":"今試したら動く様になってるっぽい。","ts":"1586781648.411500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PsK2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d8f69d8f-7d42-46a0-9dc1-4bd462dc3699","type":"message","user":"U03C6TEAZ","text":"なんか動作変わったかな？","ts":"1586781656.411700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0XQqX"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0b0d0e51-a080-4470-8cf1-75d00745457f","type":"message","user":"U03C6TEAZ","text":"あ、いや。うそ。","ts":"1586781775.412000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"24lV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"81c2c714-a3b0-47c2-a507-1aaee6996093","type":"message","user":"UAZ33BKV2","text":"不思議","ts":"1586781775.412100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"T8rN"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"49376a75-dba9-4ebb-bf13-882b2943604a","type":"message","user":"UP6PA1UBE","text":"私の環境です\n```:version\n VIM - Vi IMproved 8.2 (2019 Dec 12, compiled Mar 31 2020 22:08:54)\n MS-Windows 64 ビット GUI 版 with OLE サポート\n 適用済パッチ: 1-488\n Compiled by appveyor@APPVYR-WIN```","ts":"1586781869.412800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DicW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"013eb5b4-50bf-40ce-b646-767e438f5121","type":"message","user":"U6XP9LZ6V","text":"お、conptyだと動いた。Win10 1909","ts":"1586782024.413600","team":"T03C4RC8V","reactions":[{"name":"subara","count":2,"users":["UA1GWETAA","UKHUVMBJR"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yZ7+w"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f0c72d17-218f-495c-be98-95c5481b5dc3","type":"message","user":"U03C6TEAZ","text":"お、動いた。 &gt; conpty","ts":"1586782096.414100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kRF9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"389a3491-312e-4517-ac47-14a63262919d","type":"message","user":"U03C6TEAZ","text":"conpty の動きが変わったか？","ts":"1586782107.414400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+wPA8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9a34359f-aefe-4d7d-a85a-659dc98428bc","type":"message","user":"UP6PA1UBE","text":"スクリプト作成したのが2020/3/10となってて少なくともその時点で動いていたはず","ts":"1586782438.415500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ye5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"245a714a-e49c-4940-82d1-9fc1fbb445bf","type":"message","user":"U03C6TEAZ","text":"なんかわかった。","ts":"1586782518.415800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tU=um"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"55b52a16-86b9-4134-aee2-f68cf8258d5f","type":"message","user":"U03C6TEAZ","text":"exe で同じエスケープシーケンス吐くの実行しても動かない。","ts":"1586782533.416200","team":"T03C4RC8V","reactions":[{"name":"fearful","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kP+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d11dca8f-3b9e-410a-b9a4-0f74f81e3102","type":"message","user":"U03C6TEAZ","text":"おもしろい。","ts":"1586782537.416400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"C5qu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e20cdb22-ff8b-4f5b-a94b-54d70f8a58e0","type":"message","user":"U03C6TEAZ","text":"```#include &lt;stdio.h&gt;\n\nint main() {\n  printf(\"\\x1b]51;[\\\"drop\\\",\\\"foo\\\"]\\x07\");\n  return 0;\n}```","ts":"1586782564.416800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eFT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6d2b4b9e-1e59-4226-ab70-42f929fcc07d","type":"message","user":"U03C6TEAZ","text":"これで `a.exe&gt;b` したものと terminal 内で `vopen.cmd foo&gt;c` した中身同じなのにw","ts":"1586782590.417400","team":"T03C4RC8V","reactions":[{"name":"fearful","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cCf/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e866c7c7-89e7-4603-813c-d0677c18a0e9","type":"message","user":"U6XP9LZ6V","text":"`ENABLE_VIRTUAL_TERMINAL_PROCESSING` がいるとか？","ts":"1586782609.418200","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UP6PA1UBE"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/Obu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fbe56d0a-677d-45bb-9f1e-24b98a00d24a","type":"message","user":"UAZ33BKV2","text":"プロセスの出力なのか、cmdが内部(バッチ)でやってるか、で扱いが違うのかな","ts":"1586782622.418600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"N5Z"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f67a48ea-c981-42fd-9d3c-017626abc5f3","type":"message","user":"U03C6TEAZ","text":"exe 起動すると ENABLE_VIRTUAL_TERMINAL_PROCESSING 落ちる？","ts":"1586782631.418800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6ZM"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"107c4b73-0696-4317-a64f-515a58e70e8d","type":"message","user":"U6XP9LZ6V","text":"プロセスはまたがなかったような","ts":"1586782649.419100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0P9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b1d800ba-921e-4006-8698-675f2521deef","type":"message","user":"U03C6TEAZ","text":"それか。","ts":"1586782657.419300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RLR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7aaf909a-d75c-4e51-a8c4-c493fe1bef08","type":"message","user":"U03C6TEAZ","text":"てことは tyru さんのも直せるな。","ts":"1586782672.419700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9Tl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"540ade96-a614-4cd1-a379-9d3a3bfc4bd1","type":"message","user":"U03C6TEAZ","text":"ちがう tyru さんのじゃない。僕の gof だ。","ts":"1586782682.420000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OVd"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"153d282c-9473-4eca-994e-691fca05015a","type":"message","user":"U03C6TEAZ","text":"お、gof 動いた。","ts":"1586782836.420200","team":"T03C4RC8V","reactions":[{"name":"subara","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"McXMa"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3235b9cb-5a54-45c1-b51c-3411712a14fb","type":"message","user":"U03C6TEAZ","text":"Windows で Tapi 有効になった gof  v0.0.9 リリースしました。","ts":"1586782930.420900","team":"T03C4RC8V","reactions":[{"name":"+1","count":6,"users":["UP6PA1UBE","UKHUVMBJR","U7B4ZD49X","U76GA7MFA","U9S4G0LJW","UA1GWETAA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SbJDJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"180211fe-90f7-4220-b58f-544c9d6af03a","type":"message","user":"U03C6TEAZ","text":"2行修正 <https://github.com/mattn/gof/commit/f760633d5da4617c5f635af93687ad5bc10ad5b0#diff-7ddfb3e035b42cd70649cc33393fe32cR410>","ts":"1586783002.421500","attachments":[{"fallback":"GitHub: Enable TAPI on Windows · mattn/gof@f760633","id":1,"title":"Enable TAPI on Windows · mattn/gof@f760633","title_link":"https://github.com/mattn/gof/commit/f760633d5da4617c5f635af93687ad5bc10ad5b0#diff-7ddfb3e035b42cd70649cc33393fe32cR410","text":"Contribute to mattn/gof development by creating an account on GitHub.","thumb_url":"https://avatars1.githubusercontent.com/u/10111?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/mattn/gof/commit/f760633d5da4617c5f635af93687ad5bc10ad5b0#diff-7ddfb3e035b42cd70649cc33393fe32cR410","original_url":"https://github.com/mattn/gof/commit/f760633d5da4617c5f635af93687ad5bc10ad5b0#diff-7ddfb3e035b42cd70649cc33393fe32cR410"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5fPa="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2a8e5333-73ea-4076-81c6-ce6e021dc00d","type":"message","user":"UP6PA1UBE","text":"Windows10 1511 以降なら動作する、ということですかね","ts":"1586783143.422900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HHgJb"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f8d14872-fde6-406e-a27b-8761aa236081","type":"message","user":"U6XP9LZ6V","text":"conptyが必要なので1810以降かと","ts":"1586784658.423700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Lyl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9649ec2f-466b-4193-8d6f-fddc0356238c","type":"message","user":"U03C6TEAZ","text":"まだ winpty だけどそろそろ conpty にスイッチすべきかなぁ。","ts":"1586784958.424100","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Gg0yi"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c4da4157-b95b-408a-8f0b-9b53a62512fd","type":"message","user":"U03C6TEAZ","text":"```:terminal ++close gof -t```\nしてファイル開いたら vim が落ちた。","ts":"1586785350.424700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Pu+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5374ba1c-ff27-4b2e-a0cc-a892f8b79b5b","type":"message","user":"U03C6TEAZ","text":"そして再現しない...","ts":"1586785460.424900","team":"T03C4RC8V","reactions":[{"name":"fearful","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ydtm8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U011PBUFU5R","text":"<@U011PBUFU5R> has joined the channel","ts":"1586707266.365000","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U011Q0K25T7","text":"<@U011Q0K25T7> has joined the channel","ts":"1586736188.365500","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"429a758a-f67e-4318-ad1d-0f72baa322b1","type":"message","user":"UA1GWETAA","text":"[質問]\nWindowsで `:terminal` コマンド実行して `cmd.exe` 開いた場合に そこから terminal-api(参考 `h: terminal-api` )を使うことできるのでしょうか？\nterminal上で見つけたファイルをVim(terminal以外のwindow)でファイル開きたいことが多々あり、いつも\ndirとか使ってパス出力→パスコピー→terminal以外のwindowに移動→ `:e &lt;コピーしたパス&gt;` とやっていて、不便でして。。\n何か良い方法(terminal-api or それ以外)あれば教えていただきたいです。\n\nちなみにterminal-apiは helpにある `&lt;Esc&gt;]51;[\"drop\", \"<http://README.md|README.md>\"]&lt;07&gt;` を試してみましたが、使えませんでした。。","ts":"1586746178.371500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Kn9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0037aa8d-9083-471c-ace0-a626445ff9d9","type":"message","user":"U03C6TEAZ","text":"Windows は現状 Terminal API が動作しません。terminal の中で ESC を出力した場合 winpty は明示的に ESC を ? に置換しています。conpty はそもそも何も返さない(ESCを消してる)ので、vim でハンドルできない状況です。","ts":"1586746300.373200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"H9aW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0297da7b-7e8d-4f29-a27a-80a2b39f2425","type":"message","user":"UA1GWETAA","text":"やはり使えないのですね。。 ＞ Windows は現状 Terminal API が動作しません。\n情報ありがとうございます :bow:","ts":"1586746457.374000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Zk5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b12c673c-f340-48a3-922d-643b94ed217c","type":"message","user":"U03C6TEAZ","text":"僕もなんとかしたいんですけどね。","ts":"1586746482.374400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sUiVm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e61c67d3-6dfa-4a21-92ef-707b42753b10","type":"message","user":"UAZ33BKV2","text":"とりあえずですが、パスコピー後は、そのままC-Wでコマンドウィンドウにいって `split new` でも `tabnew` でもいいですが、他ウィンドウでバッファ開くコマンドを使えば、もうちょっとラクじゃないかな、と思います","ts":"1586746675.376000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ixj"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"10adf5f7-caf6-4665-b347-9043b5c47c5f","type":"message","user":"UAZ33BKV2","text":"<https://github.com/tyru/empty-prompt.vim>\nもあわせて使えば、もうちょっとラクになる、かな","ts":"1586746709.376800","attachments":[{"fallback":"GitHub: tyru/empty-prompt.vim","id":1,"title":"tyru/empty-prompt.vim","title_link":"https://github.com/tyru/empty-prompt.vim","text":"Vim plugin to add mappings only when shell prompt is empty - tyru/empty-prompt.vim","thumb_url":"https://avatars2.githubusercontent.com/u/48169?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/tyru/empty-prompt.vim","original_url":"https://github.com/tyru/empty-prompt.vim"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kRBU="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"51fd92a2-88cb-45f9-91fe-b51a0d7da378","type":"message","user":"U03C6TEAZ","text":"もしかしたらだけど winpty の場合は `term_gettty(bufnr('.'))` で得られる named pipe に書き込んでやれば何かは得られるかも。","ts":"1586746718.377000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JuOZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d923c9f1-b720-4fa8-9e2c-8fc385d2d969","type":"message","user":"UA1GWETAA","text":"そういえば `empty-prompt.vim` スターつけて後で入れようとしたまま入れてなかったｗ まずはこれ入れてみます！","ts":"1586747005.378000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"q0Ph"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b949824f-bfad-49c0-bd0e-71a41c5176fc","type":"message","user":"UA1GWETAA","text":"terminal上で `&lt;C-w&gt;:term_gettty(bufnr('.'))` 実行したら、`\\\\.\\pipe\\winpty-coout-xxxxxxxxxxx` というの取れたので、自分の環境はwinptyを使っていそうでした。\n名前付きパイプ is 何という状況ですが、いろいろ調べてみます！","ts":"1586750385.380000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9JYm3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U011WJ8K6UU","text":"<@U011WJ8K6UU> has joined the channel","ts":"1586753292.380200","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"1b3d8562-d0b3-4448-acf1-e1f4677b7f2a","type":"message","user":"UP6PA1UBE","text":"もしかして `%userprofile%\\clink` が読み込まれないという話でしょうか？\nclink は `~` を `%localappdata%` に置換するので `clink.bat inject --profile %userprofile%\\clink`  と書く必要があります。","ts":"1586761014.380400","thread_ts":"1586478530.186300","parent_user_id":"UAZ33BKV2","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RueFb"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b56501c5-2e7d-4e0d-b72e-ba9928d8ee13","type":"message","user":"UAZ33BKV2","text":"あー... なるほど、ありがとうございます。","ts":"1586761082.380600","thread_ts":"1586478530.186300","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XC5=U"}],"root":{"client_msg_id":"e13e75fc-4e67-4af6-9747-2606e63bca41","type":"message","user":"UAZ33BKV2","text":"解決した...けど、バッチファイルのprofileの指定じゃなくて、appdata/local/clinkが効くのなんか納得いかない...\n現在の状況\n<https://gyazo.com/3299c21e09c3ba1fd5109153f90877a6>","ts":"1586478530.186300","thread_ts":"1586478530.186300","attachments":[{"fallback":"Gyazo Photo: ","id":1,"title_link":"https://gyazo.com/3299c21e09c3ba1fd5109153f90877a6","image_url":"https://i.gyazo.com/3299c21e09c3ba1fd5109153f90877a6.png","blocks":null,"service_name":"Gyazo","service_icon":"https://gyazo.com/favicon.ico","from_url":"https://gyazo.com/3299c21e09c3ba1fd5109153f90877a6","original_url":"https://gyazo.com/3299c21e09c3ba1fd5109153f90877a6"}],"reply_count":3,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"n6K6"}]}},{"client_msg_id":"77e9702f-5d9a-4ea7-af67-0cc0c925d9a2","type":"message","user":"UP6PA1UBE","text":"cmd.exe はパス展開とかしてくれないので、その辺は各プログラムの実装次第なのでそうなりますね","ts":"1586761166.380900","thread_ts":"1586478530.186300","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3QYAH"}],"root":{"client_msg_id":"e13e75fc-4e67-4af6-9747-2606e63bca41","type":"message","user":"UAZ33BKV2","text":"解決した...けど、バッチファイルのprofileの指定じゃなくて、appdata/local/clinkが効くのなんか納得いかない...\n現在の状況\n<https://gyazo.com/3299c21e09c3ba1fd5109153f90877a6>","ts":"1586478530.186300","thread_ts":"1586478530.186300","attachments":[{"fallback":"Gyazo Photo: ","id":1,"title_link":"https://gyazo.com/3299c21e09c3ba1fd5109153f90877a6","image_url":"https://i.gyazo.com/3299c21e09c3ba1fd5109153f90877a6.png","blocks":null,"service_name":"Gyazo","service_icon":"https://gyazo.com/favicon.ico","from_url":"https://gyazo.com/3299c21e09c3ba1fd5109153f90877a6","original_url":"https://gyazo.com/3299c21e09c3ba1fd5109153f90877a6"}],"reply_count":3,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"n6K6"}]}}]
