[{"client_msg_id":"66cc5f7b-92a7-4c2c-872d-facb57190488","type":"message","user":"UAZ33BKV2","text":"\u003chttps://github.com/vim-jp/vital.vim/blob/1b9fab508176efd8bc3fcbc435afd8d7b928ef53/autoload/vital/__vital__/Color.vim#L92-L99\u003e\nfilereadableで見る以上、外界へのアクセスになっちゃうだろうな...","ts":"1600075551.041600","attachments":[{"fallback":"GitHub: vim-jp/vital.vim","id":1,"title":"vim-jp/vital.vim","title_link":"https://github.com/vim-jp/vital.vim/blob/1b9fab508176efd8bc3fcbc435afd8d7b928ef53/autoload/vital/__vital__/Color.vim#L92-L99","text":"A comprehensive Vim utility functions for Vim plugins - vim-jp/vital.vim","thumb_url":"https://avatars2.githubusercontent.com/u/1051958?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/vim-jp/vital.vim/blob/1b9fab508176efd8bc3fcbc435afd8d7b928ef53/autoload/vital/__vital__/Color.vim#L92-L99","original_url":"https://github.com/vim-jp/vital.vim/blob/1b9fab508176efd8bc3fcbc435afd8d7b928ef53/autoload/vital/__vital__/Color.vim#L92-L99"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"V3dd"}]},{"client_msg_id":"b16e8845-3b0d-4d91-b69b-14ed3db8a5a3","type":"message","user":"UAZ33BKV2","text":"```Run echo tmp output\n  echo tmp output\n  vim -u NONE -N -E -s -c \"redir! \u0026gt; ls.txt\" -c \"let out=readdir(expand('$' . 'VIMRUNTIME'))\" -c \"echo out\" -c \"redir END\" -c \"qall!\"\n  cat ls.txt\n  shell: /bin/bash -e {0}\n  env:\n    THEMIS_VERSION: v1.5.4\n    LUA_VERSION: 5.3.5\n    OS: macos-latest\n    VIM: vim-head\ntmp output\n\nE484: Can't open file vim-head\n[]```\nそっか Docker内のvimは実行ファイル単体だとDocker内のファイルへのアクセスはするけど、コマンドでファイルR/Wするときはホスト側のしかできない...になるはず?","ts":"1600075126.041000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kIs"}]},{"client_msg_id":"d0f49fde-4647-4772-9f98-9e3f4ae1bb8d","type":"message","user":"UAZ33BKV2","text":"どうにか出力できました。\nDump Infoと Run testのruntime情報などを見比べると見えますが、runtimeのパスをreaddirしたらE484 Can't open fileですね(ある意味そうかな、という状況ですが)\n\u003chttps://github.com/tsuyoshicho/vital.vim/pull/5/checks?check_run_id=1111278156\u003e\nコマンドを手元で試せば、実行できることは確認できるかと思います...","ts":"1600075055.039900","attachments":[{"fallback":"GitHub: deubg PR : color name by tsuyoshicho · Pull Request #5 · tsuyoshicho/vital.vim","id":1,"title":"deubg PR : color name by tsuyoshicho · Pull Request #5 · tsuyoshicho/vital.vim","title_link":"https://github.com/tsuyoshicho/vital.vim/pull/5/checks?check_run_id=1111278156","thumb_url":"https://avatars2.githubusercontent.com/u/96727?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/tsuyoshicho/vital.vim/pull/5/checks?check_run_id=1111278156","original_url":"https://github.com/tsuyoshicho/vital.vim/pull/5/checks?check_run_id=1111278156"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zV+x"}]},{"client_msg_id":"e272c7c1-e217-4a36-964e-b3c8b4773fb2","type":"message","user":"UAZ33BKV2","text":"いろいろおこってるので、1つづつ考えていて、まず $VIMRUNTIME がダメな感じになってるのを探ってはいますが...\nつぎはテストとは別に内容を吐かせるか...","ts":"1600070048.038200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xntTl"}]},{"client_msg_id":"76273aca-5698-42d9-b04c-250673cad65b","type":"message","user":"U03C71D7H","text":"なんで古いバージョンになってしまうんだろう","ts":"1600069350.037100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mqG"}]},{"client_msg_id":"70004699-71e4-4c04-91fb-1447317690aa","type":"message","user":"UAZ33BKV2","text":"あとちょっと気にしてたこと\n• ここがvim81なこと\n• \u003chttps://github.com/tsuyoshicho/vital.vim/pull/5/checks?check_run_id=1110739898\u003e で linux vim head が v8.2.1145 になってしまっていること(キャッシュ?)\nですかねえ...さらに言うとこっちのキャッシュされてる風のやつはテストパスしてるんですよね、なんなんだ","ts":"1600069167.036600","attachments":[{"fallback":"GitHub: deubg PR : color name by tsuyoshicho · Pull Request #5 · tsuyoshicho/vital.vim","id":1,"title":"deubg PR : color name by tsuyoshicho · Pull Request #5 · tsuyoshicho/vital.vim","title_link":"https://github.com/tsuyoshicho/vital.vim/pull/5/checks?check_run_id=1110739898","thumb_url":"https://avatars2.githubusercontent.com/u/96727?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/tsuyoshicho/vital.vim/pull/5/checks?check_run_id=1110739898","original_url":"https://github.com/tsuyoshicho/vital.vim/pull/5/checks?check_run_id=1110739898"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7My"}]},{"client_msg_id":"81bf4c35-e9a8-49bc-bf24-4a3b099fc408","type":"message","user":"UAZ33BKV2","text":"たとえばvim8.2.0000/ubuntuで\n```\u0026amp;runtimepath:\n  /home/runner/work/vital.vim/vital.vim/vim-themis\n  /home/runner/work/vital.vim/vital.vim\n  /home/runner/.vim\n  vim-v8.2.0000/vimfiles\n  /tmp/.mount_vimyTLqMi/usr/share/vim/vim81\n  vim-v8.2.0000/vimfiles/after\n  /home/runner/.vim/after```\nに対して\n```Failures:\n  1) Color color_name\n     function 1916() dict  Line:1  (~/work/vital.vim/vital.vim/test/Color.vim line 27)\n     function \u0026lt;SNR\u0026gt;207_parse(str) abort  Line:47  (~/work/vital.vim/vital.vim/autoload/vital/__vital__/Color.vim line 64)\n     \n     vital: Color: parse(): invalid format: Yellow message : not readable:/tmp/.mount_vimyTLqMi/usr/share/vim/vim81/rgb.txt glob : ''```\nみたいな結果になっている、と\n\n(ここでvim81なのも疑問はありますが...)\n\u003chttps://github.com/tsuyoshicho/vital.vim/pull/5/checks?check_run_id=1110739878\u003e","ts":"1600068288.035000","attachments":[{"fallback":"GitHub: deubg PR : color name by tsuyoshicho · Pull Request #5 · tsuyoshicho/vital.vim","id":1,"title":"deubg PR : color name by tsuyoshicho · Pull Request #5 · tsuyoshicho/vital.vim","title_link":"https://github.com/tsuyoshicho/vital.vim/pull/5/checks?check_run_id=1110739878","thumb_url":"https://avatars2.githubusercontent.com/u/96727?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/tsuyoshicho/vital.vim/pull/5/checks?check_run_id=1110739878","original_url":"https://github.com/tsuyoshicho/vital.vim/pull/5/checks?check_run_id=1110739878"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Eo4g"}]},{"client_msg_id":"7f227f05-c866-4adf-84e5-749f92270020","type":"message","user":"U03C71D7H","text":"ほむ…","ts":"1600068169.033500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9v89w"}]},{"client_msg_id":"512ea333-0a11-4a70-a908-4133155d2797","type":"message","user":"UAZ33BKV2","text":"non-guiでもrgb.txtははいってますね...(手元環境)","ts":"1600068078.033300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"L=v"}]},{"client_msg_id":"fb569d35-85da-4abe-8ffa-522999c88b0e","type":"message","user":"UAZ33BKV2","text":"`glob('$VIMRUNTIME')` して空なんですよね、さすがにそれはないはず...うーん","ts":"1600068035.032900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0/e"}]},{"client_msg_id":"b8ddd753-c095-479b-b9e0-0f941377d178","type":"message","user":"U03C71D7H","text":"gvim じゃないと入らないとかかな","ts":"1600067967.032200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mjV"}]},{"client_msg_id":"d26f3f04-aa68-4386-b6dc-1866a80a76a0","type":"message","user":"UAZ33BKV2","text":"glob、rgp.* で試してるので、runtime下全部だしてみるか...","ts":"1600064964.032000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cp/=L"}]},{"client_msg_id":"e8a650ff-46e7-4cd6-b926-2c55f802a67d","type":"message","user":"UAZ33BKV2","text":"すぐに何か、というのはないので、なんか思いつたら指摘していただけるだけでも助かります。","ts":"1600064674.031300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"R7xg"}]},{"client_msg_id":"7ff87a94-236a-487d-8ed3-2bcc3a7a6121","type":"message","user":"UAZ33BKV2","text":"ですよね...コード見るかぎりで、特別な処置じゃないよなあ...とは思いました。\nただ見えないと言われて困惑中...","ts":"1600064633.030600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"s1QOR"}]},{"client_msg_id":"322b4b63-9ca5-4405-9f0e-f2dcedb34c40","type":"message","user":"U03C71D7H","text":"普通に install しているだけのはずだけどな…","ts":"1600064600.030000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"C0Vf"}]},{"client_msg_id":"ccb98d38-2a4f-4478-a050-ceb3f0e3434b","type":"message","user":"UAZ33BKV2","text":"\u003c@U03C71D7H\u003e さん、thinca/action-setup-vimについて確認させてください\nthinca/action-setup-vimでruntimeのファイルは現在どんな扱いなのでしょうか?\n現象 vital.vim の GitHub workflow化でColorがtest NGになる問題があり、確認してみたところ 付属の rgb.txt が見付けられないようなのです\n\u003chttps://github.com/tsuyoshicho/vital.vim/actions/runs/253302698\u003e\nテストでNGになる経路にログと glob 結果を吐かせてみたところ empty に見えてて、filereadableじゃないと判断している様子","ts":"1600064564.029600","attachments":[{"fallback":"GitHub: tsuyoshicho/vital.vim","id":1,"title":"tsuyoshicho/vital.vim","title_link":"https://github.com/tsuyoshicho/vital.vim/actions/runs/253302698","text":"A comprehensive Vim utility functions for Vim plugins - tsuyoshicho/vital.vim","thumb_url":"https://avatars2.githubusercontent.com/u/96727?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/tsuyoshicho/vital.vim/actions/runs/253302698","original_url":"https://github.com/tsuyoshicho/vital.vim/actions/runs/253302698"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"J/qA"}]}]
