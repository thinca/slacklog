[{"client_msg_id":"207b866b-b307-4302-9a90-1638af0735ca","type":"message","user":"UP6PA1UBE","text":"この時は900MBくらい","ts":"1610374271.209400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"i6GrH"}]},{"client_msg_id":"38c50609-9360-4896-ab41-14a6e0cb8435","type":"message","user":"UP6PA1UBE","text":"node_modules まるごとキャッシュしたら v1 の時は結構遅くて、v2 にしたら劇的に改善したんですが。","ts":"1610374225.209000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qKT5x"}]},{"client_msg_id":"b8398efc-d48c-4dc6-8489-ad7d324e1b77","type":"message","user":"UNJ2DANJC","text":"キャッシュ使ったらなんか遅くなったっての意外とあるある","ts":"1610371065.208400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DNAc"}]},{"client_msg_id":"f692f1ac-d53b-407c-98a9-0c8bf68135e6","type":"message","user":"U03C71D7H","text":"どっちもダウンロードするだけなので、小細工しても変わらなそうな気もする","ts":"1610370905.207800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zL9t"}]},{"client_msg_id":"EBA5FA79-5A09-46F8-8D5F-AFAAA9A1AD92","type":"message","user":"UDDCM376D","text":"イメージのrestoreに時間かかるの、地味にツライ","ts":"1610366620.207100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Jnt"}]},{"client_msg_id":"90893683-182f-4d8c-bcf2-236212144690","type":"message","user":"UAZ33BKV2","text":"推奨がv2でv2系を追尾させてるはずなので、それでいいはず","ts":"1610366007.206400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HG5"}]},{"client_msg_id":"d957d5bb-e3b8-4090-a126-a93d0b5019d4","type":"message","user":"UDDCM376D","text":"とくにドキュメントに書いていないな\nってことは @v2を指定すれば自動的に最新になるってことかな","ts":"1610362783.205900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"s5DL"}]},{"client_msg_id":"b8d8b957-97ab-4414-b1a8-26f47580c9c7","type":"message","user":"UDDCM376D","text":"withでバージョン指定できるんでしたっけ？","ts":"1610362747.205500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hj1I"}]},{"client_msg_id":"83e77d3f-5bac-4b36-9026-9a9aeb1adee3","type":"message","user":"UDDCM376D","text":"cache@v2使っていますね","ts":"1610362710.205200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"imvG"}]},{"client_msg_id":"d65cc1c6-46e5-4f32-89e8-2a730b6d82f3","type":"message","user":"UP6PA1UBE","text":"v2.1.0 で改善されたんだった \u003chttps://github.com/actions/cache/issues/381\u003e","ts":"1610361766.204700","attachments":[{"fallback":"GitHub: Very slow cache restoration · Issue #381 · actions/cache","id":1,"title":"Very slow cache restoration · Issue #381 · actions/cache","title_link":"https://github.com/actions/cache/issues/381","text":"Restoring cache sometimes works quite fast and sometimes extremely slow. E.g. fast restoration: \u003chttps://github.com/iNikem/opentelemetry-java-instrumentation/runs/889712406?check_suite_focus=true\u003e Ve...","thumb_url":"https://avatars2.githubusercontent.com/u/44036562?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/actions/cache/issues/381","original_url":"https://github.com/actions/cache/issues/381"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0mIz"}]},{"client_msg_id":"984ef4ef-2958-43cd-823d-7203a1451cbb","type":"message","user":"UP6PA1UBE","text":"cache@v2 使ってます？ @v1 より速度が改善されてますが。","ts":"1610361615.204300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"svVi"}]},{"client_msg_id":"86045475-95b0-44a2-ba55-1d437cb0c539","type":"message","user":"UDDCM376D","text":"キャッシュ聞かせたら、resoterのオーバーヘッドで実行時間が伸びたという","ts":"1610342305.203600","team":"T03C4RC8V","reactions":[{"name":"gunnyari","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+n63x"}]},{"client_msg_id":"645176a3-3f20-4e4f-800c-a8bb9b89b076","type":"message","user":"U01D44KSY9Z","text":"GHA、runnerユーザーのUIDが1001なの罠ですねこれ","ts":"1610336781.203000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hOcLM"}]},{"client_msg_id":"4e0c7a93-1477-4926-9988-1786657e5ed3","type":"message","user":"UDDCM376D","text":"できた","ts":"1610336534.202500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KVc"}]},{"client_msg_id":"fcd41fd5-39f6-43fc-992c-69460426679d","type":"message","user":"UAZ33BKV2","text":"DockerなAction、中身が変ってることあるから、というのもありますが...\nまあユーザーがキャッシュするパッケージ関係のは上のでできるし、ですね","ts":"1610336065.202300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OlO"}]},{"client_msg_id":"9684abaf-f67b-4cc1-a1c9-d8b3f4646a86","type":"message","user":"UDDCM376D","text":"やってみよ","ts":"1610335618.201200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"i53f"}]},{"client_msg_id":"48ebce6d-5831-4d21-a1bb-dbda776f6adb","type":"message","user":"UDDCM376D","text":"これを使えば良さそう","ts":"1610335610.200900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BMo"}]},{"client_msg_id":"ba1aa0ec-3c7c-4eb1-aa85-c50b66c07a83","type":"message","user":"U9S4G0LJW","text":"らしいので","ts":"1610335594.200600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Gq2"}]},{"client_msg_id":"6b07e789-24c2-4f15-9e8f-691647b19510","type":"message","user":"UDDCM376D","text":"ほんまや","ts":"1610335594.200500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"n/3"}]},{"client_msg_id":"6277aec9-19c3-4a67-a72e-bdec1d226373","type":"message","user":"U9S4G0LJW","text":"\u0026gt; This GitHub Action uses the docker save / docker load command and the @actions/cache library.","ts":"1610335590.200100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RS0K"}]},{"client_msg_id":"478d784b-4f30-45fe-8043-9e927d39da40","type":"message","user":"UDDCM376D","text":"docker save とloadがやっぱ安定かな","ts":"1610335564.199700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"T2U="}]},{"client_msg_id":"ad0354bd-ead4-45c8-89f5-b463dbaa97ff","type":"message","user":"U9S4G0LJW","text":"多分それをやってるのが上に貼ったLayer Cachingではないかな","ts":"1610335559.199500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ik2"}]},{"client_msg_id":"bf6f35b1-45ea-4aed-afeb-c58f97747b6f","type":"message","user":"UDDCM376D","text":"↑失敗しているって書いてあるｗ","ts":"1610335546.199100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eEmLo"}]},{"client_msg_id":"b438f1d3-4d40-4ac2-8953-32a89d4d2354","type":"message","user":"UDDCM376D","text":"\u0026gt; *Cache /var/lib/docker with `actions/cache` *:exploding_head:\nこれも考えたけど、ちょっと危険かな（内部で他のメタデータを持っている可能性があるので）","ts":"1610335512.198200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Gjg"}]},{"client_msg_id":"bddf42b6-df66-430b-82a8-4ab186298504","type":"message","user":"UDDCM376D","text":"これをやっているactionありそうだけど","ts":"1610335470.197600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Zs3"}]},{"client_msg_id":"db2b1702-26dc-4885-b647-35345a984b36","type":"message","user":"UDDCM376D","text":"標準のcache機構があるので、そこにsaveでイメージを保存して、loadで戻す","ts":"1610335453.197100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=TVU9"}]},{"client_msg_id":"01f79f19-b55c-4af2-b2df-93919b698db8","type":"message","user":"UDDCM376D","text":"\u0026gt; *Use `docker save` and `docker load` with `actions/cache` *:package:\nこれ良さそうな気がします","ts":"1610335413.196500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gfb"}]},{"client_msg_id":"356d9e51-d5e9-40c1-8c13-35e3e9204ef4","type":"message","user":"UDDCM376D","text":"\u003chttps://dev.to/dtinth/caching-docker-builds-in-github-actions-which-approach-is-the-fastest-a-research-18ei\u003e","ts":"1610335400.196100","attachments":[{"fallback":"DEV Community: Caching Docker builds in GitHub Actions: Which approach is the fastest? 🤔 A research.","id":1,"title":"Caching Docker builds in GitHub Actions: Which approach is the fastest? :thinking_face: A research.","title_link":"https://dev.to/dtinth/caching-docker-builds-in-github-actions-which-approach-is-the-fastest-a-research-18ei","text":"I tried out 6 different ways to re-use a Docker build cache from previous builds in GitHub Actions to find out which way is the fastest.","image_url":"https://res.cloudinary.com/practicaldev/image/fetch/s--YE7MuCbO--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/i/q437vfnb05k6ewqsq4q6.png","blocks":null,"service_name":"DEV Community","service_icon":"https://res.cloudinary.com/practicaldev/image/fetch/s--gDM0_LTS--/c_limit,f_png,fl_progressive,q_80,w_180/https://practicaldev-herokuapp-com.freetls.fastly.net/assets/devlogo-pwa-512.png","from_url":"https://dev.to/dtinth/caching-docker-builds-in-github-actions-which-approach-is-the-fastest-a-research-18ei","original_url":"https://dev.to/dtinth/caching-docker-builds-in-github-actions-which-approach-is-the-fastest-a-research-18ei"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VJt"}]},{"client_msg_id":"f7b2e62c-949d-4118-b3df-ecb07e07a0f5","type":"message","user":"UDDCM376D","text":"手じゃないすね","ts":"1610335400.195900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jEi"}]},{"client_msg_id":"7eb5f416-e32d-4681-bbd5-f14fdf067962","type":"message","user":"U9S4G0LJW","text":"頻繁にworkflow起こすのならキャッシュくらい勝手にしてくれたらって思うけどやっぱ重いんだろうか","ts":"1610335142.195600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bpFw"}]},{"client_msg_id":"c0c52d68-305e-4fe4-91f4-645e61c2e21a","type":"message","user":"U9S4G0LJW","text":"多分手で起こすわけじゃないですよね…","ts":"1610334963.194500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6ti"}]},{"client_msg_id":"d3a9229a-871f-4285-a975-9c42f024ef05","type":"message","user":"U9S4G0LJW","text":"手でdocker起こすのであればbuildの部分をpullに変えるだけでいけそうな気がするけど","ts":"1610334934.194000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Uvn6"}]},{"client_msg_id":"55860f75-bd6c-4109-b0ea-09148338da5c","type":"message","user":"UDDCM376D","text":"buildだった…","ts":"1610334771.193000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VD40Z"}]},{"client_msg_id":"78688ee1-14a0-417e-9f6b-fc4b04b5ecc6","type":"message","user":"UDDCM376D","text":"お","ts":"1610334675.192700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"btE"}]},{"client_msg_id":"f3f9091f-6ef2-49e4-bf26-d7c9e20e1f52","type":"message","user":"UDDCM376D","text":"\u003chttps://github.com/marketplace/actions/docker-layer-caching\u003e","ts":"1610334673.192400","attachments":[{"fallback":"GitHub: Docker Layer Caching - GitHub Marketplace","id":1,"title":"Docker Layer Caching - GitHub Marketplace","title_link":"https://github.com/marketplace/actions/docker-layer-caching","text":"Cache images created between main run and post run","thumb_url":"https://avatars2.githubusercontent.com/u/21271711?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/marketplace/actions/docker-layer-caching","original_url":"https://github.com/marketplace/actions/docker-layer-caching"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NAg"}]},{"client_msg_id":"c7bc564c-070a-44b9-9dd2-4ba4c03be863","type":"message","user":"UDDCM376D","text":"GHAで、pullしてきたイメージをキャッシュする方法ないんかな…","ts":"1610334616.192100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tiq"}]}]
