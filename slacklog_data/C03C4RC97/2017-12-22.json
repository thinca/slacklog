[{"type":"message","user":"U6XP9LZ6V","text":"lambdaの引数は、小文字でもFuncrefを格納できるけど、そういう話ではない……ですよね。","ts":"1513932198.000272","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"lambda は直で呼び出せないのでちょっと煩わしい","ts":"1513932259.000075","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"```\ncall call({x-&gt; ...}, [function('s:foo')])\n```","ts":"1513932285.000121","edited":{"user":"U03C6TEAZ","ts":"1513932296.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"`{x-&gt; ...}(function('s:foo'))` って書ければいいのだけど。","ts":"1513932333.000270","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"とりあえず挿入モードから抜ける時にIMEの状態保存して入るときに復元するのできた","ts":"1513932340.000192","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"おっ","ts":"1513932366.000350","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"<https://qiita.com/advent-calendar/2017/vim2>","ts":"1513932368.000094","attachments":[{"fallback":"Qiita: Vim2 Advent Calendar 2017 - Qiita","id":1,"title":"Vim2 Advent Calendar 2017 - Qiita","title_link":"https://qiita.com/advent-calendar/2017/vim2","text":"Vimのアドベントカレンダー(その2)です！ Vim、NeoVim(Nvim)、Vim script、Vimプラグイン、Vim にパッチを当てた等、Vim に関する物であれば何でも構いません。 「Vim すげー！vimconf 楽しかった！」みたいな感想でも良いと思います。 登録後にキャンセルされる場合、書く予定だったが書けなくなった、などは Twitter で [@mattn_jp](<https://twitter.com/intent/tweet>?...","thumb_url":"https://cdn.qiita.com/assets/qiita-fb-2887e7b4aad86fd8c25cea84846f2236.png","blocks":null,"service_name":"Qiita","service_icon":"https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-f9a6afad761ec2306e10db2736187c8b.png","thumb_width":200,"thumb_height":200,"from_url":"https://qiita.com/advent-calendar/2017/vim2"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"19日の兆し","ts":"1513932371.000229","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"結局のところvimrcにべた書きしてしまった","ts":"1513932385.000241","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"おっ","ts":"1513932388.000211","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"空いてるんでしたっけか","ts":"1513932402.000047","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"<@U03C71D7H> ping","ts":"1513932441.000173","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U0M7GCBPD","text":"20日いつの間にか埋まってた (よかった)","ts":"1513932545.000307","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"今1割くらい書いた (遅い)","ts":"1513932816.000017","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"今夜中にはなんとかしたい所存ですがそれより早く書ける人いたら埋めてもらっても良いです","ts":"1513932933.000052","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"ざっと軽い記事を書き上げたので埋めちゃいますね","ts":"1513934704.000147","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":":+1:","ts":"1513934714.000007","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"重い記事書いてしまっていたので完全によくなかった","ts":"1513934775.000100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"投稿DONE","ts":"1513934778.000064","team":"T03C4RC8V","reactions":[{"name":"subara","count":2,"users":["U0M7GCBPD","U7ZUUQSBT"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"warashi++","ts":"1513934784.000179","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"軽いネタを別途探した方が良かったなー","ts":"1513934795.000133","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"まさに今やってた内容でピッタリですね","ts":"1513934818.000082","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"<https://cdn-ak.f.st-hatena.com/images/fotolife/t/thyself2005/20131230/20131230135405.jpg>","ts":"1513934834.000191","attachments":[{"fallback":"300x235px image","id":1,"image_url":"https://cdn-ak.f.st-hatena.com/images/fotolife/t/thyself2005/20131230/20131230135405.jpg","blocks":null,"from_url":"https://cdn-ak.f.st-hatena.com/images/fotolife/t/thyself2005/20131230/20131230135405.jpg"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"これ、その上で imsf 設定したらいいんじゃないすかね","ts":"1513934918.000328","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"常に `s:ImStatus` を返す関数で。","ts":"1513934939.000174","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"今気づいたがインデントがぐちゃぐちゃだ","ts":"1513935012.000041","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"imsf設定するのはありかもしれませんね","ts":"1513935030.000183","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"ところでそもそも VAC の記事半分くらいしか読めてない","ts":"1513935045.000093","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"今日の分ももしかしたら漏れるかもしれないので記事の続き帰ったら書くかー","ts":"1513935091.000360","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U0M7GCBPD","text":"Volt v0.2.1 リリースしました。Mac でも動くようになりました。 `volt self-upgrade` お願いします。\n<https://github.com/vim-volt/volt/releases/tag/v0.2.1>","ts":"1513936280.000042","attachments":[{"fallback":"GitHub: vim-volt/volt","id":1,"title":"vim-volt/volt","title_link":"https://github.com/vim-volt/volt/releases/tag/v0.2.1","text":"volt - A meta-level vim package manager","thumb_url":"https://avatars3.githubusercontent.com/u/16522996?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/vim-volt/volt/releases/tag/v0.2.1"}],"team":"T03C4RC8V","reactions":[{"name":"confetti_ball","count":5,"users":["U7AMBEEG0","U7ZUUQSBT","U7FL0Q71D","U7CJ2P52B","U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"return の例外、よくそんなの今まで生き残ってたな。","ts":"1513900280.000228","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"mattn++","ts":"1513910987.000002","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":"生存力","ts":"1513922678.000069","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"imsf 確かに呼ばれ過ぎな気がする vgetorpeek (分かる人は分かる) のたびに呼ばれてる。","ts":"1513922776.000004","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"カーソル移動するだけで呼ばれるし、updatetime 毎に呼ばれてるし結構すごい。","ts":"1513922794.000063","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"え、なんでそんな呼んでるの?","ts":"1513923987.000007","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"僕が最初に意図したのは、モード切り替わったときだけ呼ぶ、だったんだけど...","ts":"1513924009.000201","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"最初 = im_get_status() を作った際","ts":"1513924090.000124","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"そんなに呼んで何に使ってるんですか？","ts":"1513924098.000138","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"挿入モードに入るときと出るときでIMEの状態を保存してくれるだけで満足なのですが、imsfが呼ばれすぎで重いので自分で適当に実装しようか迷う","ts":"1513924195.000099","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"IME は例えば、メニューからアクティブに出来るじゃないですか。その時に Vim のカーソル色も IME 色になって欲しい訳ですよ。","ts":"1513924264.000196","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"ただ少なくとも NORMAL ではいらん気がする。","ts":"1513924304.000180","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"例えばこんな\n```\ndiff --git a/src/getchar.c b/src/getchar.c\nindex 18dc1a670..8fb822162 100644\n--- a/src/getchar.c\n+++ b/src/getchar.c\n@@ -2893,7 +2893,8 @@ vgetorpeek(int advance)\n #ifdef FEAT_MBYTE\n \t\t    /* Get IM status right after getting keys, not after the\n \t\t     * timeout for a mapping (focus may be lost by then). */\n-\t\t    vgetc_im_active = im_get_status();\n+\t\t    if (State &amp; INSERT)\n+\t\t\tvgetc_im_active = im_get_status();\n #endif\n \t\t}\n \t    }\t    /* for (;;) */\n```","ts":"1513924326.000093","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"あー、カーソル色の変更に使ってるんですね。","ts":"1513924358.000164","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"ただ `cf乙` みたいな使い方する人がいないかというと、いるかもしれない。","ts":"1513924368.000178","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"僕はカーソル色は変わらなくていいので、モード切り替わったときだけ呼んで状態を記憶するような何かを実装してしまった方がいい気がしてきました","ts":"1513924476.000184","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"imsf の中で mode() で確認して間引く事は出来るかもしれない。","ts":"1513924527.000052","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"```\nfunction! My_imstatusfunc()\n  if mode() == 'i'\n  else\n  endif\nendfunction\n```","ts":"1513924581.000041","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"いや、挿入モード中も文字入力がもたつくのでできれば呼びたくないんですよ","ts":"1513924594.000034","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"なるほど。であれば imsf 使わない方がいいかも。","ts":"1513924622.000195","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"Vim scriptはvimrcぐらいしか書いたことがないのですが、適当に実装してみます","ts":"1513924679.000025","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"あー、即時に状態を取得したい(IMEをオンにしたらカーソル変えたい)ってことか。僕はそこは切ったんだよなぁ。","ts":"1513924719.000106","edited":{"user":"U06BRP8VD","ts":"1513924758.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"いまだったらコールバックできるようにすべきところかもしれない。","ts":"1513924743.000137","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"Winだとイベント飛ぶからなぁ。","ts":"1513924765.000057","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"どなたか issues の件、直して貰えると。。。","ts":"1513924771.000006","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"<https://github.com/vim-jp/issues/issues/1130>","ts":"1513924787.000214","attachments":[{"fallback":"GitHub: Linux版 gvimで imactivatefunc / imstatusfunc が 8.0.1344以降、呼ばれなくなっている · Issue #1130 · vim-jp/issues","id":1,"title":"Linux版 gvimで imactivatefunc / imstatusfunc が 8.0.1344以降、呼ばれなくなっている · Issue #1130 · vim-jp/issues","title_link":"https://github.com/vim-jp/issues/issues/1130","text":"質問・報告の内容 Linux版 gvim で、imactivatefunc / imstatusfunc が 8.0.1344 以降、 呼ばれなくなったのですが、これは何か明確な理由があったのでしょうか？ （helpの更新もあり、Windows版以外のGUI環境でも呼ばれなくなった） その結果、Linux の gvim で IM の制御ができなくなり、かなり不便な状態です。 下記のパッチの様...","thumb_url":"https://avatars2.githubusercontent.com/u/7233193?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/vim-jp/issues/issues/1130"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"これ、自分の環境に限定すれば直せるんですけど、ちゃんと治すのは実質不可能かなって... すでに環境の違いによるアレが出てますし。","ts":"1513924876.000141","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"へんな条件チェックが多すぎるんだよな。","ts":"1513924996.000037","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"GTK も判別出来た気がする","ts":"1513925335.000097","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U782D5DF1","text":"linuxでは中華勢のfcitxコマンド叩いてチェックするVimscript拝借して使ってます","ts":"1513925372.000107","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U782D5DF1","text":"外部コマンドの力借りれるのは便利","ts":"1513925483.000119","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"<https://developer.gnome.org/gtk3/3.0/GtkIMContext.html#GtkIMContext.signals>","ts":"1513926367.000076","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"このイベントひっかければ出来そう。","ts":"1513926374.000176","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"あ、いや駄目。","ts":"1513926382.000097","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"分からないし、ユーザが自分でモード判定するなりしないと難しいんじゃないかな。","ts":"1513926412.000003","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"Vim script, 関数を変数に代入するってできないんでしたっけ？","ts":"1513927148.000295","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"funcref というのを使えばできます","ts":"1513927204.000005","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":":h function()","ts":"1513927212.000060","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U894RTUJY","text":"```\n                                        *function()* *E700* *E922* *E923*\nfunction({name} [, {arglist}] [, {dict}])\n                関数{name}を参照する|Funcref|の変数を返す。{name}はユーザー定義\n                関数でも組み込み関数でもよい。\n \n                ここで{name}は関数の参照、もしくは部分適用である。部分適用であ\n                るとき、それに格納されている辞書が使用され、{dict}引数が使用で\n                きない。例:  \n                        let FuncWithArg = function(dict.Func, [arg])\n                        let Broken = function(dict.Func, [arg], dict)\n \n                Funcrefが利用されるとき、その関数は{name}から見つけられる。こ\n                れは後で再定義された場合も同様である。常に同じ関数を見つけるた\n                めには|funcref()|を使うこと。\n \n                {arglist}もしくは{dict}が与えられると、関数の部分適用が作られ\n                る。すなわち引数のリスト及び/または辞書はFuncrefに格納され、\n                そのFuncrefが呼ばれるときに使用される。\n                \n                格納された引数は他の引数よりも前に関数に渡される。例えば:  \n                        func Callback(arg1, arg2, name)\n                        ...\n                        let Func = function('Callback', ['one', 'two'])\n                        ...\n                        call Func('name')\n                関数は次のように呼び出す:  \n                        call Callback('one', 'two', 'name')\n \n                function()はFuncrefにより多くの引数を加えるためにネストして呼\n                び出すことができる。余分な引数は、引数のリストに追加される。\n                例えば:  \n                        func Callback(arg1, arg2, name)\n                        ...\n                        let Func = function('Callback', ['one'])\n                        let Func2 = function(Func, ['two'])\n                        ...\n                        call Func2('name')\n                これは次のように関数を呼び出す:  \n                        call Callback('one', 'two', 'name')\n \n                辞書は \"dict\" 関数を呼び出すときのみ有用である。この場合、\n                {dict}は \"self\" として渡される。例えば:  \n                        function Callback() dict\n                           echo \"called for \" . self.name\n                        endfunction\n                        ...\n                        let context = {\"name\": \"example\"}\n                        let Func = function('Callback', context)\n                        ...\n                        call Func()     \" will echo: called for example\n                余分な引数がない場合、function()は必要ない。以下の二つは同等で\n                ある:  \n                        let Func = function('Callback', context)\n                        let Func = context.Callback\n \n                引数のリストと辞書を同時に使用することもできる:  \n                        function Callback(arg1, count) dict\n                        ...\n                        let context = {\"name\": \"example\"}\n                        let Func = function('Callback', ['one'], context)\n                        ...\n                        call Func(500)\n                これは次のように関数を呼び出す:  \n                        call context.Callback('one', 500)\n```","ts":"1513927212.000174","bot_id":"B894RTUCU","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"type":"message","user":"U03C71D7H","text":"(長かった…)","ts":"1513927218.000248","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"これ、snippet で貼れると良い(=折りたためる)んかな?","ts":"1513927277.000039","edited":{"user":"U06BRP8VD","ts":"1513927296.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"なるほど、ありがとうございます","ts":"1513927391.000080","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"hubot を使っているので細かい制御ができず…","ts":"1513927451.000223","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"代わりに同じ bot が gitter と lingr でも動いています","ts":"1513927467.000259","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U0M7GCBPD","text":"Funcref を代入する変数は先頭が大文字でないといけない、かつ既存のグローバル関数名と被ってたらエラーになるので、\n`let l:F = ...`\nみたいに l: 付きで先頭が大文字の変数にするといいです","ts":"1513927735.000072","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"それ自動チェック欲しい","ts":"1513927763.000191","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U0M7GCBPD","text":"vint","ts":"1513927778.000105","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U0M7GCBPD","text":"に PR","ts":"1513927785.000072","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"すると聞いて","ts":"1513927789.000118","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U0M7GCBPD","text":":thinking_face: ？","ts":"1513927804.000075","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"Python わからぬ…","ts":"1513927844.000106","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"なるほど、しかし今回はimsf同様にIMEの状態を取得する関数をvimrcで指定して、それを呼び出す側を別ファイルに分離しようと思っているのでグローバル変数でないといけないのです","ts":"1513927865.000285","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U0M7GCBPD","text":"グローバル関数にする事自体は大丈夫です（まぁできればスクリプトローカルのがいいですが）","ts":"1513927984.000137","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U0M7GCBPD","text":"ただ Funcref を扱う時は↑のような細かい罠があるよ…という話ですね","ts":"1513928020.000045","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U86DXQD7W","text":"はい、気をつけます","ts":"1513928030.000093","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U0M7GCBPD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"さきほどの Vim.Type の PR で見事に罠にはまっていたので直している","ts":"1513928056.000139","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"done","ts":"1513928115.000186","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":"lambdaでwrapいればいける?","ts":"1513928767.000064","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"lambda であっても関数オブジェクトなので大文字必須です。","ts":"1513928810.000109","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"imsf は文字列設定なので、SID 付きか、グローバル関数","ts":"1513928850.000096","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
