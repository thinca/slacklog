[{"client_msg_id":"5fb1e387-3e31-40b3-ad56-43c20d076e48","type":"message","user":"U776661HA","text":"前提: rust で書いた CLI アプリケーションのバージョンを git タグから取得したい\n質問: どうすればよいでしょう？\n\n1. `git_version` みたいなの使ってビルド時に解決し CLI ではそれを使う（`Cargo.toml` の `version` は `0.1.0` とかで固定）\n2. 何かしらのすごい方法で `Cargo.toml` の `version` と Git のタグを同期して `CARGO_PKG_VERSION` とかを CLI で返す\n3. もっと良い方法","ts":"1585012930.069800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HPj"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"325004ea-b39e-4db6-a81d-0e0014209100","type":"message","user":"U776661HA","text":"あー別に rust は Cargo 必須というわけではないから `Cargo.toml` の `version` とアプリケーションのバージョンは別か... ってことは 1. が最適解かなぁ....?","ts":"1585013114.070900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KSYh1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"705a3b79-d4d0-4dfc-8f5c-361810007ce7","type":"message","user":"U776661HA","text":"<https://www.reddit.com/r/rust/comments/aa95c5/cargo_package_version_from_git_tag/>","ts":"1585013242.071100","attachments":[{"fallback":"reddit: Cargo package version from git tag","id":1,"title":"Cargo package version from git tag","title_link":"https://www.reddit.com/r/rust/comments/aa95c5/cargo_package_version_from_git_tag/","text":"Is there a way to define the package version as a git tag instead of in the Cargo.toml?","thumb_url":"https://www.redditstatic.com/new-icon.png","blocks":null,"service_name":"reddit","service_icon":"http://www.redditstatic.com/desktop2x/img/favicon/apple-icon-57x57.png","thumb_width":256,"thumb_height":256,"from_url":"https://www.reddit.com/r/rust/comments/aa95c5/cargo_package_version_from_git_tag/","original_url":"https://www.reddit.com/r/rust/comments/aa95c5/cargo_package_version_from_git_tag/"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"myOGd"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5928e0ba-4bc1-4f3e-9022-e38701bab407","type":"message","user":"UEB17JJJE","text":"alacrittyはこうやってました\n<https://github.com/alacritty/alacritty/blob/4000ec04d89b9bd77995960d2a9da8fcad55e003/alacritty/build.rs#L29|https://github.com/alacritty/alacritty/blob/4000ec04d89b9bd77995960d2a9da8fcad55e003/alacritty/build.rs#L29>","ts":"1585013301.071800","attachments":[{"fallback":"GitHub: alacritty/alacritty","id":1,"title":"alacritty/alacritty","title_link":"https://github.com/alacritty/alacritty/blob/4000ec04d89b9bd77995960d2a9da8fcad55e003/alacritty/build.rs#L29","text":"A cross-platform, GPU-accelerated terminal emulator - alacritty/alacritty","thumb_url":"https://repository-images.githubusercontent.com/51980455/c6857780-448b-11ea-95ed-00fdbc59eb0b","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":500,"thumb_height":250,"from_url":"https://github.com/alacritty/alacritty/blob/4000ec04d89b9bd77995960d2a9da8fcad55e003/alacritty/build.rs#L29","original_url":"https://github.com/alacritty/alacritty/blob/4000ec04d89b9bd77995960d2a9da8fcad55e003/alacritty/build.rs#L29"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bMhP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a2f12031-b59d-463a-9aec-8530e0dcbe8d","type":"message","user":"U776661HA","text":"<https://github.com/alacritty/alacritty/blob/4000ec04d89b9bd77995960d2a9da8fcad55e003/alacritty/src/cli.rs#L76>","ts":"1585013403.072100","attachments":[{"fallback":"GitHub: alacritty/alacritty","id":1,"title":"alacritty/alacritty","title_link":"https://github.com/alacritty/alacritty/blob/4000ec04d89b9bd77995960d2a9da8fcad55e003/alacritty/src/cli.rs#L76","text":"A cross-platform, GPU-accelerated terminal emulator - alacritty/alacritty","thumb_url":"https://repository-images.githubusercontent.com/51980455/c6857780-448b-11ea-95ed-00fdbc59eb0b","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":500,"thumb_height":250,"from_url":"https://github.com/alacritty/alacritty/blob/4000ec04d89b9bd77995960d2a9da8fcad55e003/alacritty/src/cli.rs#L76","original_url":"https://github.com/alacritty/alacritty/blob/4000ec04d89b9bd77995960d2a9da8fcad55e003/alacritty/src/cli.rs#L76"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wBBk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d918041f-2562-45f4-b399-7bd2cd403c6b","type":"message","user":"U776661HA","text":"なるほど...","ts":"1585013408.072400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NKQvJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eb5b6c0c-3fc3-40e3-ae83-65f1556bed2b","type":"message","user":"U776661HA","text":"<https://github.com/alacritty/alacritty/blob/4000ec04d89b9bd77995960d2a9da8fcad55e003/alacritty/Cargo.toml#L3>","ts":"1585013424.072600","attachments":[{"fallback":"GitHub: alacritty/alacritty","id":1,"title":"alacritty/alacritty","title_link":"https://github.com/alacritty/alacritty/blob/4000ec04d89b9bd77995960d2a9da8fcad55e003/alacritty/Cargo.toml#L3","text":"A cross-platform, GPU-accelerated terminal emulator - alacritty/alacritty","thumb_url":"https://repository-images.githubusercontent.com/51980455/c6857780-448b-11ea-95ed-00fdbc59eb0b","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":500,"thumb_height":250,"from_url":"https://github.com/alacritty/alacritty/blob/4000ec04d89b9bd77995960d2a9da8fcad55e003/alacritty/Cargo.toml#L3","original_url":"https://github.com/alacritty/alacritty/blob/4000ec04d89b9bd77995960d2a9da8fcad55e003/alacritty/Cargo.toml#L3"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"t7L"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"84177474-8e42-4579-913c-7e63c4a6074d","type":"message","user":"U776661HA","text":"`Cargo.toml` の `version` を手動管理した上で `GIT_HASH` があれば、そちらも表示する　的な運用ですね","ts":"1585013497.073300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ogpNG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"239f00b7-6fda-4824-bc6c-1173db52c492","type":"message","user":"U776661HA","text":"<https://github.com/alacritty/alacritty/commit/4d9253bb8d6ca6044742ef874e8ff554f4e3b45e>\n\nできれば \"Bump version\" 的なコミットをしたくないw","ts":"1585013527.073700","attachments":[{"fallback":"GitHub: Bump version to 0.4.1 · alacritty/alacritty@4d9253b","id":1,"title":"Bump version to 0.4.1 · alacritty/alacritty@4d9253b","title_link":"https://github.com/alacritty/alacritty/commit/4d9253bb8d6ca6044742ef874e8ff554f4e3b45e","text":"A cross-platform, GPU-accelerated terminal emulator - alacritty/alacritty","thumb_url":"https://avatars0.githubusercontent.com/u/8886672?s=200&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":200,"thumb_height":200,"from_url":"https://github.com/alacritty/alacritty/commit/4d9253bb8d6ca6044742ef874e8ff554f4e3b45e","original_url":"https://github.com/alacritty/alacritty/commit/4d9253bb8d6ca6044742ef874e8ff554f4e3b45e"}],"team":"T03C4RC8V","reactions":[{"name":"wakaru","count":1,"users":["U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8ncy"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d5d17286-c185-422f-9f3e-34287b73ef4d","type":"message","user":"UEB17JJJE","text":"crates.ioの登録があるから仕方ないですかねー","ts":"1585013592.074700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"B3hy"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"687fd633-45ab-456e-9c82-f02421a51456","type":"message","user":"U776661HA","text":"cargo release みたいなコマンドでラップするしかないか...","ts":"1585013629.075000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iG0W"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c3107ff2-7db2-4665-925c-6cd81bd56361","type":"message","user":"U776661HA","text":"やはり CLI のバージョンは Cargo パッケージのバージョンとは異なる、という立ち位置で考えるのが良さそうですね","ts":"1585013707.075800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8tpP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f90cbf1f-f1c9-4881-ac47-058e915de00b","type":"message","user":"U776661HA","text":"<http://crates.io|crates.io> に登録するわけではないし..","ts":"1585013724.076100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zSQWx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a18e5ed5-eaf0-490d-ace5-c3e22910782e","type":"message","user":"U776661HA","text":"ひとまず `Cargo.toml` の `version` は `0.1.0` とかに固定して、別枠で <https://docs.rs/git-version/0.3.4/git_version/> とか使ってアプリケーションバージョンを定義することにしました :bow:","ts":"1585014117.077400","attachments":[{"fallback":"git_version - Rust","id":1,"title":"git_version - Rust","title_link":"https://docs.rs/git-version/0.3.4/git_version/","text":"API documentation for the Rust `git_version` crate.","blocks":null,"service_name":"docs.rs","service_icon":"https://docs.rs/favicon-20200108-1.42.0-nightly-caa231d99.ico","from_url":"https://docs.rs/git-version/0.3.4/git_version/","original_url":"https://docs.rs/git-version/0.3.4/git_version/"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vG9RB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
