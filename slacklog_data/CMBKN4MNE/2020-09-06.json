[{"client_msg_id":"cfeabb1a-06de-4589-a6cb-282fa1757f85","type":"message","user":"U776661HA","text":"緩質問\n\n\u003chttps://async.rs/blog/stop-worrying-about-blocking-the-new-async-std-runtime/\u003e\n\nここで言っている最適化ってのは `async` 関数の中身を丸ごと別スレッドとかに自動で退避するって意味なので\n\n```// std::fs::read_to_string を async でラップするだけ\nasync fn read_to_string(path: impl AsRef\u0026lt;Path\u0026gt;) -\u0026gt; io::Result\u0026lt;String\u0026gt; {\n    std::fs::read_to_string(path)\n}\n\n// hello1 内の各行で Await が効き、いい感じにグリーンスレッドが切り替わる\nasync fn hello1() -\u0026gt; Result\u0026lt;()\u0026gt; {\n    let a = read_to_string(\"A\").await?;\n    let b = read_to_string(\"B\").await?;\n    let c = read_to_string(\"C\").await?;\n}\n\n// hello2 全体でしか Await が効かないため、あまり意味がない\nasync fn hello2() -\u0026gt; Result\u0026lt;()\u0026gt; {\n    let a = std::fs::read_to_string(\"A\")?;\n    let b = std::fs::read_to_string(\"B\")?;\n    let c = std::fs::read_to_string(\"C\")?;\n}```\nって感じで、既存の非 async なライブラリは IO 発生する最小単位で `async` でラップして、それを使うようにしないと意味があまりない\n\n\n\nという認識であってますかね？","ts":"1599376668.009600","thread_ts":"1599376668.009600","attachments":[{"fallback":"async-std - Stop worrying about blocking: the new async-std runtime, inspired by Go","id":1,"title":"async-std - Stop worrying about blocking: the new async-std runtime, inspired by Go","title_link":"https://async.rs/blog/stop-worrying-about-blocking-the-new-async-std-runtime/","text":"A Rust library for easy and understandable async programming","thumb_url":"https://async.rs/images/logo--card.png","blocks":null,"service_name":"async.rs","thumb_width":446,"thumb_height":312,"from_url":"https://async.rs/blog/stop-worrying-about-blocking-the-new-async-std-runtime/","original_url":"https://async.rs/blog/stop-worrying-about-blocking-the-new-async-std-runtime/"}],"reply_count":1,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QolIp"}]},{"client_msg_id":"9cd3cd99-325e-49ec-b843-284c9f3a7578","type":"message","user":"U03C71D7H","text":"Rust が 5 年前からずっと首位なの、なにか分母に偏りがあるのではという気持ちになるな","ts":"1599376664.009500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"99RD"}]},{"client_msg_id":"a0683e04-5a85-4829-ae0c-5246dbbfc029","type":"message","user":"U03C6TEAZ","text":"期待してる、とか触ってみたいみたいなニュアンスがあるのかな。","ts":"1599376646.008900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kUV"}]},{"client_msg_id":"ed33a54d-19b4-47eb-8cbb-399341395af5","type":"message","user":"U03C6TEAZ","text":"なんか質問が違うのかな。","ts":"1599376607.007000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9hzTE"}]},{"client_msg_id":"fcc962b8-3906-4d2f-b34f-ef1bd41ceeca","type":"message","user":"U03C6TEAZ","text":"SO のアンケート、毎回他のアンケートと異なるのが出てきますね。","ts":"1599376589.006400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=y4y"}]},{"client_msg_id":"1987b725-3f27-4634-8ac2-8261edbd0ae5","type":"message","user":"U776661HA","text":"それとも未知のスーパーパワーで `hello2` すら IO 待ち部分だけ退避され...る？さすがに厳しいですよね","ts":"1599376765.009800","thread_ts":"1599376668.009600","parent_user_id":"U776661HA","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CjD"}]}]
