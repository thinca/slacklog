[{"client_msg_id":"f64dfbf9-b35f-49f0-9af0-7c5faadc1eb1","type":"message","user":"U03C90T1L","text":"goの database/sql の新しい型とかに対応したいけど、複数のgoバージョン対応が面倒で割と放置してる","ts":"1568793907.038300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fefe54be-ea5a-4435-a89a-41e5f0517907","type":"message","user":"U03C90T1L","text":"多分 Valuer とか Scanner に対応してるだけでイケそうな気もするけど、試してみないといけないし、で悶々","ts":"1568793970.039600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"41d4319b-ab35-4058-a1df-91ae36c3d673","type":"message","user":"U03C6TEAZ","text":"参考になるか分かりませんが。","ts":"1568794140.040000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"13df5795-4e31-477a-9bcc-fed4d1d43c28","type":"message","user":"U03C6TEAZ","text":"<https://github.com/mattn/go-nulltype/blob/master/time.go>","ts":"1568794143.040100","attachments":[{"fallback":"GitHub: mattn/go-nulltype","id":1,"title":"mattn/go-nulltype","title_link":"https://github.com/mattn/go-nulltype/blob/master/time.go","text":"Null friendly types. Contribute to mattn/go-nulltype development by creating an account on GitHub.","thumb_url":"https://avatars1.githubusercontent.com/u/10111?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/mattn/go-nulltype/blob/master/time.go","original_url":"https://github.com/mattn/go-nulltype/blob/master/time.go"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"348f3ae7-cd61-4ecd-b6d6-18fdee6c8ea6","type":"message","user":"U03C6TEAZ","text":"今は sql.NullTime があるのでもう需要は少ない。","ts":"1568794157.040500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"46bcdb42-0822-4d62-8b29-747b5890619c","type":"message","user":"U03C90T1L","text":"<https://github.com/kamichidu/goen/blob/master/db_ctx.go#L231>","ts":"1568799695.040700","attachments":[{"fallback":"GitHub: kamichidu/goen","id":1,"title":"kamichidu/goen","title_link":"https://github.com/kamichidu/goen/blob/master/db_ctx.go#L231","text":"GOlang ENtity interface, similar to ORM but not fully featured - kamichidu/goen","thumb_url":"https://avatars3.githubusercontent.com/u/571248?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/kamichidu/goen/blob/master/db_ctx.go#L231","original_url":"https://github.com/kamichidu/goen/blob/master/db_ctx.go#L231"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"700f02ba-88fd-4808-b50e-1e892e655c94","type":"message","user":"U03C90T1L","text":"このへんで、基本的にScannerが実装されていれば問題なく対応できそうな気がしているんですが、今まで NullXXX 系を食わせたことがないので、試してみないとなーという意図です","ts":"1568799771.042200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"25af03e0-2c78-443b-837e-67534fb59f62","type":"message","user":"U03C90T1L","text":"（試すこと自体は試せば良い話ではあります）","ts":"1568799807.042800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2ba78858-3831-4718-aa86-6b89547b47d6","type":"message","user":"U03C6TEAZ","text":"全部 interface{} で処理されるなら値の型を見て変換すればいいですね。","ts":"1568800075.043300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1efd11d9-2f33-4b46-8a29-9ed41b3eaafb","type":"message","user":"U03C6TEAZ","text":"Scanner はユーザコードなので。","ts":"1568800087.043600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8b79885c-aadf-4782-be88-800e5f4a9845","type":"message","user":"U03C6TEAZ","text":"database/sql ってドライバからはユーザのコードがどの型のアドレスを渡してきたか分からない作りになっていて","ts":"1568800096.043800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"99ced6f1-0687-4fcd-8db6-f2e1d912e879","type":"message","user":"U03C6TEAZ","text":"例えるならこんな感じ。\n\nデータベース「浮動小数点だよ」\n↓\nドライバ「その型はGoで言えば float64 だね」\n↓\ndatabase/sql「ユーザは string のアドレスを渡してきてるから string に変換してあげよう」\n↓\nユーザコード「おっ、string のアドレス渡したら中に不動小数点の値が入っていた」","ts":"1568800110.044100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"361f1d53-a5a7-463e-9a00-4e455150741c","type":"message","user":"U03C6TEAZ","text":"goen はユーザコードで Scanner を実装してるので、database/sql は「ユーザは interface{} を渡してきてるから interface{} として返そう」となる。","ts":"1568800198.044900","edited":{"user":"U03C6TEAZ","ts":"1568800253.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"51c02999-7c75-48d2-8fb2-c32d0472cc2d","type":"message","user":"U03C90T1L","text":"なるほど","ts":"1568801611.045300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1187abb9-f3a6-4669-ad33-7c0df08ea8fe","type":"message","user":"U03C90T1L","text":"問題になりそうなのは","ts":"1568801728.045500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ece80616-a49a-4866-a88e-dfae0d1d8ef4","type":"message","user":"U03C90T1L","text":"<https://github.com/kamichidu/goen/blob/master/compiler.go#L210>","ts":"1568801743.045700","attachments":[{"fallback":"GitHub: kamichidu/goen","id":1,"title":"kamichidu/goen","title_link":"https://github.com/kamichidu/goen/blob/master/compiler.go#L210","text":"GOlang ENtity interface, similar to ORM but not fully featured - kamichidu/goen","thumb_url":"https://avatars3.githubusercontent.com/u/571248?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/kamichidu/goen/blob/master/compiler.go#L210","original_url":"https://github.com/kamichidu/goen/blob/master/compiler.go#L210"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b46907cd-2d91-49d7-982c-3d5c10e6e1e5","type":"message","user":"U03C90T1L","text":"goenは大量のクエリ発行をやるために作ってあって、そのためにBulkCompilerというものを用意してあります","ts":"1568801803.047000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0f93adc0-dacb-4f5c-800c-9e27d97989b6","type":"message","user":"U03C90T1L","text":"BulkCompilerでは、goenのDBContextに食わせたパッチ（1件のクエリに相当）を、複数束ねて、クエリをマージしているのですが","ts":"1568801852.048400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"007c0be2-45fc-44ae-93d1-8ddc40d69d81","type":"message","user":"U03C90T1L","text":"束ねられるかどうかの判定に、 reflect.DeepEqual を使っていて、このあたり問題になりそうな予感がしてます","ts":"1568801890.049400","edited":{"user":"U03C90T1L","ts":"1568801981.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"17b7421e-630d-4652-816c-82eac6a350b4","type":"message","user":"U03C90T1L","text":"何に置いても、とりあえず試してみなければなんともならないな...","ts":"1568801959.051100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
