[{"client_msg_id":"ade63da8-546c-4a69-b892-8ef9e4811a08","type":"message","user":"UGXMRNBUM","text":"極端な例\n\n```go build ./...  9.52s user 7.71s system 156% cpu 11.014 total\nxargs -I {} go test -c {}  1362.49s user 1244.06s system 173% cpu 25:03.09 total```","ts":"1593502824.463500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eWj7q"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"113fa7f4-d8c5-4d71-a508-508bda07bcfb","type":"message","user":"U9S4G0LJW","text":"ツールチェーンの起動に結構持っていかれてそうな気がする","ts":"1593502884.463900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yhz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e162068b-886a-4d07-80ee-655cbfda4fbe","type":"message","user":"UGXMRNBUM","text":"キャッシュが効くとはいえ、go test -c を全パッケージ分やったら、依存関係の処理だけでエライことになってそうな印象","ts":"1593503004.464600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3w5e"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"106b2a2e-2422-438e-b62e-9e64e5a12f3a","type":"message","user":"UNJ2DANJC","text":"なるほどgo testはテストコードからmain関数を含むコードを生成してイチからコンパイルしてるからか","ts":"1593504432.465600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pDU+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a1461268-47c0-4f1e-b3c7-d61755f61195","type":"message","user":"UDDCM376D","text":"xorm でエラー系のテストをしたいんだけど、コンテナでDBを立ててやるしか無いかな…","ts":"1593474883.404900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"N9Av"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e8ad287a-d294-4cfe-a749-3dec0a71cce0","type":"message","user":"UDDCM376D","text":"<@U06BRP8VD> いつもエラー系のテストどうやっていますか？","ts":"1593474906.405400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yM6b"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4fcebea0-b663-403d-a513-76a35267f369","type":"message","user":"U06BRP8VD","text":"どのレベルのエラー? SQL? ORM?","ts":"1593474994.406500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BZYI2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"70b2cc5b-1e16-4428-8cff-86e8910d5973","type":"message","user":"UDDCM376D","text":"ORMですね","ts":"1593475048.406700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uR/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"72d68c68-60cc-4313-a327-7773b03d5b2b","type":"message","user":"UDDCM376D","text":"例えば Find のエラー","ts":"1593475062.407100","edited":{"user":"UDDCM376D","ts":"1593475067.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"P4TV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7e70bbed-ef82-4ab8-9854-17b8e08cac1c","type":"message","user":"UDDCM376D","text":"<https://pkg.go.dev/xorm.io/xorm?tab=doc#Engine.AddHook>\nこれ使えそうな雰囲気（名前から判断）","ts":"1593475303.410700","attachments":[{"fallback":"xorm package · pkg.go.dev","id":1,"title":"xorm package · pkg.go.dev","title_link":"https://pkg.go.dev/xorm.io/xorm?tab=doc#Engine.AddHook","text":"Go is an open source programming language that makes it easy to build simple, reliable, and efficient software.","blocks":null,"service_name":"pkg.go.dev","service_icon":"https://pkg.go.dev/favicon.ico","from_url":"https://pkg.go.dev/xorm.io/xorm?tab=doc#Engine.AddHook","original_url":"https://pkg.go.dev/xorm.io/xorm?tab=doc#Engine.AddHook"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iG8Fq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"32210f3d-4752-4a81-9c58-9fa68aca0aab","type":"message","user":"U06BRP8VD","text":"ん〜それはあきらめる、かな。そこがエラーを返すケースを考えるとほぼありえないというか考えるだけ徒労なことが多い。\n\ninsertの制約違反を409に読み替えたいとかだとテスト用のDBたててってやらんとあかんけど","ts":"1593475622.412100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rPWhk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"08d608bf-2e0b-4d2d-b7bc-ddc53f31eaa0","type":"message","user":"UDDCM376D","text":"&gt; ん〜それはあきらめる、かな。そこがエラーを返すケースを考えるとほぼありえないというか考えるだけ徒労なことが多い。\nなるほど\n自分も、そこに労力を掛けても良いことあまりないかなぁって気がしました","ts":"1593475709.413200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QhBkU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1080d453-c466-4fbb-96e5-18cd89b2e989","type":"message","user":"U03C6TEAZ","text":"どの ORM でも Find の API は存在有無と DB のエラーが同時に返るのでテストするのモヤモヤ感ある。","ts":"1593475791.414100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Kie"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"918add16-f84b-40cd-a005-93e5936022c1","type":"message","user":"U03C6TEAZ","text":"たぶん err は wrap されてるとは思うけど。","ts":"1593475816.414500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"b79NZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1f537b9a-72b5-4c5d-986b-94b79255f2c1","type":"message","user":"U06BRP8VD","text":"ORMに限らず if err != nil { return err } のカバレッジを上げるだけのテストは優先度下げてます。暇ならやる。\n\nあとerrを解釈してなにかするケースは…頑張るw","ts":"1593475966.417900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bym"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fbe894d7-367f-4bd2-bb1f-24dd14469b4e","type":"message","user":"UDDCM376D","text":"確かに GORM は 単一レコードの Find するとき NotFoundError が返るなぁ","ts":"1593475989.418300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"P5kA0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e2be2ddd-4df0-4097-9933-e23dee582241","type":"message","user":"UDDCM376D","text":"&gt; ORMに限らず if err != nil { return err } のカバレッジを上げるだけのテストは優先度下げてます。暇ならやる。\nわかりみ","ts":"1593476009.418500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aIQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"44765381-fcc3-4467-a67d-047c991f616b","type":"message","user":"U03C6TEAZ","text":"gopls の root と lsp としての workspace root はもしかして別で管理せなあかん気がしてきた。","ts":"1593476796.419800","team":"T03C4RC8V","reactions":[{"name":"eyes","count":1,"users":["UEACRCY0Z"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"I5mk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b33b956c-243d-472d-9a8a-a658724da8bc","type":"message","user":"U06BRP8VD","text":"まじで?","ts":"1593476824.420100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aLLdT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e4047aa8-d783-42a0-96a6-cf7aa8a1a6aa","type":"message","user":"U03C6TEAZ","text":"```/foo/bar/main.go\n/foo/bar/go.mod\n/foo/.git```\nは普通にありえるんですが、workspace として .git をベースにしたいけど gopls は go.mod をルートにしたい。","ts":"1593476886.421000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"49Y"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dbe56b57-5ef6-4362-8aff-82ddf8acbd4e","type":"message","user":"UDDCM376D","text":"たしかに","ts":"1593476902.421200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8nhhq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2ca5b1fa-389f-4865-a53c-b8d0994ec95b","type":"message","user":"UDDCM376D","text":"あー、filetypeがGoときだけ go.mod はだめか…","ts":"1593476951.422000","edited":{"user":"UDDCM376D","ts":"1593476954.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LwiRb"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e66e889a-024e-4d4c-b168-20774e31fc2d","type":"message","user":"UDDCM376D","text":"go.mod がないパターン","ts":"1593476974.422900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Dt9Lx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5be974c5-bffa-48c7-a9bd-171c60a961d4","type":"message","user":"U06BRP8VD","text":"xormのFindは空の時、引数のリスト何もしないんじゃないかな。Getは両方ともnilが返ってくる。","ts":"1593477026.424300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eZ4P"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bfacb4d7-8747-49a6-8dbd-c6159b301a75","type":"message","user":"UNJ2DANJC","text":"return nil, nilあんまり好きじゃない","ts":"1593478975.424900","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":2,"users":["U06BRP8VD","UDDCM376D"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4Yf2+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fd335415-0103-4fab-bb5b-e2a3ab2edec2","type":"message","user":"UNJ2DANJC","text":"x/toolsみたいに複数のgo.modがあるリポジトリだとどう動くのが理想的なんだろうか","ts":"1593484164.427400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eLJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3653f97f-ab30-446d-ab45-5102b5e6100e","type":"message","user":"U06BRP8VD","text":"手元で `go build` の `-gcflags=-e` が全然効いてないみたいなんだけど、これなんなんだろ?","ts":"1593485356.428400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JQvpe"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"17a9946b-08a2-4968-93e2-30d648b9bd89","type":"message","user":"UDDCM376D","text":"生まれた初めて ioutil.NopCloser を使った\n存在は知っていたが使う機会来ないんだろうなぁと思ってたら来た\n```type mockS3 struct {\n\terr error\n\ts3iface.S3API\n}\n\nfunc (m *mockS3) GetObject(input *s3.GetObjectInput) (*s3.GetObjectOutput, error) {\n\tif m.err != nil {\n\t\treturn nil, m.err\n\t}\n\n\tf, err := os.Open(filepath.Join(\"testdata\", *input.Key))\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tbody := ioutil.NopCloser(f)\n\tdefer body.Close()\n\n\tout := &amp;s3.GetObjectOutput{\n\t\tBody: body,\n\t}\n\treturn out, nil\n}```","ts":"1593487240.429500","edited":{"user":"UDDCM376D","ts":"1593487248.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ws1OF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"189832dd-3b5e-41bd-b5f5-fdf26dad5686","type":"message","user":"U03C6TEAZ","text":"ん？","ts":"1593487492.429800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VaF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"44840f5f-b93f-4bb2-957d-ba8db6a3fcc2","type":"message","user":"U03C6TEAZ","text":"f のまま body に渡さない理由はなんでしょう？","ts":"1593487529.430100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PqhXl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"12fca99e-659d-4f40-b869-5eed88ef1c56","type":"message","user":"U03C6TEAZ","text":"なんとなく `ioutil.NopCloser` の意味を間違ってる気がします。","ts":"1593487572.430600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fsqL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2ce479aa-4a12-47fe-93a7-268c6c71ec67","type":"message","user":"U03C6TEAZ","text":"`ioutil.NopCloser` は `Close` メソッドを持たない `Reader` 例えば `strings.NewReader(\"foo\")` を `ReadCloser` を引数に取る様な関数に渡す場合に使います。","ts":"1593487643.432000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"esgf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2a9e5365-5aa1-4306-a24c-cd9b7d479dd6","type":"message","user":"UDDCM376D","text":"GeObjectのBody ReaderCloserなんですよね","ts":"1593487665.432400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MUZgR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"837a99f5-6cff-4f90-9b02-8c7c2f11cf63","type":"message","user":"UDDCM376D","text":"もしかして 見間違いだった…？！","ts":"1593487679.432900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"usE"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e2c2459c-b60d-448f-be94-5d1a514d73cf","type":"message","user":"U03C6TEAZ","text":"はい。であれば f のまま渡せばいいかなと思いました。","ts":"1593487681.433000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"a1ZY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"20b4bbc1-dae2-4e0b-b4c7-bf5e2711f42a","type":"message","user":"UDDCM376D","text":"```\t// Object data.\n\tBody io.ReadCloser `type:\"blob\"````","ts":"1593487723.433300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"L8y"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4ee19b65-3806-4dde-9b46-1d175b59c819","type":"message","user":"UDDCM376D","text":"あってた","ts":"1593487729.433600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vA4Zl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"719b76c6-391a-4e76-912f-900c5097d352","type":"message","user":"UGXMRNBUM","text":"あー","ts":"1593487742.433900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"b9tt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cb982ab3-efac-4d00-9804-8ab3c805d700","type":"message","user":"UDDCM376D","text":"あれ","ts":"1593487742.434000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=Mlj"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c7a519fb-e689-4df0-b75a-13e74cd9dfbc","type":"message","user":"UGXMRNBUM","text":"mockとして作ってるんだったら、中で `body.Close()` してるのが違和感のもとでは…","ts":"1593487772.434800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Nhy"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a6280f1e-c420-4c15-a535-cd0b4ac4606f","type":"message","user":"UDDCM376D","text":"そのまま渡せた","ts":"1593487800.435200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4FXT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"69f7902f-3093-4d66-8168-b48caeefdd37","type":"message","user":"UDDCM376D","text":"勘違いしてた","ts":"1593487807.435500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6Q3F"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dd0b834d-cca9-4cb4-97ae-d3b50d1f021e","type":"message","user":"UDDCM376D","text":"お恥ずかしい","ts":"1593487810.435900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GQv1h"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5e01ff41-1445-4fac-bc6a-64d54800bb66","type":"message","user":"U03C6TEAZ","text":"はい。用途として `ioutil.NopCloser` 使う意味がないすね。","ts":"1593487824.436400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MMhMP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c80761fc-d8e5-428a-8521-17be614e6876","type":"message","user":"UGXMRNBUM","text":"ああ。そもそもos.OpenしたやつをNopCloserしてたのか","ts":"1593487829.436600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"X7yk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8ee1a2fa-2287-4d99-9d9b-ce73ed3ae512","type":"message","user":"UDDCM376D","text":"すよねぇ","ts":"1593487839.437200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8X6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"abc491a8-a2f5-449b-827a-66c63336d9ba","type":"message","user":"U03C6TEAZ","text":"`ioutil.NopCloser` は↑にも書いたけど `Close` がない `Reader` を `ReadCloser` にする為に使います。","ts":"1593487856.437600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DKRU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8446ae44-1ab1-44d0-9f02-9316b443cbaf","type":"message","user":"UDDCM376D","text":"はい","ts":"1593487868.438000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xrP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f80feffb-8386-4e3d-8688-cc6c457389dc","type":"message","user":"UDDCM376D","text":"ですよね","ts":"1593487870.438200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nAlc2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"42714974-22de-484e-901a-6f4efe5bb4c1","type":"message","user":"U03C6TEAZ","text":"例えばテストが\n```tests := []string {\n  \"...\",\n}\nfor _, test := range tests {\n  body := ioutil.NopCloser(strings.NewReader(test))\n}```\nこんな感じのやつ。","ts":"1593487922.439400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UeG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7106999d-e7bd-45bf-a502-9f283cd4a20f","type":"message","user":"UDDCM376D","text":"os.Open したやつCloseがないって勘違いしていた（そんなわけない）","ts":"1593487966.440000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FDOi"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a791cd0b-d570-4cdc-a8d2-5967a2c6c283","type":"message","user":"UGXMRNBUM","text":"そしてdefer f.Close()も中にはいらなさそう","ts":"1593488006.440900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sG3t"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ac428a71-583a-4e19-a870-2231fa2727b9","type":"message","user":"U03C6TEAZ","text":"はい。","ts":"1593488019.441200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jJm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"aa1c719b-0a43-4871-a919-9b83dfdcc538","type":"message","user":"UDDCM376D","text":"いらないですね","ts":"1593488034.441900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jx5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8ef23f44-f8a9-4309-b612-4264022e7570","type":"message","user":"U03C6TEAZ","text":"ReadCloser を引数に取ってる時点で「俺が Close する！あとは任せろ」ですね。","ts":"1593488039.442200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EWj"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a4ec131c-de64-43aa-8f32-c20f56fbc7a7","type":"message","user":"U7H4TJEG0","text":"NopCloserでfをwrapするとファイルが閉じられなさそう、GetObjectでファイル閉じると使う側で読み込めなさそうなのでコンテンツ読んじゃうのがよいんかな","ts":"1593488040.442300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"C1Ag"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c54fa5b1-29ae-401e-b99c-ed7ead635571","type":"message","user":"U03C6TEAZ","text":"ですね。","ts":"1593488064.442500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Az4Z"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b1a31446-8289-45e5-9bc8-860f86fe7449","type":"message","user":"UDDCM376D","text":"閉じられなかったですね","ts":"1593488083.443400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cAom"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"912c8daf-bb84-4b5c-a362-3872a36e5bff","type":"message","user":"U03C6TEAZ","text":"なので f のまま渡すのが正解す。","ts":"1593488097.443900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UGB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cbbfcb30-6d56-425d-aacc-7f52bd3dd837","type":"message","user":"UDDCM376D","text":"あざます！","ts":"1593488109.444400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NGwb"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b86498a3-3e75-4602-beab-5914f71f33a5","type":"message","user":"UNJ2DANJC","text":"テストコードだとiouti.ReadFileからのioutil.NopCloser(bytes.NewReader よくやる","ts":"1593488118.445000","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U7H4TJEG0"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6giU1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5ec9b315-14ec-4a00-a3fa-fb9fe534b848","type":"message","user":"UDDCM376D","text":"恥ずかしい","ts":"1593488123.445400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Idd"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"61e3d558-0e62-488f-a793-9723189cc804","type":"message","user":"U03C6TEAZ","text":"これ、Rob Pike も何度か言ってたけど `os.File` はインタフェースにすべきだったって奴だなぁ。","ts":"1593488141.445800","team":"T03C4RC8V","reactions":[{"name":"tiken","count":2,"users":["UAZ33BKV2","UEACRCY0Z"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Sv7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d20dfed7-297b-4c4d-8875-45db6409c09c","type":"message","user":"UGXMRNBUM","text":"os.FileっぽいInterface結構欲しくなる","ts":"1593488176.446500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Iof="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b138a5b3-a2f0-429e-a1ab-3b738e84e073","type":"message","user":"UDDCM376D","text":"確かにIFのがが良い気がする","ts":"1593488187.446700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8tQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"73ee8eb3-c93f-4d76-9023-f6fe52457e41","type":"message","user":"U7H4TJEG0","text":"<https://github.com/golang/go/issues/14106>","ts":"1593488231.447400","attachments":[{"fallback":"GitHub: proposal: os: File should be an interface · Issue #14106 · golang/go","id":1,"title":"proposal: os: File should be an interface · Issue #14106 · golang/go","title_link":"https://github.com/golang/go/issues/14106","text":"By analogy with #13473, os.File should also be an interface. That would permit a program to use files in the abstract sense, including implementations not provided by the os package.","thumb_url":"https://avatars3.githubusercontent.com/u/4314092?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/golang/go/issues/14106","original_url":"https://github.com/golang/go/issues/14106"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vUu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"486dc33b-7861-460b-87a6-1ff786dd8397","type":"message","user":"U03C6TEAZ","text":"僕は何度か Fd 持ってる ReadCloser を FileLike みたいな interface 名にした事ある。\n```Fd() uintptr```","ts":"1593488265.448000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YBn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2fd21072-30f9-40d7-94a8-5e378c6a6cf2","type":"message","user":"UGXMRNBUM","text":"よくやりますね","ts":"1593488275.448200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5Pi/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"65ad9420-9992-460a-a6f4-1e4e84337e86","type":"message","user":"UNJ2DANJC","text":"bcmills氏は反対っぽい","ts":"1593488401.448900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZpW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cc206601-157f-46df-852d-25bfd950894c","type":"message","user":"U03C6TEAZ","text":"そういえば最近 minux 見なくなった。","ts":"1593488558.449500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Tqv"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"90f85529-1f43-4439-a12d-98b36ebbec67","type":"message","user":"U03C6TEAZ","text":"ダジャレぽい。","ts":"1593488594.449700","team":"T03C4RC8V","reactions":[{"name":"dajare","count":2,"users":["UNJ2DANJC","U06ECBRTJ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"S55"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6b75d6d6-6447-40d6-a064-cc8b3016a5d6","type":"message","user":"U03C6TEAZ","text":"HTTP なファイルシステムとかを抽象化する時に FileLike みたいなのは欲しくなる。","ts":"1593488669.450500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"B2v"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"13776bac-3265-494b-ab6d-d3afc538d413","type":"message","user":"U7H4TJEG0","text":"微妙なのは操作に紐付いてないからなのかな","ts":"1593488729.451600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"52x"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8c5ccf53-c060-4e99-9e0c-1e625460e68b","type":"message","user":"UNJ2DANJC","text":"公式で提供しなくても使いたい側で都度定義でもまあ良い気がします。標準ライブラリでFileLikeインターフェイスを受ける関数が生まれるかどうかが微妙なライン。","ts":"1593488798.453000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"j5m"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"591ea213-dcf3-42ad-8ca2-a60f6bb90c6c","type":"message","user":"U03C6TEAZ","text":"zip をファイルシステムとして扱ったりする時に `import \"net/http\"` がモニョるだけって話でもあったりする。","ts":"1593488840.454400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yqm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6c6feab4-413b-4bfd-94ac-c2f559af8aa3","type":"message","user":"U7H4TJEG0","text":"Chowner, Chmoder, Readerdir, Statter,  Truncator","ts":"1593488853.454500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"h2zp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9409000d-61eb-4258-8a64-c814384919c3","type":"message","user":"U03C6TEAZ","text":"チョウナー","ts":"1593488866.454700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nl6bw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4a2d88b9-92ad-4282-943e-2059672ebbdb","type":"message","user":"UAZ33BKV2","text":"Chsherがあったらチェッシャーだろうか","ts":"1593488932.455200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"y=pKi"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7042a90a-b647-40d2-9461-f2031a5101eb","type":"message","user":"UNJ2DANJC","text":"database/sql/driver 感がある","ts":"1593488998.455700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LRd+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"94adbf79-1709-4110-9c30-9dee27b38a85","type":"message","user":"UGXMRNBUM","text":"Chomateyor","ts":"1593489111.456000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"F/Pdu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9e33f495-a60a-466d-aa48-7eb227984b4b","type":"message","user":"UKHUVMBJR","text":"Kimuratakuyar","ts":"1593489170.456300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AM7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f53365c1-ff8e-4e69-b847-e4023785b6d4","type":"message","user":"U03C6TEAZ","text":"ちなみに `*os.File` は `Fd()` すると内部で `dup(2)` するので本物の fd じゃないんですよね。","ts":"1593490228.456900","team":"T03C4RC8V","reactions":[{"name":"eyes","count":1,"users":["UEACRCY0Z"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Yha"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0798606c-9235-42fc-abc3-8dc5a14cf513","type":"message","user":"U03C6TEAZ","text":"なので net.Listener を File() 経由で Fd 取ると gracefull restart に使えない。","ts":"1593490340.457800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"S3x"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a83e509d-c639-48ba-9baf-40d0badcc7d7","type":"message","user":"U03C6TEAZ","text":"そこでこういう悪いハックが生まれてしまう。","ts":"1593490359.458200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oPu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"18b70cab-2c9f-4734-917d-391886c9393b","type":"message","user":"U03C6TEAZ","text":"<https://github.com/mattn/gospel/blob/4d3febd0fca56ef3a845e6925355aa6207b21c05/server.go#L66>","ts":"1593490360.458400","attachments":[{"fallback":"GitHub: mattn/gospel","id":1,"title":"mattn/gospel","title_link":"https://github.com/mattn/gospel/blob/4d3febd0fca56ef3a845e6925355aa6207b21c05/server.go#L66","text":"Contribute to mattn/gospel development by creating an account on GitHub.","thumb_url":"https://avatars1.githubusercontent.com/u/10111?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/mattn/gospel/blob/4d3febd0fca56ef3a845e6925355aa6207b21c05/server.go#L66","original_url":"https://github.com/mattn/gospel/blob/4d3febd0fca56ef3a845e6925355aa6207b21c05/server.go#L66"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8xBA8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"370d64cb-c5c3-446b-9321-5c4945ffe211","type":"message","user":"U03C6TEAZ","text":"<https://twitter.com/mattn_jp/status/1277833312120102912>","ts":"1593494376.458900","attachments":[{"fallback":"<https://twitter.com/mattn_jp|@mattn_jp>: 実況イメージわろたw <https://twitter.com/tenntenn/status/1277833068460380162> <https://pbs.twimg.com/media/EbvGnyLU8AEjZSU.png>","id":1,"author_name":"mattn","author_subname":"@mattn_jp","author_link":"https://twitter.com/mattn_jp/status/1277833312120102912","author_icon":"https://pbs.twimg.com/profile_images/1022150732634419200/yZg4xLsO_normal.jpg","text":"実況イメージわろたw <https://twitter.com/tenntenn/status/1277833068460380162> <https://pbs.twimg.com/media/EbvGnyLU8AEjZSU.png>","image_url":"https://pbs.twimg.com/media/EbvGnyLU8AEjZSU.png","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1593494177,"service_name":"twitter","from_url":"https://twitter.com/mattn_jp/status/1277833312120102912","original_url":"https://twitter.com/mattn_jp/status/1277833312120102912"},{"color":"32BBF3","fallback":"<https://twitter.com/tenntenn|@tenntenn>: 初回は<https://twitter.com/mrno110|@mrno110>さんです！ -  開発ライブ実況 〜メルペイ Architectチーム Backend Engineer〜 <https://mercari.connpass.com/event/181012/> #mercari_codecast","id":2,"author_name":"tenntennʕ ◔ϖ◔ʔ ==Go","author_subname":"@tenntenn","author_link":"https://twitter.com/tenntenn/status/1277833068460380162","author_icon":"https://pbs.twimg.com/profile_images/1148841452622925825/NJuQHEqa_normal.jpg","text":"初回は<https://twitter.com/mrno110|@mrno110>さんです！ -  開発ライブ実況 〜メルペイ Architectチーム Backend Engineer〜 <https://mercari.connpass.com/event/181012/> #mercari_codecast","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1593494119,"service_name":"twitter","from_url":"https://twitter.com/tenntenn/status/1277833068460380162"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CZVD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3b9d2398-ea93-4058-81c4-d2188c7d6c49","type":"message","user":"U03C6TEAZ","text":"これ面白そう","ts":"1593494379.459200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6Nsm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"37bf0516-6e7e-4f12-a17c-b331bf8f0654","type":"message","user":"UNJ2DANJC","text":"縛りプレイ感\nw3mでググり始めたら面白いかも","ts":"1593496327.461000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xMW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a4800ed4-d43d-46b7-af37-a89a4fab3d56","type":"message","user":"UNJ2DANJC","text":"そこそこ大きいGoのリポジトリだと `go build ./...` （ビルド）より `go list ./... | xargs -I {} go test -c {}` （テストコードのコンパイル）の方が遅いっぽい。当たり前っちゃ当たり前かもしれない。","ts":"1593500370.462600","edited":{"user":"UNJ2DANJC","ts":"1593500419.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VDf3M"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
