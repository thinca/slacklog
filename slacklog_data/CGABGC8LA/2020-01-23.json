[{"client_msg_id":"5e24601a-83fc-448d-96b1-b8eac131c951","type":"message","user":"UGXMRNBUM","text":"resource embedding、簡易なfile systemを構築する系ばっかりだなぁ。\nツリー構造なんて必要なくて、ただただリソースを埋め込みたいだけなんだけど…","ts":"1579706868.185500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dChF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8bf3b840-9690-4a41-911c-497920d408c3","type":"message","user":"UGXMRNBUM","text":"作るか","ts":"1579706904.185700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PSDGo"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8ceca85f-5763-47f1-9cbe-b48bc1202c2f","type":"message","user":"U03C6TEAZ","text":"packr が近いかも。","ts":"1579707309.186000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Kz7u"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a167620d-ad85-4d4e-a032-d3b6ade6da63","type":"message","user":"UGXMRNBUM","text":"むむむ","ts":"1579707504.186400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1NrF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8635e5db-27a3-4c57-ab0f-db693dad343d","type":"message","user":"UGXMRNBUM","text":"なるほど…","ts":"1579707566.186800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"y4a"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"767978d0-83f1-46a3-ac85-f374eb8978bc","type":"message","user":"UGXMRNBUM","text":"気付きとしては、変な要求が僕の中にありますね","ts":"1579707589.187400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1lbF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"65eb51b6-d1b0-4bec-b1b5-fc161855eeb1","type":"message","user":"U03C6TEAZ","text":"作りたい時は、作る","ts":"1579707766.188000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WiA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a1884f1c-b32f-4025-8c06-b00036d357b8","type":"message","user":"UGXMRNBUM","text":"そうですね","ts":"1579707814.188200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1zJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"02320f0a-9688-4fe8-9981-884c3dd8f1a4","type":"message","user":"UGXMRNBUM","text":"```$ pack -package hoge -name gopher -input gopher.jpg -output gopher.go\n$ cat gopher.go\npackage hoge\n\nvar _gopher = bytes.NewBuffer([]byte{0xXX, 0xXX, ...})\n\nfunc Gopher() io.Reader {\n  return _gopher\n}```\nこんなんがほしい。作りますわ","ts":"1579707846.188800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2ji"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2cc8d6e6-b508-4acd-b80c-3034b7a81edf","type":"message","user":"U03C6TEAZ","text":"sonictemplate に min/max/abs を入れた。 <https://twitter.com/mattn_jp/status/1220182372320043009>","ts":"1579749471.189200","attachments":[{"fallback":"<https://twitter.com/mattn_jp|@mattn_jp>: と思ったので vim 側で倒した。 <https://pbs.twimg.com/tweet_video_thumb/EO71ZPnUwAAjXDc.jpg>","id":1,"author_name":"mattn and 100 others","author_subname":"@mattn_jp","author_link":"https://twitter.com/mattn_jp/status/1220182372320043009","author_icon":"https://pbs.twimg.com/profile_images/1022150732634419200/yZg4xLsO_normal.jpg","text":"と思ったので vim 側で倒した。","thumb_url":"https://pbs.twimg.com/tweet_video_thumb/EO71ZPnUwAAjXDc.jpg","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1579749122,"service_name":"twitter","thumb_width":717,"thumb_height":448,"video_html":"<video autoplay loop muted poster=\"https://pbs.twimg.com/tweet_video_thumb/EO71ZPnUwAAjXDc.jpg\" width=\"718\" height=\"448\"><source type=\"video/mp4\" src=\"https://video.twimg.com/tweet_video/EO71ZPnUwAAjXDc.mp4\"></video>","video_html_width":718,"video_html_height":448,"from_url":"https://twitter.com/mattn_jp/status/1220182372320043009","original_url":"https://twitter.com/mattn_jp/status/1220182372320043009"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"55Wq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"81988dbe-555e-4308-9512-831f2df77581","type":"message","user":"U03C6TEAZ","text":"contruct はやく来てくれ","ts":"1579749551.189600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Q=A"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"96e4770a-c848-40aa-a479-7591b13d03a7","type":"message","user":"UDDCM376D","text":"お","ts":"1579751546.189800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Fzk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"665dafae-90e5-4e3e-b9dc-2208dbd0a731","type":"message","user":"UDDCM376D","text":"便利そう","ts":"1579751547.190000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Qo7P"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3658cb12-69aa-4b1f-b0c6-d19461273049","type":"message","user":"U03C6TEAZ","text":"これをカーソル位置から特定して作れると楽なんでしょうけどね。","ts":"1579751595.190400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TU68"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d73efcc8-0f44-4ce3-aa96-0bfd71ad959a","type":"message","user":"U03C6TEAZ","text":"LSP 的には code action から `make function min/max` みたいなのがあればイイカンジだけど、特殊化しすぎだな。","ts":"1579751840.191100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3fcrw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ce75ecb4-0e92-4c4d-b9bc-97b6dd8c03c7","type":"message","user":"U03C6TEAZ","text":"<https://github.com/bxcodec/go-clean-arch>","ts":"1579753448.191300","attachments":[{"fallback":"GitHub: bxcodec/go-clean-arch","id":1,"title":"bxcodec/go-clean-arch","title_link":"https://github.com/bxcodec/go-clean-arch","text":"Go (Golang) Clean Architecture based on Reading Uncle Bob's Clean Architecture - bxcodec/go-clean-arch","thumb_url":"https://repository-images.githubusercontent.com/93808874/0f2fe900-36b5-11ea-83df-fdc26f425564","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":517,"thumb_height":250,"from_url":"https://github.com/bxcodec/go-clean-arch","original_url":"https://github.com/bxcodec/go-clean-arch"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"A10"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dee4c8c5-c13d-4658-bd45-9579c0d1bed5","type":"message","user":"UG6DF6W87","text":"<https://github.com/bxcodec/go-clean-arch/blob/7408b3096bffa8cf3bb31c27f5c6f50fe2957f4f/article/repository/mysql_article.go#L69>\n実行したい SQL 文につき一つ Repository 生やさないといけないの、あれだなぁ...って思いが最近強い...","ts":"1579757058.193400","thread_ts":"1579757058.193400","attachments":[{"fallback":"GitHub: bxcodec/go-clean-arch","id":1,"title":"bxcodec/go-clean-arch","title_link":"https://github.com/bxcodec/go-clean-arch/blob/7408b3096bffa8cf3bb31c27f5c6f50fe2957f4f/article/repository/mysql_article.go#L69","text":"Go (Golang) Clean Architecture based on Reading Uncle Bob's Clean Architecture - bxcodec/go-clean-arch","thumb_url":"https://repository-images.githubusercontent.com/93808874/0f2fe900-36b5-11ea-83df-fdc26f425564","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":517,"thumb_height":250,"from_url":"https://github.com/bxcodec/go-clean-arch/blob/7408b3096bffa8cf3bb31c27f5c6f50fe2957f4f/article/repository/mysql_article.go#L69","original_url":"https://github.com/bxcodec/go-clean-arch/blob/7408b3096bffa8cf3bb31c27f5c6f50fe2957f4f/article/repository/mysql_article.go#L69"}],"reply_count":7,"replies":[{"user":"U06BRP8VD","ts":"1579759569.200900"},{"user":"UG6DF6W87","ts":"1579759928.201200"},{"user":"U06BRP8VD","ts":"1579761098.201500"},{"user":"U06BRP8VD","ts":"1579761238.201700"},{"user":"U06BRP8VD","ts":"1579761503.202000"},{"user":"UG6DF6W87","ts":"1579761673.202600"},{"user":"U06BRP8VD","ts":"1579761752.202800"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BFNB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1c6d9dab-d10b-4e42-b28e-b901bc9cbb44","type":"message","user":"UG6DF6W87","text":"~SQL 文~データベース問い合わせを遅延評価したい","ts":"1579757083.193800","edited":{"user":"UG6DF6W87","ts":"1579757384.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"M0yF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"12026b54-547d-4f01-881d-446fbb3bffd8","type":"message","user":"U0M7GCBPD","text":"かといってリッチな ORM に頼ると性能劣化が読めないので安全ではありますね… &gt;1 SQL, 1 Repository\n今まさに苦しめられて explain とにらめっこしてるので","ts":"1579757369.194900","team":"T03C4RC8V","reactions":[{"name":"sorena","count":1,"users":["UG6DF6W87"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"szh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"80056705-9f00-4c57-a8c6-7e484f30c58d","type":"message","user":"U03C6TEAZ","text":"Go にデファクトな ORM ほしい。","ts":"1579757425.195300","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":4,"users":["UG6DF6W87","UEA8T80GY","U8CC7MDCL","URQDW4JUE"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+bQG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6b7c3a3b-0b61-4db7-98d9-ba9ae97ed962","type":"message","user":"UG6DF6W87","text":"ただ、SQL 文毎に書くと SQL 文の表現力に引き摺られてドメインロジックが漏れ出したりするんですよねぇ...","ts":"1579758211.198800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Mcb"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"aa2c1f97-c6ed-4169-a982-7a5a132302fa","type":"message","user":"UG6DF6W87","text":"<https://github.com/bxcodec/go-clean-arch/blob/7408b3096bffa8cf3bb31c27f5c6f50fe2957f4f/article/usecase/article_ucase.go#L162>\nこうやって Store を呼ぶと model 内の制約をどうやって usecase から逃がすか悩みませんか","ts":"1579758473.200000","attachments":[{"fallback":"GitHub: bxcodec/go-clean-arch","id":1,"title":"bxcodec/go-clean-arch","title_link":"https://github.com/bxcodec/go-clean-arch/blob/7408b3096bffa8cf3bb31c27f5c6f50fe2957f4f/article/usecase/article_ucase.go#L162","text":"Go (Golang) Clean Architecture based on Reading Uncle Bob's Clean Architecture - bxcodec/go-clean-arch","thumb_url":"https://repository-images.githubusercontent.com/93808874/0f2fe900-36b5-11ea-83df-fdc26f425564","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":517,"thumb_height":250,"from_url":"https://github.com/bxcodec/go-clean-arch/blob/7408b3096bffa8cf3bb31c27f5c6f50fe2957f4f/article/usecase/article_ucase.go#L162","original_url":"https://github.com/bxcodec/go-clean-arch/blob/7408b3096bffa8cf3bb31c27f5c6f50fe2957f4f/article/usecase/article_ucase.go#L162"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4YyK"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"137073c3-eea4-4c36-a348-3e1d90d58a24","type":"message","user":"U06BRP8VD","text":"ORMは、その存在自体がほんとに難しい。","ts":"1579759548.200800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XUr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"67e86a55-ddbb-45b6-b745-67abb9f6e4a2","type":"message","user":"U06BRP8VD","text":"メソッドを、ということかな?","ts":"1579759569.200900","thread_ts":"1579757058.193400","parent_user_id":"UG6DF6W87","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/aSk0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0cea9e36-89bb-43c9-8a91-976684a63eef","type":"message","user":"UG6DF6W87","text":"そうですね\nここの `Fetch` であれば `SELECT id,title,content, author_id, updated_at, created_at FROM article WHERE created_at &gt; ? ORDER BY created_at LIMIT ?` しか実行できないのが...という","ts":"1579759928.201200","thread_ts":"1579757058.193400","parent_user_id":"UG6DF6W87","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/5kq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5f47adc3-681b-4a01-bda1-eab31ed907f2","type":"message","user":"U06BRP8VD","text":"そういうとき Functional Option Pattern パータンで、クエリの`WHERE` 句を拡張可能にするってのはありますね。","ts":"1579761098.201500","thread_ts":"1579757058.193400","parent_user_id":"UG6DF6W87","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ngl/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"471ce93d-4a5e-4dd6-8586-002c7dbbe897","type":"message","user":"U06BRP8VD","text":"クエリビルダ(やORMのセッションオブジェクト)をフィルタする関数を関数オプションとしてクエリの最後に複数受け取れるようにして、動的にクエリを作り出すんです。","ts":"1579761238.201700","thread_ts":"1579757058.193400","edited":{"user":"U06BRP8VD","ts":"1579761247.000000"},"parent_user_id":"UG6DF6W87","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=piFf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2e1504f8-a868-4d10-941f-6a469e6847b6","type":"message","user":"U06BRP8VD","text":"お仕事コードなんで全体を見せることはできないんですが、大まかな構造がわかる程度に。","ts":"1579761503.202000","thread_ts":"1579757058.193400","parent_user_id":"UG6DF6W87","files":[{"id":"FT0C0CQL8","created":1579761501,"timestamp":1579761501,"name":"Untitled.go","title":"Untitled","mimetype":"text/plain","image_exif_rotation":0,"filetype":"go","pretty_type":"Go","user":"U06BRP8VD","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":829,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FT0C0CQL8/Untitled.go","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FT0C0CQL8/download/Untitled.go","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/FT0C0CQL8/Untitled.go","permalink_public":"https://slack-files.com/T03C4RC8V-FT0C0CQL8-279bf06799","edit_link":"https://vim-jp.slack.com/files/U06BRP8VD/FT0C0CQL8/Untitled.go/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1rv"}]},{"client_msg_id":"11d727b0-f888-43ab-a17b-7210ebf9582c","type":"message","user":"UG6DF6W87","text":"おーー、なるほど、これいいですね\nありがとうございます!\n\nちょっと今書いてるやつに入れれるか考えよ","ts":"1579761673.202600","thread_ts":"1579757058.193400","parent_user_id":"UG6DF6W87","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eus8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"765cf6a0-a3e1-497e-8591-1f159ccf7e9a","type":"message","user":"U06BRP8VD","text":"クエリビルダをいじる部分をどうやって抽象化するか悩んだ時にこのパターンが生まれました。","ts":"1579761752.202800","thread_ts":"1579757058.193400","parent_user_id":"UG6DF6W87","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UG6DF6W87"]},{"name":"goodpoem","count":1,"users":["UG6DF6W87"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GDyZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"BD3F3FE4-BBF0-415D-836F-1E16B9C04F38","type":"message","user":"UDDCM376D","text":"作るしか","ts":"1579762424.203400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ME6b"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5d97f3de-ee6d-48b2-a2d7-6fc4e1719a76","type":"message","user":"UKHUVMBJR","text":"つらみ\n<https://xkcd.com/927/>","ts":"1579762497.203600","attachments":[{"fallback":"xkcd: Standards","id":1,"author_name":"xkcd","author_link":"https://xkcd.com/","title":"Standards","title_link":"https://xkcd.com/927/","text":"[Title text] \"Fortunately, the charging one has been solved now that we've all standardized on mini-USB. Or is it micro-USB? Shit.\"","image_url":"https://imgs.xkcd.com/comics/standards.png","blocks":null,"service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/xkcd.png","original_url":"https://xkcd.com/927/"}],"team":"T03C4RC8V","reactions":[{"name":"fuita","count":2,"users":["U06BRP8VD","U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"f0U"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"be401fca-4b5b-4115-9c22-e153604374e8","type":"message","user":"UKHUVMBJR","text":"gocloud.dev でもDocstore(NoSQL)から構造体へのバインドは提供されているけどSQLから構造体はない\ngoogleの息吹を感じる","ts":"1579762655.205100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gLrq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5d099ed1-b385-4fe1-9cfe-44de6f032bb1","type":"message","user":"U03C4RC8X","text":"このstandardsほんとうに好きで、よく引用する","ts":"1579762905.205700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+Vs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"145dd691-4d2f-438b-85b1-ad202a6af3f0","type":"message","user":"U03C4RC8X","text":"うちのブログのタイトルもこの気持ちをもってstandardsとしてます","ts":"1579762917.206200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ali3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9d87be90-6df4-4c11-ad54-839c72e50a46","type":"message","user":"U03C4RC8X","text":"standards最大の問題は入力がめちゃくちゃつらいこと","ts":"1579762928.206700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XAx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fec57a9c-323f-4f55-a755-4d2161d0263d","type":"message","user":"UAUFDS92N","text":"他の方のGoのコードを読んでいると構造体を宣言するときにポインタとして宣言してるのをよく見るんですけど何か理由ってあるんですか？\nポインタとして宣言しなくても動くと思ったので質問させていただきました。","ts":"1579773125.208100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BKtO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5ccbcc31-4a3a-40fb-a68b-5b46dff80ada","type":"message","user":"UKHUVMBJR","text":"宣言がどこを指すかは不明ですが、ざっくりとは実体のコピーをしないためですかね","ts":"1579773251.209000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5Gp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"03a90c19-a3ec-4aa8-91b1-b651a61edc18","type":"message","user":"UDDCM376D","text":"```type Gorilla {\n    Name string\n}\n\nfunc NewGorilla() *Gorilla {\n    return Gorilla{Name: 'Gorilla'}\n}```","ts":"1579773291.209700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zYc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c6b78b79-30eb-4c97-93c4-e15b93c2995e","type":"message","user":"UDDCM376D","text":"こう？","ts":"1579773293.209900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Xq8g0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"385f9f8f-5c97-453e-ab5f-6c983c390a68","type":"message","user":"UAUFDS92N","text":"そうです","ts":"1579773307.210100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pOdA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ef88eb8d-74c0-4924-95ed-e200d8b47d0b","type":"message","user":"UKHUVMBJR","text":"`&amp;Gorrila{...}` ?","ts":"1579773325.210400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"i2Xd4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"765a5f05-20c3-477b-8e54-e59385f78acb","type":"message","user":"U06ECBRTJ","text":"そうだよね ポインタで返す場合は `&amp;Gorrila{,,,}` になるはずだよね","ts":"1579773379.211200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9/GW1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"32b8b462-61c0-4333-8098-ffaaf006c49c","type":"message","user":"UAZ33BKV2","text":"そろそろ gorilla vim の準備で応答できなくなりそうw","ts":"1579773407.211800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6yxVm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a8f3832b-1cbc-41e7-a5e0-09b79bb00724","type":"message","user":"UKHUVMBJR","text":"他でポインタが必要そうなときはポインタで返すとかですかね、あとは\nで大体そうなる","ts":"1579773441.212400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Zw1m"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f1c3c819-aa27-4ee1-9458-00a30cbedc35","type":"message","user":"U03C6TEAZ","text":"このコードだけでは判断できない。","ts":"1579773644.215100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0ln7Z"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2eefd103-3e19-4bf8-a25c-9406addbd565","type":"message","user":"U06BRP8VD","text":"`func ReadGorillaFrom(r io.Reader) (*Gorilla, error)` みたいなやつでエラーの時に `return nil, err` って書くか `return Gorilla{}, err` って書くかみたいなのはある。","ts":"1579773656.215400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MBXbs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f83accbe-8fc6-4fbb-a748-3c223fb4f2a1","type":"message","user":"U06BRP8VD","text":"僕は基本はポインタ返す。メモリ効率とか考えるときは構造体のまま","ts":"1579773726.217400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nIs4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fe135602-6e80-403d-b0ee-635ca1ee3187","type":"message","user":"U03C6TEAZ","text":"ここ go の難しいところなんですが、go は賢すぎて実体で切った方がコピーが少なくなるケースがあるんです。","ts":"1579773769.218800","team":"T03C4RC8V","reactions":[{"name":"sorena","count":3,"users":["UKHUVMBJR","U06BRP8VD","UNJ2DANJC"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XVUZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9179596c-258e-433f-920d-b1b6100e860e","type":"message","user":"U06BRP8VD","text":"ほんとそれなんですよね","ts":"1579773795.219400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jZ5h"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8ecfe33c-e9a8-4916-a881-304afbf5118a","type":"message","user":"UKHUVMBJR","text":"Don't be cleverの気持ちでいるのでよっぽどのとき以外はポインタにする程度のGo使いです。","ts":"1579773826.220900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fW8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7633e14b-6ccb-4d84-870c-470c6982dc90","type":"message","user":"UG6DF6W87","text":"その辺私は意識できていないですね\n脳死 pointer 返し..","ts":"1579773842.221200","team":"T03C4RC8V","reactions":[{"name":"sorena","count":1,"users":["UKHUVMBJR"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AqTi"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b22764f0-f188-499a-8937-61cd8c8d5418","type":"message","user":"U06BRP8VD","text":"本気で考えるときはヒープエスケープとかも見なきゃいけないからまたきつい","ts":"1579773992.221900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qDC+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d599c755-7fa3-44b4-a8e7-59e0e76b8c74","type":"message","user":"U06BRP8VD","text":"なので普段は脳死で良いかと。","ts":"1579774052.222500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tAdql"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fa930cfc-3793-47bf-accd-51fe1e629c8e","type":"message","user":"U03C6TEAZ","text":"大きめの構造体配列を扱う時にソートしたりしないのなら実体が速い。","ts":"1579774154.224300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gjH"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"41902b78-3729-42ed-9122-04077e6592f3","type":"message","user":"U03C6TEAZ","text":"僕もだいたい脳死。","ts":"1579774204.225800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"POpk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b2f33a83-25ea-4895-9468-68693ecbfade","type":"message","user":"UAUFDS92N","text":"なるほど…\n実態のほうが早いけど基本ポインタで返したりしたほうが良いって認識で大丈夫ですかね…？","ts":"1579774265.228000","team":"T03C4RC8V","reactions":[{"name":"okbockjoe","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wJtl5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4bf01a84-a7f8-42f0-aa35-4025abe80af8","type":"message","user":"U03C6TEAZ","text":"あとゼロ値を扱うかどうかにもよります。","ts":"1579774306.229000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CbS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eec7d8d1-ebde-4abe-b8fd-e93c9bff67a7","type":"message","user":"U70VATSG4","text":"実体のほうが安全な場合ありそう...と思いつつ読み手にポインタでない理由を伝えるのが面倒なので脳死ポインタにすることが多いですね。","ts":"1579774307.229200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uxys"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ff9ff827-b719-46d8-9296-ab36aa6ebd64","type":"message","user":"U06BRP8VD","text":"速さを目的に実体使うのは正着とは言えないので要注意。それだけにとどまらないから。実体使ってても簡単に遅く(=ポインタと同等)になりうる。","ts":"1579774414.231800","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UAUFDS92N"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"055F"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f883e3c2-4c39-4748-891d-615e6853654d","type":"message","user":"UG6DF6W87","text":"`[]Hoge` と `[]*Hoge` とかも...\n// 人の質問に便乗","ts":"1579774440.232200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gHxO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a7839822-b17b-4cd1-9bd6-de209bd5e517","type":"message","user":"UKHUVMBJR","text":"ループ変数（あとgoroutineに渡すやつ）is罠","ts":"1579774469.232700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tjl/r"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"da9b420b-24fa-4e4d-bf93-b065c8610883","type":"message","user":"U06BRP8VD","text":"そうそう `[]*Hoge` を `for` で回して goroutine にクロージャーでわたして無事死亡とかね。誰もが通る道だ。","ts":"1579774559.233800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"55PT5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"164f2cbf-9097-401f-afe7-6a8fec437467","type":"message","user":"U06BRP8VD","text":"じゃあ []Hoge なら良いのかというとそれも違ったりする.","ts":"1579774585.234200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RSWwn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"672a26d2-a688-47b0-99f1-c78de8d54aba","type":"message","user":"U03C6TEAZ","text":"スライスの伸長が起きる時には必ず実体がコピーされるので伸長が頻繁に起きるのであればポインタが有利。","ts":"1579774771.236300","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":2,"users":["UG6DF6W87","UAUFDS92N"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zlnP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"54fd72f0-3790-4cf8-a73b-2e3d58adf554","type":"message","user":"UNJ2DANJC","text":"[]Tのほうがループぶん回すの速いのかと思ってました。","ts":"1579777815.238400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"keXgG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"beca382f-c4ba-4b90-b618-7cd86e119a13","type":"message","user":"UNJ2DANJC","text":"[]Tのほうがメモリ上にきれいに並んでそうだなと","ts":"1579777935.239300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"trhy"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"83ec8908-cc98-4a31-9f7a-7bbc1bbc724f","type":"message","user":"U0M7GCBPD","text":"空間的な局所性をとるかコピーを回避するか（実体のサイズにもよりそう）","ts":"1579789051.243400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5bu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
