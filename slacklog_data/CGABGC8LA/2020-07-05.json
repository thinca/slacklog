[{"client_msg_id":"ba77dbfb-32c9-4058-ac12-2620424267be","type":"message","user":"U06BRP8VD","text":"moduleの補完候補を決定するロジックと、packageの補完候補を決定するロジック、当初思ったよりも別物だわ。","ts":"1593942708.058600","team":"T03C4RC8V","reactions":[{"name":"eyes","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tbNnP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8095be03-ce0f-4b6a-95cd-cb99a9ca20c8","type":"message","user":"U06BRP8VD","text":"その違いをまとめたらこの2つの関数になった。","ts":"1593944527.059500","files":[{"id":"F0178RD57NC","created":1593944525,"timestamp":1593944525,"name":"Untitled","title":"Untitled","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"Plain Text","user":"U06BRP8VD","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":288,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F0178RD57NC/untitled","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F0178RD57NC/download/untitled","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F0178RD57NC/untitled","permalink_public":"https://slack-files.com/T03C4RC8V-F0178RD57NC-75669d2602","edit_link":"https://vim-jp.slack.com/files/U06BRP8VD/F0178RD57NC/untitled/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FFUuQ"}]},{"client_msg_id":"d7211eb2-14e8-419f-bea5-198893981fb4","type":"message","user":"U06BRP8VD","text":"moduleにマッチするleadはmodule pathよりも長くなることがある。一方packageのほうはimport pathより長いleadはそのpackageには決してマッチしない。","ts":"1593945031.060900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8bZwL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5cf411e0-2cdd-4af3-adcb-83f8dd367535","type":"message","user":"U06BRP8VD","text":"キャッシュの導入が今一つうまくいかねぇな…","ts":"1593956812.062600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HyjK"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c31eb6e9-2fe7-4d4c-a4b3-911ea800d2b3","type":"message","user":"U06BRP8VD","text":"キャッシュいれても再計算(=パッケージ一覧の再取得)が走るとめちゃ遅い。気に食わない。","ts":"1593959507.063300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GYPa"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"41f056d6-fcee-4322-b959-ca20aacc6e01","type":"message","user":"U06BRP8VD","text":"「指定した import path以下全部」でパッケージ読むことはできるんだけど、本当に欲しいのは「指定したimport pathとその直下の～」くらいなんだよな。","ts":"1593960611.064700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Mcwd"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4ff9d801-0815-418a-9677-4b20ac2577c0","type":"message","user":"UGXMRNBUM","text":"今ってgo listで読んでるんですか？","ts":"1593960624.065000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cWG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1d84eeb9-b509-4df4-8b55-010cd7e9db39","type":"message","user":"U06BRP8VD","text":"ですです。","ts":"1593960629.065200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WLdYv"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"181c73a1-526f-4edd-b53c-4b781aed0053","type":"message","user":"UGXMRNBUM","text":"あーじゃあとても重い…","ts":"1593960638.065600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BIIXd"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3c8b354f-ada8-42a8-94ce-f84f15f0405a","type":"message","user":"U06BRP8VD","text":"モジュール一覧は余裕なんですけどね…","ts":"1593960663.065900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"l8TWp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a65c7e4b-24e1-40ce-a81f-123e60c89dbb","type":"message","user":"U06BRP8VD","text":"んー要らない情報もfillされるから、それを省略する手段がないかなぁ、ってソースを見てたけどなさげでね…","ts":"1593960741.067800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rmk3r"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b1db485f-9cc8-41dd-a35a-f925c0c84a16","type":"message","user":"UGXMRNBUM","text":"go listから切り出したほうが早そうですね。\nあんまりやりたくない作業だ…","ts":"1593960777.068500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dlW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6ff586a5-ed17-4e81-ba60-cf37a50706de","type":"message","user":"U06BRP8VD","text":"もう難しいこと考えんと go list all で全部だして std とかぶってるところ省いてキャッシュ…みたいにやるのが吉かもしれないと思いつつ…","ts":"1593960831.070000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"h89W"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3d114a63-7e72-4fa6-9a40-701d389389d6","type":"message","user":"U06BRP8VD","text":"ちなみにどのくらい遅いかというと、お仕事プロジェクトでこんな感じw","ts":"1593960998.071300","files":[{"id":"F016XNTP1C1","created":1593960995,"timestamp":1593960995,"name":"Untitled","title":"Untitled","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"Plain Text","user":"U06BRP8VD","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":84,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F016XNTP1C1/untitled","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F016XNTP1C1/download/untitled","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F016XNTP1C1/untitled","permalink_public":"https://slack-files.com/T03C4RC8V-F016XNTP1C1-1b01533d43","edit_link":"https://vim-jp.slack.com/files/U06BRP8VD/F016XNTP1C1/untitled/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QFac/"}]},{"client_msg_id":"bfa79a62-ae58-433b-ae0e-1e1b33fa7415","type":"message","user":"UGXMRNBUM","text":"ウワァ、嫌な感じの重さですね","ts":"1593961020.071800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"a082"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"972f3a66-b88c-4fc0-ba15-897ec758688f","type":"message","user":"UGXMRNBUM","text":"短縮するのに苦労するけどUIで起きるとイラッとするタイプの遅延","ts":"1593961033.072200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bVgY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"77271d9f-c458-4517-99e2-f15d42ff262c","type":"message","user":"U06BRP8VD","text":"ああそうそう。ソース読んで `-find` 付けるとちょっと速くなることが分かったw","ts":"1593961057.072600","files":[{"id":"F016HNRHLJH","created":1593961055,"timestamp":1593961055,"name":"Untitled","title":"Untitled","mimetype":"text/plain","image_exif_rotation":0,"filetype":"text","pretty_type":"Plain Text","user":"U06BRP8VD","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":90,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F016HNRHLJH/untitled","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F016HNRHLJH/download/untitled","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U06BRP8VD/F016HNRHLJH/untitled","permalink_public":"https://slack-files.com/T03C4RC8V-F016HNRHLJH-85b8b50d3b","edit_link":"https://vim-jp.slack.com/files/U06BRP8VD/F016HNRHLJH/untitled/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aR/"}]},{"client_msg_id":"6ea9cf1c-086d-4506-a10c-0fcea86686eb","type":"message","user":"UGXMRNBUM","text":"<http://golang.org/x/tools/go/packages|golang.org/x/tools/go/packages> で Config いじって動かすと少しはまともになったりするのかな","ts":"1593961080.073300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"l8J"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e905c375-588b-4731-965a-84ac38939969","type":"message","user":"UGXMRNBUM","text":"先にfastwalkとかでgoファイルをさらってきて、1ディレクトリあたり1つのみに絞ってFileSet組み立てて…とかやったらだめなんだろうか","ts":"1593961136.074000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Fd0c"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f3cf7818-ca25-46a6-9600-5fe3f1b234d0","type":"message","user":"UGXMRNBUM","text":"別のバイナリわざわざ作るのも難ですけど","ts":"1593961145.074300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"J3Yt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7ae12374-55c4-4297-8e36-e0786a50810d","type":"message","user":"UGXMRNBUM","text":"あーでもそうか、出発点がimport pathなのか...","ts":"1593961165.074600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VY1eJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"947b8958-80ca-4533-8d2c-397e26dad8c5","type":"message","user":"UGXMRNBUM","text":"そうなんですよ","ts":"1593876889.046200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oir97"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7c9d4041-033c-4235-a70f-af01670033c9","type":"message","user":"UGXMRNBUM","text":"あれはanalysis/internal/analysisflagsで定義されてるフラグで","ts":"1593876940.046800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Wt4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1369b813-7596-4b2e-85a7-a5a86e1cb5c9","type":"message","user":"UGXMRNBUM","text":"analysis/multicheckerとかanalysis/singlecheckerとかから利用されてますね","ts":"1593876965.047200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HGInf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ce8e96dd-d4ec-4905-9141-205d16af664b","type":"message","user":"UGXMRNBUM","text":"-jsonってフラグつけてもなおJSON以外のもの吐かれると、やや処理がしづらい…","ts":"1593876997.047700","edited":{"user":"UGXMRNBUM","ts":"1593878647.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uL3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ffe27f00-e0c7-4c60-8a25-2b98713d4275","type":"message","user":"U06BRP8VD","text":"あー… -json付けないと逆にでないので本体じゃなくてそれらが原因なんか…","ts":"1593879106.048400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+5zv"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1edc727c-7b83-48a8-9907-2241bbd0ae8e","type":"message","user":"UGXMRNBUM","text":"かと思ったんですがちょっと変な動きしますね","ts":"1593879284.049000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"g+Vs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7255309d-37ea-4d5a-9650-21a1e4b5329a","type":"message","user":"UGXMRNBUM","text":"cmd/vet にも multichecker にも `# {package name}` を出力してる気配がないな","ts":"1593912176.050900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"q6fC"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"489dda7e-577d-4eca-ba3a-09e022929853","type":"message","user":"UGXMRNBUM","text":"まぁいいや、無視する処理を書くか…\nユーザーからしたらどこから出てこようが知ったこっちゃないもんな","ts":"1593912220.051700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5w6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"522463e3-e26b-4a8e-ae1e-1f2acb832d90","type":"message","user":"UNJ2DANJC","text":"golangci-lint v1.28.0でkyoh86さんのexportloopref入りましたね \n<https://github.com/golangci/golangci-lint/releases/tag/v1.28.0|https://github.com/golangci/golangci-lint/releases/tag/v1.28.0>","ts":"1593917681.053200","attachments":[{"fallback":"GitHub: Release v1.28.0 · golangci/golangci-lint","id":1,"title":"Release v1.28.0 · golangci/golangci-lint","title_link":"https://github.com/golangci/golangci-lint/releases/tag/v1.28.0","text":"Changelog f1a46f9 Add Noctx (#1179) dc260be Add exportloopref linter (#1163) 01b566a Add go-header linter (#1181) b22e3f1 Added sqlclosecheck to linters (#1203) 38d298c Adding gofumpt (#1177) 95412...","thumb_url":"https://repository-images.githubusercontent.com/132145189/05239680-dfaf-11e9-9646-2c3ef2f5f8d4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":500,"thumb_height":250,"from_url":"https://github.com/golangci/golangci-lint/releases/tag/v1.28.0","original_url":"https://github.com/golangci/golangci-lint/releases/tag/v1.28.0"}],"team":"T03C4RC8V","reactions":[{"name":"subara","count":5,"users":["UEB17JJJE","UAZ33BKV2","U9S4G0LJW","U06BRP8VD","UFYACJ537"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6rb"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7f4bc549-8323-4ce3-a10b-e4544c5376eb","type":"message","user":"UGXMRNBUM","text":"お、ホントだ。ありがとうございます","ts":"1593918319.054000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"svt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"57a96db8-be4c-4dde-a89d-9bad170e537f","type":"message","user":"U06BRP8VD","text":"<https://gist.github.com/koron/a5857248323628bf4f633001636b576e>\n\n実験作。まだ少しおかしいけど module &amp; package はさばけるようになってきた。\n\n```:echo gocomplete#complete_package('<http://github.com/m|github.com/m>')```\nを実行するとこんなのが出てくる。\n\n```['<http://github.com/magiconair|github.com/magiconair>', '<http://github.com/mailru|github.com/mailru>', '<http://github.com/markbates|github.com/markbates>', '<http://github.com/mattn|github.com/mattn>', '<http://github.com/matttproud|github.com/matttproud>', '<http://github.com/miekg|github.com/miekg>', '<http://github.com/mitchellh|github.com/mitchellh>', '<http://github.com/modern-go|github.com/modern-go>', '<http://github.com/montanaflynn|github.com/montanaflynn>', '<http://github.com/mwitkow|github.com/mwitkow>']```","ts":"1593922314.055400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nyY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2340448f-0149-4411-9641-3df55e5146ea","type":"message","user":"U06BRP8VD","text":"あと標準パッケージが検索対象に入ってないか…","ts":"1593922379.055900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xgr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6e1ebc7c-102d-49fe-bf45-e15c058129f0","type":"message","user":"UNJ2DANJC","text":"goplsでやって欲しいやつ <https://github.com/golang/go/issues/35877>","ts":"1593929586.056800","attachments":[{"fallback":"GitHub: x/tools/gopls: autocomplete in import blocks · Issue #35877 · golang/go","id":1,"title":"x/tools/gopls: autocomplete in import blocks · Issue #35877 · golang/go","title_link":"https://github.com/golang/go/issues/35877","text":"Suggested in microsoft/vscode-go#2918.","thumb_url":"https://avatars3.githubusercontent.com/u/4314092?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/golang/go/issues/35877","original_url":"https://github.com/golang/go/issues/35877"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fe472"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
