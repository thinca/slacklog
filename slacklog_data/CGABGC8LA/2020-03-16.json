[{"client_msg_id":"eeabcfc4-8951-49cb-bc2a-6327b95ef76f","type":"message","user":"U7H4TJEG0","text":"Go 1.14の主なregression\n\n- runtime: mlock of signal stack failed: 12 #37436 <https://github.com/golang/go/issues/37436>\n  - 現象: mlockに失敗した時にメッセージ (increase the mlock limit (ulimit -l) or update your kernel to 5.3.15+, 5.4.2+, or 5.5+) を表示してpanicする\n  - 根本原因: Linuxカーネルのバグ (<https://bugzilla.kernel.org/show_bug.cgi?id=205663>)\n  - 影響範囲: Linux 5.2.x, 5.3.0-5.3.14, 5.4.0-5.4.1\n  - Go側の原因: <https://github.com/golang/go/issues/35777> <https://go-review.googlesource.com/c/go/+/209899/> <https://go-review.googlesource.com/c/go/+/210098>\n  - 修正: mlockで失敗したらwiki page (<https://golang.org/wiki/LinuxKernelSignalVectorBug>) へのリンクを表示して継続する、予期しないSIGSEGV, SIGBUGを受けてmlockに失敗していたらstack traceにwiki pageへのリンクを表示する <https://go-review.googlesource.com/c/go/+/223417>\n\n- SIGILL: illegal instruction on any go tool under macOS #37459 <https://github.com/golang/go/issues/37459>\n  - 現象: `runtime.asyncPreempt()` で `SIGILL: illegal instruction` が起きてpanicする\n  - 原因: `darwin/amd64` にて `VZEROUPPER` を呼ぶようになった <https://go-review.googlesource.com/c/go/+/219131>\n  - 影響範囲: Sandy Bridgeよりも古いCPU (Advanced Vector Extensions (AVX) をサポートしていないCPU) のmacOS (Darwin/amd64)\n  - 修正: AVXをサポートしていないCPUでは `VZEROUPPER` を呼ばない <https://go-review.googlesource.com/c/go/+/221058>\n\n- runtime: crash on 1.14 with unexpected return pc, fatal error: unknown caller pc #37664 <https://github.com/golang/go/issues/37664>\n  - 現象: 再帰的な関数呼び出しで、`defer` 内の `recover` 後に `panic` があるときに `fatal error: unknown caller pc` エラーとなりpanicする\n  - 原因: `defer` の実装の改善 <https://go-review.googlesource.com/c/go/+/190098>\n  - 修正: `panic` の実装の修正 <https://go-review.googlesource.com/c/go/+/222420>\n\n- math/big: panic in big.ParseFloat (off by one access) #37499 <https://github.com/golang/go/issues/37499>\n  - 現象: `big.ParseFloat` でpanicする\n  - 原因: 割り算のアルゴリズムの変更 <https://github.com/golang/go/issues/21960> <https://go-review.googlesource.com/c/go/+/172018>\n  - 修正: `nat#divBasic` の実装の修正 <https://go-review.googlesource.com/c/go/+/221980>\n\n- cmd/cgo: fails to generate certain types with Go 1.14 #37621 <https://github.com/golang/go/issues/37621>\n  - 現象: `cgo -godefs` で意図したコードが生成されない\n  - 原因: <https://github.com/golang/go/issues/31891> <https://go-review.googlesource.com/c/go/+/181857>","ts":"1584337253.423700","edited":{"user":"U7H4TJEG0","ts":"1584337314.000000"},"team":"T03C4RC8V","reactions":[{"name":"+1","count":11,"users":["U9S4G0LJW","UG6DF6W87","U03C6TEAZ","U06BRP8VD","UA4RVLHK7","UHV7G5KKP","U776661HA","U0M7GCBPD","U80CX6XDZ","UD6US3V24","UEWCGP7CP"]},{"name":"god","count":11,"users":["U06ECBRTJ","UG6DF6W87","UKHUVMBJR","U03C6TEAZ","U06BRP8VD","UHV7G5KKP","U776661HA","UK7DT8URY","U80CX6XDZ","UEWCGP7CP","UGP5AJKU4"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MGfT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9c464fa2-9675-452b-a3e1-8e187de35736","type":"message","user":"U03C6TEAZ","text":"まとめすばら","ts":"1584338503.424700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kOL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"05077450-0930-46ce-8be1-d932d23149cb","type":"message","user":"U06BRP8VD","text":"結構(使うのに)めんどいのが多いなぁw","ts":"1584338683.425500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JsMd7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7bf25b67-511e-470b-ae44-e9a1443ce405","type":"message","user":"UAZ33BKV2","text":"1.15にfixするまで見送ってもいいんではないかという気持ちになりそうな、クリティカルというかデカいのが多い気が...","ts":"1584338986.426300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NoLkG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"50980060-853d-4192-878e-2fcd6f6c8e92","type":"message","user":"U06BRP8VD","text":"1.14.1 ﾏﾀﾞｰ","ts":"1584339074.426500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2Pjw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8d5e7484-6323-41c9-8cac-4f2e374cdc40","type":"message","user":"U7H4TJEG0","text":"defer改善など恩恵も大きいはずなので1.14.1でたら上げていきたい所存","ts":"1584339091.426900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dCN"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6c117a5d-46e4-4e68-a06b-4f2167ec91ef","type":"message","user":"U06BRP8VD","text":"<https://github.com/golang/go/milestone/137>","ts":"1584339110.427400","attachments":[{"fallback":"GitHub: golang/go","id":1,"title":"golang/go","title_link":"https://github.com/golang/go/milestone/137","text":"The Go programming language. Contribute to golang/go development by creating an account on GitHub.","thumb_url":"https://avatars3.githubusercontent.com/u/4314092?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/golang/go/milestone/137","original_url":"https://github.com/golang/go/milestone/137"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LHJ6H"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"01fe81ae-6e66-4dd5-91c6-ce50f633e720","type":"message","user":"UAZ33BKV2","text":"(patch verでfixが来れば大丈夫か...)","ts":"1584339125.428100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iHFyn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2704dd63-d529-422c-bef0-45680cdde825","type":"message","user":"U0M7GCBPD","text":"<@U7H4TJEG0> さんのまとめ  slack に書いとくのもったいない（すぐ消えるし）\n引用もしたいのでブログかなんかに書いてもらえたら嬉しいんですがどうでしょう…？","ts":"1584341099.429800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8sssF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0526d529-58a7-4114-8776-754ab9f6b074","type":"message","user":"U03C6TEAZ","text":"あと slack のインデント、きびしい。","ts":"1584341118.430100","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IxP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6c712d3d-1e00-4500-a1d3-a3d156c55f12","type":"message","user":"U7H4TJEG0","text":"gistにはりつけました <https://gist.github.com/itchyny/e74dd400e3e2b7f0ada1cc0f729a9b4b>","ts":"1584341575.430700","team":"T03C4RC8V","reactions":[{"name":"subara","count":7,"users":["UAZ33BKV2","U9S4G0LJW","UK7DT8URY","U0M7GCBPD","U06BRP8VD","U776661HA","UGP5AJKU4"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"o9aY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"248e33fd-a8a1-4db8-aaea-0e7a730e2fcd","type":"message","user":"U0M7GCBPD","text":"ありがとうございます！","ts":"1584341845.431300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kAhzT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"844ec1bf-8611-4b15-9962-d208997a01a1","type":"message","user":"UNJ2DANJC","text":"そのうち自然にrenovateが1.14.1のPRを作ってくれると思うのでそれを待ちます。","ts":"1584342409.432900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"p4a"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bb254b70-2fe0-4f0e-81c6-e1fb69341efb","type":"message","user":"U03C6TEAZ","text":"1.14 は色々とダイナミックな変更が多かったのかな。","ts":"1584343466.433400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4=Xpx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7a89f60a-c171-4331-a8a8-a6249477edd8","type":"message","user":"U03C6TEAZ","text":"preemption はマイナーバージョンでやるような内容じゃないのかもねw","ts":"1584343510.433900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uIHm3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"efa7a7c7-97ff-465b-bf21-ab1529a50244","type":"message","user":"U06BRP8VD","text":"環境変数でON/OFFできるようにしてマイナーで数世代かけてできたら良かったかもですね。","ts":"1584343590.434600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"idsjk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7bb04621-e4ba-4a19-a9f1-56771736e915","type":"message","user":"U7H4TJEG0","text":"<https://github.com/golang/go/issues/37741> これも結構怖いな","ts":"1584350646.435200","attachments":[{"fallback":"GitHub: runtime: sometimes 100% CPU spin during init phase in Go 1.14 with preemptive scheduler · Issue #37741 · golang/go","id":1,"title":"runtime: sometimes 100% CPU spin during init phase in Go 1.14 with preemptive scheduler · Issue #37741 · golang/go","title_link":"https://github.com/golang/go/issues/37741","text":"What version of Go are you using (go version)? $ go version go version go1.14 darwin/amd64 Does this issue reproduce with the latest release? Yes What operating system and processor architecture ar...","thumb_url":"https://avatars3.githubusercontent.com/u/4314092?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/golang/go/issues/37741","original_url":"https://github.com/golang/go/issues/37741"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"M/L"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"658154a7-03cf-4048-8fa9-f8a1489165cb","type":"message","user":"U03C6TEAZ","text":"何がやりたいかあんま分かってないけど少し可哀そうになってくる <https://github.com/golang/go/issues/37836>","ts":"1584350793.435800","attachments":[{"fallback":"GitHub: proposal: strconv: add Not · Issue #37836 · golang/go","id":1,"title":"proposal: strconv: add Not · Issue #37836 · golang/go","title_link":"https://github.com/golang/go/issues/37836","text":"I find myself writing this function (or code snippet) far too frequently, one possible option is to implement a turnery function, but that has been turned down before. Assuming this too has not bee...","thumb_url":"https://avatars3.githubusercontent.com/u/4314092?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/golang/go/issues/37836","original_url":"https://github.com/golang/go/issues/37836"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kREt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"27e35aec-d328-4988-ad1c-5bd090532a3e","type":"message","user":"UNJ2DANJC","text":"本番環境に1.14を投入してしまったので少しビクビクしている。","ts":"1584351258.436500","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":2,"users":["UG6DF6W87","US90LD360"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"irMEZ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"11360651-a4a8-49b2-bd68-165959b5331d","type":"message","user":"U7H4TJEG0","text":"動いてるなら大丈夫 (ほんまか","ts":"1584351327.437000","team":"T03C4RC8V","reactions":[{"name":"sweat_smile","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VXho"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"17537b3f-62c5-47db-85d4-a658798eb428","type":"message","user":"U7H4TJEG0","text":"半分くらいはdarwin only","ts":"1584351342.437300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"X7Z"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8bd19e5a-ca3b-493f-980c-a6297a794718","type":"message","user":"U03C6TEAZ","text":"いつも tip を投入する僕ですが、今回はしていません。","ts":"1584351495.438200","thread_ts":"1584351495.438200","reply_count":1,"replies":[{"user":"U03C6TEAZ","ts":"1584351514.439000"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sLMs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"791da2c9-fe57-4a56-bae1-aae5628db1d8","type":"message","user":"U06BRP8VD","text":"ぼくもついさっき1.14本番投入した。","ts":"1584351498.438400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ivv"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5a1ab15c-210f-455b-8ddd-abe3dadace0d","type":"message","user":"U03C6TEAZ","text":"裏切者！","ts":"1584351514.439000","thread_ts":"1584351495.438200","parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VHI07"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b4bcaaa7-7dda-4f0d-8a9a-3147679ffcc9","type":"message","user":"U06BRP8VD","text":"koron-go/phymem で物理メモリモニタして、制限値の95%超えたらgraceful shutdownするようにしてな!","ts":"1584351541.439800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eND"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"45e91c3d-3fe1-41a7-847d-efc06234f30e","type":"message","user":"U03C6TEAZ","text":"`autopanic.Start(500)` とかしといたら 500MB 超えたら自動で panic する奴あると便利かも(知らんけど)","ts":"1584351638.442000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qi+FE"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"23cf7e33-4ccb-4dad-9e35-f6d2b99508a3","type":"message","user":"U06BRP8VD","text":"panicしてええの?w","ts":"1584351775.442700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=Oe7n"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9b1f66d3-9f1e-4554-9e10-8850118e5e6e","type":"message","user":"U06BRP8VD","text":"とりあえず関数が呼び出される奴は作ったよ…でそんなかでcontextをcancelした","ts":"1584351819.443200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WeTy"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
