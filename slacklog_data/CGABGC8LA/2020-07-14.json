[{"type":"message","user":"U016ZUWJX9A","text":"<@U016ZUWJX9A> has joined the channel","ts":"1594695574.420000","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"c924f423-3b77-4163-9ca1-7200d346fddc","type":"message","user":"UAZ33BKV2","text":"<https://glassonion.hatenablog.com/entry/2020/07/12/135200>\n気付かない欠損はいやだなあ\nまあUTCは位置ないのはなんかわかるけど","ts":"1594697814.420600","attachments":[{"fallback":"A Day In The Life: Time型をJSONに変換するとtime.Locationの情報が欠落する場合の対処法 - A Day In The Life","id":1,"title":"Time型をJSONに変換するとtime.Locationの情報が欠落する場合の対処法 - A Day In The Life","title_link":"https://glassonion.hatenablog.com/entry/2020/07/12/135200","text":"Time 型のフィールドを含む構造体を JSON にエンコード、JSON からデコードすると特定条件下で Time 型オブジェクトの time.Location の情報が失われることがあります。 以下のプログラムを見てください。 package main import ( \"fmt\" \"time\" \"encoding/json\" ) type Hoge struct { Name string CreatedAt time.Time } func main() { time.Local = time.UTC // Hoge構造体を生成する h1 := Hoge{ Name: \"aaa\", Cr…","image_url":"https://ogimage.blog.st-hatena.com/6653586347148973808/26006613589831647/1594611191","blocks":null,"ts":1594529520,"service_name":"A Day In The Life","service_icon":"https://cdn.blog.st-hatena.com/images/touch-icon-iphone-retina.png","from_url":"https://glassonion.hatenablog.com/entry/2020/07/12/135200","original_url":"https://glassonion.hatenablog.com/entry/2020/07/12/135200"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"suMbM"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6c277c42-796d-426c-a64e-b5cab3c97e7f","type":"message","user":"U06BRP8VD","text":"構造体のリテラル書くのにフィールド名を省略したときに、 `go vet` で `composite literal uses unkeyed fields` がでるときとでないときがあるんだけどどんな差があるんだろう?","ts":"1594708310.421700","thread_ts":"1594708310.421700","reply_count":1,"replies":[{"user":"U06BRP8VD","ts":"1594728401.447000"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CZeR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d63d76ea-dfef-464e-8d17-585cce372e2f","type":"message","user":"U03C6TEAZ","text":"`_` が含まれてるやつ？","ts":"1594708397.421900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ltl=8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"19b4b80c-d2b8-4935-b9d1-5e22d0e82969","type":"message","user":"U06BRP8VD","text":"型名に `_` が含まれてると出ない、含まれてないと出る?","ts":"1594708431.422500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oRc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8371c00a-1933-45bb-833a-eebce1f29102","type":"message","user":"U03C6TEAZ","text":"あ、いや、そうでもなかった。","ts":"1594708470.422700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uJPx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"85ecf45d-4cf0-4537-9546-47c1c08436a9","type":"message","user":"U06BRP8VD","text":"うーんお仕事コードではでてるんだけど、ミニマルの出せるパターンがみつからないw","ts":"1594708948.423400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"etas"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"89e39624-4a77-439a-a498-63ff0f4364c9","type":"message","user":"UNJ2DANJC","text":"久しぶりに仕事でnode.jsのサーバーのエラーハンドリングを読み書きしたらtry-catch周りがいろいろだるくてGoのif errの方がだいぶわかりやすいという結論に至った。","ts":"1594721868.428800","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":4,"users":["U9S4G0LJW","U06BRP8VD","U015ZBJM7QX","U011WJ8K6UU"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FmUN"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2425b168-f9b3-4842-bcec-ed80575c932a","type":"message","user":"U03C71D7H","text":"非同期だからと言う話ではない…?","ts":"1594722404.429900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UQKq3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e2975f2d-d73a-4f96-9288-cd428e84556c","type":"message","user":"U9S4G0LJW","text":"例外がクソ面倒という話として認識していた","ts":"1594722431.430400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9uid"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5c560059-f3d3-4799-a544-511d70874523","type":"message","user":"U9S4G0LJW","text":"Goに慣れた人は大体同じこと言うので","ts":"1594722440.430700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1a8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f106008a-05c2-49e9-96a6-b36f16a19e28","type":"message","user":"U03C71D7H","text":"エラー処理はどうやってもだいたい面倒よなぁ","ts":"1594722507.432300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dcjts"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"984ddeb3-9759-439d-8d05-86904b5a85c1","type":"message","user":"UNJ2DANJC","text":"どっちもですね\n最近Goばっか書いてたのでtry-catchもasync-awaitもちょっと辛かった","ts":"1594722523.432600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ykZ+c"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0c222122-d922-491e-b119-788fedd95f22","type":"message","user":"U03C71D7H","text":"そう言えば Go では非同期処理は goroutine でしたっけ。エラーハンドリング真面目に書いたことがないな","ts":"1594722637.433300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KTj"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"334ebcae-4876-4592-94ed-2192ca198945","type":"message","user":"UNJ2DANJC","text":"ライブラリやsdkによっては内部はgoroutineだけど、実際に利用者が使うインターフェイスはイベントハンドラ風なやつもあるので一概には判断できませんが","ts":"1594722797.436100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"q1VdY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8001eab9-95aa-402b-a7f9-046c5320b97b","type":"message","user":"UNJ2DANJC","text":"SDKやライブラリは基本は同期インターフェイスでcontext.Context渡せるようにしてて、利用者側で好きにgoroutineで料理してねってタイプの設計が私は好きです。","ts":"1594722987.439800","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":2,"users":["U9S4G0LJW","U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"D2/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"44a0aa1b-2492-4877-825d-060efeea26c2","type":"message","user":"U9S4G0LJW","text":"同期的に使いたいケースも時にはあるので同期インターフェースがベースだと助かる","ts":"1594723086.440400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VYO5i"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7735f7fd-9042-4cb4-acdb-4e17c83d6a06","type":"message","user":"U9S4G0LJW","text":"StartしてWaitするのはなんか嫌だ","ts":"1594723112.440600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EMYpY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"565c3e6c-a9e6-467a-8b55-ff2afd45f0fe","type":"message","user":"UNJ2DANJC","text":"SDKやライブラリとchannelをやり取りするのはあんまり好きじゃないです\n内部ではgoroutineやchannelをじゃんじゃん使ってもらうのは構いませんが、インターフェイスはシンプルがいいですね\n例えが難しいけどexec.Commandっぽいやつが好きです。","ts":"1594723317.444500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"60tL"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"92698a06-a454-4b1e-984b-a0b66ee9e98b","type":"message","user":"U06BRP8VD","text":"chanをイテレータ代わりに使うのはやめるんだ!","ts":"1594723558.446300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cjvln"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"64dd4811-0adf-46de-a2ed-cf61dd8a4402","type":"message","user":"U06BRP8VD","text":"<http://golang.org/x/tools/go/analysis/passes/composite/composite.go|golang.org/x/tools/go/analysis/passes/composite/composite.go> 読んだらだいたいわかった。ローカルの構造体だと出ないんだわ。importしたやつだと出る。","ts":"1594728401.447000","thread_ts":"1594708310.421700","subtype":"thread_broadcast","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CqU0v"}],"root":{"client_msg_id":"6c277c42-796d-426c-a64e-b5cab3c97e7f","type":"message","user":"U06BRP8VD","text":"構造体のリテラル書くのにフィールド名を省略したときに、 `go vet` で `composite literal uses unkeyed fields` がでるときとでないときがあるんだけどどんな差があるんだろう?","ts":"1594708310.421700","thread_ts":"1594708310.421700","reply_count":1,"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CZeR"}]}},{"client_msg_id":"281de88f-2533-4dcc-ba7e-d3884422b2a1","type":"message","user":"U06BRP8VD","text":"なるほどなぁ。外で定義された構造体だとフィールドの順序とか数とか変わりうるから名前なしで宣言するのはアレだけど、自分で定義したやつなら許しても良いよね、っていう感じのポリシーだわこれ。","ts":"1594728677.449000","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sfZ0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"82bfcc39-7d8f-4104-a05a-e5f4fca661fd","type":"message","user":"UNJ2DANJC","text":"database/sqlをラップするやつ見つけたけどこれgo-sql-proxyとどっちが使いやすいんだろうか\nてかこのngrokはあのngrok?\n<https://github.com/ngrok/sqlmw>","ts":"1594729899.450300","attachments":[{"fallback":"GitHub: ngrok/sqlmw","id":1,"title":"ngrok/sqlmw","title_link":"https://github.com/ngrok/sqlmw","text":"Interceptors for database/sql. Contribute to ngrok/sqlmw development by creating an account on GitHub.","thumb_url":"https://avatars1.githubusercontent.com/u/10625446?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":420,"thumb_height":420,"from_url":"https://github.com/ngrok/sqlmw","original_url":"https://github.com/ngrok/sqlmw"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"et+pB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
