[{"client_msg_id":"52be0e5e-bda8-4f02-89ca-5aa7db03d4ef","type":"message","user":"U07UN10M8","text":"数GBレベルでメモリ喰ってたっぽいのでGo本体に修正入れてたほうがいい可能性はあるかもとは思いました \u0026gt; go-json","ts":"1613989841.018600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"r=i2"}]},{"client_msg_id":"b4b996db-98ad-4d0f-b3d0-ddc61bdf537b","type":"message","user":"U06BRP8VD","text":"ん～なにもわかんなくなってしまった。","ts":"1613989689.016500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7oF8"}]},{"client_msg_id":"ee4aacad-af61-45d7-836b-ab0ba6a3f936","type":"message","user":"U06BRP8VD","text":"ん? `@` なければいけるのか…なんであってはいけないんだ?","ts":"1613989594.016200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QfOMl"}]},{"client_msg_id":"161bef68-1d1f-430b-b816-2054e3329136","type":"message","user":"U06BRP8VD","text":"あ。replace 使ってるコマンドは go install では一切インストールできなくなったってことか?","ts":"1613989485.015600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tVl"}]},{"client_msg_id":"b8a216b1-583e-4ad2-b887-df2444e5810f","type":"message","user":"U06BRP8VD","text":"いやでもそれがgo installに適用されるのはどうなんだ?","ts":"1613988168.015000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nZPlK"}]},{"client_msg_id":"85932223-8dd8-4352-af79-9054ca77d016","type":"message","user":"U06BRP8VD","text":"replaceやexcludeってmain以外では無視されるってことか? まぁいままでmain以外で使ったことはないんだけども。","ts":"1613988156.014700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kncc5"}]},{"client_msg_id":"211f5277-8f2f-4df9-831e-48e7912501e1","type":"message","user":"U06BRP8VD","text":"んーそういうわけでもなさげ。","ts":"1613988038.013800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"khU+O"}]},{"client_msg_id":"48d9ef58-ae82-4d13-8a6a-b668384525b8","type":"message","user":"U06BRP8VD","text":"つまりプロジェクトルートにpackage main \u0026amp; go.mod 置くケースではダメよ、ってことか?","ts":"1613987203.013600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vOi="}]},{"client_msg_id":"a64ed4b3-2f35-450d-ab83-5b94145c8f81","type":"message","user":"U06BRP8VD","text":"\u0026gt; - No module is considered the \"main\" module. If the module containing packages named on the command line has a go.mod file, it must not contain directives (replace and exclude) that would cause it to be interpreted differently than if it were the main module. The module must not require a higher version of itself.\nこれか","ts":"1613987104.012800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fkr"}]},{"client_msg_id":"80243d86-b286-41ba-92cf-5e3efd78c7b1","type":"message","user":"U06BRP8VD","text":"弾く理由がよくわからない。","ts":"1613986801.012400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PxA"}]},{"client_msg_id":"515dd81c-8273-4fc5-88be-06685f09242b","type":"message","user":"U06BRP8VD","text":"んーなんでやろ?","ts":"1613986779.012000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yMIj"}]},{"client_msg_id":"d285afcf-e2ea-47b3-a3a1-818e567254a7","type":"message","user":"U06BRP8VD","text":"`replace` と `exclude` がひっかかる","ts":"1613986591.011800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"z5xbC"}]},{"client_msg_id":"a565dd90-6ec5-46d4-99ca-d2ece18f984d","type":"message","user":"U06BRP8VD","text":"cmd/go/internal/work/build.go の `installOutsideModule()` でチェックしてエラーにしてるだよなぁ。","ts":"1613986079.011500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HXlu="}]},{"client_msg_id":"f50cd27f-4d50-4765-9449-4ea3920ad605","type":"message","user":"U06BRP8VD","text":"replace使ってるコマンド(main module) を Go 1.16 で go install したんだけども。","ts":"1613985947.011000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"V4m9"}]},{"client_msg_id":"5ecbd800-25ce-4a33-8be2-0fe39d43bc5b","type":"message","user":"U06BRP8VD","text":"\u0026gt; The go.mod file for the module providing named packages contains one or more replace directives. It must not contain directives that would cause it to be interpreted differently than if it were the main module.\nこれなんで許されないんだろう?","ts":"1613985920.010300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8F2OO"}]},{"client_msg_id":"d3d15c13-1050-4910-8096-68bbcf6ca105","type":"message","user":"UNJ2DANJC","text":"tipを毎日コンパイルしているとちょこちょこ変な挙動を見つけてしまう。まあ良いことではあるが。\u003chttps://github.com/golang/go/issues/44487\u003e","ts":"1613985271.009900","attachments":[{"fallback":"GitHub: cmd/compile: go build panics with empty old build constraints · Issue #44487 · golang/go","id":1,"title":"cmd/compile: go build panics with empty old build constraints · Issue #44487 · golang/go","title_link":"https://github.com/golang/go/issues/44487","text":"What version of Go are you using (go version)? $ go version go version devel +0f66fb7b85 Sun Feb 21 02:25:41 2021 +0000 linux/amd64 Does this issue reproduce with the latest release? No, tip only. ...","thumb_url":"https://avatars.githubusercontent.com/u/4314092?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/golang/go/issues/44487","original_url":"https://github.com/golang/go/issues/44487"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"njN"}]},{"client_msg_id":"406eb1e0-e6d5-4b04-b01f-7e60ed07e2b6","type":"message","user":"U06BRP8VD","text":"さっきみて7000行の削除がいくつもあって吹いたやつw","ts":"1613981458.008700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"43d"}]},{"client_msg_id":"f445b61e-9ce7-4cb0-80d9-8bfa4ad862c3","type":"message","user":"U03C6TEAZ","text":"修正これか。 \u003chttps://github.com/goccy/go-json/pull/141/files\u003e","ts":"1613981021.007100","attachments":[{"fallback":"GitHub: Reduce memory usage at compile by goccy · Pull Request #141 · goccy/go-json","id":1,"title":"Reduce memory usage at compile by goccy · Pull Request #141 · goccy/go-json","title_link":"https://github.com/goccy/go-json/pull/141/files","text":"fix #139 Integrate int/int8/int16/int32/int64 operation to int and also integrate uint/uint8/uint16/uint32/uint64 operation to uint . This reduces switch-case branching on numbers by 4/5 . Approach...","thumb_url":"https://avatars.githubusercontent.com/u/209884?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/goccy/go-json/pull/141/files","original_url":"https://github.com/goccy/go-json/pull/141/files"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ec6yC"}]},{"client_msg_id":"22e4bc36-c415-47f3-8bcd-de87db5baae0","type":"message","user":"UERCTTT8B","text":"Ruby も構文木を破滅させると死ぬみたいなのがあったきがする","ts":"1613980982.006800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uqNYL"}]},{"client_msg_id":"3056e956-fc63-426b-a4c9-c6a3d5ce585d","type":"message","user":"U06BRP8VD","text":"昔、bindataだっけか。あれが吐いた配列がでかいとコンパイル遅いってのはあった。だから文字列にして吐かせるとかそんなテクニックがあった記憶が。","ts":"1613980916.006200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"heP"}]},{"client_msg_id":"6e7ccdcc-5499-4db5-af49-4609bb7eb873","type":"message","user":"U03C6TEAZ","text":"まぁでも非力って言ってるしなぁ。","ts":"1613980890.005600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ku="}]},{"client_msg_id":"6bac7a14-ea61-4836-8300-3d2f89a89756","type":"message","user":"U03C6TEAZ","text":"大量の switch/case があるとコンパイラがハングするらしい。go-json 側が修正してるけどこれ Go 本体のバグでは。","ts":"1613980866.005100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"s0bO"}]},{"client_msg_id":"7aa14ce8-0a9b-4988-9b4c-da91a964083a","type":"message","user":"U03C6TEAZ","text":"\u003chttps://twitter.com/haya14busa/status/1363745927358341128\u003e","ts":"1613980837.004400","attachments":[{"fallback":"\u003chttps://twitter.com/haya14busa|@haya14busa\u003e: リモートのマシンが非力で\u003chttps://github.com/goccy/go-json\u003e をコンパイルしようとするとフリーズするけど、headではついさっき修正入っていて嬉しい。しかし、go-jsonに依存してるライブラリにまだアップデートが入ってないので雑にgo getとか叩くとやっぱりフリーズしてこまる","id":1,"author_name":"はやぶさ","author_subname":"@haya14busa","author_link":"https://twitter.com/haya14busa/status/1363745927358341128","author_icon":"https://pbs.twimg.com/profile_images/3378259861/ab0533d5fb8b90055848bdc550ca84ee_normal.png","text":"リモートのマシンが非力で\u003chttps://github.com/goccy/go-json\u003e をコンパイルしようとするとフリーズするけど、headではついさっき修正入っていて嬉しい。しかし、go-jsonに依存してるライブラリにまだアップデートが入ってないので雑にgo getとか叩くとやっぱりフリーズしてこまる","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1613977340,"service_name":"twitter","from_url":"https://twitter.com/haya14busa/status/1363745927358341128","original_url":"https://twitter.com/haya14busa/status/1363745927358341128"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yypz"}]}]
