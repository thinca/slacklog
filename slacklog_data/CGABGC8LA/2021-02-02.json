[{"client_msg_id":"79431f7a-7e9d-4af1-8207-7b0b5b024745","type":"message","user":"UAZ33BKV2","text":"おつかれさまです。","ts":"1612268649.363400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zhF/"}]},{"client_msg_id":"523c9ce9-9f9d-40cc-8ca5-46c69cb752ea","type":"message","user":"UAZ33BKV2","text":"あるいみ一番面倒ですね、リリース待ちw","ts":"1612268641.363200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=qLTw"}]},{"client_msg_id":"69a605a8-10f9-4751-9e05-52bceb9c6fc7","type":"message","user":"U06BRP8VD","text":"ここで直ってることが分かった。なおリリースはされてないもよう。","ts":"1612268554.362900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PD/H"}]},{"client_msg_id":"b4c5c48c-e2ef-4114-bd33-42f358fcb220","type":"message","user":"U06BRP8VD","text":"\u003chttps://github.com/go-swagger/go-swagger/issues/2492\u003e kokode","ts":"1612268543.362500","attachments":[{"fallback":"GitHub: Could not resolve reference: invalid character looking for beginning of value · Issue #2492 · go-swagger/go-swagger","id":1,"title":"Could not resolve reference: invalid character looking for beginning of value · Issue #2492 · go-swagger/go-swagger","title_link":"https://github.com/go-swagger/go-swagger/issues/2492","text":"Problem statement Simple schema provided below doesn\u0026amp;#39;t validate according to swagger specification 2.0: The swagger spec at \u0026amp;quot;./rest/swagger.yaml\u0026amp;quot; is invalid against swagger specificat...","thumb_url":"https://avatars.githubusercontent.com/u/10362650?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":315,"thumb_height":315,"from_url":"https://github.com/go-swagger/go-swagger/issues/2492","original_url":"https://github.com/go-swagger/go-swagger/issues/2492"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ex4"}]},{"client_msg_id":"aa8b63d3-6064-4587-9705-855be3f82488","type":"message","user":"U06BRP8VD","text":"ココがそのresume point\n\n\u003chttps://github.com/go-swagger/go-swagger/commit/7c73d972c8b94fdf4035693c2bf7f73e2fecd981#diff-33ef32bf6c23acb95f5902d7097b7a1d5128ca061167ec0716715b0b9eeaa5f6L13\u003e","ts":"1612261817.362200","attachments":[{"fallback":"GitHub: test: model tests go parallel (#2450) · go-swagger/go-swagger@7c73d97","id":1,"title":"test: model tests go parallel (#2450) · go-swagger/go-swagger@7c73d97","title_link":"https://github.com/go-swagger/go-swagger/commit/7c73d972c8b94fdf4035693c2bf7f73e2fecd981#diff-33ef32bf6c23acb95f5902d7097b7a1d5128ca061167ec0716715b0b9eeaa5f6L13","text":"* updated go-openapi dependencies to fix race conditions on parallel spec processing * adapted tests to process fixtures in parallel * refactored tests for readability (e.g. require... instead of...","thumb_url":"https://avatars.githubusercontent.com/u/10362650?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/go-swagger/go-swagger/commit/7c73d972c8b94fdf4035693c2bf7f73e2fecd981#diff-33ef32bf6c23acb95f5902d7097b7a1d5128ca061167ec0716715b0b9eeaa5f6L13","original_url":"https://github.com/go-swagger/go-swagger/commit/7c73d972c8b94fdf4035693c2bf7f73e2fecd981#diff-33ef32bf6c23acb95f5902d7097b7a1d5128ca061167ec0716715b0b9eeaa5f6L13"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0sp2Q"}]},{"client_msg_id":"42668a45-744f-4885-b9c7-c444183acf86","type":"message","user":"U06BRP8VD","text":"続きは帰ってからやるか。","ts":"1612261718.361800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ct=Ol"}]},{"client_msg_id":"4fcd3312-0ae2-47d3-9021-59ef00938090","type":"message","user":"U06BRP8VD","text":"loaderに帰ってきた…","ts":"1612261709.361500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VOMX"}]},{"client_msg_id":"f49b20c2-e5c4-4ae4-a15c-b1c5fedd7c83","type":"message","user":"U06BRP8VD","text":"resolverにたどり着いた。めんどい。ひたすらめんどい。","ts":"1612257353.361100","team":"T03C4RC8V","reactions":[{"name":"otz","count":1,"users":["UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Sfrl"}]},{"client_msg_id":"9fc5e350-c5bb-4de2-8823-bd719b6a033c","type":"message","user":"U06BRP8VD","text":"ファイル名が `*.json` 以外だとだめっぽいことがわかってきた… しかも原因は go-openapi/spec のほうという…","ts":"1612255949.360800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"l2IN"}]},{"client_msg_id":"1451412d-1095-4f84-804b-1f4acd1bd5fb","type":"message","user":"U06BRP8VD","text":"paths下に `$ref` があるとダメそう…","ts":"1612254388.360000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"T5i"}]},{"client_msg_id":"5e2493fd-75f1-4880-a9fb-75db26f5b4c4","type":"message","user":"U06BRP8VD","text":"\u003chttps://github.com/go-swagger/go-swagger/pull/2450\u003e","ts":"1612253933.359400","attachments":[{"fallback":"GitHub: test: model tests go parallel by fredbi · Pull Request #2450 · go-swagger/go-swagger","id":1,"title":"test: model tests go parallel by fredbi · Pull Request #2450 · go-swagger/go-swagger","title_link":"https://github.com/go-swagger/go-swagger/pull/2450","text":"updated go-openapi dependencies to fix race conditions on parallel spec processing adapted tests to process fixtures in parallel refactored tests for readability (e.g. require... instead of if asse...","thumb_url":"https://avatars.githubusercontent.com/u/10362650?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":315,"thumb_height":315,"from_url":"https://github.com/go-swagger/go-swagger/pull/2450","original_url":"https://github.com/go-swagger/go-swagger/pull/2450"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FZo1"}]},{"client_msg_id":"619ca7ec-9a79-4584-9bb7-565f294d54a7","type":"message","user":"U06BRP8VD","text":"とりあえず go-swagger っぽい。原因となったcommitも見つけたけど、変更大きいな…","ts":"1612253858.359200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6OdJ"}]},{"client_msg_id":"4051ce00-3d06-400c-b49c-aa3fe125d055","type":"message","user":"UAZ33BKV2","text":"thinking gopther が必要w?","ts":"1612252728.358700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"j/m3"}]},{"client_msg_id":"fcdd44dd-3342-46ad-b4ad-2d1bba160fbf","type":"message","user":"UERCTTT8B","text":"thinking face","ts":"1612252701.358200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NbRA"}]},{"client_msg_id":"cca9eac1-8b2e-4160-9a26-fbab1a73e867","type":"message","user":"UERCTTT8B","text":"いやちがうか","ts":"1612252697.358000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DZWxc"}]},{"client_msg_id":"1c1c57ad-11b0-4059-97f6-8abbe71af2cd","type":"message","user":"UERCTTT8B","text":"reflect は魔境だ","ts":"1612252675.357400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Sl3Y"}]},{"client_msg_id":"0018982e-1f57-44f4-9ce7-0662f315b81d","type":"message","user":"U06BRP8VD","text":"これやったら違うものが出てきたw JSONやYAMLからの変換したやつw","ts":"1612252424.357100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tfAjf"}]},{"type":"message","user":"U06BRP8VD","text":"```package main\n\nimport (\n\t\"reflect\"\n\n\t\"github.com/go-openapi/loads\"\n)\n\nfunc main() {\n\tjson, err := loads.Spec(\"tmp/swagger.json\")\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tyaml, err := loads.Spec(\"tmp/swagger.yml\")\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tif !reflect.DeepEqual(json, yaml) {\n\t\tprintln(\"difference something between JSON and YAML\")\n\t}\n}```","ts":"1612252404.356600","attachments":[{"color":"D0D0D0","fallback":"[February 1st, 2021 7:46 PM] koron: JSON吐かせてvalidateしたら大丈夫だった…なにこれ…","author_id":"U06BRP8VD","author_name":"KoRoN","author_subname":"KoRoN","author_link":"https://vim-jp.slack.com/team/U06BRP8VD","author_icon":"https://secure.gravatar.com/avatar/4b5a6f711a4e22e617b74058239ade53.jpg?s=48\u0026d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0007-48.png","text":"JSON吐かせてvalidateしたら大丈夫だった…なにこれ…","mrkdwn_in":["text"],"blocks":null,"footer":"Posted in #lang-go","ts":1612176397.294700,"from_url":"https://vim-jp.slack.com/archives/CGABGC8LA/p1612176397294700"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"67/nN"}]},{"client_msg_id":"4b972de1-baa4-4261-ae8e-c82dd7653209","type":"message","user":"UK7DT8URY","text":"httputilまさに使ってました。というかそのdumpを表示させてるという()","ts":"1612245100.356500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+LT/"}]},{"client_msg_id":"ed731cfb-3f6e-4eb1-8b8a-78d22603816c","type":"message","user":"U06BRP8VD","text":"ログに中身(body)を出すならhttputilに頼ったほうが良いです。あれを再実装するしかないので。","ts":"1612244231.355800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RL8d"}]},{"client_msg_id":"523b8af8-bbe8-482a-947e-e686ad8e613c","type":"message","user":"UNJ2DANJC","text":"httputilにdump系のユーティリティがありますね\nあーこれはデバッグ用であってログ用じゃないな。。","ts":"1612237010.355200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Uks"}]},{"client_msg_id":"be6b1fae-b250-4c8e-a7b8-91783f7a3cfa","type":"message","user":"UK7DT8URY","text":"ですです、Transportをカスタマイズしてるので……\nでもコレだとHTTP以外のログが出ないなと思ったがそもそもログじゃなくてエラーしか無いんだった","ts":"1612234890.353800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"739"}]},{"client_msg_id":"712c4f44-9d3c-4781-af80-ed4bcc0b1f44","type":"message","user":"U06BRP8VD","text":"感覚的にはTransport側にログ機構が仕込まれてるイメージ。","ts":"1612234820.352900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3=r"}]},{"client_msg_id":"c53ec3cf-40c8-4d29-a8e0-b3eb441d60e2","type":"message","user":"U06BRP8VD","text":"ああそういうのはありですね。","ts":"1612234793.352500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wsX"}]},{"client_msg_id":"2c79051b-4dbc-4dc5-9d68-6b2463d6bfb7","type":"message","user":"UK7DT8URY","text":"いやまてよ、今ログ出力機構ををhttp.Clientに埋めてるから上流からClientを渡せるようにすれば解決するのでは :thinking_face:","ts":"1612234696.352200","edited":{"user":"UK7DT8URY","ts":"1612234711.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bJU"}]},{"client_msg_id":"a56b1e3e-bc29-467f-8619-4dcab1158f79","type":"message","user":"U06BRP8VD","text":"ちょっとReponse側はこれじゃだめそう。","ts":"1612234524.351300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cSvk"}]},{"client_msg_id":"19919516-d2e3-4d77-b53d-3387c7f0fbdd","type":"message","user":"U06BRP8VD","text":"ResponseWriterはどうなるのか忘れちゃった。","ts":"1612234473.350900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IWvef"}]},{"client_msg_id":"f48053f7-2e99-4943-b49c-4caaeaeac910","type":"message","user":"U06BRP8VD","text":"```type HTTPLogger interface {\n   LogRequest(*http.Request)\n   LogResponse(*http.Response)\n}```","ts":"1612234414.350400","edited":{"user":"U06BRP8VD","ts":"1612234439.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GxkZb"}]},{"client_msg_id":"f6c7e3c2-fd51-467c-bf73-a302ee8c2a07","type":"message","user":"UK7DT8URY","text":"\u0026gt; 専用の通知系I/F\n`GetHTTPDescriptionLog()(string)` みたいなの定義して上流に投げる感じですかね。 確かにそれならまだ行けるか","ts":"1612234362.349500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Nb0Z0"}]},{"client_msg_id":"7e664323-5180-4067-ad1c-66e794c79440","type":"message","user":"U06BRP8VD","text":"ただ今回は用途が「HTTPの送受信内容のsniff」なんで、専用の通知系I/Fを作ってしまったほうが、自由度は上がる気がしますね。","ts":"1612234250.348200","edited":{"user":"U06BRP8VD","ts":"1612234256.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/F82"}]},{"client_msg_id":"acd51db9-37da-41d5-8a3f-04bac83c7dd3","type":"message","user":"U06BRP8VD","text":"どのくらい本気かによりますが\n\n\u0026gt; 自前の Logger インターフェースを定義しましょう\nでとどめるのが良いですよ。そのI/Fを既存の有名ロギングライブラリにある程度合わせておけば、そのままポン付けもできますし。","ts":"1612234207.347300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ln=z"}]},{"client_msg_id":"1ed02948-babf-45de-b26c-9f918b67551d","type":"message","user":"UK7DT8URY","text":"やばそう() 幸いデータはページネーションされたヤツなのでMBまでは行かない……ハズ！\n知見ありがとうございますー","ts":"1612234062.345800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SQ=V"}]},{"client_msg_id":"829fba7d-03c2-4695-979a-3a1304901c9f","type":"message","user":"U06BRP8VD","text":"ちなみにHTTPの通信内容ログはメモリに展開する必要があるので、ちょっと気を付けたほうが良いです。僕はそれで数百メガバイトとってOOMで殺されたことがw","ts":"1612233983.344900","thread_ts":"1612233983.344900","reply_count":2,"team":"T03C4RC8V","reactions":[{"name":"ultrafastparrot","count":1,"users":["UK7DT8URY"]},{"name":"tiken","count":1,"users":["UK7DT8URY"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"t/SZ"}]},{"client_msg_id":"98bd9c6d-4616-4d6f-8eae-520b95c812b0","type":"message","user":"UK7DT8URY","text":"で、GCPのFunctionsで動いてるのでこの辺かな… と思ってるんですが\n\u003chttps://github.com/blendle/zapdriver\u003e\nこれめっちゃログ吐く時のコードが特殊になって普通に入れ変えできねぇじゃん ってなりまして","ts":"1612233972.344600","attachments":[{"fallback":"GitHub: blendle/zapdriver","id":1,"title":"blendle/zapdriver","title_link":"https://github.com/blendle/zapdriver","text":"Blazing fast, Zap-based Stackdriver logging. Contribute to blendle/zapdriver development by creating an account on GitHub.","thumb_url":"https://avatars.githubusercontent.com/u/7072577?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/blendle/zapdriver","original_url":"https://github.com/blendle/zapdriver"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5Wx"}]},{"client_msg_id":"603577e3-4450-4278-9c6a-fb0ae294ba79","type":"message","user":"U06BRP8VD","text":"tcpdumpで横から見る、みたいな仕組みも考えられますね。要件次第ですけど。","ts":"1612233939.343500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"I1ae"}]},{"client_msg_id":"e2654466-002b-48dc-bcfe-9904de6f5621","type":"message","user":"UK7DT8URY","text":"\u0026gt; ライブラリがログ吐いてるんじゃねぇよ\nまぁその通りなんですが、上からの指示で「HTTPでどんなデータ送受信してるかログに出して」って言われちゃって泣く泣くログを吐くハメに…… otz","ts":"1612233898.342300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xDa"}]},{"client_msg_id":"6142b8b6-a7c4-4efd-af3b-d399447330b2","type":"message","user":"U06BRP8VD","text":"ちなみにライブラリを使う方の本音としては「ライブラリがログ吐いてるんじゃねぇよ」ですw","ts":"1612233826.340800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HpGdO"}]},{"client_msg_id":"ac4d3992-4dbc-4a7b-9d11-3cd06483f865","type":"message","user":"UKHUVMBJR","text":"\u003chttps://www.kaoriya.net/blog/2018/12/16/\u003e ですかね？","ts":"1612233658.340000","attachments":[{"fallback":"Golangでログを吐くコツ — KaoriYa","id":1,"title":"Golangでログを吐くコツ — KaoriYa","title_link":"https://www.kaoriya.net/blog/2018/12/16/","text":"Golangでログを吐く際のコツっていうか気にして欲しいことをまとめます。","blocks":null,"service_name":"kaoriya.net","service_icon":"https://www.kaoriya.net/favicon.ico","from_url":"https://www.kaoriya.net/blog/2018/12/16/","original_url":"https://www.kaoriya.net/blog/2018/12/16/"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+MQ3"}]},{"client_msg_id":"4d3bba73-c9e1-46a2-94d3-a0f7a88f7b41","type":"message","user":"UK7DT8URY","text":"ライブラリからログを吐く時に、呼び出す側(上のパッケージ)がその出力方法を変更できるようにする時のベスプラが知りたい…","ts":"1612232513.339700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VDl"}]},{"client_msg_id":"f636463a-d635-4bf4-b856-463000583875","type":"message","user":"UDDCM376D","text":"あとでやってみるマン","ts":"1612229925.338500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Yte"}]},{"client_msg_id":"4178cc67-edf2-4447-ba6d-237a73df9eb2","type":"message","user":"UDDCM376D","text":"delay を入れるとうまく動くとアドバイスを頂いた","ts":"1612229919.338300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"T/jSr"}]},{"client_msg_id":"072d3015-15ba-4b60-81ed-78a4e7c0bb48","type":"message","user":"UDDCM376D","text":"\u003chttps://twitter.com/mattn_jp/status/1356280779353907200?s=20\u003e","ts":"1612229903.337700","attachments":[{"fallback":"\u003chttps://twitter.com/mattn_jp|@mattn_jp\u003e: \u003chttps://twitter.com/gorilla0513|@gorilla0513\u003e こんな感じ。\n\n\u003chttps://github.com/c9s/gomon/blob/master/main.go#L207-L220\u003e","id":1,"author_name":"mattn","author_subname":"@mattn_jp","author_link":"https://twitter.com/mattn_jp/status/1356280779353907200","author_icon":"https://pbs.twimg.com/profile_images/1317993768360890369/_Bqvmbvl_normal.jpg","text":"\u003chttps://twitter.com/gorilla0513|@gorilla0513\u003e こんな感じ。\n\n\u003chttps://github.com/c9s/gomon/blob/master/main.go#L207-L220\u003e","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1612197510,"service_name":"twitter","from_url":"https://twitter.com/mattn_jp/status/1356280779353907200?s=20","original_url":"https://twitter.com/mattn_jp/status/1356280779353907200?s=20"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6Joq"}]},{"client_msg_id":"e6d12dc0-881c-41ed-9033-89160654d277","type":"message","user":"UAZ33BKV2","text":"vitalのrpcのやつ(\u003c@U8R597E9H\u003e  さんの)の出番か？","ts":"1612215125.337500","edited":{"user":"UAZ33BKV2","ts":"1612230205.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Jm0U1"}]},{"client_msg_id":"ee736966-126e-4810-abfb-66a2251cd1b9","type":"message","user":"UGXMRNBUM","text":"何がしかのプロセスが動きっぱなしになる想定でしょうから、\n待つものがファイルシステムか、Vim空のrpc的ななにかか、の差でしか無い","ts":"1612199523.336300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Pxxq="}]},{"client_msg_id":"59dbbd90-2213-43b0-9f76-45b76adef1a6","type":"message","user":"UGXMRNBUM","text":"まぁでも変更検知をやろうとしてる時点で","ts":"1612199484.335300","edited":{"user":"UGXMRNBUM","ts":"1612199487.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aVU"}]},{"client_msg_id":"aa8a5f6d-d059-4a27-b7fb-03be71775303","type":"message","user":"UNJ2DANJC","text":"やるならvim-lspみたいな作り方になりそう","ts":"1612199468.335000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"66M"}]},{"client_msg_id":"2ec301c6-eeeb-4634-bb88-6aedf06687ed","type":"message","user":"U9S4G0LJW","text":"こういうのが当たり前な時代に作られたわけじゃないから","ts":"1612199252.333500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"O20"}]},{"client_msg_id":"94579b5c-2ef2-4bd3-a345-edf43af8774f","type":"message","user":"U9S4G0LJW","text":"Vimが監視するのを前提にしてない感じある","ts":"1612199238.333000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ibp"}]},{"client_msg_id":"3bd3f19b-0dd6-492e-98f6-c65b651991b3","type":"message","user":"UDDCM376D","text":"ふうむ","ts":"1612199165.331900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"x7rit"}]},{"client_msg_id":"60bc43cb-c93d-4107-adb7-da2e3df4a0c1","type":"message","user":"UNJ2DANJC","text":"手元でfsnotifyで検知してみたけど別のプロセスからシンプルにファイル書き込みするぶんならいたって想定通りの動きだった。\nやっぱVSCodeも保存にひと工夫してるんだろうな。","ts":"1612199142.331600","edited":{"user":"UNJ2DANJC","ts":"1612199164.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sbj"}]},{"client_msg_id":"6565ac97-0e90-47e7-aadc-cd390a9bb7e2","type":"message","user":"UGXMRNBUM","text":"まぁ構成は変わらないし良いのでは","ts":"1612199092.330800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fms"}]},{"client_msg_id":"bdf8e225-906e-47a9-847a-1d92d4dc50cb","type":"message","user":"UDDCM376D","text":"依存が増えるけど、仕方がないな…\nファイル変更の検知がうまくやれないなら","ts":"1612199059.330000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Hv3E/"}]},{"client_msg_id":"c36b2c65-c1c6-4bb0-85ef-795a26225fb2","type":"message","user":"UNJ2DANJC","text":"lspみたいにstdioでrpcを飛ばすとかいうのもアリかもしれない","ts":"1612199028.329100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"y2sz"}]},{"client_msg_id":"98e47d35-4cb0-467d-b5a1-be8ff1ba9feb","type":"message","user":"UGXMRNBUM","text":"ですね","ts":"1612199020.328700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ebm"}]},{"client_msg_id":"02acefe8-6d62-4a82-81c2-755f72d57a44","type":"message","user":"UDDCM376D","text":"web系はこれすね","ts":"1612198990.327600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SbkS9"}]},{"client_msg_id":"bc0eb36e-0933-482d-9fa9-c22c4df8dd6a","type":"message","user":"UDDCM376D","text":"```  |vital/Web/HTML.txt|\t\tHTML parser written in pure Vim script.\n  |vital/Web/HTTP.txt|\t\tsimple HTTP client library.\n  |vital/Web/HTTP/Cookie.txt|\tAn HTTP Cookie utility.\n  |vital/Web/HTTP/CookieJar.txt|\tManage collection of HTTP Cookie.\n  |vital/Web/JSON.txt|\t\tJSON parser written in pure Vim script.\n  |vital/Web/URI.txt|\t\tURI manipulation library\n  |vital/Web/XML.txt|\t\tXML parser written in pure Vim script.```","ts":"1612198987.327400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nIw"}]},{"client_msg_id":"1786e803-eb1e-47fc-aa20-aafab4fd8a30","type":"message","user":"UDDCM376D","text":"自分が知っている限り叩けなかった気が","ts":"1612198940.326900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9dPLa"}]},{"client_msg_id":"19b86292-4489-45ea-9b6c-5f77e2666c69","type":"message","user":"UGXMRNBUM","text":"ところで、そういやvital.vimってwebsocket叩けませんでしたっけ","ts":"1612198916.325900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pZ8uf"}]},{"client_msg_id":"da5d1a14-ac4c-4631-a572-76ff89145588","type":"message","user":"UDDCM376D","text":"\u0026gt; vim BufWrite -\u0026gt; Goの何某 -\u0026gt; websocket\nやっぱそうすよねぇ…","ts":"1612198898.325200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JFDL"}]},{"client_msg_id":"4aade6ab-aa4f-438a-8424-7edb0b5ff015","type":"message","user":"UGXMRNBUM","text":"って丁寧に作りそう","ts":"1612198884.324700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9m2"}]},{"client_msg_id":"9b6c98b3-7651-4f48-bfea-e2506cc2e8f3","type":"message","user":"UGXMRNBUM","text":"vim BufWrite -\u0026gt; Goの何某 -\u0026gt; websocket","ts":"1612198879.324400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fxF"}]},{"client_msg_id":"cd865c29-c2d1-456a-8e69-64fc558e5fc7","type":"message","user":"UGXMRNBUM","text":"いま本気でやるならそんなことせず","ts":"1612198865.324000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"P6M"}]},{"client_msg_id":"09ee9c09-b566-4307-b5d8-534c1e27e43f","type":"message","user":"UDDCM376D","text":"\u0026gt; 一定のルールでtempfileを作ることで検出したりしてましたね\nなるほどおお","ts":"1612198849.323500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mDtO="}]},{"client_msg_id":"2055fc15-789b-4202-acec-01c4c0bd62a2","type":"message","user":"UDDCM376D","text":"やりたいことは結構シンプルで\nGoでファイル変更を検知したらwebsocketでfrontに送信して、プレビュー画面を更新\nですね","ts":"1612198832.323100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bovY"}]},{"client_msg_id":"5b0346a6-9516-49aa-992a-1a74ef382f44","type":"message","user":"UGXMRNBUM","text":"ファイルの作成だけはどんなファイルシステムでもだいたい検知できるんで","ts":"1612198808.322800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JMGTR"}]},{"client_msg_id":"5b7d5952-1767-4e32-b12b-bae956d74ad8","type":"message","user":"UGXMRNBUM","text":"一定のルールでtempfileを作ることで検出したりしてましたね","ts":"1612198796.322300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qQVn"}]},{"client_msg_id":"d8766aea-bc30-4169-a02d-d20fa4fb0f85","type":"message","user":"UGXMRNBUM","text":"昔なんかで似たようなことをしたときは、結局ファイルの変更検知がOS間の格差もあってダルすぎて","ts":"1612198764.321500","edited":{"user":"UGXMRNBUM","ts":"1612198773.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"J/4"}]},{"client_msg_id":"f037d51e-1048-4d07-ae5c-3f85ccdee62f","type":"message","user":"UGXMRNBUM","text":"まぁ何をしようとしてるかによりますけどね","ts":"1612198741.320900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OsFsW"}]},{"client_msg_id":"9477ef83-697b-46eb-8e9c-88309906243f","type":"message","user":"UDDCM376D","text":"と言いながら組み合わせればいいのでは？と今ちょうど思ったところす","ts":"1612198728.320500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"A1k+X"}]},{"client_msg_id":"8a41edc2-b723-4cdd-bdd7-324ff4ff1e04","type":"message","user":"UGXMRNBUM","text":"まぁでも普通に筋は悪いな。相互で行き来するのダルそう","ts":"1612198727.320400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"19tIq"}]},{"client_msg_id":"0f491a00-c580-4949-8077-aae7acc83567","type":"message","user":"UGXMRNBUM","text":"なら組み合わせれば良いのでは…","ts":"1612198697.319600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GOF"}]},{"client_msg_id":"518429a8-dd0e-43dd-ae87-55c3163730f8","type":"message","user":"UDDCM376D","text":"Vim単体では実現できないのでGoを使っているんすよね","ts":"1612198679.319400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"saLqB"}]},{"client_msg_id":"f77745d0-b252-4b27-9a48-1886a6ab3c86","type":"message","user":"UNJ2DANJC","text":"確かにVimのプラグインならBufWriteなきが","ts":"1612198674.319200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vdzNV"}]},{"client_msg_id":"96d338e7-e372-42f6-a125-d8224c1be4ac","type":"message","user":"UGXMRNBUM","text":"vimのプラグインで作ってるんだったらそっちでイベント拾う方が健全なのでは…","ts":"1612198645.318300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jF2U"}]},{"client_msg_id":"d99a2eb3-9872-4656-8677-9d04fe4c4f96","type":"message","user":"UDDCM376D","text":"そもそもVimのプラグインを作っているのにVimで使えないのは普通にツライ","ts":"1612198611.317300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GOiS"}]},{"client_msg_id":"8cf12f7c-1e3e-493c-8d04-b49511de7f59","type":"message","user":"UDDCM376D","text":"\u0026gt; fsnotifyはむしろ忠実にイベントをハンドルしてる気がする\nと思ってVSCodeでやってみたらVimより回数が少ないんですが、2回はイベントをキャッチしました","ts":"1612198557.315500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zQR"}]},{"client_msg_id":"0526f906-95a6-4a78-922b-b2fad8a886d0","type":"message","user":"UNJ2DANJC","text":"fsnotifyはむしろ忠実にイベントをハンドルしてる気がする","ts":"1612198495.314500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UZlX"}]},{"client_msg_id":"2eeabc7f-8977-4cef-8723-9c7ab4cb549f","type":"message","user":"UGXMRNBUM","text":"goがどうこうはあんまり関係ないんですよねコレ","ts":"1612198486.314100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eka4f"}]},{"client_msg_id":"1807cde0-8327-429a-ad40-55b34d7f770e","type":"message","user":"UNJ2DANJC","text":"vimの保存が結構複雑だからでは","ts":"1612198468.313400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+3iK"}]},{"client_msg_id":"6e0baeb8-ed5e-496a-b654-8adbf15dfb0b","type":"message","user":"UDDCM376D","text":"ioutil.ReadFile よりマシ","ts":"1612198420.311800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=KIS4"}]},{"client_msg_id":"2a000a06-49ad-480a-8698-1d261989f2da","type":"message","user":"UDDCM376D","text":"やっぱりポーリングか","ts":"1612198411.311000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qChS"}]},{"client_msg_id":"fbd05e25-22b9-4f48-89cf-fa0a0888b514","type":"message","user":"UDDCM376D","text":"\u003chttps://github.com/andreaskoch/go-fswatch/blob/189a6902966f49b337f20e663a44176e99f2b76c/file.go#L197\u003e","ts":"1612198404.310500","attachments":[{"fallback":"GitHub: andreaskoch/go-fswatch","id":1,"title":"andreaskoch/go-fswatch","title_link":"https://github.com/andreaskoch/go-fswatch/blob/189a6902966f49b337f20e663a44176e99f2b76c/file.go#L197","text":"fswatch is a go library for monitoring filesystem changes that does not depend on inotify - andreaskoch/go-fswatch","thumb_url":"https://avatars.githubusercontent.com/u/247364?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/andreaskoch/go-fswatch/blob/189a6902966f49b337f20e663a44176e99f2b76c/file.go#L197","original_url":"https://github.com/andreaskoch/go-fswatch/blob/189a6902966f49b337f20e663a44176e99f2b76c/file.go#L197"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BN+c"}]},{"client_msg_id":"b551f333-670d-4275-b5cb-19b26a4555d7","type":"message","user":"UDDCM376D","text":"ちょうど今それやろうとしてたところ","ts":"1612198382.310100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+Td"}]},{"client_msg_id":"2b069e51-12e3-41eb-aa9a-5ed87f122cc9","type":"message","user":"UDDCM376D","text":"あー、タイムスタンプ比較？","ts":"1612198376.309900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/zKeh"}]},{"client_msg_id":"36e2a408-695a-4799-9737-e3caf54560a6","type":"message","user":"UDDCM376D","text":"\u003chttps://github.com/andreaskoch/go-fswatch/blob/189a6902966f49b337f20e663a44176e99f2b76c/file.go#L92\u003e","ts":"1612198368.309500","attachments":[{"fallback":"GitHub: andreaskoch/go-fswatch","id":1,"title":"andreaskoch/go-fswatch","title_link":"https://github.com/andreaskoch/go-fswatch/blob/189a6902966f49b337f20e663a44176e99f2b76c/file.go#L92","text":"fswatch is a go library for monitoring filesystem changes that does not depend on inotify - andreaskoch/go-fswatch","thumb_url":"https://avatars.githubusercontent.com/u/247364?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/andreaskoch/go-fswatch/blob/189a6902966f49b337f20e663a44176e99f2b76c/file.go#L92","original_url":"https://github.com/andreaskoch/go-fswatch/blob/189a6902966f49b337f20e663a44176e99f2b76c/file.go#L92"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xliNH"}]},{"client_msg_id":"29cf2985-fc1b-4eb4-9f55-2462de44b1a7","type":"message","user":"UGXMRNBUM","text":"それす","ts":"1612198339.309300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xEM"}]},{"client_msg_id":"aea51a74-5137-42ce-80cd-467b46bd3385","type":"message","user":"UDDCM376D","text":"これすか？","ts":"1612198333.309100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UZOb"}]},{"client_msg_id":"8857cf23-7528-43cc-b23b-17f5849c5bf5","type":"message","user":"UDDCM376D","text":"\u003chttps://github.com/andreaskoch/go-fswatch\u003e","ts":"1612198331.308800","attachments":[{"fallback":"GitHub: andreaskoch/go-fswatch","id":1,"title":"andreaskoch/go-fswatch","title_link":"https://github.com/andreaskoch/go-fswatch","text":"fswatch is a go library for monitoring filesystem changes that does not depend on inotify - andreaskoch/go-fswatch","thumb_url":"https://avatars.githubusercontent.com/u/247364?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/andreaskoch/go-fswatch","original_url":"https://github.com/andreaskoch/go-fswatch"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IqCVH"}]},{"client_msg_id":"4531bae5-cd3b-450f-922c-c2e80ec4cbd2","type":"message","user":"UDDCM376D","text":"go-fswatch 知らない子","ts":"1612198328.308600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gtPQJ"}]},{"client_msg_id":"5bf9714b-af13-4044-9301-b15b8bc3ee79","type":"message","user":"UDDCM376D","text":"ポーリング、IO発生しまくるからあんまやりたくない…","ts":"1612198298.308400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Qge"}]},{"client_msg_id":"af581760-f944-4fc1-8b55-a7e4be957a78","type":"message","user":"UGXMRNBUM","text":"go-fswatchって使い物にならんのか","ts":"1612198298.308300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TK10e"}]},{"client_msg_id":"68f1c450-0084-470e-bf37-3dc0f17dc1b5","type":"message","user":"UDDCM376D","text":"もしかして、Goって低レイヤー不得手…？（いまさら","ts":"1612198184.307400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kzL3F"}]},{"client_msg_id":"6fed4350-0b8d-4019-9eab-5237c504ddaa","type":"message","user":"UDDCM376D","text":"さくっと行けるかなと思ったら全然そんなことなかった…","ts":"1612198159.307100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GhsYj"}]},{"client_msg_id":"26657a19-425e-4830-9876-0fcb2dbd9c30","type":"message","user":"U8R597E9H","text":"go でファイル監視、夢見たことありましたが罠ありそうですか…知見感謝です。","ts":"1612198125.306500","edited":{"user":"U8R597E9H","ts":"1612198137.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xjAo"}]},{"client_msg_id":"c21575d5-73c8-4c4b-a168-a52c0fc3174a","type":"message","user":"UDDCM376D","text":"2hくらい格闘したけど、よーわからんからポーリングにしようかな…","ts":"1612197632.303900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ORMN"}]},{"client_msg_id":"e781c7ce-8c7b-4203-9a1f-c4b6a3208343","type":"message","user":"UDDCM376D","text":"これでファイルを監視して、3回ファイルに書き込みをすると\n```# 1回目\n0\n8192\n17578\n17578\n\n# 2回目\n0\n8192\n17578\n\n# 3回目\n0\n8192\n17578\n17578```\n","ts":"1612197598.303200","files":[{"id":"F01LKCSH5JP","created":1612197596,"timestamp":1612197596,"name":"無題","title":"無題","mimetype":"text/plain","image_exif_rotation":0,"filetype":"go","pretty_type":"Go","user":"UDDCM376D","mode":"snippet","editable":true,"is_external":false,"external_type":"","size":934,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F01LKCSH5JP/______","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F01LKCSH5JP/download/______","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/UDDCM376D/F01LKCSH5JP/______","permalink_public":"https://slack-files.com/T03C4RC8V-F01LKCSH5JP-f1414cbf25","edit_link":"https://vim-jp.slack.com/files/UDDCM376D/F01LKCSH5JP/______/edit","preview":"package main\n\nimport (\n\t\"fmt\"\n\t\"io/ioutil\"","preview_highlight":"\u003cdiv class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text/plain',window.getSelection().toString().replace(/\\u200b/g,''));event.preventDefault();event.stopPropagation();}\"\u003e\n\u003cdiv class=\"CodeMirror-code\"\u003e\n\u003cdiv\u003e\u003cpre\u003e\u003cspan class=\"cm-keyword\"\u003epackage\u003c/span\u003e \u003cspan class=\"cm-variable\"\u003emain\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e\u0026#8203;\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e\u003cspan class=\"cm-keyword\"\u003eimport\u003c/span\u003e (\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e\t\u003cspan class=\"cm-string\"\u003e\u0026quot;fmt\u0026quot;\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv\u003e\u003cpre\u003e\t\u003cspan class=\"cm-string\"\u003e\u0026quot;io/ioutil\u0026quot;\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n","lines":63,"lines_more":58,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"96F8K"}]},{"client_msg_id":"cb993b37-58a3-4268-84f3-2a9d3ecd981e","type":"message","user":"UDDCM376D","text":"詰んだ","ts":"1612197297.303000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FJorY"}]},{"client_msg_id":"c2808eeb-c975-49c6-8cfb-06b8892fe15a","type":"message","user":"UDDCM376D","text":"１回目のイベントでファイルを読んだら0バイト…","ts":"1612197280.302600","edited":{"user":"UDDCM376D","ts":"1612197289.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HT2k"}]},{"client_msg_id":"bedb0178-4340-4325-ae98-a9b39a92948e","type":"message","user":"UDDCM376D","text":"fsnotify、Linuxでは一度ファイルを書き込んだら3,4回イベント飛ぶ","ts":"1612197259.302100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pUo0Q"}]},{"client_msg_id":"aacb35a9-b30f-4906-9660-426255c61959","type":"message","user":"UDDCM376D","text":"ツライ","ts":"1612197213.301100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RvNSo"}]},{"client_msg_id":"117741c8-a282-46e7-960b-db5f4ff47715","type":"message","user":"U06BRP8VD","text":"具体的に言うと実際のBODYのサイズの3倍くらいのメモリを使うことになった。ログを出さなければ1倍で済んだのに。","ts":"1612234110.345900","thread_ts":"1612233983.344900","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","reactions":[{"name":"interrobang","count":1,"users":["UK7DT8URY"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"L=3K"}]},{"client_msg_id":"9bd19f8e-d2c8-4a4d-8ffd-d7bcc2e0f139","type":"message","user":"UK7DT8URY","text":"まじかよそれは気をつけないとハマる:partyparrot:","ts":"1612234148.346300","thread_ts":"1612233983.344900","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/E5"}]},{"client_msg_id":"7696bf88-153b-4ada-ae57-e5725d722260","type":"message","user":"UDDCM376D","text":"\u003chttps://syossan.hateblo.jp/entry/2017/09/24/205329\u003e","ts":"1612197209.300900","attachments":[{"fallback":"生涯未熟: fsnotifyは何故Vimで動かないのか？ - 生涯未熟","id":1,"title":"fsnotifyは何故Vimで動かないのか？ - 生涯未熟","title_link":"https://syossan.hateblo.jp/entry/2017/09/24/205329","text":"という掲題ですが、まさにハマったことなのでメモ代わりに記事として書いておきます。 一体何が？ Goでファイル監視をしようと思いライブラリを探した結果、fsnotifyというライブラリを発見しました。 \u003chttp://github.com|github.com\u003e 「Star数も多いし、こりゃいいや。使っちゃれ。」と思い、使ってみたところ何故かファイル変更が監視できていませんでした。 ここから色々と探る旅が始まりました。 尚、今回環境としてはOS X + Gogland + IdeaVimになります。 まずはライブラリを読んでみる fsnotifyは以下のように使っていました。 で、このコードからライブラリの中身を探索することに。 最初…","image_url":"https://ogimage.blog.st-hatena.com/11696248318754546733/8599973812301077772/1506763238","blocks":null,"ts":1506254009,"service_name":"生涯未熟","service_icon":"https://syossan.hateblo.jp/icon/touch","from_url":"https://syossan.hateblo.jp/entry/2017/09/24/205329","original_url":"https://syossan.hateblo.jp/entry/2017/09/24/205329"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oa4U"}]},{"client_msg_id":"3954d1e7-94f3-4824-b890-229f3b85e070","type":"message","user":"UERCTTT8B","text":"できちゃった。あと一部 POSIX 関数を何とかすると何とかなりそう","ts":"1612195897.300700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"y8iE2"}]},{"client_msg_id":"dde0f662-c9cf-4d40-9d81-f4ccc0bf1c3e","type":"message","user":"UERCTTT8B","text":"雑に置き換えればいいのか :stuck_out_tongue:","ts":"1612194186.300100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Mrd"}]},{"client_msg_id":"29870c66-7661-4060-8c77-ec14f29aec1c","type":"message","user":"UERCTTT8B","text":"(正直いらないのではという気がしている)","ts":"1612194092.299700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YQe"}]},{"client_msg_id":"754d8d5c-4b6d-4a25-9c81-53dbfb9bf66d","type":"message","user":"UERCTTT8B","text":"なんで `__fprintf_chk` なんか必要としているのかと思いきや、 `runtime/cgo/gcc_libinit.c` のなかで fprintf 使ってた","ts":"1612194071.299400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5nKH"}]},{"client_msg_id":"fbd1b74f-4f24-4bc2-80e9-7dd9d8da07f5","type":"message","user":"UERCTTT8B","text":"(クロスコンパイルというか c-archive な出力を他の環境に食わせられるかどうか)","ts":"1612193183.298500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BvkOx"}]},{"client_msg_id":"35f44bde-4bd1-43f5-856f-f001ae33d73d","type":"message","user":"UERCTTT8B","text":"runtime/cgo がクロスコンパイルの鬼門になってるなあ","ts":"1612193162.298000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Mlj8"}]}]
