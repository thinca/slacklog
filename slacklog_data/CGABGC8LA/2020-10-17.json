[{"client_msg_id":"d5ced60d-cc12-4872-9a6d-d8b415b86183","type":"message","user":"U03C6TEAZ","text":"elsa、期待してるけど書いてる人がエラーを `_` で握りつぶす癖があってどうしたもんかと。","ts":"1602944578.083300","team":"T03C4RC8V","reactions":[{"name":"gunnyari","count":3,"users":["U9S4G0LJW","U8CC7MDCL","UKHUVMBJR"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"O6iQH"}]},{"client_msg_id":"cc8c4d05-40dc-46ab-92a5-7cbd191a1c43","type":"message","user":"UERCTTT8B","text":"なんだろ","ts":"1602943526.082600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/pR"}]},{"client_msg_id":"5beca7d6-e081-4110-8950-4536d3bf3b51","type":"message","user":"U03C6TEAZ","text":"以前、oilpan について面白い話をエマさんから聞いたのに忘れてしまった。。。","ts":"1602943417.082300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Jj9vn"}]},{"client_msg_id":"a6ddbaf5-77e6-4e1f-8734-79c5d5ac9d05","type":"message","user":"UERCTTT8B","text":"blink のですね","ts":"1602943043.081400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EwNfA"}]},{"client_msg_id":"5b662078-ad8d-4291-87ba-8f8688f99415","type":"message","user":"U03C6TEAZ","text":"もともと blink のじゃなかったかな。","ts":"1602942584.081000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qXGk/"}]},{"client_msg_id":"b0511bf9-d776-4146-a78a-a104852fe67a","type":"message","user":"U03C6TEAZ","text":"oilpan すね。","ts":"1602942569.080800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RyfW"}]},{"client_msg_id":"ab7471e5-bcc1-4db6-907a-e3cfb34a771c","type":"message","user":"U8R597E9H","text":"そんなことしていたのか…","ts":"1602941212.080200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Crhw"}]},{"client_msg_id":"6e4b6b67-f1dd-4f94-8368-ca9716d9cacb","type":"message","user":"UERCTTT8B","text":"アロケータや GC を自作したり…","ts":"1602940877.079800","team":"T03C4RC8V","reactions":[{"name":"majika","count":1,"users":["U8R597E9H"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bZU"}]},{"client_msg_id":"c7806da1-3171-4e4d-bc83-662a23160fc4","type":"message","user":"UERCTTT8B","text":"Chromium はちょっと特殊すぎる","ts":"1602940864.079600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"H610V"}]},{"client_msg_id":"1e546d93-2236-43d5-a4bd-855a4878e368","type":"message","user":"U03C6TEAZ","text":"constexpr は高速化と言えるかどうかは分からんけど、まぁ寄与はするかな。","ts":"1602940804.079300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+Fjt"}]},{"client_msg_id":"a73ff36d-7d14-42d4-b5a0-ab683b60af4e","type":"message","user":"UAZ33BKV2","text":"それ \u0026gt; C++ inline ヒント","ts":"1602940687.078800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EY+"}]},{"client_msg_id":"d52c32dd-9b05-47ab-ac16-92db894bdf53","type":"message","user":"UAZ33BKV2","text":"ループ内とかで、かつ関数が小さいと効果の可能性があるが、それコンパイラができるよ案件になりますしね...","ts":"1602940679.078600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ifrB"}]},{"client_msg_id":"d5d21521-d6cd-48be-b5d9-98ed4559656d","type":"message","user":"UERCTTT8B","text":"C++ の inline もヒントでしかないですからね","ts":"1602940672.078400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"c8A0"}]},{"client_msg_id":"a75a57c6-3a3e-4ca8-81b3-284938433682","type":"message","user":"U03C6TEAZ","text":"C++ だと inline 書いてしまうけど、Go はその辺想定して一定の大きさの関数しか inline しない事になってる。","ts":"1602940580.077300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ukzj"}]},{"client_msg_id":"43ef9800-6bfc-409f-84b5-c856856e5cd1","type":"message","user":"U7JL1UKKL","text":"今のCPUのキャッシュや分岐予測はインライン展開みたいなものですからね","ts":"1602940523.076200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HA3J"}]},{"client_msg_id":"fcf0a5f6-0993-4a4b-b8e2-7e27c4bc6b48","type":"message","user":"U7JL1UKKL","text":"そうですね","ts":"1602940494.075400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CXdb"}]},{"client_msg_id":"2397176c-4732-46b0-9db2-498e913b94fe","type":"message","user":"U7H4TJEG0","text":"関数をインライン化したら速いっていうのも固定観念よね \u003chttps://twitter.com/xharaken/status/1314464629876117504\u003e","ts":"1602940461.075000","attachments":[{"fallback":"\u003chttps://twitter.com/xharaken|@xharaken\u003e: Chromiumのメモリ管理周辺のコードはガチガチに最適化してあるんだけど、たまに観察される現象が「関数をインライン展開しないほうが速い」。最近のCPUは相当賢いので、（インライン化による命令数削減のプラス効果）\u0026lt;（コードサイズ肥大化による命令キャッシュミス増加のマイナス効果）になりうる。","id":1,"author_name":"Kentaro Hara","author_subname":"@xharaken","author_link":"https://twitter.com/xharaken/status/1314464629876117504","author_icon":"https://pbs.twimg.com/profile_images/215655571/mandel_normal.png","text":"Chromiumのメモリ管理周辺のコードはガチガチに最適化してあるんだけど、たまに観察される現象が「関数をインライン展開しないほうが速い」。最近のCPUは相当賢いので、（インライン化による命令数削減のプラス効果）\u0026lt;（コードサイズ肥大化による命令キャッシュミス増加のマイナス効果）になりうる。","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1602227763,"service_name":"twitter","from_url":"https://twitter.com/xharaken/status/1314464629876117504","original_url":"https://twitter.com/xharaken/status/1314464629876117504"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yc8"}]},{"client_msg_id":"6dee474a-3d98-45ff-aba2-5d78d99f6c5b","type":"message","user":"U06BRP8VD","text":"context.WithNotifySignalだっけ? あれが入ったらいろんなところでトラップしてきそうw","ts":"1602924285.074000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tDR"}]},{"client_msg_id":"555885b4-21c6-4467-aa27-b175f75f446c","type":"message","user":"U03C6TEAZ","text":"昔は os.Exit は関数型の変数だったので書き換えられたんですよね。テストの為でしたが。","ts":"1602922831.073400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BjR"}]},{"client_msg_id":"fcfa7856-e0c5-4460-8349-6223a1f85c3c","type":"message","user":"UERCTTT8B","text":"atexit か。","ts":"1602922728.072000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YNSqT"}]},{"client_msg_id":"88d65395-14f3-4f83-95a9-c7f05edabc7c","type":"message","user":"UERCTTT8B","text":"on_exit みたいなのがほしいですね","ts":"1602922345.071800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JhT"}]},{"client_msg_id":"8a803e70-fa8f-45cf-8f99-4469ef0168d6","type":"message","user":"UERCTTT8B","text":"なるほど","ts":"1602922270.071400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Nqh=l"}]},{"client_msg_id":"4ffdd206-331e-46c1-9562-b32c5e49d339","type":"message","user":"U03C6TEAZ","text":"シグナルはメインしかハンドルしない方がいいんじゃないですかね。はっきり明文化されてるならいいかもですが。\n```cmdutil.HandleSIGINT()```\nみたいな。","ts":"1602922257.071100","team":"T03C4RC8V","reactions":[{"name":"sorena","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8gwC"}]},{"client_msg_id":"19395f24-a848-42b3-8151-5483d33f630d","type":"message","user":"UERCTTT8B","text":"Go のライブラリ側で SIGINT を handle してなにかするのって、アプリ側の裁量を狭めてしまうため一般的には良くない気がしているんですが、どうなんでしょう?","ts":"1602922144.070100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"c27K"}]},{"client_msg_id":"3f46775c-c0e2-4ac5-b806-a5f4f6b3f3ff","type":"message","user":"UBNPMJJGM","text":"noteのときも、事実関係を把握せずにRails叩いてる人とかいましたね","ts":"1602921456.069200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"u6jj"}]},{"client_msg_id":"a1910288-c9a6-4b3d-83eb-c0043cf0f005","type":"message","user":"UBNPMJJGM","text":"至言","ts":"1602921421.069100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ijUZ"}]},{"client_msg_id":"277b22f9-42dd-44c3-bd3e-0f504f7a009d","type":"message","user":"UAZ33BKV2","text":":hai-small:  心に留めておきたい言葉ですね","ts":"1602920088.069000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nqGl"}]},{"client_msg_id":"bdd079bb-0ebf-4165-b8bc-802a0e5395f3","type":"message","user":"U03C6TEAZ","text":"まとめると、詳しくないのに下げると恥ずかしい思いをするという話。","ts":"1602920035.068500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nwk"}]},{"client_msg_id":"5bd604b4-cd7b-4531-8f50-aa2fd04ae1ef","type":"message","user":"U03C71D7H","text":"よくよく読むと詳しくない言語をちゃんとやってないと言うのはそのまんまだしそれはそう","ts":"1602918738.067800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"A7Q"}]},{"client_msg_id":"0f4a31e8-0737-4fb5-9237-69d1aede0d7a","type":"message","user":"UAZ33BKV2","text":"なるほど ウヒッ w","ts":"1602916046.066100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cBhsK"}]},{"client_msg_id":"17340cfd-6523-46d5-b054-16b4ebbd1e15","type":"message","user":"U06BRP8VD","text":"Goの弱点を言うと、やっぱシングルコアでぶん回すようなのに弱くて、それをgorouinteで並列化してやらないと全く美味しくない。\n\n具体的にはレイトレーシングで、1goroutineでやるともうどうやっても速い系の言語には勝てないんだけど、それを各ラインごとで並列化するとｳﾋｯてなる。CPUコアが多ければ多いほどｳﾋｯてなる。","ts":"1602916010.065600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fs=37"}]},{"client_msg_id":"600f5a20-e5e0-4024-b105-9db1948e5ef5","type":"message","user":"U03C6TEAZ","text":"Go のケースに限らず、自分が詳しくない言語を下げる人達はだいたいその言語をちゃんとやってない。","ts":"1602915659.062900","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UAZ33BKV2"]},{"name":"tashikani","count":1,"users":["UAZ33BKV2"]},{"name":"sorena","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/0I5k"}]},{"client_msg_id":"d82f3660-7d94-49a3-8ff7-2d7ce11f9528","type":"message","user":"U06BRP8VD","text":"コスト度外視で最速いうならLLVMのIRを直接書くくらいしないとアカンそう…アセンブラ書いても良いけどアウトオブオーダーとか考えてコーディングとか考えたくもない。","ts":"1602915216.061600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TQ4"}]},{"client_msg_id":"09dc23cc-a840-463f-b3aa-01913edba02e","type":"message","user":"UAZ33BKV2","text":"ただ、局面の探索関係いろいろな操作がありそうで、知らないジャンルなので想定だけ...です、でもまあ速度と直接関係するところじゃないかも\nメモリコピーになりそうなところをポインタ値移動させる系でやるならGoで問題にならなそうだしな...","ts":"1602915126.060400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rTT"}]},{"client_msg_id":"6e6a82ef-3f59-49b8-8af9-54eaabb05df0","type":"message","user":"U06BRP8VD","text":"そうなると配列でも十分同じ意味がある。まぁGoの場合は境界チェック意識しないとポインタにくらべてめっちゃ遅くなるけどw","ts":"1602915011.058400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2rf"}]},{"client_msg_id":"5ff34b1d-0d1e-4fa1-a6f2-ed6844d7de43","type":"message","user":"UAZ33BKV2","text":"CPU boundとしてはそうですよね...","ts":"1602914992.057900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PGLBQ"}]},{"client_msg_id":"bfdb9850-3100-4f43-86bb-259e2c31ffa4","type":"message","user":"U06BRP8VD","text":"ポインタがキーになる高速アルゴリズムなんてほとんどないよ。乱暴に言うと、データ構造が密でアクセス局所性が担保できる、ことが現在のCPUのシングル性能の鍵だし。","ts":"1602914953.057300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sKbeK"}]},{"client_msg_id":"5ee63679-4e0b-4f5b-bad8-147a1f79eca1","type":"message","user":"UAZ33BKV2","text":"そこはまあ確実にありそうですね\n(逆にポインタ処理については、なにか速度寄与のめちゃめちゃ高いメインのアルゴリズムの最速実装(コンパイラにまかせるより確実)みたいなのがあったときは、意味があるかもしれない...が)","ts":"1602914831.055600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+fq"}]},{"client_msg_id":"c2344c17-009b-4dde-9201-d4f14a8588bd","type":"message","user":"U06BRP8VD","text":"↑こういうことを考えなくてもそこそこの速度(=成果)を出せるからGoは美味しいのよね…","ts":"1602914815.055100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/MDwe"}]},{"client_msg_id":"0447e4bf-e23d-436a-b524-f381fe18bb75","type":"message","user":"U06BRP8VD","text":"Goの場合、複数コアを稼働させることに特化してるから、将棋エンジンみたいなことやるには考え方そのものを変えないといけない。Cのそのままで移植なら遅くなって当然だし、アルゴリズムが並列に対応してなかったら目も当てられないでしょ。","ts":"1602914734.053300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"o1VK"}]},{"client_msg_id":"82a3ff45-6dba-4e9e-a8ae-4c67eff480f1","type":"message","user":"U06BRP8VD","text":"ガチレスすると…\n\nifdefはメンテ性を極端に下げるので、高速化以前の問題。\n\nインライン化はコードサイズが増えるから、コードがキャッシュアウトしやすくなって高速化にとっては諸刃の剣。\n\nメモリポインタ演算はその両方の合わせ技になるから、凝ったことしちゃだめ。","ts":"1602914648.051600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1QBwb"}]},{"client_msg_id":"3eb6ee23-1b2e-4884-b61c-9389757a3a93","type":"message","user":"U03C6TEAZ","text":"やってみた、ならある程度分かるけどコードを見るだけで分かったと言われてもなぁ。","ts":"1602914598.050900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lhxFc"}]},{"client_msg_id":"4576e161-7e16-4f07-97b8-7e2db761fdca","type":"message","user":"U06BRP8VD","text":"低レベル(ダブルミーニング)すぎてビビった。","ts":"1602914467.048800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ferL"}]},{"client_msg_id":"96bb811a-9f20-4245-82dd-507966468b15","type":"message","user":"UAZ33BKV2","text":"C++のテンプレートを想定したけど、まあifdefしたりとかあるか...","ts":"1602913679.048500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iQunF"}]},{"client_msg_id":"572ef17d-6fc0-4714-b317-8061ae329943","type":"message","user":"U06ECBRTJ","text":"まぁ、ifdef はメタプロになるのか","ts":"1602913500.047900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aDG"}]},{"client_msg_id":"f3251404-e4c9-4073-9639-3aeccd576def","type":"message","user":"U06ECBRTJ","text":"\u003chttps://twitter.com/flsc_taro/status/1317339813045915648\u003e","ts":"1602913420.047500","attachments":[{"fallback":"\u003chttps://twitter.com/flsc_taro|@flsc_taro\u003e: \u003chttps://twitter.com/mattn_jp|@mattn_jp\u003e \u003chttps://twitter.com/tomoyuki1992121|@tomoyuki1992121\u003e パッと思いつくのだと\nメタプロ＝ifdefやインライン関数\nメモリポインタ演算= 構造体に対してポインタアクセスで操作\nあたりですが、この辺りは高速化とは呼びませんかね？","id":1,"author_name":"infamous_goto / Web開発業界のキャリア論を語るフルスタックエンジニア","author_subname":"@flsc_taro","author_link":"https://twitter.com/flsc_taro/status/1317339813045915648","author_icon":"https://pbs.twimg.com/profile_images/1241295638278467584/29Jo_ohx_normal.jpg","text":"\u003chttps://twitter.com/mattn_jp|@mattn_jp\u003e \u003chttps://twitter.com/tomoyuki1992121|@tomoyuki1992121\u003e パッと思いつくのだと\nメタプロ＝ifdefやインライン関数\nメモリポインタ演算= 構造体に対してポインタアクセスで操作\nあたりですが、この辺りは高速化とは呼びませんかね？","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1602913261,"service_name":"twitter","from_url":"https://twitter.com/flsc_taro/status/1317339813045915648","original_url":"https://twitter.com/flsc_taro/status/1317339813045915648"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"n1EI0"}]},{"client_msg_id":"bbfc17fe-f156-43f1-9fca-b24fbb6e2ead","type":"message","user":"UAZ33BKV2","text":"沢山類似関数が生成される、とかそういうのやったのかな? よくわからない...","ts":"1602913319.047300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wUMhN"}]},{"client_msg_id":"3a57e016-7743-4e06-8ffb-536353a1f7d8","type":"message","user":"U03C6TEAZ","text":"メタプロって高速化に寄与するんでしょうか。","ts":"1602913205.046300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"k5Ox7"}]},{"client_msg_id":"b8a1c624-0c9b-481e-8973-ddf804a9d5aa","type":"message","user":"U03C6TEAZ","text":"\u003chttps://twitter.com/flsc_taro/status/1317298309304774658\u003e","ts":"1602913195.045900","attachments":[{"fallback":"\u003chttps://twitter.com/flsc_taro|@flsc_taro\u003e: \u003chttps://twitter.com/tomoyuki1992121|@tomoyuki1992121\u003e Goはメタプロっぽい事とかメモリポインタ演算を排除してるので、カリカリに高速化する前提のCとかC++のコードだと乗り換えが厳しい気がします。将棋ソフトの対局エンジンをGoに書き換えようとした事があるんですが、みるみる遅くなるのがコード見るだけで分かって悲しくなりました。","id":1,"author_name":"infamous_goto / Web開発業界のキャリア論を語るフルスタックエンジニア","author_subname":"@flsc_taro","author_link":"https://twitter.com/flsc_taro/status/1317298309304774658","author_icon":"https://pbs.twimg.com/profile_images/1241295638278467584/29Jo_ohx_normal.jpg","text":"\u003chttps://twitter.com/tomoyuki1992121|@tomoyuki1992121\u003e Goはメタプロっぽい事とかメモリポインタ演算を排除してるので、カリカリに高速化する前提のCとかC++のコードだと乗り換えが厳しい気がします。将棋ソフトの対局エンジンをGoに書き換えようとした事があるんですが、みるみる遅くなるのがコード見るだけで分かって悲しくなりました。","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1602903365,"service_name":"twitter","from_url":"https://twitter.com/flsc_taro/status/1317298309304774658","original_url":"https://twitter.com/flsc_taro/status/1317298309304774658"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lHs"}]}]
