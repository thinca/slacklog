[{"client_msg_id":"66ac64f1-8317-4ec7-912c-82ee5eba6d6e","type":"message","user":"UERCTTT8B","text":"(`h.quitCh`)","ts":"1606742834.200200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FHtv"}]},{"client_msg_id":"4648243d-c348-4e9a-967d-81e2df0517bd","type":"message","user":"UERCTTT8B","text":"close って普通 channel のおくる側でやりません?","ts":"1606742721.199600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ahd"}]},{"client_msg_id":"42469f65-12f4-442a-8484-43e59b914824","type":"message","user":"UNJ2DANJC","text":"channelのcloseをsync.Onceでガードするのが手っ取り早いんだろうけどなんかダサいな... どう直すのがエレガントなんだろう","ts":"1606742535.199200","edited":{"user":"UNJ2DANJC","ts":"1606743063.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"T4S"}]},{"client_msg_id":"63504571-fafa-403f-bd75-ad9f9a20eedd","type":"message","user":"UNJ2DANJC","text":"うーんこれ直ってないような... テストコードもなんか不自然だしローカルで実行したらたまに落ちるflakyなテストだ \u003chttps://github.com/prometheus/prometheus/pull/8166\u003e","ts":"1606740862.197400","attachments":[{"fallback":"GitHub: Fix panic with  double close() of channel on /-/quit/ by roidelapluie · Pull Request #8166 · prometheus/prometheus","id":1,"title":"Fix panic with  double close() of channel on /-/quit/ by roidelapluie · Pull Request #8166 · prometheus/prometheus","title_link":"https://github.com/prometheus/prometheus/pull/8166","text":"Fix #8144 === RUN TestHandleMultipleQuitRequests web_test.go:492: Error Trace: web_test.go:492 asm_amd64.s:1374 Error: Received unexpected er...","thumb_url":"https://avatars3.githubusercontent.com/u/3380462?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":114,"thumb_height":114,"from_url":"https://github.com/prometheus/prometheus/pull/8166","original_url":"https://github.com/prometheus/prometheus/pull/8166"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PCUQ"}]},{"client_msg_id":"83b3706d-469e-4826-aa20-1f5054c38e6c","type":"message","user":"UGXMRNBUM","text":"なんとなく「レイヤーの境目でやることだから他でやんな！」みたいな展開を妄想してしまっていたかもしれない","ts":"1606715937.195300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GJ/q"}]},{"client_msg_id":"303fe713-978b-40bb-86dc-0f275ba380d2","type":"message","user":"UGXMRNBUM","text":"まァ確かに、縛る目的で言及されてなければ良いか…","ts":"1606715917.194800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qkCPa"}]},{"client_msg_id":"f0a65232-af34-4b84-8826-01802eaebd97","type":"message","user":"U03C6TEAZ","text":"インタフェースは○○にしか使ったら駄目、戻り値はこういう時はインタフェース、といった感じの縛りはあんま無くていいと思ってます。","ts":"1606715501.193600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xrK"}]},{"client_msg_id":"90ec87b3-e7de-499f-b83a-54d4ce3c2b55","type":"message","user":"U03C6TEAZ","text":"分業でインタフェースという契約がある上で、コンパイル時にエラー出したいという事もあるのでインタフェース便利ですね。","ts":"1606715432.192300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UQn8U"}]},{"client_msg_id":"de63525d-8f89-47e8-851d-a733aa810425","type":"message","user":"UDDCM376D","text":"これすね","ts":"1606715421.192000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bMx+0"}]},{"client_msg_id":"e65f7bbc-e601-4b0d-a599-0f322f299319","type":"message","user":"UDDCM376D","text":"\u003chttps://www.kaoriya.net/blog/2020/01/20/never-interface-only-for-tests/\u003e","ts":"1606715418.191700","attachments":[{"fallback":"テストのためだけに`interface`を書きたくないでござる — KaoriYa","id":1,"title":"テストのためだけに`interface`を書きたくないでござる — KaoriYa","title_link":"https://www.kaoriya.net/blog/2020/01/20/never-interface-only-for-tests/","text":"golangでテストのためだけに`interface`を書くのが死ぬほど嫌だったので編み出した技を紹介します。","blocks":null,"service_name":"kaoriya.net","service_icon":"https://www.kaoriya.net/favicon.ico","from_url":"https://www.kaoriya.net/blog/2020/01/20/never-interface-only-for-tests/","original_url":"https://www.kaoriya.net/blog/2020/01/20/never-interface-only-for-tests/"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"58aB9"}]},{"client_msg_id":"9b377d32-e506-47c1-a850-4a75d71f7532","type":"message","user":"U06BRP8VD","text":"だいたいwiringいるけど","ts":"1606715209.190700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bPQk/"}]},{"client_msg_id":"a6b79349-7f8f-4f45-91da-eea40bb3b312","type":"message","user":"U06BRP8VD","text":"モック、型エイリアスでやる方法もあるよ!","ts":"1606715148.190000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uCb"}]},{"client_msg_id":"ec501592-a910-40c6-9c54-195f3c70087c","type":"message","user":"UGXMRNBUM","text":"ちょっと話は変わりますけど、モックってinterface返す側でどうこうするのが良いんですかね。\nなんとなく、モックは使う側でinterface切ってそれに対するモックを用意してるほうが手堅いと思ってたんですが","ts":"1606715032.189400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kWnUl"}]},{"client_msg_id":"46b51abc-cfd1-445c-a3d6-8ef9b4675d1d","type":"message","user":"UGXMRNBUM","text":"あーモックですか。モック…","ts":"1606714958.188100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7e+6e"}]},{"client_msg_id":"16723bb6-3ab2-457f-823e-19009b1074df","type":"message","user":"U03C6TEAZ","text":"実際の所、テストでモックを挟むなら interface でしか出来ないのでレイヤという点も分かります。","ts":"1606714854.187700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ov6nu"}]},{"client_msg_id":"c00853df-2bb1-4ea0-a0f7-a336b82c74c9","type":"message","user":"UGXMRNBUM","text":"もちろんそうですね…","ts":"1606714834.187200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mx2"}]},{"client_msg_id":"f7984862-5e4f-441e-bb60-00c59d243ec0","type":"message","user":"UERCTTT8B","text":"実装が複数種類あって中で切り替わり得るなら interface 返しますね","ts":"1606714635.185700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1=B"}]},{"client_msg_id":"1ee99419-e4be-4659-9c90-2d11f6f8f2c6","type":"message","user":"UGXMRNBUM","text":"レイヤーは関係ないと思うけど…","ts":"1606714403.185200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/=l"}]},{"client_msg_id":"b4550df3-a23b-4200-b5b1-f53928091ec7","type":"message","user":"UGXMRNBUM","text":"隠蔽としてのInterfaceはありますね。実装を隠すみたいな話。","ts":"1606714398.185000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"puSc"}]},{"client_msg_id":"56419af5-16ca-4bbe-9a59-b328eaddd761","type":"message","user":"U03C6TEAZ","text":"Java ぽいけど。","ts":"1606714303.184500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3dI"}]},{"client_msg_id":"88b0de6e-a2c5-4414-a000-e7006bc4a242","type":"message","user":"U03C6TEAZ","text":"設計のデザインとして使う人もいますね。とりあえずインタフェースだけ先に決めて、コンストラクタ側と受け取った側で分業とか。","ts":"1606714293.184300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cONvk"}]},{"client_msg_id":"428eb097-c5d1-4ac0-896a-eef2425dadfe","type":"message","user":"U03C6TEAZ","text":"仮想ファイルシステムだとほぼほぼインタフェースでしょうし。","ts":"1606714246.183700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"p0yh"}]},{"client_msg_id":"00e35f38-4792-4103-a2b8-e8b4d8841c24","type":"message","user":"U03C6TEAZ","text":"作ろうとしてる物が抽象的な物なのかどうかでも変わりますね。","ts":"1606714232.183300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VN4"}]},{"client_msg_id":"5b313acb-9e0b-43bb-9f5d-4cb8c7669902","type":"message","user":"UNJ2DANJC","text":"どうしてもユーザーにゼロ値でstructを使わせたくなくて、interfaceを返すコンストラクタを用意するみたいなのはありだとは思う","ts":"1606714101.182800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"J60c"}]},{"client_msg_id":"28930c68-8bc8-4c68-8443-549fa212511c","type":"message","user":"UNJ2DANJC","text":"sha256.Newはhash.Hashを返すみたいなのもあるから意外と線引きはあいまいだと思っている","ts":"1606713938.181400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Pzik"}]},{"client_msg_id":"0b0ec29c-2787-442a-9be6-dd60a281c8b5","type":"message","user":"UGXMRNBUM","text":"返す側で意識するケースはほとんどないという認識","ts":"1606713711.180000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AAkIx"}]},{"client_msg_id":"ceb7ae5f-1e02-44d5-a3e3-8caa02538c34","type":"message","user":"UERCTTT8B","text":"interface は実装ではなく使用者側と結びつくものなので、受け取り側が interface でどうにかするというのは実に正しいですね","ts":"1606713634.179300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wHTP"}]},{"client_msg_id":"79f5b1a2-9679-4a4a-9c18-0c6d88240a14","type":"message","user":"UAZ33BKV2","text":"事前型宣言じゃない(duck typeな)契約「ここでははしをわたらないでね」\nいや、そこまであいまいじゃないか","ts":"1606713481.178500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ee6eT"}]},{"client_msg_id":"4a74046b-1fa8-44f7-a344-444eb32c962b","type":"message","user":"U03C6TEAZ","text":"契約プログラミング～","ts":"1606713406.177800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vAZ"}]},{"client_msg_id":"0d1cda43-2fae-4e2c-b43a-7fd02591a0bb","type":"message","user":"U7H4TJEG0","text":"レイヤ境界の話は自分もその恩恵を受けたことがあるので悩む","ts":"1606713393.177600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Z0s"}]},{"client_msg_id":"5c894333-b3e4-4390-8863-72edf72b478a","type":"message","user":"UGXMRNBUM","text":"なんか、パズルとかその辺の界隈から入ってきた人が、\nそもそも何のためにそうなってるのかをドキュメント読まずに独自解釈するケースが良く見受けられてもにょる","ts":"1606713183.176900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1Su4"}]},{"client_msg_id":"b3ef977b-76c6-4c1b-a05d-2cacb820d259","type":"message","user":"U7H4TJEG0","text":"\u003chttps://github.com/golang/go/wiki/CodeReviewComments#interfaces\u003e\n落ち着いてこれを読むとよさそう","ts":"1606713067.176100","attachments":[{"fallback":"GitHub: golang/go","id":1,"title":"golang/go","title_link":"https://github.com/golang/go/wiki/CodeReviewComments#interfaces","text":"The Go programming language. Contribute to golang/go development by creating an account on GitHub.","thumb_url":"https://avatars3.githubusercontent.com/u/4314092?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/golang/go/wiki/CodeReviewComments#interfaces","original_url":"https://github.com/golang/go/wiki/CodeReviewComments#interfaces"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1+VKH"}]},{"client_msg_id":"70b7745b-4e4e-49a5-8ff1-a5d60de79a63","type":"message","user":"UDDCM376D","text":"\u003chttps://twitter.com/zenn_dev/status/1333270029232525312?s=20\u003e","ts":"1606712676.175200","attachments":[{"fallback":"\u003chttps://twitter.com/zenn_dev|@zenn_dev\u003e: :thinking_face: ピックアップ :sparkles:\n\nInterface 型の使いどころ【Go】\nby \u003chttps://twitter.com/spiegel_2007|@spiegel_2007\u003e\n\n\u003chttps://zenn.dev/spiegel/articles/20201129-interface-types-in-golang\u003e","id":1,"author_name":"Zenn公式","author_subname":"@zenn_dev","author_link":"https://twitter.com/zenn_dev/status/1333270029232525312","author_icon":"https://pbs.twimg.com/profile_images/1192775453498494977/pb8Shc8G_normal.jpg","text":":thinking_face: ピックアップ :sparkles:\n\nInterface 型の使いどころ【Go】\nby \u003chttps://twitter.com/spiegel_2007|@spiegel_2007\u003e\n\n\u003chttps://zenn.dev/spiegel/articles/20201129-interface-types-in-golang\u003e","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1606711320,"service_name":"twitter","from_url":"https://twitter.com/zenn_dev/status/1333270029232525312?s=20","original_url":"https://twitter.com/zenn_dev/status/1333270029232525312?s=20"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZyHD"}]},{"client_msg_id":"c9b9e2d6-c45d-4cc3-abdf-d38b2e1c7a1b","type":"message","user":"U03C6TEAZ","text":"何も書いてないしまずネタも考えてない。","ts":"1606712515.175000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VmJEa"}]},{"client_msg_id":"41a8e9ef-b54a-4aad-b4c6-f374b3162859","type":"message","user":"UDDCM376D","text":"シンプルで小さなやつなので30分ほどで終わりました","ts":"1606712122.174700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UggD"}]},{"client_msg_id":"c7a341f6-8717-41ec-be85-3d7112bb1028","type":"message","user":"UGXMRNBUM","text":"良いすね","ts":"1606712090.174200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"85Ek/"}]},{"client_msg_id":"506c907b-6c89-49f8-bd61-deea763b7d43","type":"message","user":"UDDCM376D","text":"\u003chttps://twitter.com/gorilla0513/status/1333272926116671492?s=20\u003e","ts":"1606712026.173900","attachments":[{"fallback":"\u003chttps://twitter.com/gorilla0513|@gorilla0513\u003e: GoのACカレンダー記事をセットした\n\u003chttps://qiita.com/advent-calendar/2020/go2\u003e","id":1,"author_name":"ゴリラ@人間2年生","author_subname":"@gorilla0513","author_link":"https://twitter.com/gorilla0513/status/1333272926116671492","author_icon":"https://pbs.twimg.com/profile_images/1325645870897922049/ZwcdLacE_normal.jpg","text":"GoのACカレンダー記事をセットした\n\u003chttps://qiita.com/advent-calendar/2020/go2\u003e","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1606712011,"service_name":"twitter","from_url":"https://twitter.com/gorilla0513/status/1333272926116671492?s=20","original_url":"https://twitter.com/gorilla0513/status/1333272926116671492?s=20"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2LS/3"}]}]
