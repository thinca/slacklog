[{"client_msg_id":"4a6788cf-6344-4ad6-a3eb-f69a485d9e64","type":"message","user":"U7H4TJEG0","text":"utf-8と表示されるのは&amp;encを表示しているだけかと。pdf仕様的にasciiの範囲に収まるpdfは作ることはできるけれど、全てのpdfがutf-8 string validというわけではない。","ts":"1553334927.297800","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4B1A5DE5-D81E-490F-8BD3-695EE5417383","type":"message","user":"UDDCM376D","text":"皆さんがファイルについて詳しすぎてびっくり","ts":"1553336275.298400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dafa0bac-bf9c-416c-9a2d-d9f4ff500ec8","type":"message","user":"UDDCM376D","text":"すいません\nGoでバイナリかファイルかを判定する方法ってありますか？","ts":"1553311219.267500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4c8dba8a-18a8-4d0f-985d-9d0fc73a081e","type":"message","user":"U03C6TEAZ","text":"バイナリかテキストかって事ですか？","ts":"1553313622.268100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"87d724df-bbed-44e5-a44d-9868a8e2465b","type":"message","user":"U03C6TEAZ","text":"テキストの定義によります。","ts":"1553313635.268500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1adb77b8-b36f-4a3a-b523-295c07671e4c","type":"message","user":"U06ECBRTJ","text":"`exec.Command(\"file --mime [file] | grep binary\").Run()`","ts":"1553314433.269700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b87fe8b5-0e34-41cc-90b1-05d2a140a120","type":"message","user":"UDDCM376D","text":"&gt;バイナリかテキストかって事ですか？\nそうです\nテキストの定義はあまり考えてなかったのですが、普通に人間が読めるテキストファイルのことって考えています","ts":"1553314946.271200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"737b9fb4-00dc-4074-ae2d-17fdf15dc30a","type":"message","user":"UDDCM376D","text":"&gt;exec.Command(“file --mime [file] | grep binary”).Run()\nありがとうございます\nGo単体で実現したいので、外部コマンド実行は最終手段と考えています","ts":"1553315002.272400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4a8a94a2-bad8-4af5-a787-d6c7d2277596","type":"message","user":"U03C71D7H","text":"&gt; 人間が読めるテキストファイルのこと\n\nこれだと定義が曖昧すぎるってことでしょうね。世の中には文字コードも大量にあるし","ts":"1553315449.273100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a8a828a0-87d6-41f3-9d81-55cb9799e320","type":"message","user":"U06ECBRTJ","text":"filetype(content_type) を区別してくれるのはあるけど、binary かどうかは無いなぁ","ts":"1553315972.275400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c3550a10-d4a9-403b-902f-ddfb3cd468e6","type":"message","user":"U06ECBRTJ","text":"<https://qiita.com/futoase/items/7f54b971285d8b91cd3c>","ts":"1553316034.275600","attachments":[{"fallback":"Qiita: 【個人メモ】GoのビルトインライブラリでファイルのMIME Typeを推測したい場合 - Qiita","id":1,"title":"【個人メモ】GoのビルトインライブラリでファイルのMIME Typeを推測したい場合 - Qiita","title_link":"https://qiita.com/futoase/items/7f54b971285d8b91cd3c","text":"# net/httpパッケージを使えば良い net/httpの[DetectContentType関数](<http://golang.org/pkg/net/http/#DetectContentType>)を使うと楽だ。 [実装はこ...","thumb_url":"https://cdn.qiita.com/assets/qiita-fb-2887e7b4aad86fd8c25cea84846f2236.png","blocks":null,"service_name":"Qiita","service_icon":"https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-f9a6afad761ec2306e10db2736187c8b.png","thumb_width":200,"thumb_height":200,"from_url":"https://qiita.com/futoase/items/7f54b971285d8b91cd3c","original_url":"https://qiita.com/futoase/items/7f54b971285d8b91cd3c"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"26a278c3-24ab-4ae2-8043-59e895a3f6ef","type":"message","user":"U8CC7MDCL","text":"対象のファイルにとりあえず文字コードのチェックかけて何も当て嵌らなければ逆説的にバイナリでは？\nみたいな判定するとか","ts":"1553316668.277900","edited":{"user":"U8CC7MDCL","ts":"1553317025.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"40e052f0-e9c1-4e2d-bae8-73b89a957a40","type":"message","user":"UDDCM376D","text":"なるほど、文字コードでチェックして嵌らなかったらバイナリという判定で行けるんですね","ts":"1553317581.279400","edited":{"user":"UDDCM376D","ts":"1553317585.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"00cad016-8bbc-44e3-9899-53ef4842c49f","type":"message","user":"U8CC7MDCL","text":"mattnさんのjvgrepでそれっぽいことしてた気がする。","ts":"1553317828.280300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8226d11a-ba75-43b6-8dec-8fa6cc3413f4","type":"message","user":"U06BRP8VD","text":"テキストファイルとして成立するか否か、まではエンコードを仮定しての読み込みが破綻しないかで判定できる。","ts":"1553317917.281400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1dcd68c6-505d-4a62-9030-b68e77dd9b44","type":"message","user":"U06BRP8VD","text":"エンコード混在したクソみたいなファイルを扱わない限りね。","ts":"1553317939.281800","thread_ts":"1553317939.281800","reply_count":1,"replies":[{"user":"U06BRP8VD","ts":"1553317957.281900"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fd36cc72-8e31-4a66-b9bb-fee997b7fc25","type":"message","user":"U06BRP8VD","text":"2ch の dat ファイルのことや。","ts":"1553317957.281900","thread_ts":"1553317939.281800","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","reactions":[{"name":"laughing","count":1,"users":["U8CC7MDCL"]},{"name":"totemoturai","count":1,"users":["U06ECBRTJ"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9f6e4a1b-6d06-42f1-abdc-d7fce7d8f626","type":"message","user":"U03C6TEAZ","text":"jvgrep でやってた気がしますね。","ts":"1553318120.282700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6e553020-2c60-45ef-880b-c7b8ba090caa","type":"message","user":"U03C6TEAZ","text":"jvgrep の maybeBinary","ts":"1553318223.283500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"263a77ee-6d18-4139-970c-26694b5a7b45","type":"message","user":"U03C6TEAZ","text":"```\nfunc maybeBinary(b []byte) bool {\n\tl := len(b)\n\tif l &gt; 10000000 {\n\t\tl = 1024\n\t}\n\tif l &gt; 1024 {\n\t\tl /= 2\n\t}\n\tfor i := 0; i &lt; l; i++ {\n\t\tif 0 &lt; b[i] &amp;&amp; b[i] &lt; 0x9 {\n\t\t\treturn true\n\t\t}\n\t}\n\treturn false\n}\n```","ts":"1553318302.284000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e46d8b89-88f8-4c25-94b2-fae9a5fb8078","type":"message","user":"U03C6TEAZ","text":"utf8 しか考えないならもう少し他のやり方があります。","ts":"1553318347.284900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fbb508b0-96d0-4e80-8b79-c8b1eb620770","type":"message","user":"UDDCM376D","text":"lightline.vimで表示される「unix | utf-8 | pdf」\nこういうのをGoでやりたいんですよね","ts":"1553318637.287000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1a1f0787-97e4-4495-b0e9-fb4d78a54578","type":"message","user":"UDDCM376D","text":"0x9←これはなんですか？？","ts":"1553318648.287300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9dedab5f-2bbf-4b68-a4a0-47cb228eeefe","type":"message","user":"UDDCM376D","text":"16進数…？","ts":"1553318679.288100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2e3b96a8-a946-45c8-9bdc-cfeb034482d4","type":"message","user":"U03C6TEAZ","text":"タブ文字です。それ以下ならおそらく制御文字\n","ts":"1553318690.288500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6bf75941-35c5-4784-8c27-b3559715e969","type":"message","user":"UDDCM376D","text":"タブ文字がなければbinaryってことなんですか？","ts":"1553318895.289600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2d7ab0c9-8556-4ef1-8d14-92a047ae2100","type":"message","user":"U03C6TEAZ","text":"それくらいしか判定方法が無いって話です。","ts":"1553319252.290400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"532e19cc-efbd-4ad8-9686-605f1fabdd03","type":"message","user":"UDDCM376D","text":"なるほど","ts":"1553319380.290600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f3d463f4-576d-4df1-8f2d-5285a3dc7e60","type":"message","user":"UDDCM376D","text":"ありがとうございます","ts":"1553319391.290900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"354fa573-a773-49fd-89a4-409bf0a92551","type":"message","user":"UDDCM376D","text":"jvgrep参考にさせていただきますm(_ _)m","ts":"1553319403.291400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c8dccfb5-ded5-4789-9f30-720c0cf6bdd3","type":"message","user":"U06BRP8VD","text":"pdf って utf-8 なんだっけ? ascii の範囲に収まるから utf-8 扱いにしちゃってんのか?","ts":"1553320174.292300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"48bcf03e-c411-41e4-b501-4055eef17e24","type":"message","user":"U03C71D7H","text":"vim の話なら拡張子から判定された filetype の可能性","ts":"1553321122.293100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2f61bef3-0b11-491f-806f-4b41134f8568","type":"message","user":"UDDCM376D","text":"拡張子あればをれをファイルタイプとして表示し、なければmabyBinaryで判別するって感じのが良さそうですな","ts":"1553321845.293800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
