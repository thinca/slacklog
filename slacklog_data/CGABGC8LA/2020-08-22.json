[{"client_msg_id":"e63c1b7d-bef8-48e3-bdf3-9fabf4eee197","type":"message","user":"UDDCM376D","text":"あー、なるほど","ts":"1598107446.119500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AxJj"}]},{"client_msg_id":"b03ca4d6-9a61-4739-b9a7-0df4845006cf","type":"message","user":"UERCTTT8B","text":"var a, b struct{}{}\n\u0026amp;a == \u0026amp;b\nが true になるとは限らないという意味でした","ts":"1598106987.119000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"j3Q8N"}]},{"client_msg_id":"ba8813aa-7449-4831-8c88-7532cb4e2c2e","type":"message","user":"UDDCM376D","text":"```structA == structB```","ts":"1598106914.118400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0O9"}]},{"client_msg_id":"490b726c-0412-41a0-8f97-8c6950948206","type":"message","user":"UDDCM376D","text":"`==`ってアドレス比較でしたっけ？","ts":"1598106899.117900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1IK"}]},{"client_msg_id":"148a6fda-9357-4131-bc5f-772ffff3edc7","type":"message","user":"UERCTTT8B","text":"いやそのアドレス同士の比較か","ts":"1598106219.117600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rwz4"}]},{"client_msg_id":"aaa32cf2-4229-4edc-9b7a-1eeadbd3e6e9","type":"message","user":"UERCTTT8B","text":"あと `struct{}{}` 同士の比較が true になる保証がない","ts":"1598106138.117300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qzuhC"}]},{"client_msg_id":"341ddfb3-c071-41b3-84a1-7e5e0b35e2b2","type":"message","user":"UDDCM376D","text":"pointerを取るとallocされるってことか","ts":"1598105946.116800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Iiwxq"}]},{"client_msg_id":"0cf115ae-ad9d-434d-babd-9ade5f4a2a7d","type":"message","user":"UDDCM376D","text":"ええ","ts":"1598105926.116200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=gc1"}]},{"client_msg_id":"1390767f-0c7d-4d1d-8079-64c593ba325c","type":"message","user":"UG6DF6W87","text":"ただし pointer を取ると台無し\n\u003chttps://play.golang.org/p/IxPtZyXu6xh\u003e","ts":"1598105609.116000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MQu"}]},{"client_msg_id":"2acdb934-85fd-4f98-91f7-701deced57e5","type":"message","user":"UG6DF6W87","text":"よく goroutine のサンプルコードに出てくる `done := make(chan struct{})` とかも、ただ終了を伝えたい(`done` chan から値が返ってくることのみが重要で、その中身はなんだっていい)みたいなときに `struct{}` 使うのも同じ理由ですね","ts":"1598105444.115500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EVU6"}]},{"client_msg_id":"43e298a3-423e-4d79-841d-7b960a17b44f","type":"message","user":"UDDCM376D","text":"サイズ、ほんまに0やった","ts":"1598105281.113700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"L2hID"}]},{"client_msg_id":"964f1a13-125b-4b5b-aa9b-86f9169add57","type":"message","user":"UDDCM376D","text":"なるほど","ts":"1598105270.113400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4bM="}]},{"client_msg_id":"78132728-97db-4aec-9199-fc62af2347f5","type":"message","user":"UDDCM376D","text":"キーの有無を確認するときは最適か","ts":"1598105269.113200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"U=9Oq"}]},{"client_msg_id":"6926f340-7f03-43f5-9ac7-b51a8d3ead15","type":"message","user":"UG6DF6W87","text":"`struct{}` はサイズ 0 なので、ただただ map のキーが存在することだけが気になるときに最適\nもちろんそのキーに対してさらに有効か無効か、みたいな判断をしなければならんときには `bool` を使います","ts":"1598105061.112600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XZY6"}]},{"client_msg_id":"4ce64244-c9d2-4180-938f-1ab2d166be59","type":"message","user":"UG6DF6W87","text":"\u003chttps://play.golang.org/p/Ylbn0Wy97gd\u003e","ts":"1598104964.111100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0THJ"}]},{"client_msg_id":"d6a5c9d6-6251-4a4d-9c23-220e3f0e2577","type":"message","user":"UNJ2DANJC","text":"取り出すときに型が無くなるのは辛い","ts":"1598104900.110800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Dou"}]},{"client_msg_id":"18274c20-9976-4e2a-a0d5-b9f81bd65025","type":"message","user":"UERCTTT8B","text":"ベンチマーク取るなら速度じゃなくてメモリかな","ts":"1598104071.102000","team":"T03C4RC8V","reactions":[{"name":"sorena","count":2,"users":["UFYACJ537","UNJ2DANJC"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"abX"}]},{"client_msg_id":"e7fa4af4-4261-4df9-a330-bc6358352988","type":"message","user":"UDDCM376D","text":"なるほど？","ts":"1598104071.101900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"62is"}]},{"client_msg_id":"d4ac90b9-0785-4d8c-a4cc-083733e97e7b","type":"message","user":"UG6DF6W87","text":"`struct{}` を使うのは `struct{}` がメモリ上に存在しないことが主な理由なので、いわゆる Set を作るのにはそっちのが便利なんですよね\n取り出す測度は key となってる `int` の hash 値計算の測度なので、どちらも変わらないかと","ts":"1598103981.101500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DpDX"}]},{"client_msg_id":"7cbf24e6-7ee6-4771-b9ec-93be4413aa06","type":"message","user":"UDDCM376D","text":"こういう時、mapのvalueはstructのが早いって聞いたことがあるが、うつの面倒だし、大した誤差がなければ打ちやすいにしようかなと思ってベンチマークとってみた\n```for _, id := range ids {\n\tif _, ok := m[id]; !ok {\n\t\t// do something\n\t}\n}```","ts":"1598103542.099300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pUFDs"}]},{"client_msg_id":"c2b8c1b9-a570-4298-af04-b9bf383608ff","type":"message","user":"UDDCM376D","text":"どっちが早いか図ってみたけどトントンだった（そもそもベンチマークのコードが怪しいかも）\n```map[int]struct{}\nmap[int]bool```\n```func BenchmarkMapStruct(b *testing.B) {\n\tm := map[int]struct{}{\n\t\t0: {},\n\t}\n\n\tfor i := 0; i \u0026lt; b.N; i++ {\n\t\t_ = m[0]\n\t}\n}\n\nfunc BenchmarkMapBool(b *testing.B) {\n\tm := map[int]bool{\n\t\t0: false,\n\t}\n\n\tfor i := 0; i \u0026lt; b.N; i++ {\n\t\t_ = m[0]\n\t}\n}```\n```BenchmarkMapStruct-8    379472841                3.19 ns/op            0 B/op          0 allocs/op\nBenchmarkMapStruct-8    377764622                3.25 ns/op            0 B/op          0 allocs/op\nBenchmarkMapStruct-8    385195916                3.19 ns/op            0 B/op          0 allocs/op\nBenchmarkMapBool-8      358550688                3.31 ns/op            0 B/op          0 allocs/op\nBenchmarkMapBool-8      355523391                3.45 ns/op            0 B/op          0 allocs/op\nBenchmarkMapBool-8      367719420                3.43 ns/op            0 B/op          0 allocs/op\nPASS\nok      \u003chttp://github.com/skanehira/moby|github.com/skanehira/moby\u003e       9.319s```","ts":"1598103318.097300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Mg4G"}]},{"client_msg_id":"f7dd5b1a-2506-4b44-80d5-4952fbfac5e9","type":"message","user":"UERCTTT8B","text":"dot import をこのためにするのは Go っぽくないな","ts":"1598075866.095700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HMIb"}]},{"client_msg_id":"67717132-aeac-49ad-8bf0-07b4ccd16aa6","type":"message","user":"UERCTTT8B","text":"`import . \"constraints\"` すればあるいは","ts":"1598075848.095400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"andn"}]},{"client_msg_id":"62a2da9e-9dee-460a-8634-a7c8a01e57d8","type":"message","user":"UKHUVMBJR","text":"comparableって普通に書いてるけどこれは実際には `constraints.Comparable` になるのか\n長い","ts":"1598073283.094800","edited":{"user":"UKHUVMBJR","ts":"1598073298.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ovQn"}]},{"client_msg_id":"681138c8-ed98-409f-ba99-c055bc8b9f12","type":"message","user":"UKHUVMBJR","text":"いやしかし、genericsのtypeキーワード廃止めっちゃ見やすくなってよき","ts":"1598073176.094200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nSQKE"}]},{"client_msg_id":"0d1fcbd4-a6e2-4c2f-b766-3c6fb66e2465","type":"message","user":"UKHUVMBJR","text":"```type Set[T comparable] map[T]empty```","ts":"1598073078.093700","team":"T03C4RC8V","reactions":[{"name":"benri","count":1,"users":["UG6DF6W87"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"haGk"}]},{"client_msg_id":"4a572cb0-11f1-4e44-9c2b-946c6b02e472","type":"message","user":"UG6DF6W87","text":"unit ...はニュアンスが違うか...","ts":"1598073059.093200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xFW"}]},{"client_msg_id":"f5ed0e73-4fb8-4453-8697-f3e32958c11b","type":"message","user":"UERCTTT8B","text":"ついでに type empty = struct{} ほしい","ts":"1598072510.092200","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":4,"users":["UKHUVMBJR","UFYACJ537","U9S4G0LJW","UG6DF6W87"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"==pOc"}]},{"client_msg_id":"9e2b1d19-9773-4334-97c5-793276ab05bd","type":"message","user":"UKHUVMBJR","text":"anyについての疑問はだいたい言及されてた\n\u003chttps://groups.google.com/d/msg/golang-nuts/iAD0NBz3DYw/7UKEZIaaAwAJ\u003e","ts":"1598065529.091300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"e2XM"}]},{"client_msg_id":"A97C62C5-5F30-4D44-8352-432B363DDB2A","type":"message","user":"UDDCM376D","text":"なるほど","ts":"1598063492.091000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5Hpv"}]},{"client_msg_id":"69c09d49-76a6-42f8-9ccd-87a3e51b4328","type":"message","user":"UKHUVMBJR","text":"主な原因はgenericsの type キーワードが廃止されてconstraint必須になったことですね\n```type Vector[type T] []T```\nが、\n```type Vector[T any] []T```\nになるので、さすがにすべてに `interface{}` を書くのは長かろうということで","ts":"1598062843.090800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"mOBz3"}]},{"client_msg_id":"fabd2318-642b-4d0b-af25-11efb63c4415","type":"message","user":"UDDCM376D","text":"ジェネリクスがあれば充分な気がする","ts":"1598062741.089400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3=bWj"}]},{"client_msg_id":"d3121b66-70c3-4911-9a50-e2781f381496","type":"message","user":"UDDCM376D","text":"any需要あるんかな","ts":"1598062729.089000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"G=U2"}]},{"client_msg_id":"2fb1dba7-c78f-406a-b418-8b9981504dcf","type":"message","user":"UKHUVMBJR","text":"genericsの続報\nGoにもついにanyが\n\u003chttps://www.reddit.com/r/golang/comments/idwylv/moving_forward_with_the_generics_design_draft/\u003e","ts":"1598061932.088700","attachments":[{"fallback":"reddit: Moving forward with the generics design draft","id":1,"title":"Moving forward with the generics design draft","title_link":"https://www.reddit.com/r/golang/comments/idwylv/moving_forward_with_the_generics_design_draft/","text":"Posted in r/golang by u/Ainar-G • 118 points and 61 comments","thumb_url":"https://www.redditstatic.com/new-icon.png","blocks":null,"service_name":"reddit","service_icon":"http://www.redditstatic.com/desktop2x/img/favicon/apple-icon-57x57.png","thumb_width":256,"thumb_height":256,"from_url":"https://www.reddit.com/r/golang/comments/idwylv/moving_forward_with_the_generics_design_draft/","original_url":"https://www.reddit.com/r/golang/comments/idwylv/moving_forward_with_the_generics_design_draft/"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qONN"}]},{"client_msg_id":"1da79638-c60d-41f0-ba0f-e5310ac5afe4","type":"message","user":"UNJ2DANJC","text":"\u003chttps://github.com/golang/go/issues/40771|https://github.com/golang/go/issues/40771\u003e\n\u003chttps://github.com/golang/go/issues/40908|https://github.com/golang/go/issues/40908\u003e\nt.Logのストリーム対応の影響かな","ts":"1598060319.088200","attachments":[{"fallback":"GitHub: testing: summary and test output interleaved · Issue #40771 · golang/go","id":1,"title":"testing: summary and test output interleaved · Issue #40771 · golang/go","title_link":"https://github.com/golang/go/issues/40771","text":"What version of Go are you using (go version)? \u0026gt;\u0026gt; go version go version go1.14.6 linux/amd64 Does this issue reproduce with the latest release? We haven\u0026amp;#39;t yet picked up 1.15, which cut li...","thumb_url":"https://avatars3.githubusercontent.com/u/4314092?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/golang/go/issues/40771","original_url":"https://github.com/golang/go/issues/40771"},{"fallback":"GitHub: testing: Cleanup races with Logf and Errorf · Issue #40908 · golang/go","id":2,"title":"testing: Cleanup races with Logf and Errorf · Issue #40908 · golang/go","title_link":"https://github.com/golang/go/issues/40908","text":"The program in \u003chttps://play.golang.org/p/rV-CkJivlXs\u003e fails under go test -race: func TestBackgroundCleanup(t *testing.T) { helperDone := make(chan struct{}) go func() { t.Logf(\u0026amp;quot;Something happe...","thumb_url":"https://avatars3.githubusercontent.com/u/4314092?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/golang/go/issues/40908","original_url":"https://github.com/golang/go/issues/40908"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=Vq"}]},{"client_msg_id":"b70cfae9-7fa5-487c-a126-9c62ef9f7728","type":"message","user":"UAZ33BKV2","text":"倍プッシュしてないとdenyされるような(それはbet)","ts":"1598058972.087300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"27B4"}]},{"client_msg_id":"1e22a72b-ec4b-4846-bcb0-d4c3ff700474","type":"message","user":"UNJ2DANJC","text":"go vetで不適切なベンチマークのコードを指摘してほしい","ts":"1598058330.086900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3ZPL"}]},{"client_msg_id":"e260e19d-19b0-41ec-a780-81dbfe4aeaf9","type":"message","user":"U06BRP8VD","text":"いま encoding/json のソース軽く読んだら、 scan (\u0026amp;簡易パース)して decodeState に渡すって感じなのね。そんで Decode のほうは scan と同時に io.Reader から []byte に読み込んじゃう。","ts":"1598039267.085500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DYXZC"}]},{"client_msg_id":"9de878af-ba06-4333-a9e4-6b085016fcc1","type":"message","user":"UDDCM376D","text":"ベンチマーク終わらないから終了しちゃった…","ts":"1598022015.081700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cVDj"}]}]
