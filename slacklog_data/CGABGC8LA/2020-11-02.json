[{"client_msg_id":"75fe16e2-fb09-43dc-811a-6924ddb14a71","type":"message","user":"UERCTTT8B","text":"ありがとうございました","ts":"1604325942.044000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"m0p"}]},{"client_msg_id":"d65849b0-5984-4506-bc07-7e9320d2b9bc","type":"message","user":"UERCTTT8B","text":"今回は一個だけなんで大丈夫っす","ts":"1604325928.043800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"g0wLX"}]},{"client_msg_id":"cb99621f-e61f-41cb-beb6-8ba0739ca0a0","type":"message","user":"U03C6TEAZ","text":"複数の操作があるのであれば↑の様にトランザクション使った方が良いです。","ts":"1604325892.043500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DdbFq"}]},{"client_msg_id":"55b5ee1e-520f-4ec5-95f5-368f451094ef","type":"message","user":"U03C6TEAZ","text":"大変になります。(大変とは)","ts":"1604325826.043000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ooie"}]},{"client_msg_id":"b9e802b7-0465-4160-b08d-ca92433be6cc","type":"message","user":"U03C6TEAZ","text":"違う場合はコピーなので途中でコケると","ts":"1604325819.042700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gssqt"}]},{"client_msg_id":"f6ed9c53-68d3-475f-b84a-2d39d36f9973","type":"message","user":"UERCTTT8B","text":"よかったです","ts":"1604325799.042100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xOlfC"}]},{"client_msg_id":"f0370fed-55a7-4345-91ae-ee0cbaa6cdd0","type":"message","user":"UERCTTT8B","text":"mattn 先生から証言が得られました","ts":"1604325797.041900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QPs"}]},{"client_msg_id":"1da36f9a-96d7-492c-abf4-c7a7c94de71a","type":"message","user":"UERCTTT8B","text":"同じファイルシステムだったら MoveFileEx はアトミックなんではなかろうか、とおもったら","ts":"1604325789.041600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8/l=Q"}]},{"client_msg_id":"77de2db0-fa8b-43d5-8418-ce180a77b603","type":"message","user":"U03C6TEAZ","text":"rename は同じディスク内であればアトミックです。","ts":"1604325776.041100","team":"T03C4RC8V","reactions":[{"name":"naruho","count":2,"users":["U9S4G0LJW","UDDCM376D"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZvRSH"}]},{"client_msg_id":"5fff7991-3779-491c-ac9d-0e76f1a212da","type":"message","user":"U9S4G0LJW","text":":naruho:","ts":"1604325768.040700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LvtWg"}]},{"client_msg_id":"60750b07-ade1-4ec4-8f09-8a9a44e439bf","type":"message","user":"UERCTTT8B","text":"*Transacted は大量のファイル移動などをアトミックにしたい場合ですよね","ts":"1604325754.039700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AAtB/"}]},{"client_msg_id":"42f3fe30-477e-40c3-b002-e9dee5cc7d9d","type":"message","user":"UERCTTT8B","text":"今回のケースは atomic なんだろうか","ts":"1604325689.039300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vuokq"}]},{"client_msg_id":"9a7d4726-b3d8-48b5-9da1-7e0298e6094f","type":"message","user":"U9S4G0LJW","text":"こんなのが別に用意されてるくらいなのでアトミックと思わない方がよさそうな気がする \u003chttps://s-kita.hatenablog.com/entry/20121217/1355764523\u003e","ts":"1604325683.039000","edited":{"user":"U9S4G0LJW","ts":"1604325692.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jdW"}]},{"client_msg_id":"d455afa7-f8ec-4902-8a6e-fefcd0568892","type":"message","user":"UERCTTT8B","text":"が、","ts":"1604325682.038900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3Pp"}]},{"client_msg_id":"011eadd8-2a71-4ae8-a42a-6fccc8ff4395","type":"message","user":"UERCTTT8B","text":"この関数単独で atomic かどうかは言えない","ts":"1604325680.038700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"94x"}]},{"client_msg_id":"a8fd2fc8-b23b-406b-8587-ba1463ed500a","type":"message","user":"UERCTTT8B","text":"違うファイルシステムのときに MOVEFILE_COPY_ALLOWED を使うとコピーしたりするんで","ts":"1604325674.038400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3xh"}]},{"client_msg_id":"9a447b20-df98-40d0-a7f7-b78ae0a59f7c","type":"message","user":"UERCTTT8B","text":"\u003chttps://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-movefileexw\u003e","ts":"1604325413.037700","attachments":[{"fallback":"MoveFileExW function (winbase.h) - Win32 apps","id":1,"title":"MoveFileExW function (winbase.h) - Win32 apps","title_link":"https://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-movefileexw","text":"Moves an existing file or directory, including its children, with various move options.","thumb_url":"https://docs.microsoft.com/en-us/media/logos/logo-ms-social.png","blocks":null,"service_name":"docs.microsoft.com","service_icon":"https://docs.microsoft.com/favicon.ico","thumb_width":400,"thumb_height":400,"from_url":"https://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-movefileexw","original_url":"https://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-movefileexw"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yxif+"}]},{"client_msg_id":"78bba374-26a6-46f3-999f-df69199f3ecb","type":"message","user":"UERCTTT8B","text":"なるほど","ts":"1604325405.037500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"I2R"}]},{"client_msg_id":"834823ae-0c47-47cf-a46e-bbf08e28be5f","type":"message","user":"U9S4G0LJW","text":"最終的にここに行き着く \u003chttps://github.com/golang/go/blob/7be8358f70ff858f28b9aefe11986da25f1762bc/src/internal/syscall/windows/syscall_windows.go#L293\u003e","ts":"1604325384.037000","edited":{"user":"U9S4G0LJW","ts":"1604325391.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lcu6="}]},{"client_msg_id":"e5e373b3-11dd-404c-9ede-b3971569b3e9","type":"message","user":"U9S4G0LJW","text":"MoveFileEx","ts":"1604325312.036700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"L9eD"}]},{"client_msg_id":"eadcdbc8-9887-4ac3-8435-74e5744ed995","type":"message","user":"U9S4G0LJW","text":"WinAPIはファイルを握るからAtomicな気がするけど、実際の所はどうなんだろう","ts":"1604325216.036500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rut7"}]},{"client_msg_id":"21de6e76-e182-4fb1-ba8b-06b68963f94d","type":"message","user":"UDDCM376D","text":"あー、今使っているのLinuxだから、Windowsわからないすね\nどうなんだろう","ts":"1604325198.035900","edited":{"user":"UDDCM376D","ts":"1604325211.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"piA"}]},{"client_msg_id":"03ed0ca5-dc57-4c4d-9dfe-50ef7a173536","type":"message","user":"UERCTTT8B","text":"最終的には何かしらの Win API になるんでそれをしらべればよいか。","ts":"1604325173.035400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lmz7f"}]},{"client_msg_id":"4552ba8e-3a66-438d-be3b-c26b6f38515f","type":"message","user":"UERCTTT8B","text":"Windows だとどうなんでしょうね","ts":"1604325154.035000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2xpyv"}]},{"client_msg_id":"128ca1fa-9f90-49e3-bc0c-b9e99481dbfe","type":"message","user":"UDDCM376D","text":"\u0026gt; renameシステムコールが呼ばれると、sys_renameat(renameat)がコールされ、最初にファイルシステムが同じがどうかチェックしています。そしてファイルが書き込み可能とかの他のチェックをして、vfs_renameをコールします。\n\u0026gt; vfs_renameではファイル名の変更か、ディレクトリ名の変更かで処理がわかれます。前者は vfs_rename_otherを後者はvfs_rename_dirがコールされ、そこからファイルシステムに依存したrenameコールバック関数へとわたります。そこから ディレクトリへの変更はext3_add_entryを経由して、 add_dirent_to_bufで書き込み内容を編集しそれをディレクトリにアペンドしています。その時、変更前のファイルのiノードをそのまま使用しています。\nとあるが、アトミックな操作かどうかはちょっとわからなかった…","ts":"1604325112.034800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ix7Ft"}]},{"client_msg_id":"a516876f-478f-43fa-957f-4d1bb2359302","type":"message","user":"UDDCM376D","text":"\u003chttps://wiki.bit-hive.com/north/pg/rename%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E3%82%B3%E3%83%BC%E3%83%AB%E3%81%A8mv%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89\u003e","ts":"1604325010.033900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KKR"}]},{"client_msg_id":"d58c8f39-3a32-44ae-a024-ff31773a2a3c","type":"message","user":"U9S4G0LJW","text":"システムコール次第ってことかな","ts":"1604324964.033700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IjIr7"}]},{"client_msg_id":"508d0a9a-bb26-4ad2-8c9c-e81b61823a9d","type":"message","user":"UDDCM376D","text":"SYS_RENAMEAT ってのを使っているみたい","ts":"1604324951.033400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jCC"}]},{"client_msg_id":"6cce8af6-62b5-42de-8584-84ba4e68ef87","type":"message","user":"U9S4G0LJW","text":"少なくともLinuxの場合ではこの通りみたい \u003chttps://linuxjm.osdn.jp/html/LDP_man-pages/man2/rename.2.html\u003e","ts":"1604324944.032900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zSjaI"}]},{"client_msg_id":"0dd7c7a0-b801-49de-b691-8d2e01f9e178","type":"message","user":"UDDCM376D","text":"```func Renameat(olddirfd int, oldpath string, newdirfd int, newpath string) (err error) {\n\tvar _p0 *byte\n\t_p0, err = BytePtrFromString(oldpath)\n\tif err != nil {\n\t\treturn\n\t}\n\tvar _p1 *byte\n\t_p1, err = BytePtrFromString(newpath)\n\tif err != nil {\n\t\treturn\n\t}\n\t_, _, e1 := Syscall6(SYS_RENAMEAT, uintptr(olddirfd), uintptr(unsafe.Pointer(_p0)), uintptr(newdirfd), uintptr(unsafe.Pointer(_p1)), 0, 0)\n\tif e1 != 0 {\n\t\terr = errnoErr(e1)\n\t}\n\treturn\n}```","ts":"1604324933.032600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"R5pM"}]},{"client_msg_id":"02aa8f99-6c9b-4b60-a2ee-503fe1df0521","type":"message","user":"UERCTTT8B","text":"名前が中途半端な状態になったりすることはないと思いたい…","ts":"1604324651.031900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ekwou"}]},{"client_msg_id":"180f68d1-2135-4529-b355-9da2b6094362","type":"message","user":"UERCTTT8B","text":"os.Rename ってアトミックな操作って仮定していいんですっけ?","ts":"1604324642.031600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CisVj"}]},{"type":"message","user":"UDDCM376D","text":"mattnさんとツーショット","ts":"1604304165.029400","files":[{"id":"F01DCM3JMN3","created":1604304160,"timestamp":1604304160,"name":"image.png","title":"image.png","mimetype":"image/png","image_exif_rotation":0,"filetype":"png","pretty_type":"PNG","user":"UDDCM376D","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":157502,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F01DCM3JMN3/image.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F01DCM3JMN3/download/image.png","original_h":772,"original_w":1034,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F01DCM3JMN3-6c7b286696/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F01DCM3JMN3-6c7b286696/image_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F01DCM3JMN3-6c7b286696/image_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F01DCM3JMN3-6c7b286696/image_360.png","thumb_360_gif":"","thumb_360_w":360,"thumb_360_h":269,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-F01DCM3JMN3-6c7b286696/image_480.png","thumb_480_w":480,"thumb_480_h":358,"thumb_720":"https://files.slack.com/files-tmb/T03C4RC8V-F01DCM3JMN3-6c7b286696/image_720.png","thumb_720_w":720,"thumb_720_h":538,"thumb_960":"https://files.slack.com/files-tmb/T03C4RC8V-F01DCM3JMN3-6c7b286696/image_960.png","thumb_960_w":960,"thumb_960_h":717,"thumb_1024":"https://files.slack.com/files-tmb/T03C4RC8V-F01DCM3JMN3-6c7b286696/image_1024.png","thumb_1024_w":1024,"thumb_1024_h":765,"permalink":"https://vim-jp.slack.com/files/UDDCM376D/F01DCM3JMN3/image.png","permalink_public":"https://slack-files.com/T03C4RC8V-F01DCM3JMN3-28a8be4863","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"thumb_800":"https://files.slack.com/files-tmb/T03C4RC8V-F01DCM3JMN3-6c7b286696/image_800.png","thumb_800_h":597,"thumb_800_w":800,"thumb_tiny":"AwAjADC9skMrEv8AIRgD0p2w4xuP5089KjEeMfM3HvQAu3p8/wCtLj/ao296XaKADI9RS0m0UAAdKAA7ucelJ82OcU7tTAsgxlwfwoAX5vT9aXJ9P1ppXnpRs+lAD6KQDFLQAUUUUAFFFFABRRRQB//Z","username":""}],"reactions":[{"name":"goodpoem","count":1,"users":["UEACRCY0Z"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KE33Q"}]},{"client_msg_id":"350af053-b163-43c8-9c2f-28d1aad7ecf7","type":"message","user":"UDDCM376D","text":"2参加した","ts":"1604304160.029200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uUxO"}]},{"client_msg_id":"14e3432e-f2b7-43fe-b54c-b16e51d6a427","type":"message","user":"UDDCM376D","text":"埋まったｗ","ts":"1604303906.029000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CbO"}]},{"client_msg_id":"8dc33b89-d8fa-421b-9b55-27f2f604a08e","type":"message","user":"UERCTTT8B","text":"zenn.dev は実装間に合わなかったのかな","ts":"1604303219.028800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FSwz"}]},{"client_msg_id":"833f4a85-09a4-408a-a024-90693ade16dd","type":"message","user":"UERCTTT8B","text":"うまるのはやいな","ts":"1604303209.028400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BOD"}]},{"client_msg_id":"f4c160ce-c618-4393-9333-ac836fb6d0a8","type":"message","user":"U03C71D7H","text":"あと2枠…","ts":"1604302558.028000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+RwwC"}]},{"client_msg_id":"6493a6b8-7ff9-4606-9b94-4637d66b9da3","type":"message","user":"UERCTTT8B","text":"いれました","ts":"1604301090.027600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OJC0w"}]},{"client_msg_id":"ff5a8954-9623-4b9f-ae49-1285d20b3765","type":"message","user":"U9S4G0LJW","text":"当たり前のように24日にダジャレぶっこんであるのすごいなーって思いました(小並感)","ts":"1604300838.027300","team":"T03C4RC8V","reactions":[{"name":"sasumatsu","count":3,"users":["UKHUVMBJR","U8CC7MDCL","U017BU3UZBQ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Um2"}]},{"client_msg_id":"00839168-1588-4319-94fb-bdce8c4b08e2","type":"message","user":"U03C6TEAZ","text":"またこの季節がやってきました。","ts":"1604300796.026800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"o4J"}]},{"client_msg_id":"d4a90805-8f74-4bfe-a8b2-fe7a2a696fce","type":"message","user":"U03C6TEAZ","text":"\u003chttps://qiita.com/advent-calendar/2020/go|https://qiita.com/advent-calendar/2020/go\u003e","ts":"1604300787.026300","attachments":[{"fallback":"Qiita: Go Advent Calendar 2020 - Qiita","id":1,"title":"Go Advent Calendar 2020 - Qiita","title_link":"https://qiita.com/advent-calendar/2020/go","text":"Goに関するアドベントカレンダーです","thumb_url":"https://cdn.qiita.com/assets/qiita-fb-fe28c64039d925349e620ba55091e078.png","blocks":null,"service_name":"Qiita","service_icon":"https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png","thumb_width":1200,"thumb_height":630,"from_url":"https://qiita.com/advent-calendar/2020/go","original_url":"https://qiita.com/advent-calendar/2020/go"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pjepF"}]},{"client_msg_id":"ff41627a-35c1-49ca-bdcd-e6ca26a957d1","type":"message","user":"U03C6TEAZ","text":"もしくは自分で別の変数 ++ するとか。","ts":"1604290407.026100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SBbVg"}]},{"client_msg_id":"c5b34444-4ebf-4f1a-b39c-e80d608ea3c3","type":"message","user":"UERCTTT8B","text":"[]rune に変換します","ts":"1604290314.025400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+Gq"}]},{"client_msg_id":"19caf44a-6206-4124-b611-2dad5b6e62c0","type":"message","user":"U03C71D7H","text":"その場合はまず rune に変換するのですっけ","ts":"1604290227.025000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qAm8"}]},{"client_msg_id":"892194dd-322b-40ff-908a-fa26ef9ac4d0","type":"message","user":"UERCTTT8B","text":"文字列むずいですね","ts":"1604290027.024300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ol4"}]},{"client_msg_id":"1ded9618-7345-442f-9e53-1db0f1a2a651","type":"message","user":"UERCTTT8B","text":"string を for で回した時、インデックスがコードポイント位置じゃなくてバイトなのにひっかかった","ts":"1604290024.024100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ETMJY"}]},{"client_msg_id":"42bc450d-9ef6-439d-9974-47f1c9cff4f7","type":"message","user":"U06BRP8VD","text":"引用箇所の前後を含めてざっくり意訳すると\n\n\u0026gt; 提案されているtype parameterにはコンパイル時間と実行時間のトレードオフが存在して、それは実装次第で変わる(両方を混ぜることもできる)\nって読めて、なんか実用に耐えるバランスになる(orノウハウが蓄積する)までには時間かかりそうだなって思ったのです。","ts":"1604284981.023400","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UKHUVMBJR"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MYZ"}]},{"client_msg_id":"98ffaccb-d463-4348-b762-03a868e99a08","type":"message","user":"U03C6TEAZ","text":"generic type という形でコンパイル済みオブジェクトにはならないので、どちみちコンパイルは必須ですね。","ts":"1604282829.020600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OEd/"}]},{"client_msg_id":"aec633d7-0c19-488b-8d75-d2326096b635","type":"message","user":"U06BRP8VD","text":"なんか実用に耐えるくらいに使えるようになるの、思ったより遠い気がしてきたなw","ts":"1604282621.018400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AG=c1"}]},{"client_msg_id":"7456d486-2e18-4633-b7df-715b9476ae08","type":"message","user":"U06BRP8VD","text":"\u0026gt; Code may be compiled separately for each set of type arguments, or it may be compiled as though each type argument is handled similarly to an interface type with method calls, or there may be some combination of the two.","ts":"1604282480.017300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Nkv"}]},{"client_msg_id":"054a5f3f-9dbe-4490-9de6-4744dc00593c","type":"message","user":"U06BRP8VD","text":"\u0026gt; It's impossible for non-generic code to refer to generic code without instantiating it, so there is no reflection information for uninstantiated generic types or functions.","ts":"1604282295.016500","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":1,"users":["UKHUVMBJR"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/Iers"}]},{"client_msg_id":"eee64e02-4e6e-4923-91b1-fe3342e06da4","type":"message","user":"U06BRP8VD","text":"型が内部的にどう表現されてるかが気になるんだよね。ということはreflectへの言及をみればわかるか。","ts":"1604282220.016300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"76pP"}]},{"client_msg_id":"c88e7e8b-289f-4171-9d80-e94f53730709","type":"message","user":"U03C6TEAZ","text":"```func Stringify(T Stringer) (s []Stringer) ([]string) {\n}```\n一時期これがドラフトだった。","ts":"1604282134.015100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"T5g"}]},{"client_msg_id":"f22ab477-c8a0-479a-afb6-1d4e4faf08b8","type":"message","user":"U03C6TEAZ","text":"途中で記法が変わったので一部古い記法のブログ記事などがある。","ts":"1604282091.013800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GAFL"}]},{"client_msg_id":"8858f60a-c039-4e02-886e-f1653ad18d09","type":"message","user":"U06BRP8VD","text":"「型パラメーター」もしくは「型引数」が正式名称の日本語訳になるかねぇ","ts":"1604281901.012200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/j9UR"}]},{"client_msg_id":"a553c962-4192-4cb5-8439-84878f5e34a5","type":"message","user":"U03C6TEAZ","text":"軽く読める程度の量だけど。","ts":"1604281725.010900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"L7OZY"}]},{"client_msg_id":"84bcb4c7-f8bb-40dc-b1f3-1176bf05d2a2","type":"message","user":"U03C6TEAZ","text":"zenn の本にはその部分の翻訳が入ってます。","ts":"1604281707.010600","team":"T03C4RC8V","reactions":[{"name":"sasumatsu","count":3,"users":["U9S4G0LJW","U776661HA","UKHUVMBJR"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"dg/d"}]},{"client_msg_id":"7ffa18ac-28b1-4cf8-8869-c3abea0f5515","type":"message","user":"U03C6TEAZ","text":"Java/C++ との比較も書いてあります。","ts":"1604281684.010100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ER6"}]},{"client_msg_id":"92da4ffe-911c-4eaa-9834-e872f3858ec8","type":"message","user":"U03C6TEAZ","text":"読むのだとこっちの方がいいかも。 \u003chttps://go.googlesource.com/proposal/+/refs/heads/master/design/go2draft-type-parameters.md\u003e","ts":"1604281613.009800","team":"T03C4RC8V","reactions":[{"name":"tashikani","count":1,"users":["UKHUVMBJR"]},{"name":"subara","count":1,"users":["U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cSE"}]},{"client_msg_id":"52fdf916-7c0e-44fd-ac33-80d52a7efb16","type":"message","user":"U03C6TEAZ","text":"型消去ではない。コンパイル時に完全な状態で型情報が入る。","ts":"1604281571.009600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Zu="}]},{"client_msg_id":"4471fce7-1051-434e-900a-ee222c8e025f","type":"message","user":"UKHUVMBJR","text":"この話ですかね\n\u003chttps://matsubara0507.github.io/posts/2020-07-02-read-featherweight-go.html\u003e","ts":"1604281557.009100","attachments":[{"fallback":"ひげメモ: Featherweight Go を読んでみた","id":1,"title":"Featherweight Go を読んでみた","title_link":"https://matsubara0507.github.io/posts/2020-07-02-read-featherweight-go.html","image_url":"https://matsubara0507.github.io/assets/read-featherweight-go/fg.jpg","blocks":null,"service_name":"ひげメモ","service_icon":"https://matsubara0507.github.io/assets/icon.jpg","from_url":"https://matsubara0507.github.io/posts/2020-07-02-read-featherweight-go.html","original_url":"https://matsubara0507.github.io/posts/2020-07-02-read-featherweight-go.html"}],"team":"T03C4RC8V","reactions":[{"name":"subara","count":1,"users":["U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"og8"}]},{"client_msg_id":"51b50d5c-ecaf-4a75-b707-769e642e5c9c","type":"message","user":"U03C6TEAZ","text":"どっちでもないという印象。","ts":"1604281531.008600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xYJ"}]},{"client_msg_id":"f45abb61-350b-4fd6-9af7-905fb1d07229","type":"message","user":"U776661HA","text":"気になる","ts":"1604281252.008400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Voq"}]},{"client_msg_id":"dcb4c44a-8dff-42d3-ad62-11e21aea8bc2","type":"message","user":"U03C4RC8X","text":"チューリング完全...!","ts":"1604281235.008200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LQt"}]},{"client_msg_id":"f97236ec-e7a6-4a0b-837a-9f9de843900b","type":"message","user":"U06BRP8VD","text":"そういえばGoのgenericsの実装ってC++のtemplate方式なの? それともJavaのgenerics方式なの?","ts":"1604281169.007900","edited":{"user":"U06BRP8VD","ts":"1604281179.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zfwJ"}]},{"client_msg_id":"1ba11c41-0932-402c-a752-ffb75a1e603b","type":"message","user":"UERCTTT8B","text":"しかしリポジトリ移しちゃうと過去バージョンへのバックポートが不可能になる気がしますね、どうするんだろ","ts":"1604245540.007000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QRx"}]},{"client_msg_id":"4136cdde-ccce-46b0-9715-f801c9b82a1e","type":"message","user":"UERCTTT8B","text":"手元で実験してうまくいったら ebiten も \u003chttp://github.com/ebiten|github.com/ebiten\u003e 配下に移そう、 5 年後くらいに…","ts":"1604245479.006500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZDtKg"}]},{"client_msg_id":"23fdeaed-782a-41e6-af61-102cd24ac28d","type":"message","user":"UERCTTT8B","text":"とおもったが、このプロジェクト、 go.mod が導入されたのがたまたまごく最近 (v2) からなんですね","ts":"1604245378.005800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Spy"}]},{"client_msg_id":"ddeab47d-34fe-409c-819e-b8c4cbc5ea62","type":"message","user":"UERCTTT8B","text":"新しい方は go.mod と一致しないのでは…??","ts":"1604245299.005200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZWk"}]},{"client_msg_id":"74b87972-b0be-40a9-b592-351cfb739175","type":"message","user":"UERCTTT8B","text":"古い方がとれるのは (リダイレクトが起きているのかキャッシュが残っているのか) わかるんですが","ts":"1604245290.004900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8h="}]},{"client_msg_id":"88bf22e3-5a33-4160-b1f5-022b3fd97407","type":"message","user":"UERCTTT8B","text":"どっちも取れちゃった","ts":"1604245236.004300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MjbG"}]},{"client_msg_id":"405ffab3-32cf-4d86-a846-a05dc6025a6a","type":"message","user":"UERCTTT8B","text":"```hajimehoshi@Hajimes-MacBook-Pro-2020 ~/ebiten/test \n$ go get \u003chttp://github.com/urfave/cli@v1.19.0|github.com/urfave/cli@v1.19.0\u003e\ngo: downloading \u003chttp://github.com/urfave/cli|github.com/urfave/cli\u003e v1.19.0\nhajimehoshi@Hajimes-MacBook-Pro-2020 ~/ebiten/test \n$ go get \u003chttp://github.com/codegangsta/cli@v1.19.0|github.com/codegangsta/cli@v1.19.0\u003e\ngo: downloading \u003chttp://github.com/codegangsta/cli|github.com/codegangsta/cli\u003e v1.19.0```","ts":"1604245232.004100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nKWt"}]},{"client_msg_id":"737f7804-1435-434b-be1d-b0f502bea522","type":"message","user":"UERCTTT8B","text":"\u003chttps://pkg.go.dev/github.com/codegangsta/cli\u003e 古いのは古いので生き続けているのかな…","ts":"1604245078.003700","attachments":[{"fallback":"cli package · pkg.go.dev","id":1,"title":"cli package · pkg.go.dev","title_link":"https://pkg.go.dev/github.com/codegangsta/cli","text":"Go is an open source programming language that makes it easy to build simple, reliable, and efficient software.","blocks":null,"service_name":"pkg.go.dev","service_icon":"https://pkg.go.dev/favicon.ico","from_url":"https://pkg.go.dev/github.com/codegangsta/cli","original_url":"https://pkg.go.dev/github.com/codegangsta/cli"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"I0C"}]},{"client_msg_id":"c8b7f8bd-2781-424c-9e71-02859f82a68c","type":"message","user":"UERCTTT8B","text":"hou","ts":"1604245038.003400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YevC6"}]},{"client_msg_id":"174ee2e1-0ddd-41c5-abab-a1c25b01f42e","type":"message","user":"U03C6TEAZ","text":"codegangsta/cli と urfave/cli とかですかね。","ts":"1604244958.003200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jWT"}]},{"client_msg_id":"0a7e9d37-44ad-4715-af83-929a68329356","type":"message","user":"UERCTTT8B","text":"transfer 前のものは生き続けるのかどうか…","ts":"1604244734.002800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"T+4"}]},{"client_msg_id":"4a08e1f4-f8d9-4f7b-942f-4ba92a9fde86","type":"message","user":"UERCTTT8B","text":"GitHub のリポジトリを transfer した場合の挙動はどうなるんでしょうね","ts":"1604244716.002500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"29IX"}]},{"client_msg_id":"967b3244-a1ca-4b3a-aa32-6e27a7beb337","type":"message","user":"U03C6TEAZ","text":"パッケージ名が違うと別物になるので古い置き場のを見てるパッケージと新しい置き場のを見てるパッケージとかたまにあります。go.mod 以前もそれは両方か。","ts":"1604244524.002100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nL5b"}]},{"client_msg_id":"69c69e9f-149a-4bfc-9d61-50ddd9486302","type":"message","user":"U06BRP8VD","text":"go.sumはそのかぎりではない","ts":"1604243796.000100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TQp"}]},{"client_msg_id":"43aaf03f-d72e-4261-bd4c-9cf2c2a88900","type":"message","user":"U06BRP8VD","text":"基本、使ってるもの(=パッケージ)しかgo.modには入らないと思うけど…","ts":"1604243788.499800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"biNf"}]},{"client_msg_id":"59af45e9-fbaf-472e-84c4-e4c60ca55a46","type":"message","user":"U03C6TEAZ","text":"go.mod だともっとリッチに入ってそう。","ts":"1604243719.499100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"IYnH"}]},{"client_msg_id":"8e3f2bf6-00a9-44d0-b853-a3b65aa31743","type":"message","user":"U06BRP8VD","text":"ちゃんと検証したわけじゃないけど、ヒットした(=mainからimportツリーで辿れる)全パッケージのコードが入っちゃってなかったっけ? 関数単位で使う使わないに関わらず。\n\n\u003chttps://twitter.com/shibu_jp/status/1322898477118992385\u003e","ts":"1604243040.498500","attachments":[{"fallback":"\u003chttps://twitter.com/shibu_jp|@shibu_jp\u003e: Goはやはりいまどきの言語というか、使われているインタフェースにマッチした構造体の実装は全部リンク時に消去されないという富豪的な感じだし、それがリンクの速さにはつながっていると思うけど、バイナリはどんどんでかくなっていく・・・","id":1,"author_name":"渋川よしき","author_subname":"@shibu_jp","author_link":"https://twitter.com/shibu_jp/status/1322898477118992385","author_icon":"https://pbs.twimg.com/profile_images/429335769145020417/720SYQMp_normal.jpeg","text":"Goはやはりいまどきの言語というか、使われているインタフェースにマッチした構造体の実装は全部リンク時に消去されないという富豪的な感じだし、それがリンクの速さにはつながっていると思うけど、バイナリはどんどんでかくなっていく・・・","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1604238549,"service_name":"twitter","from_url":"https://twitter.com/shibu_jp/status/1322898477118992385","original_url":"https://twitter.com/shibu_jp/status/1322898477118992385"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gFWJu"}]}]
