[{"client_msg_id":"79ce9d49-e638-4097-88c7-c3525ddc4297","type":"message","user":"UNJ2DANJC","text":"HTTPでファイル系のAPIは私は最近はサーバーサイドではワンタイムURLを生成するだけであとは全部クライアントで直接オブジェクトストレージとやり取りしてもらうように設計して作ってます。\nサーバーサイドでストリームを受けるメリットがあんまりない。","ts":"1579608636.149600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ejFI+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4FB1A070-FAA4-437E-B2D5-1C4A15187EB5","type":"message","user":"UDDCM376D","text":"なるほど","ts":"1579608902.149800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Kj4v"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4F20C135-5064-4092-A204-BB8AFA2DB5AC","type":"message","user":"UDDCM376D","text":"そういうやり方もありか","ts":"1579608907.150000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bfB2e"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2d1e0a35-2cb5-4709-afec-6eae751fe962","type":"message","user":"UNJ2DANJC","text":"GitHubとかもだいたい上記の実装ですね","ts":"1579609138.152400","edited":{"user":"UNJ2DANJC","ts":"1579609310.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"98i"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8de41388-a645-4f93-aabf-69fe2f261158","type":"message","user":"UNJ2DANJC","text":"base64でエンコードしてjsonの中に詰めるタイプのAPIはやめてほしい...","ts":"1579609288.154100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0wk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e6759273-c3c8-4616-be99-be9aba5f7cd4","type":"message","user":"UAUFDS92N","text":"`syscall/js`をインポートしているとgoplsでの補完が使えなくなるんですけど、解決策などありますか？","ts":"1579612749.156500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Fx18"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"59b4b2df-792a-4eaf-a0d4-95d82200ebc6","type":"message","user":"U03C6TEAZ","text":"syscall/js って GOOS=js GOARCH=wasm でしかビルド通らないのですが、それは意図して import してますか？","ts":"1579612878.157200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4p7I"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"77a18167-0fbb-4567-bca0-c34457c169f9","type":"message","user":"UAUFDS92N","text":"すみません...意図していませんでした...","ts":"1579612917.157500","team":"T03C4RC8V","reactions":[{"name":"iinoyo","count":1,"users":["U03C6TEAZ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Lq6lS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d961303f-716c-4849-9eb0-e17e83bafc4c","type":"message","user":"U03C6TEAZ","text":"`GOFLAGS=--tags mock` してサーバがリスタート出来れば mock 側も補完が効く、みたいな。","ts":"1579532423.064300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"w41W"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"df2ddea0-7393-4c06-9c2b-d8e397856431","type":"message","user":"U06BRP8VD","text":"mock側のコードって自動生成で決まり決まった動作しかしないんで飛べる必要が生じなかったってのがこの半年の実績ですね。","ts":"1579532620.065200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZwR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"96e6c2f9-8eae-4523-91c7-024ed854a9b8","type":"message","user":"U06BRP8VD","text":"ちょっと話変わりますけど、いま直面している問題は複数のメソッド・モックの間の呼び出し順序を簡単に保証する方法なんですよね。\n\nいまのモックだと、特定のメソッドがどういうパラメータで呼ばれたかしか検査できないのであんまりうれしくないという。","ts":"1579532739.066900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kdsy="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bde85f42-6e8a-4d89-b611-d386fe5cf0c1","type":"message","user":"U03C6TEAZ","text":"type Mocker { Mock() } みたいなインタフェースで type assertion するのもありだけど、本番コードに残るのモヤっとするしなぁ。","ts":"1579533118.069100","team":"T03C4RC8V","reactions":[{"name":"wakaru","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RhdnB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f41cbe50-f9a3-4333-96fb-1f76be3ebe70","type":"message","user":"U06BRP8VD","text":"あとこういう懸念もしてた。\n<https://twitter.com/kaoriya/status/1136881429072162816>","ts":"1579533191.069500","attachments":[{"fallback":"<https://twitter.com/kaoriya|@kaoriya>: これでテストのときに暗黙でつけられるビルドタグがあればもっとスマートにキまるんだが…","id":1,"author_name":"MURAOKA Taro","author_subname":"@kaoriya","author_link":"https://twitter.com/kaoriya/status/1136881429072162816","author_icon":"https://pbs.twimg.com/profile_images/1196794099/avatar_normal.JPEG","text":"これでテストのときに暗黙でつけられるビルドタグがあればもっとスマートにキまるんだが…","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1559888629,"service_name":"twitter","from_url":"https://twitter.com/kaoriya/status/1136881429072162816","original_url":"https://twitter.com/kaoriya/status/1136881429072162816"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3zDOh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b0c2fe75-3c94-427b-a198-a4c8f04b2812","type":"message","user":"U77U7B85A","text":"テスト用のビルドタグは時々欲しくなりますが...\n<https://github.com/golang/go/issues/21360>","ts":"1579534540.070200","attachments":[{"fallback":"GitHub: proposal: add a build tag \"test\" · Issue #21360 · golang/go","id":1,"title":"proposal: add a build tag \"test\" · Issue #21360 · golang/go","title_link":"https://github.com/golang/go/issues/21360","text":"To have code be compiled only during tests, it&amp;#39;s easy: just put the code in a file suffixed _test.go. However, there is no mechanism for the complement: to have code that is excluded when testi...","thumb_url":"https://avatars3.githubusercontent.com/u/4314092?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/golang/go/issues/21360","original_url":"https://github.com/golang/go/issues/21360"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"M9AY1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"193161c7-8ee1-4bdb-add5-503f2946d610","type":"message","user":"U06BRP8VD","text":"本当に欲しいのはtestの時につくビルドタグではなくて、テストではないときに付くビルドタグなんですよね。なぜならテストのときだけコンパイルするほうは `*_test.go` にいれればそれで済むから。","ts":"1579535014.071700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BhZFw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"695e3f04-0cc4-43c2-a17d-f9288b89b6e0","type":"message","user":"U06BRP8VD","text":"この要求があまりに歪みすぎてて僕は「アカンコレ普通にテストの時だけタグ付けよ」ってなりましたw","ts":"1579535062.072500","edited":{"user":"U06BRP8VD","ts":"1579535075.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ofXYF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"E247CDFD-5626-4241-8C9A-C4E79415F0DD","type":"message","user":"U77U7B85A","text":"たしかに！","ts":"1579535976.073300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Y8jV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4DD9B176-8CA4-4D31-BA39-633DD28102D6","type":"message","user":"UDDCM376D","text":"<https://twitter.com/itchyny/status/1219411111247675392?s=21|https://twitter.com/itchyny/status/1219411111247675392?s=21>","ts":"1579565311.073600","attachments":[{"fallback":"<https://twitter.com/itchyny|@itchyny>: ioutil.TempFileって * をランダムな数字に置き換えるという仕様があったのか (ioutil.TempFile(dir, \"test_*.go\") みたいにして拡張子をつけることができる) #golang","id":1,"author_name":"(っ=﹏=c) .｡o○","author_subname":"@itchyny","author_link":"https://twitter.com/itchyny/status/1219411111247675392","author_icon":"https://pbs.twimg.com/profile_images/623072411940851712/vUNP9yem_normal.jpg","text":"ioutil.TempFileって * をランダムな数字に置き換えるという仕様があったのか (ioutil.TempFile(dir, \"test_*.go\") みたいにして拡張子をつけることができる) #golang","blocks":null,"footer":"Twitter","footer_icon":"https://a.slack-edge.com/80588/img/services/twitter_pixel_snapped_32.png","ts":1579565239,"service_name":"twitter","from_url":"https://twitter.com/itchyny/status/1219411111247675392?s=21","original_url":"https://twitter.com/itchyny/status/1219411111247675392?s=21"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xSbvc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"E66E520A-6EE7-4C36-A4C0-AC4609EF24C9","type":"message","user":"UDDCM376D","text":"ほお","ts":"1579565316.073900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Hd5R"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ce62b4cb-d845-4385-a7c2-fcf86773fabb","type":"message","user":"U03C6TEAZ","text":"mktemp(3) の XXXXXX より進化してる。","ts":"1579568602.074400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5cK"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c3ce8c12-d4f5-42ee-977c-87152a56bb33","type":"message","user":"U03C71D7H","text":"Tweet 引用にも Slack 記法が適用されてしまっている…","ts":"1579569655.074800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3KRSc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9ed6e820-6860-4a62-bb88-8a7e985a9d34","type":"message","user":"UAZ33BKV2","text":"\"*\" が置きかわってますね..","ts":"1579569760.075700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"u2b"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d723d679-7e04-4c15-927d-aacc2cf05f32","type":"message","user":"UDDCM376D","text":"[質問]\nGoでRangeリクエストを受け付けるAPIサーバーは自前で実装するしかない感じですか？\nやりたいことはRangeリクエストを受け付けて、指定された範囲のデータを返すだけですが、そういうフレームワークはすでにありそうで調べたけどなかったという…","ts":"1579584881.077200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ID2t"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3e511a12-a82f-417d-a282-3ecb759336ab","type":"message","user":"UG6DF6W87","text":"// <https://developer.mozilla.org/ja/docs/Web/HTTP/Range_requests> はぇー(こんなのあったのか知らんかった...の顔","ts":"1579584999.077300","attachments":[{"fallback":"MDN Web Docs: HTTP 範囲リクエスト","id":1,"title":"HTTP 範囲リクエスト","title_link":"https://developer.mozilla.org/ja/docs/Web/HTTP/Range_requests","text":"HTTP 範囲リクエストでは、サーバーからクライアントに HTTP メッセージの一部のみを送信できます。部分リクエストは、たとえば、大きなメディアや、一時停止や再開機能を持つファイルのダウンロードに役立ちます。","thumb_url":"https://developer.mozilla.org/static/img/opengraph-logo.72382e605ce3.png","blocks":null,"service_name":"MDN Web Docs","service_icon":"https://developer.mozilla.org/static/img/favicon144.e7e21ca263ca.png","thumb_width":600,"thumb_height":600,"from_url":"https://developer.mozilla.org/ja/docs/Web/HTTP/Range_requests","original_url":"https://developer.mozilla.org/ja/docs/Web/HTTP/Range_requests"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7EEwP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c7092f03-c5c2-48d8-a5ce-210fa1cded41","type":"message","user":"U03C71D7H","text":"HTTP の闇は深い (闇というわけではないが)","ts":"1579585029.077700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Af9O"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a0f21ba4-d7af-4807-ba61-bfe192d5fe46","type":"message","user":"U06BRP8VD","text":"FileServerは実装されてませんでしたっけ、レンジリクエスト","ts":"1579585068.078200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Fed"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"92d9dce9-c732-4538-9fac-471cef5226a7","type":"message","user":"U06BRP8VD","text":"APIサーバか…","ts":"1579585082.078500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4zn0/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f326e474-8f6b-4c94-b64f-4d800594f37e","type":"message","user":"UDDCM376D","text":"APIサーバーですね\nFileServerは確かに実装されていそう（確認します","ts":"1579585123.079300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"n=lVR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6584b3d3-fb7f-4f52-84d0-34673bb694de","type":"message","user":"UDDCM376D","text":"なんか、Range対応しているフレームワークありそうと思っていたが全然出てこなかった…","ts":"1579585143.080200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9iPf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"78dd488f-38f1-4ea7-96d2-6f5f2f9e22cf","type":"message","user":"U06BRP8VD","text":"APIサーバだとなかなか相性悪いと思いますよ。","ts":"1579585148.080400","edited":{"user":"U06BRP8VD","ts":"1579585155.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5F/r"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6a9dff59-0e63-4adc-b586-6a6a301608f1","type":"message","user":"UDDCM376D","text":"そうなんですね","ts":"1579585161.081100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BLAt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ffb32fbc-1b6e-4fc4-9c15-7e7b784ff1cb","type":"message","user":"U06BRP8VD","text":"これはあくまでもあるリソースをpartialに取得するためのものなんで","ts":"1579585177.081700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5b5GW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"02d856c6-9a3a-47a4-a350-1980301575fc","type":"message","user":"U06BRP8VD","text":"APIサーバがJSONのレスポンスだとそれ返す時にそのJSONをバイト数指定して一部だけ取ってくるって解釈になるんで、あわない。","ts":"1579585227.083100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"F0UbG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8bf367b3-3570-41e9-bafd-3e88829a2138","type":"message","user":"U06BRP8VD","text":"「先頭何件目から100件持ってきて」みたいな用途ではないです。","ts":"1579585248.083800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MQt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dfa831f1-1e7c-4439-9bfe-762c8b22d04a","type":"message","user":"UDDCM376D","text":"あ、そうですね","ts":"1579585252.084000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MA1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0cdbac87-0e92-4925-a478-00268de7c906","type":"message","user":"U06BRP8VD","text":"# 2chのdatをrange指定で取ってきて差分更新とかしてたのが懐かしい","ts":"1579585290.085700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZDMz7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"97167a66-7cc1-4698-86d3-6a00cb210159","type":"message","user":"UDDCM376D","text":"レスポンスの形もどうしようかまだ決めきれていないので、まずはそこからかな","ts":"1579585305.086100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=L60"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d8a2766e-9b6b-492c-805a-bda0a638cff7","type":"message","user":"UG6DF6W87","text":"ファイルアップロード用の API を作る、みたいな用途はありそう...?","ts":"1579585306.086200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BRNW"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"52f0b7ff-7b0d-4de7-a3bb-9727de42b6a0","type":"message","user":"UDDCM376D","text":"&gt; ファイルアップロード用の API を作る、みたいな用途はありそう...?\nそれはClientの実装になるかと","ts":"1579585325.087200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lSVd"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"46cba46d-7ee9-44f1-b345-3eeed034b20b","type":"message","user":"UDDCM376D","text":"サーバーもか","ts":"1579585334.087500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5k1yl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"38a0f08e-e404-4cca-ae2d-e10f5daa8cb9","type":"message","user":"U06BRP8VD","text":"んとその場合でもRangeは使わないですね。","ts":"1579585347.088200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/kh0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eef7bbb1-26fe-48f9-81ae-2ee44022e997","type":"message","user":"UDDCM376D","text":"ファイルアップロードが目的ですね","ts":"1579585365.089400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yfI"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b569c416-e837-4d12-a85e-88624770e053","type":"message","user":"U06BRP8VD","text":"あくまでもレスポンスに対する要求としてクライアントが出すヘッダーなんで。","ts":"1579585371.089800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cM+pb"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3105795c-708d-4969-9312-3517b4027caa","type":"message","user":"U06BRP8VD","text":"S3の部分アップロード機能とかデザインの参考にすると良いかもですね。","ts":"1579585392.090400","team":"T03C4RC8V","reactions":[{"name":"eyes","count":1,"users":["UG6DF6W87"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xolt"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7088d42a-4785-4940-afce-a5faa76f958a","type":"message","user":"UDDCM376D","text":"S3か","ts":"1579585400.090700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4Xzo"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f2d0bb1e-4c2f-4ae7-8503-b579832a7b17","type":"message","user":"UDDCM376D","text":"たしかに","ts":"1579585401.090900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HT0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a3851cfa-900e-41ab-bc90-e2b97fbe96cb","type":"message","user":"U03C6TEAZ","text":"API で range ってよく分からない。","ts":"1579585413.091500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QFk9K"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a00c7c16-b64f-4eaf-8722-3f0cdec34171","type":"message","user":"U06BRP8VD","text":"<https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/dev/sdksupportformpu.html>","ts":"1579585431.092500","attachments":[{"fallback":"サイズの大きなオブジェクトのマルチパートアップロードに対する API サポートについて説明します。","id":1,"text":"サイズの大きなオブジェクトのマルチパートアップロードに対する API サポートについて説明します。","blocks":null,"service_name":"docs.aws.amazon.com","service_icon":"https://docs.aws.amazon.com/assets/images/favicon.ico","from_url":"https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/dev/sdksupportformpu.html","original_url":"https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/dev/sdksupportformpu.html"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cRWs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2e7eb763-d6df-4fa4-b23f-b6eed554c13d","type":"message","user":"UDDCM376D","text":"APIというかファイルアップロードの口ってのが正しいですね","ts":"1579585437.093000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rN2A"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a4bb4673-0f03-4630-ac20-6b641cb0a80a","type":"message","user":"U03C6TEAZ","text":"content-length を切るのが range なので。","ts":"1579585438.093100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rRt1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f4f5d46d-1dfe-45cb-8772-cfd8f1f696e0","type":"message","user":"U06ECBRTJ","text":"s3互換のファイルアップロードスクリプト、書いたことありますが、分割めんどくさかったです","ts":"1579585438.093200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YEvsp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d086f6bd-b506-4386-a388-4e03a98e6b1e","type":"message","user":"UG6DF6W87","text":"// 私も gRPC ですが似たような口を書いてるので参考になる...","ts":"1579585453.093300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"W2PPG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6d8fab37-c946-447d-b8d6-35669e80e217","type":"message","user":"U06BRP8VD","text":"S3というかAWS全般にめんどくさいってのに同意しますw","ts":"1579585496.094500","thread_ts":"1579585496.094500","reply_count":3,"replies":[{"user":"U06BRP8VD","ts":"1579585502.094600"},{"user":"U06ECBRTJ","ts":"1579585529.095300"},{"user":"U06BRP8VD","ts":"1579585541.095700"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DZdk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0a3b80fa-ea74-445c-8dc1-2592c9fa44fb","type":"message","user":"U06BRP8VD","text":"べんりだけど","ts":"1579585502.094600","thread_ts":"1579585496.094500","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qy3uv"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6b3f9198-3da0-4382-94e8-d98a141f9306","type":"message","user":"UDDCM376D","text":"そもそも、サーバー側のrange処理ってどうやっているんだろう\nFileServerの実装を見れば良さそうな気配","ts":"1579585523.095200","edited":{"user":"UDDCM376D","ts":"1579585533.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oJbn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4848c609-7765-4c1d-bb60-25520d415e42","type":"message","user":"U06ECBRTJ","text":"変なことをやろうとした瞬間やばいですよね","ts":"1579585529.095300","thread_ts":"1579585496.094500","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sKqyu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3be796c0-592e-4998-8130-f1dbbb8a1710","type":"message","user":"U06BRP8VD","text":":wakaru:","ts":"1579585541.095700","thread_ts":"1579585496.094500","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3n43N"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8e291d34-268a-4600-8ae9-daae1788c8b6","type":"message","user":"U06BRP8VD","text":"FileServerはアップロードないですよ。","ts":"1579585553.096300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cO6n"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7e9b834f-5532-473a-8b9e-52d7e841d023","type":"message","user":"U03C71D7H","text":"WebDAV...","ts":"1579585567.096600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sau"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0425a41d-2582-473d-a73f-774abf5616aa","type":"message","user":"UDDCM376D","text":"あ","ts":"1579585568.097000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PhoMf"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2271afbe-cf80-434e-a993-aef7656eeae8","type":"message","user":"UDDCM376D","text":"そうだった…","ts":"1579585576.097400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kWFO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"73cbcbaa-03e8-4ddd-a235-f256e6c8e5e7","type":"message","user":"UDDCM376D","text":"やばい、混乱してきた","ts":"1579585579.097600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"w8kW4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cf8575ab-0a7b-437f-9abd-01af7822535d","type":"message","user":"U06BRP8VD","text":"ダウンロードは io.Seekable だとおもう。っていうかそれないし","ts":"1579585581.097700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xv/m"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"86fc3245-d73f-48e4-b75f-ed8861dc03ce","type":"message","user":"UG6DF6W87","text":"<https://golang.org/pkg/net/http/#ServeContent>\nこいつはどういう用途だろうか","ts":"1579585590.097800","attachments":[{"fallback":"http - The Go Programming Language","id":1,"title":"http - The Go Programming Language","title_link":"https://golang.org/pkg/net/http/#ServeContent","text":"Go is an open source programming language that makes it easy to build simple, reliable, and efficient software.","blocks":null,"service_name":"golang.org","service_icon":"https://golang.org/favicon.ico","from_url":"https://golang.org/pkg/net/http/#ServeContent","original_url":"https://golang.org/pkg/net/http/#ServeContent"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nDxu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"28f85301-4c3e-4d45-a564-2de4b797a502","type":"message","user":"U06BRP8VD","text":"ダウンロードするサーバの抽象化っぽいですね。","ts":"1579585650.099400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Z9c8"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ec440c19-327d-42e4-bd22-3e05b65b3d00","type":"message","user":"U06BRP8VD","text":"WebDAVはどうだったかな。アップロードのほうはなんか結構煩雑な手続きがあったきがする。","ts":"1579585671.100000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kIHy"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d44e0b85-afd5-4f7a-b8c8-ad0720acbcca","type":"message","user":"U03C6TEAZ","text":"OPTIONS とかならあるかも。","ts":"1579585712.100400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"toQcc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8f4da7e0-9700-4a3f-8172-e7e65e2733f2","type":"message","user":"U03C6TEAZ","text":"昔 IIS に -1 という range を送ったら OS ごと落ちるというバグがあって大問題になった。","ts":"1579585747.101400","team":"T03C4RC8V","reactions":[{"name":"fuita","count":2,"users":["U06BRP8VD","U06ECBRTJ"]},{"name":"hiee","count":4,"users":["UG6DF6W87","UDDCM376D","U06ECBRTJ","U8CC7MDCL"]},{"name":"goodpoem","count":1,"users":["UEA8T80GY"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GekTq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6b4eef7b-ed4f-46b6-8bba-6311d71cae9e","type":"message","user":"UDDCM376D","text":"rangeを使ったファイルのダウンロードの場合、サーバー側は、１リクエストごとにファイルを読み込みseekするんでしょうか？（それだとオーバーヘッドが凄そう）","ts":"1579585851.103000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"R99"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ee8b7e08-ddba-43e0-9fb3-03ee51c07364","type":"message","user":"UDDCM376D","text":"```Client ---- Range: 0-10 ----&gt; Server &lt;= file\nClient ---- Range: 10-20 ----&gt; Server &lt;= file```\nリクエストごとに↑毎度ファイルをopenする処理なはずがないと思っているけど、どういう処理をするんだろう","ts":"1579585985.105400","thread_ts":"1579585985.105400","reply_count":31,"replies":[{"user":"U06BRP8VD","ts":"1579586125.108500"},{"user":"U06BRP8VD","ts":"1579586172.108900"},{"user":"UG6DF6W87","ts":"1579586225.109600"},{"user":"U06BRP8VD","ts":"1579586245.109800"},{"user":"U06BRP8VD","ts":"1579586263.110000"},{"user":"UDDCM376D","ts":"1579586278.110600"},{"user":"UDDCM376D","ts":"1579586347.111600"},{"user":"UG6DF6W87","ts":"1579586351.111800"},{"user":"UDDCM376D","ts":"1579586372.112200"},{"user":"UDDCM376D","ts":"1579586373.112400"},{"user":"U06BRP8VD","ts":"1579586389.112700"},{"user":"U06BRP8VD","ts":"1579586402.112900"},{"user":"UDDCM376D","ts":"1579586406.113100"},{"user":"UG6DF6W87","ts":"1579586428.113300"},{"user":"U06BRP8VD","ts":"1579586440.113500"},{"user":"UDDCM376D","ts":"1579586445.113700"},{"user":"UDDCM376D","ts":"1579586456.113900"},{"user":"UDDCM376D","ts":"1579586457.114100"},{"user":"U06BRP8VD","ts":"1579586479.114300"},{"user":"UDDCM376D","ts":"1579586573.116100"},{"user":"U06BRP8VD","ts":"1579586710.119700"},{"user":"UDDCM376D","ts":"1579586808.122100"},{"user":"U06BRP8VD","ts":"1579586846.123200"},{"user":"UDDCM376D","ts":"1579586868.123800"},{"user":"U06BRP8VD","ts":"1579586889.124300"},{"user":"UDDCM376D","ts":"1579586993.124500"},{"user":"UG6DF6W87","ts":"1579587112.126200"},{"user":"UDDCM376D","ts":"1579587272.127900"},{"user":"UA4RVLHK7","ts":"1579674312.179200"},{"user":"UDDCM376D","ts":"1579674348.179500"},{"user":"UA4RVLHK7","ts":"1579674365.179700"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ge4uO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8444c745-210c-4b83-93fb-5349f47ea75e","type":"message","user":"U06BRP8VD","text":"partial uploadって基本的にHTTPサーバーのアーキテクチャとあってないんですよ。ここでいうHTTPサーバのアーキテクチャっていうのは、サーバ側では状態を持たないって意味。\n\npartial uploadやると、このリソースは(だれが)更新中でここまで受け取った～みたいな状態を管理する必要があって、ロバストで効率的なアップロードを考えるとその状態をクライアント側とネゴる仕組みが必ず要るんです。\n\nで妥協点をどこに置くかが、いままでやってきた仕事毎に違って、まさにキモって感じ。","ts":"1579586033.106500","thread_ts":"1579586033.106500","reply_count":5,"replies":[{"user":"U06BRP8VD","ts":"1579586088.107500"},{"user":"U06BRP8VD","ts":"1579586096.107800"},{"user":"UDDCM376D","ts":"1579586214.109400"},{"user":"U06BRP8VD","ts":"1579586313.111400"},{"user":"UDDCM376D","ts":"1579586358.112000"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZB6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9c25474b-5c2a-48a0-b211-353fb6dc0e42","type":"message","user":"UDDCM376D","text":"ふむふむ、なるほど","ts":"1579586068.107100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cQYFR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0f270c67-2e6c-40fd-9447-d51e30126f7a","type":"message","user":"U06BRP8VD","text":"正確にはHTTPの世界はリクエスト同士が独立って意味。","ts":"1579586088.107500","thread_ts":"1579586033.106500","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Gzb"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"11291f8d-e6aa-492d-94eb-dcd99c268e9e","type":"message","user":"U06BRP8VD","text":"partial uploadはそうではない。","ts":"1579586096.107800","thread_ts":"1579586033.106500","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MRTxr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f91c852a-c058-44f2-9d78-1207984f95d4","type":"message","user":"U03C6TEAZ","text":"IIS って http.sys というカーネルドライバを使って動いてるので、IIS が -1 なオフセットのファイル読み込みをカーネルレベルで実行してドスン(死)という話で本当にその時は「しばくぞ」って思った。","ts":"1579586119.108400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tjZI+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1d10f14f-ff19-4997-abd8-1e6717391d0e","type":"message","user":"U06BRP8VD","text":"毎回Openするのが定石ですね。","ts":"1579586125.108500","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bNSm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fba26b6e-d4fc-4e06-a487-adfa930fdd53","type":"message","user":"U06BRP8VD","text":"毎回Statしてrangeの範囲検証してOpenしてSeekしてReadする。","ts":"1579586172.108900","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZdORx"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8a637939-9f30-485f-92a4-4efb241ebca8","type":"message","user":"U03C6TEAZ","text":"何とかしろって言われて休日に出社して range ヘッダを消す対応を入れた思い出。","ts":"1579586182.109300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LP8l"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"df2c4d94-52d6-431c-9127-f792991c3ca7","type":"message","user":"UDDCM376D","text":"脱線ですが、\nKoRoNさんの言うとおりHTTPがステートレスにたいして、ステートをもたせる必要があるシーンが多くなってきいろんなやり方（cookieやセッションなど）でそれら実現している認識です\nで、正直HTTPを拡張するより新しいプロトコルを作ったほうよかったのでは？と思ったりもしました","ts":"1579586214.109400","thread_ts":"1579586033.106500","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vewn0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4a4253dc-3bd4-4183-897c-26f839c1a2fa","type":"message","user":"UG6DF6W87","text":"io.ReadSeeker をリクエストID毎にメモリに持っといて...みたいなのも出来そう...?","ts":"1579586225.109600","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"b1J"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"911dd61d-a708-4bee-af9b-98098d2670de","type":"message","user":"U06BRP8VD","text":"ファイルがなくなってる可能性はありますからね。","ts":"1579586245.109800","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"hKd"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"07932a8c-62d9-4819-9ccd-2dd1693bae7b","type":"message","user":"U06BRP8VD","text":"HTTPのSocketをAcceptしたりリクエストをパースする手間を考えれば、毎回Openするのは大したオーバーヘッドとは言えないでしょ。もちメモリにキャッシュするのもありますけど。","ts":"1579586263.110000","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":2,"users":["UG6DF6W87","UDDCM376D"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"oV++"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f04be758-e088-4282-87ee-cb6cc044a642","type":"message","user":"UDDCM376D","text":"&gt; io.ReadSeeker をリクエストID毎にメモリに持っといて...みたいなのも出来そう...?\n自分のイメージはまさに↑でした。\n毎回Openするのが定石なのか…","ts":"1579586278.110600","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"uX7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f8714924-482e-4746-a96b-cfd0a4c0a74d","type":"message","user":"U03C6TEAZ","text":"HTTP はそもそもトランザクションの無い世界なので range そのものに無理がある。","ts":"1579586288.111100","team":"T03C4RC8V","reactions":[{"name":"sorena","count":3,"users":["U06BRP8VD","UDDCM376D","U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EkOF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e31b9473-812e-4dd3-b28c-11cca806e45c","type":"message","user":"U06BRP8VD","text":"歴史的にそれは間違いですね。そんなプロトコルはこれまでたくさんあって、ぜんぶHTTPに負けてきたんです。","ts":"1579586313.111400","thread_ts":"1579586033.106500","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PM3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"10882111-9666-4255-9f9f-a990871aa157","type":"message","user":"UDDCM376D","text":"&gt; HTTPのSocketをAcceptしたりリクエストをパースする手間を考えれば、毎回Openするのは大したオーバーヘッドとは言えないでしょ。もちメモリにキャッシュするのもありますけど。\nファイルサイズが10GBとかめっちゃ大きなやつでも大したオーバーヘッドにならないんですか？","ts":"1579586347.111600","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"HOz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"55515975-8ea6-46d5-9f86-9a04bf060119","type":"message","user":"UG6DF6W87","text":"たしかに open するだけで読んでるわけではないから、そんなに辛い処理ではないのか","ts":"1579586351.111800","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nki"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b2a44396-f4c9-4e92-a6a7-08db810a7a31","type":"message","user":"UDDCM376D","text":"あ、そうなんですね\nそれは知りませんでした","ts":"1579586358.112000","thread_ts":"1579586033.106500","parent_user_id":"U06BRP8VD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"g6nzQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1da1859d-585a-432b-a8ab-b9964babdc2d","type":"message","user":"UDDCM376D","text":"あー","ts":"1579586372.112200","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EYZC"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"82172af6-9b05-46f6-8099-0e3e1a73f9f7","type":"message","user":"UDDCM376D","text":"&gt; たしかに open するだけで読んでるわけではないから、そんなに辛い処理ではないのか\n:rikai:","ts":"1579586373.112400","thread_ts":"1579585985.105400","edited":{"user":"UDDCM376D","ts":"1579586380.000000"},"parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=rJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b3d26a14-fe01-4488-8d7d-50185a4e04cd","type":"message","user":"U06BRP8VD","text":"goだと下手にキャッシュしちゃうとそれを捨てるタイミングないんですよ。","ts":"1579586389.112700","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/PA6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"300f3e71-feec-46ad-a03c-cd6030e4126c","type":"message","user":"U06BRP8VD","text":"同じ人が使う保証もない。","ts":"1579586402.112900","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"x1n7"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e391397b-b20e-4990-8cf2-cfa7a4a2dd3f","type":"message","user":"UDDCM376D","text":"&gt; goだと下手にキャッシュしちゃうとそれを捨てるタイミングないんですよ\nなるほど","ts":"1579586406.113100","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SYg+W"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"295d17ce-df4c-42cd-b7af-05e2315e12e6","type":"message","user":"UG6DF6W87","text":"あとファイルハンドラ抱え続けちゃうのも辛いですね","ts":"1579586428.113300","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"rr=h"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1144bbc8-bc88-42f7-9706-ab5ee1923475","type":"message","user":"U06BRP8VD","text":"ええ選択肢としてはありえません。","ts":"1579586440.113500","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XBMp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7b08152c-0698-4d3c-b65d-810058f01d30","type":"message","user":"UDDCM376D","text":"`os.Open()`はファイルディスクリプタを割り当てるくらいのことしかやっていないから、大したオーバーヘッドにならないって感じかな…","ts":"1579586445.113700","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fVsS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"26111980-fdf8-4bac-9e5f-70d12f8fb068","type":"message","user":"UDDCM376D","text":"ふむふむ","ts":"1579586456.113900","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AW69"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"844e7012-8a2f-4b20-a048-1f0b97b6b3d8","type":"message","user":"UDDCM376D","text":"なるほど","ts":"1579586457.114100","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"bSN1I"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4c8ed69b-8053-4643-b711-06f24d65bfa9","type":"message","user":"U06BRP8VD","text":"fdはかなり限られたリソースなのであっという間に枯渇しますよ。","ts":"1579586479.114300","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xpi5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3f90f0f9-eff5-49bd-b0c8-a8e7f77994ae","type":"message","user":"UDDCM376D","text":"それは思います（そもそもHTTPはステートレスなプロトコル）","ts":"1579586496.115000","edited":{"user":"UDDCM376D","ts":"1579586508.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"T3a"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"493bbef9-a15e-499d-9cd6-b0feea6618c9","type":"message","user":"UDDCM376D","text":"Linuxはファイルをたくさん使っているから、ですかね","ts":"1579586573.116100","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BPRn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0aa1e658-5aeb-4f93-85d9-7736becae910","type":"message","user":"U06BRP8VD","text":"ところでなんでpartial upload? もしかして「組み込み機器からそれなりに大きなデータを3Gみたいな細い回線でロバストにアップロードしたい」っていう要求?w","ts":"1579586640.117200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Yu7i"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8dbb6ec8-187f-406a-b03c-3df462d51e4b","type":"message","user":"UDDCM376D","text":"&gt; 組み込み機器からそれなりに大きなデータを3Gみたいな細い回線でロバストにアップロードしたい\nはい、これに近いですね","ts":"1579586665.117500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5PSvo"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"16500858-8227-4704-91c1-7b1e6b0c0c2c","type":"message","user":"UDDCM376D","text":"回線が細い、または切れたときにアップロードを再開できるようにってのが意図です","ts":"1579586691.118300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4aue2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8f9eb71c-8909-40b0-a60f-f7266b4a39ce","type":"message","user":"U03C6TEAZ","text":"いっそ rclone 入れて S3 をマウントした方がお安いかも。","ts":"1579586708.119500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=2x"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d3e8ea39-1e35-4a48-810b-b5fd776beb3b","type":"message","user":"U06BRP8VD","text":"OSてよく取り扱えるfdの数の上限を決めてるからです。","ts":"1579586710.119700","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"k7e3H"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"54274afe-cfbf-46f4-83f3-966bf8be8915","type":"message","user":"UDDCM376D","text":"あー","ts":"1579586720.120000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"LjUoF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"72b18aa2-fd06-42ed-9b9d-f32138d07c55","type":"message","user":"UDDCM376D","text":"その手があるのか","ts":"1579586724.120200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7uMK"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"893a271b-f789-40e0-92ef-82846af0787e","type":"message","user":"UDDCM376D","text":"ふむふむ","ts":"1579586727.120400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"DOB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1d45a3c6-1a7c-4ff0-8e23-defe6678e188","type":"message","user":"U06BRP8VD","text":"組み込み機器のパワー的にrsync系が許容範囲ならそれが楽。","ts":"1579586770.121500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xxu3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"94a36c93-35bb-49d5-b8a7-e28f03a1f874","type":"message","user":"U03C6TEAZ","text":"rclone で mirror コマンドありますね。","ts":"1579586789.122000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"P77vu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"975e1f22-10e1-438e-886e-3e61325de300","type":"message","user":"UDDCM376D","text":"なるほど","ts":"1579586808.122100","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Im9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"16d3ef70-f9b0-45e8-a13b-b24d60bc7b88","type":"message","user":"U03C6TEAZ","text":"sync もある。","ts":"1579586814.122500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Dix"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"410c00c5-e381-44bf-81c2-b960219753c0","type":"message","user":"UDDCM376D","text":"&gt; 組み込み機器のパワー的にrsync系が許容範囲ならそれが楽\nパワーがない機器なので、無理っぽかもだけど、検討の余地はありかなと","ts":"1579586845.123100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Afnn"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"39078329-21d5-426a-ab70-d2d2422f8a52","type":"message","user":"U06BRP8VD","text":"dockerでもfdの数を制限できるでしょ?","ts":"1579586846.123200","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"L1eEF"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c12960a8-0af6-4fe6-ac70-8d332aed6d4d","type":"message","user":"UDDCM376D","text":"ulimitですか？","ts":"1579586868.123800","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+HGAc"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0f0c3bb1-744a-419a-84fa-ae0b7c81198d","type":"message","user":"U03C6TEAZ","text":"なんちゃって S3 も使えるので便利す。rclone","ts":"1579586876.124200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EYQ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d1cd0ddc-7e57-4688-9f7a-9974fa094b73","type":"message","user":"U06BRP8VD","text":"ええそれ系。/etc/docker.confとかも","ts":"1579586889.124300","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"GcwR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"38ce6ae7-3b8c-4f59-8429-a05ce85a3edb","type":"message","user":"UDDCM376D","text":"docker.confってのがあるんですね\n知りませんでしたｗ","ts":"1579586993.124500","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AO3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4b5f83b1-6b41-4a98-8005-d4eae637e201","type":"message","user":"U06BRP8VD","text":"記憶ではrsync系のプロトコルは、ファイルを細かく区切って各ブロックのハッシュ値計算して、交換してどこまで(どれが)送れてるか見るんじゃなかったか…いや間違ってるかもだけど。","ts":"1579587110.125900","edited":{"user":"U06BRP8VD","ts":"1579587136.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6PxUo"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"499f747e-e8e1-47f4-ba78-128600c169e1","type":"message","user":"UG6DF6W87","text":"ulimit -n で fd 上限数が確認できますね\n```for _, n := range names {\n  f, _ := os.Open(n)\n  defer f.Close()\n  /* ... */\n}```\nみたいなコード書いて破滅、みたいな","ts":"1579587112.126200","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","reactions":[{"name":"laughing","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8w3k"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8e6e8956-7111-4c56-a021-f461eaf30c02","type":"message","user":"U06BRP8VD","text":"そうするとサーバー側も結構使うのかな。","ts":"1579587117.126500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"5m/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"06fd0495-bf04-4b4a-a8cf-aab871a7b5be","type":"message","user":"UDDCM376D","text":"そのコードはやばいｗ","ts":"1579587272.127900","thread_ts":"1579585985.105400","parent_user_id":"UDDCM376D","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3lju"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6d2ae42b-4f23-4202-9a08-11569949bba4","type":"message","user":"UDDCM376D","text":"<https://rclone.org/s3/>","ts":"1579587288.128300","attachments":[{"fallback":"Amazon S3","id":1,"title":"Amazon S3","title_link":"https://rclone.org/s3/","text":"Rclone docs for Amazon S3","blocks":null,"service_name":"rclone.org","service_icon":"https://rclone.org/img/rclone-32x32.png","from_url":"https://rclone.org/s3/","original_url":"https://rclone.org/s3/"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FVC"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a4bf90bc-6437-48f9-9fce-f503210bc576","type":"message","user":"U03C6TEAZ","text":"そもそも S3、GetObject は Range サポートしてるけど PutObject は Range をサポートしてないすね。","ts":"1579587293.128700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Xf6g"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"deff4693-e3f6-459a-9723-2a2c1d138b71","type":"message","user":"UDDCM376D","text":"ちゃんとS3の例が書いてある","ts":"1579587298.129100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"y/L+P"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"277be4bf-3294-4699-9396-19181c5c1b2e","type":"message","user":"UDDCM376D","text":"&gt; そもそも S3、GetObject は Range サポートしてるけど PutObject は Range をサポートしてないすね\nしらなかった","ts":"1579587314.129600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"znD2i"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4d8e1a13-4f1b-4d32-bb19-624038a176fa","type":"message","user":"UAZ33BKV2","text":"QUICの接続維持やロバストさが助けになるといいなあ...","ts":"1579587316.129700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XgB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"64d28c8e-760d-43d2-8518-e4dea9045831","type":"message","user":"UDDCM376D","text":"rcloneを使うとして、今度はS3の情報をどう配るかとか考えないといけないな","ts":"1579587422.130400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/s4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"77d6b71e-fb96-4127-ac71-3bafb96f5a1c","type":"message","user":"U06BRP8VD","text":"…ぼく、どうしてS3で追記(分割アップロード)できるの知ってるんだっけ? 何でつかったのか思い出せないわ(老化)","ts":"1579587596.131200","edited":{"user":"U06BRP8VD","ts":"1579587603.000000"},"team":"T03C4RC8V","reactions":[{"name":"ultrafastparrot","count":1,"users":["UDDCM376D"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"snhR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0782ec1b-8238-4994-88c3-ef6fea8495de","type":"message","user":"U03C6TEAZ","text":"range ではないけどこれは追加として使えるかもしれない。 <https://docs.aws.amazon.com/AmazonS3/latest/API/API_UploadPartCopy.html>","ts":"1579587735.131800","attachments":[{"fallback":"Uploads a part by copying data from an existing object as data source. You specify the data source by adding the request header x-amz-copy-source in your request and a byte range by adding the request header x-amz-copy-source-range in your request.","id":1,"text":"Uploads a part by copying data from an existing object as data source. You specify the data source by adding the request header x-amz-copy-source in your request and a byte range by adding the request header x-amz-copy-source-range in your request.","blocks":null,"service_name":"docs.aws.amazon.com","service_icon":"https://docs.aws.amazon.com/assets/images/favicon.ico","from_url":"https://docs.aws.amazon.com/AmazonS3/latest/API/API_UploadPartCopy.html","original_url":"https://docs.aws.amazon.com/AmazonS3/latest/API/API_UploadPartCopy.html"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"1u3c"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"db090a50-e9b0-4993-ba61-b6dc25b1a4a3","type":"message","user":"UDDCM376D","text":"お、ありがとうございます\nみてみます","ts":"1579587806.132200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tnxE"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a3360e8f-8639-4678-a54b-96f75ea67985","type":"message","user":"UDDCM376D","text":"そういえば、FileServerはrange対応していました\n<https://sourcegraph.com/github.com/golang/go@71239b4f491698397149868c88d2c851de2cd49b/-/blob/src/net/http/fs.go#L223>","ts":"1579587817.132600","attachments":[{"fallback":"fs.go - golang/go - Sourcegraph","id":1,"title":"fs.go - golang/go - Sourcegraph","title_link":"https://sourcegraph.com/github.com/golang/go@71239b4f491698397149868c88d2c851de2cd49b/-/blob/src/net/http/fs.go#L223","text":"Sourcegraph is a web-based code search and navigation tool for dev teams. Search, navigate, and review code. Find answers.","blocks":null,"service_name":"sourcegraph.com","from_url":"https://sourcegraph.com/github.com/golang/go@71239b4f491698397149868c88d2c851de2cd49b/-/blob/src/net/http/fs.go#L223","original_url":"https://sourcegraph.com/github.com/golang/go@71239b4f491698397149868c88d2c851de2cd49b/-/blob/src/net/http/fs.go#L223"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/IRp="}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"84a96050-44f3-4d36-8acf-c6c776c048f7","type":"message","user":"U03C6TEAZ","text":"CreateMultipartUpload で part を作って ListPart で一覧取得して UploadPart でアップロードして CompleteMultipartUpload でフィニッシュ、みたいな。","ts":"1579587840.133100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"j7C"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"af6bb2e3-7c4c-44f6-ad23-e48420487f6b","type":"message","user":"U03C6TEAZ","text":"GET だけでしょうけどね &gt; go","ts":"1579587873.133500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nUbqA"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"41076d70-f054-4a36-937e-f3f9a36e4c5d","type":"message","user":"UDDCM376D","text":"&gt; GET だけでしょうけどね &gt; go\nですね","ts":"1579587893.133700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/umUs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e83a998e-157b-41a6-9539-7070db2aa5ab","type":"message","user":"U03C6TEAZ","text":"aws-sdk-go 使えば中でよろしくやってくれるみたいですね。分割。","ts":"1579587978.134200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+Fh"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0c3e611f-2463-4760-b1aa-3be68e4a9479","type":"message","user":"UDDCM376D","text":"公式ドキュメントだとGoはサポートしていないっぽい？","ts":"1579588060.134300","files":[{"id":"FSHSF91NE","created":1579588056,"timestamp":1579588056,"name":"image.png","title":"image.png","mimetype":"image/png","image_exif_rotation":1,"filetype":"png","pretty_type":"PNG","user":"UDDCM376D","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":28521,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-FSHSF91NE/image.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-FSHSF91NE/download/image.png","original_h":153,"original_w":1231,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-FSHSF91NE-f0049f2d07/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-FSHSF91NE-f0049f2d07/image_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-FSHSF91NE-f0049f2d07/image_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-FSHSF91NE-f0049f2d07/image_360.png","thumb_360_gif":"","thumb_360_w":360,"thumb_360_h":45,"thumb_480":"https://files.slack.com/files-tmb/T03C4RC8V-FSHSF91NE-f0049f2d07/image_480.png","thumb_480_w":480,"thumb_480_h":60,"thumb_720":"https://files.slack.com/files-tmb/T03C4RC8V-FSHSF91NE-f0049f2d07/image_720.png","thumb_720_w":720,"thumb_720_h":89,"thumb_960":"https://files.slack.com/files-tmb/T03C4RC8V-FSHSF91NE-f0049f2d07/image_960.png","thumb_960_w":960,"thumb_960_h":119,"thumb_1024":"https://files.slack.com/files-tmb/T03C4RC8V-FSHSF91NE-f0049f2d07/image_1024.png","thumb_1024_w":1024,"thumb_1024_h":127,"permalink":"https://vim-jp.slack.com/files/UDDCM376D/FSHSF91NE/image.png","permalink_public":"https://slack-files.com/T03C4RC8V-FSHSF91NE-edbf2d94f5","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"thumb_800":"https://files.slack.com/files-tmb/T03C4RC8V-FSHSF91NE-f0049f2d07/image_800.png","thumb_800_h":99,"thumb_800_w":800,"thumb_tiny":"AwAFADDR707FN706gAwKMCiigAxRiiigD//Z","username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xZVC"}]},{"client_msg_id":"814eab4a-f48b-4ac5-b0f9-02d3c1ddf452","type":"message","user":"U03C6TEAZ","text":"<https://github.com/aws/aws-sdk-go/blob/ad9ccb00ac97be832b4b9248fddef87b541b7030/service/s3/s3manager/upload.go#L550>","ts":"1579588083.135100","attachments":[{"fallback":"GitHub: aws/aws-sdk-go","id":1,"title":"aws/aws-sdk-go","title_link":"https://github.com/aws/aws-sdk-go/blob/ad9ccb00ac97be832b4b9248fddef87b541b7030/service/s3/s3manager/upload.go#L550","text":"AWS SDK for the Go programming language. Contribute to aws/aws-sdk-go development by creating an account on GitHub.","thumb_url":"https://avatars2.githubusercontent.com/u/2232217?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":210,"thumb_height":210,"from_url":"https://github.com/aws/aws-sdk-go/blob/ad9ccb00ac97be832b4b9248fddef87b541b7030/service/s3/s3manager/upload.go#L550","original_url":"https://github.com/aws/aws-sdk-go/blob/ad9ccb00ac97be832b4b9248fddef87b541b7030/service/s3/s3manager/upload.go#L550"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"C4YD2"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f43836cc-f4ac-45b0-b67c-bc0e687ca150","type":"message","user":"U06BRP8VD","text":"goのコード側にはありますよ～それは解説がないだけかな","ts":"1579588084.135200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pws"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cfaf54ae-8cd2-43f7-80dd-224edd178e6f","type":"message","user":"UDDCM376D","text":"あ、ほんとだ","ts":"1579588097.135500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"45ssM"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8d6004ac-15b9-4767-8ed6-6dd752e3958d","type":"message","user":"U03C6TEAZ","text":"すぐ下に CreateMultipartUploadInput が","ts":"1579588105.135700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FM42"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fcfdb351-1998-4adb-a991-87e35dbf16e5","type":"message","user":"U03C6TEAZ","text":"ちなみに rclone もそれ使ってるので rclone は神。","ts":"1579588133.136100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vRY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4297f888-b9ad-42fd-9b9b-5dc9be597b7f","type":"message","user":"UDDCM376D","text":"rcloneすごいな","ts":"1579588149.136300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tl3gs"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2c0ef232-3420-4866-861f-d13769ed46b6","type":"message","user":"U06BRP8VD","text":"あの手のツール便利なんですけど「まともなFSを持ったLinux」が前提になってることがあって、組み込み機器だとそれが満たせないことがある。","ts":"1579588236.137600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"CDVkz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b91240c7-4c60-4b46-ad97-4cb029a2e58b","type":"message","user":"U06BRP8VD","text":"あと「アップロードするファイル全体がメモリに乗ること」とかね。","ts":"1579588254.138000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"MxP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"93e5785c-2171-44b7-942e-1fe6a37b7e32","type":"message","user":"U7H4TJEG0","text":"<https://github.com/motemen/ghq/issues/272>\n&gt; I noticed that every time I run ghq.exe, another (command prompt?) window opened only for a moment and closed immediately.\nなんだろうこれ","ts":"1579588324.138800","attachments":[{"fallback":"GitHub: ghq 1.0.2 shows nothing in Windows · Issue #272 · motemen/ghq","id":1,"title":"ghq 1.0.2 shows nothing in Windows · Issue #272 · motemen/ghq","title_link":"https://github.com/motemen/ghq/issues/272","text":"I download version 1.0.2 for windows, but ghq.exe shows nothing in command prompt as below. &gt; ghq.exe --version &gt; ghq.exe root &gt; ghq.exe list Curiously enough, ghq.exe with pipe shows outp...","thumb_url":"https://avatars3.githubusercontent.com/u/8465?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/motemen/ghq/issues/272","original_url":"https://github.com/motemen/ghq/issues/272"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yhyl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"546cd214-4fab-49b2-954d-4df93e0be2af","type":"message","user":"U03C6TEAZ","text":"おっ、rclone 賢いな。分割読み込みしてるのでメモリ全部乗せてない。 <https://github.com/rclone/rclone/blob/3a1b41ac2222b932de59868b00e7211ec5a698d2/backend/s3/s3.go#L2144-L2154>","ts":"1579588437.139500","attachments":[{"fallback":"GitHub: rclone/rclone","id":1,"title":"rclone/rclone","title_link":"https://github.com/rclone/rclone/blob/3a1b41ac2222b932de59868b00e7211ec5a698d2/backend/s3/s3.go#L2144-L2154","text":"\"rsync for cloud storage\" - Google Drive, Amazon Drive, S3, Dropbox, Backblaze B2, One Drive, Swift, Hubic, Cloudfiles, Google Cloud Storage, Yandex Files - rclone/rclone","thumb_url":"https://avatars0.githubusercontent.com/u/24937341?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/rclone/rclone/blob/3a1b41ac2222b932de59868b00e7211ec5a698d2/backend/s3/s3.go#L2144-L2154","original_url":"https://github.com/rclone/rclone/blob/3a1b41ac2222b932de59868b00e7211ec5a698d2/backend/s3/s3.go#L2144-L2154"}],"team":"T03C4RC8V","reactions":[{"name":"+1","count":2,"users":["U06BRP8VD","UAZ33BKV2"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zDrM"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"46668086-079f-470f-baa1-2ca08d022722","type":"message","user":"U03C6TEAZ","text":"ghq のなんだかよくわからない","ts":"1579588760.140000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PThQk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1b6f61a5-e1a8-4c0a-a058-0022a6cc0f4a","type":"message","user":"U7H4TJEG0","text":":thinking_face:","ts":"1579588847.140700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Rybe"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ad949775-b436-4568-9c3f-8779b6b530a4","type":"message","user":"UDDCM376D","text":"&gt; おっ、rclone 賢いな。分割読み込みしてるのでメモリ全部乗せてない。 <https://github.com/rclone/rclone/blob/3a1b41ac2222b932de59868b00e7211ec5a698d2/backend/s3/s3.go#L2144-L2154>\n素晴らしい","ts":"1579588968.140900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iw3"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7c1c0fad-3148-44a5-b984-cb0170b640f1","type":"message","user":"U03C6TEAZ","text":"ghq、あるとすれば変なシェル実行してるか違う OS のをダウンロードしたか、ウィルス感染してるかとか。","ts":"1579589734.141600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FhJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f69cecaa-4e8e-4aeb-b188-9b30a555e445","type":"message","user":"U03C6TEAZ","text":"一瞬コマンドプロンプトが見えるってのがいやらしい。","ts":"1579589754.141900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"zKm"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bfd30b8f-fc95-4f8e-9e67-4fa99575d6fd","type":"message","user":"U03C6TEAZ","text":"そのコマンドプロンプトに一瞬何かが表示されてるんだろうけど。。。","ts":"1579589776.142400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"7WDG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4716eb75-c24d-4609-8658-8fa9a83ed64f","type":"message","user":"U03C6TEAZ","text":"「そのマッカーサーだ！フハハハハハ」って表示されてたらおもしろい。 (ghq だけに)","ts":"1579589793.143000","team":"T03C4RC8V","reactions":[{"name":"69b9bbe795f19442","count":7,"users":["U06ECBRTJ","UG6DF6W87","U8CC7MDCL","UK7DT8URY","UGXMRNBUM","UEBF2KQTD","UGVC058JX"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Qyl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0a258bbb-b7d5-492d-96cd-4210227bd3ef","type":"message","user":"UDDCM376D","text":"<https://asnokaze.hatenablog.com/entry/2017/12/03/165022>","ts":"1579590295.143400","attachments":[{"fallback":"ASnoKaze blog: ライブコンテンツにおけるHTTP Rangeリクエストを改善する提案仕様 (RFC8673) - ASnoKaze blog","id":1,"title":"ライブコンテンツにおけるHTTP Rangeリクエストを改善する提案仕様 (RFC8673) - ASnoKaze blog","title_link":"https://asnokaze.hatenablog.com/entry/2017/12/03/165022","text":"追記2019/11/28 RFC8673になりました ライブコンテンツやログデータといった常に大きくなり続けるコンテンツに対するRangeリクエストを改善する提案仕様がIETFのHTTPbisで出ています。その仕様は「HTTP Random Access and Live Content」であり、すでにWGアイテムとなっておりWorking Group Last Callを迎えようとしてます。 現状のライブコンテンツとRangeリクエスト 常にコンテンツが大きくなり続けるファイルに対して、Rangeリクエストでデータを受信し続ける場合を考えます。クライアントはRangeリクエストを繰り返すよう…","image_url":"https://ogimage.blog.st-hatena.com/10328749687239380661/8599973812323316044/1574902946","blocks":null,"ts":1512287422,"service_name":"ASnoKaze blog","service_icon":"https://cdn.blog.st-hatena.com/images/touch-icon-iphone-retina.png","from_url":"https://asnokaze.hatenablog.com/entry/2017/12/03/165022","original_url":"https://asnokaze.hatenablog.com/entry/2017/12/03/165022"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"iqd"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8dd5c9d6-4eac-4a1b-ad27-3fff8df6cd45","type":"message","user":"UDDCM376D","text":"ふむふむ","ts":"1579590301.143700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"2UR"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
