[{"type":"message","user":"U03C90T1L","text":"<@U03C90T1L> has joined the channel","ts":"1555052231.000200","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"4483c5f0-0ea9-4d74-9294-ba5943727e3b","type":"message","user":"U03C90T1L","text":"hi","ts":"1555052995.000800","team":"T03C4RC8V","reactions":[{"name":"tada","count":3,"users":["U8CC7MDCL","U03C71D7H","U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"591bd36f-0ec8-4f8c-8764-a8343b518f2c","type":"message","user":"U03C90T1L","text":"今日vim-lsp入れて補完試したところ、vimでは問題なく補完できてgvimではカーソル位置の文字列の取得に失敗しているような挙動で補完できない事象に遭遇（windows）","ts":"1555053094.002200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f7965836-9492-447d-b112-d96c9b8aa4ff","type":"message","user":"U03C90T1L","text":"vim-lsp + gopls","ts":"1555053105.002400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"03e322b2-e2a7-4076-b6fb-e5020be5c12b","type":"message","user":"U03C90T1L","text":"vim-lspで `let g:lsp_log_verbose = 1` `let g:lsp_log_file = ` でログ出したら多分そんな感じ","ts":"1555053154.003300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a7c26d22-0624-4bd5-a452-24265410934c","type":"message","user":"U03C90T1L","text":"以前補完作ったときに、windows gvimでinsert mode時にカーソル位置の文字列を取得するのになんか問題あった気がしたから、似たような状況かと推測中だけれども、どう直すのが良いだろう","ts":"1555053218.004400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"66f0fa28-791a-43f4-8c4a-114e766fd126","type":"message","user":"U03C90T1L","text":"しかし本当にそうなのかはまだ未確定。調査中","ts":"1555053280.004900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"90988a36-5124-4ee8-8c8e-de38e17a3a57","type":"message","user":"U03C6TEAZ","text":"現状知ってる状況としては、vim-lsp は findstart の仕様にはのっとっていないという所でしょうか。","ts":"1555053310.005500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3950a152-47c9-4b88-b6c2-33a9d3ee7aa3","type":"message","user":"U03C6TEAZ","text":"gopls に限らず LSP 自体がソースとカーソル位置から補完候補を返す仕組みなので、入力途中の文字を送ってはいけない、つまり findstart を渡してはいけないという作りなんです。","ts":"1555053373.006700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"58c540b5-2f4e-4ce8-905f-20aac5dc3047","type":"message","user":"U03C6TEAZ","text":"で、返ってきた補完候補から逆に候補の挿入位置を割り出してます。","ts":"1555053445.007400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"caae848d-bc98-4348-9034-e4d7ba9b4f9c","type":"message","user":"U03C6TEAZ","text":"これは vim-lsp が悪いんじゃなくて Language Server Protocol がアレな仕様という所。","ts":"1555053469.008000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7f278fef-0b90-4dd8-bc88-83edd345a33c","type":"message","user":"U03C90T1L","text":"なるほど","ts":"1555053791.008200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f220f60d-da23-40e2-8ceb-2b04534f8da0","type":"message","user":"U03C90T1L","text":"ログ見る感じだと、そもそもgvimだと補完候補自体返ってきてない感じなので、もう少しvim-lsp側なのかgopls側なのかの切り分けしてみます","ts":"1555053868.009800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"315f4084-bdb3-4956-bf67-25661636bd6c","type":"message","user":"U03C90T1L","text":"でも仮にgopls側だとすると、vimとgvimの違いがどう効いてくるのかよくわからない感じ","ts":"1555053914.010900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"91f071ba-d1fc-4df9-9d3d-75c3e62e7cc8","type":"message","user":"U03C90T1L","text":"あー","ts":"1555054620.011600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"76a85667-6c24-402e-ac7d-972f25a3b799","type":"message","user":"U03C90T1L","text":"gvimだとcursor positionがずれてる","ts":"1555054638.011900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cf24a573-e0fc-4850-aaba-2d690b71d07e","type":"message","user":"U03C6TEAZ","text":"何かプラグインが作用してるのかな？","ts":"1555054712.012200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e58b6d05-62db-42d7-9b04-39f864e06d77","type":"message","user":"U03C90T1L","text":"vimのときは↓の$位置がカーソル位置になっているけれど\n```\ntview.$\n```\ngvimのときは1文字ずれてる\n```\ntview$.\n```","ts":"1555054782.013200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9d950a2d-19bb-49ac-b5df-9e5f21bca46d","type":"message","user":"U03C90T1L","text":"これが原因っぽいです","ts":"1555054788.013400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ff277586-bb71-4b74-8c25-02df68d2ac4b","type":"message","user":"U03C90T1L","text":"vim-lspのみ残して一旦他のplugin消してみます","ts":"1555054811.013800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d6de42b5-3227-4ab6-9dca-7568f20fb6a2","type":"message","user":"U03C90T1L","text":"他のpluginがない状態だとvim/gvim両方で期待通りに動いた","ts":"1555055578.014400","team":"T03C4RC8V","reactions":[{"name":"thinking_face","count":2,"users":["U776661HA","U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2922eb67-9305-42e3-8e5c-e35ba44ebc07","type":"message","user":"U03C90T1L","text":"うん？","ts":"1555056926.014900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"30b6ab37-88ec-4032-b98f-d1a44ac72f56","type":"message","user":"U03C90T1L","text":"vimrcで、 `let $GO111MODULE = 'on'` を設定した状態で、vimタブのカレントディレクトリを `go.mod` のある位置までcdしてから補完すると期待通りに補完された","ts":"1555056992.016100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e5fd991a-06cd-48e1-80f2-a17bdc447d04","type":"message","user":"U03C90T1L","text":"環境変数 `$GO111MODULE` を未設定の状態で、vimタブのカレントディレクトリを `go.mod` のある位置までcdしてから補完すると補完されない","ts":"1555057037.017200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c9a99b77-a6f8-4ff8-a889-b040f00315ae","type":"message","user":"U03C90T1L","text":"試してるコードが `$GOPATH` 以下に配置されているから、goplsの起動時のcwdとenvによって何か変わってるオチかな","ts":"1555057080.017900","team":"T03C4RC8V","reactions":[{"name":"naruhodo","count":2,"users":["U03C6TEAZ","U776661HA"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ac6cead0-d213-48b2-96b3-d27065716036","type":"message","user":"U03C90T1L","text":"しかしなぜそれでカーソル位置が変化しているかは謎い","ts":"1555057217.018500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d82f3525-9155-4674-9a1d-7eb3a94f3e48","type":"message","user":"U03C90T1L","text":"あーgoplsかvim-lspか不明だけど、タブごとのcwdは見てくれないのか","ts":"1555061542.019100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2cb3792f-3b5b-4d03-8e97-3af1751b5756","type":"message","user":"U03C90T1L","text":"今そこまで追う気力ないので一旦終わりにしよう","ts":"1555061576.019500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
