[{"client_msg_id":"77d27753-5732-42f3-84ee-754804834cf0","type":"message","user":"UEB17JJJE","text":"<https://github.com/golang/go/issues/33030#issuecomment-628211775|https://github.com/golang/go/issues/33030#issuecomment-628211775>\nv0.4.1","ts":"1589403859.098000","attachments":[{"fallback":"GitHub: x/tools/gopls: releases · Issue #33030 · golang/go","id":1,"title":"x/tools/gopls: releases · Issue #33030 · golang/go","title_link":"https://github.com/golang/go/issues/33030#issuecomment-628211775","text":"This issue will include announcements about new tagged versions of gopls.","thumb_url":"https://avatars3.githubusercontent.com/u/4314092?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/golang/go/issues/33030#issuecomment-628211775","original_url":"https://github.com/golang/go/issues/33030#issuecomment-628211775"}],"edited":{"user":"UEB17JJJE","ts":"1589412681.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"nTBD"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"UQB5KD0FL","text":"<@UQB5KD0FL> has left the channel","ts":"1589428142.098600","subtype":"channel_leave","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"7d0ffbc5-835c-4106-9b84-3e26c7a84b01","type":"message","user":"U06BRP8VD","text":"CIというか Github Actions で actions/cache@v1 をつかってビルドキャッシュ ($GOCACHE=./.cache/go-build) をキャッシュをして良いかで迷ってる。ポイントはビルド時にキャッシュ上由来のデータが入ってるので、将来なにかしらトラブルシューティングするときに困るんじゃないかという懸念(妄想?)がぬぐえない点。\n\nメリットはビルドにかかる時間が半分になる…","ts":"1589444253.102400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"G=d"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"91c36488-21b2-487e-9ff5-77bd340f333a","type":"message","user":"U06BRP8VD","text":"なお特殊な事情としてはモジュールの一部にパッチを当ててるw","ts":"1589444410.103500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"VBp"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e885f69e-1239-4c71-8692-bf739d24b990","type":"message","user":"UAZ33BKV2","text":"キーの選定が適切なら、問題になることはあんまりないだろう、とは思いますが...goの場合はどうなんでしょうね...","ts":"1589444433.104000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ENYwa"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2706ec83-f9a0-4498-9448-a4b157702f84","type":"message","user":"U06ECBRTJ","text":"パッチさえ当ててなかったら、キャッシュしてもさほど問題無く感じるんですが、パッチ…","ts":"1589444665.104600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ac9Y"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f939bc12-2964-45dd-9ec7-db8205f7ec95","type":"message","user":"UAZ33BKV2","text":"パッチを当てる処理部分の作りによるんでしょうか...まあ事故りそうではあるので、やめたほうが無難?","ts":"1589444822.106000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"N2=5"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3bdbaad6-ee28-425c-9085-8fa7090c7d76","type":"message","user":"U06BRP8VD","text":"ビルドキャッシュはたぶんファイルの中身に対してできるはずなのでそこはあんま気にしてないんですよね。","ts":"1589444857.106800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"q4x"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"654590d6-f187-4d4d-8869-2b2522ed6da4","type":"message","user":"U06BRP8VD","text":"あと全然関係ないけど Windows で go env すると $GOTMP 下に `go-build{number}` ってディレクトリができて、その中に `NUL` ってファイルができてしまって後始末ができない(システムファイル扱いになって管理者じゃないと消せない) んだけど、これは既知の問題かしらね?","ts":"1589444917.107900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ULQZS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"51d06d42-fc8e-4503-bdb7-c884c00109e0","type":"message","user":"U06BRP8VD","text":"これかな? (すごいキリ番w) <https://github.com/golang/go/issues/36000>","ts":"1589445055.108300","attachments":[{"fallback":"GitHub: cmd/go: failed to remove work dir · Issue #36000 · golang/go","id":1,"title":"cmd/go: failed to remove work dir · Issue #36000 · golang/go","title_link":"https://github.com/golang/go/issues/36000","text":"What version of Go are you using (go version)? $ go version go version go1.13.5 windows/amd64 What did you do? clean install MSYS2 pacman -Syu pacman -S gcc go env What did you expect to see? go en...","thumb_url":"https://avatars3.githubusercontent.com/u/4314092?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/golang/go/issues/36000","original_url":"https://github.com/golang/go/issues/36000"}],"edited":{"user":"U06BRP8VD","ts":"1589445069.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"TbduB"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"aec32212-a0d9-447b-8cb4-725ca6dc5a32","type":"message","user":"U03C6TEAZ","text":"僕できないな。なんだろ。","ts":"1589445279.108900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"aNgL4"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"955d95b7-fdba-44f9-bbfa-60d47e3ca3a5","type":"message","user":"U03C6TEAZ","text":"msys2 な shell から実行するとできるのか。","ts":"1589445393.109300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"tTHk"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bb9e6ff7-30a5-4578-827d-0ca1dca2877a","type":"message","user":"U06BRP8VD","text":"~なんかgoplsも同じの作ってるっぽいわw~","ts":"1589445498.109700","edited":{"user":"U06BRP8VD","ts":"1589445542.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ZRwdT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1c731c66-de59-4b75-a58f-8ba097c7bab5","type":"message","user":"U06BRP8VD","text":"いや別かも。プラグインがgo env 実行してる可能性を忘れてた。","ts":"1589445534.110200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"r4g"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d195a1ff-6bb2-4093-9c80-4c792e31b07c","type":"message","user":"U06BRP8VD","text":"やっぱCGO系の値を撮ろうとするとNULできる。しかもエクスプローラーから消しても復活するわw","ts":"1589445953.111400","team":"T03C4RC8V","reactions":[{"name":"totemoturai","count":1,"users":["U06ECBRTJ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Osii"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dd0e01b3-5669-4f2d-829c-419f3267234d","type":"message","user":"U03C6TEAZ","text":"みたいすね。 go env GOPATH だと出ないけど go env CGO_CFLAGS だと出る。","ts":"1589446027.112100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kDob"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"87a35e26-3705-4c25-93b9-5e493cab5e16","type":"message","user":"U03C6TEAZ","text":"internal/envcmd の func (b *Builder) Init() にある後片付けで出るのは分かった。","ts":"1589446074.112800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"N=9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"103f604b-f854-4658-88ee-5a878cd07f9f","type":"message","user":"U03C6TEAZ","text":"cgo のチェックするのに gcc コマンド実行してるけど、その中に NUL が含まれてるぽい。","ts":"1589446862.113400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"kBOZY"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fc948a0b-bff6-4bf0-a021-40e7cdcd8c38","type":"message","user":"U03C6TEAZ","ts":"1589446868.113500","files":[{"id":"F013MLGE7V1","created":1589446866,"timestamp":1589446866,"name":"image.png","title":"image.png","mimetype":"image/png","image_exif_rotation":0,"filetype":"png","pretty_type":"PNG","user":"U03C6TEAZ","mode":"hosted","editable":false,"is_external":false,"external_type":"","size":2782,"url":"","url_download":"","url_private":"https://files.slack.com/files-pri/T03C4RC8V-F013MLGE7V1/image.png","url_private_download":"https://files.slack.com/files-pri/T03C4RC8V-F013MLGE7V1/download/image.png","original_h":128,"original_w":247,"thumb_64":"https://files.slack.com/files-tmb/T03C4RC8V-F013MLGE7V1-7568911c57/image_64.png","thumb_80":"https://files.slack.com/files-tmb/T03C4RC8V-F013MLGE7V1-7568911c57/image_80.png","thumb_160":"https://files.slack.com/files-tmb/T03C4RC8V-F013MLGE7V1-7568911c57/image_160.png","thumb_360":"https://files.slack.com/files-tmb/T03C4RC8V-F013MLGE7V1-7568911c57/image_360.png","thumb_360_gif":"","thumb_360_w":247,"thumb_360_h":128,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U03C6TEAZ/F013MLGE7V1/image.png","permalink_public":"https://slack-files.com/T03C4RC8V-F013MLGE7V1-1e842b891e","edit_link":"","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"thumb_tiny":"AwAYADDRVehz+FOwPQU0A4+92owf7xoAdgegowPQU3a398/kKXB/vUALgegprKOtKQT/ABEUH7v4UANBGByKMj1FRjoKKAJMj1FDHjg1HRQApJ4xn8xS5Oe4GD1NJSHoaAP/2Q==","username":""}],"upload":true,"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"80fc676e-fd50-48a8-b53d-c1b0fc6f0ca8","type":"message","user":"U03C6TEAZ","text":"場所見つけた。","ts":"1589447153.113900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"x6tq"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6917b9f2-384c-4446-8bdc-62c29632a913","type":"message","user":"U03C6TEAZ","text":"msys2 mingw64 の gcc だと `-o NUL` は問題ないけど msys2 の UNIX-ish な `-o NUL` だと消せないファイルが gcc によって作られる。","ts":"1589447264.114700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pbO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cf5bbed5-1be0-4c8b-959e-529a12d5a3d0","type":"message","user":"U06BRP8VD","text":"うひー","ts":"1589447353.115600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QA29p"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"da784fce-ec78-4b62-a1eb-c689de94de8c","type":"message","user":"U6XP9LZ6V","text":"`NUL` ってファイルができちゃったら msys2 から消せばいい","ts":"1589447402.116000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ThJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"79a899b3-7f78-479f-92b6-c1cdfdeeb10f","type":"message","user":"U03C6TEAZ","text":"ですね。さて go はどうすべきか。","ts":"1589447424.116300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ETU+"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c548e1d4-60e9-4772-9484-50a2d17a4459","type":"message","user":"U6XP9LZ6V","text":"先に `gcc -v` を実行して mingw の gcc か判定？","ts":"1589447477.117000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"fXiO"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8e305598-dd6e-43ae-806f-9ddc2979948e","type":"message","user":"U6XP9LZ6V","text":"そういえば TDM-GCC が復活していたことを知った。","ts":"1589447582.117500","team":"T03C4RC8V","reactions":[{"name":"ultrafastparrot","count":1,"users":["U06ECBRTJ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"FkP"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9084a3b9-b99a-4442-bb4c-e951e266b89d","type":"message","user":"U03C6TEAZ","text":"バージョンチェックは嫌われそうなのでテンポラリファイルに出力する様に CL 出すか。","ts":"1589447669.118000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"KPWsl"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"548b40f7-3f89-411e-8c8d-6ac4983459a5","type":"message","user":"U03C6TEAZ","text":"<https://go-review.googlesource.com/c/go/+/233977>","ts":"1589448066.118300","thread_ts":"1589448066.118300","attachments":[{"fallback":"Gerrit Code Review","id":1,"text":"Gerrit Code Review","blocks":null,"service_name":"go-review.googlesource.com","service_icon":"https://go-review.googlesource.com/favicon.ico","from_url":"https://go-review.googlesource.com/c/go/+/233977","original_url":"https://go-review.googlesource.com/c/go/+/233977"}],"reply_count":2,"replies":[{"user":"U6XP9LZ6V","ts":"1589448662.121500"},{"user":"U6XP9LZ6V","ts":"1589449057.121700"}],"team":"T03C4RC8V","reactions":[{"name":"sokudo","count":1,"users":["U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YM8t"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"86b6de0d-0076-4f4e-9796-572ce6904efc","type":"message","user":"U06BRP8VD","text":"NULって名前がWin32 APIからだと消せないの?","ts":"1589448112.119000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"JS/"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0d2cc473-ea6f-42a1-8208-c0ad5e67d9c2","type":"message","user":"U06BRP8VD","text":"Nt API ならいけんのかな?","ts":"1589448131.119300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"T0Cgu"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"52b5971c-0c3f-4edc-84e0-5c45d54c9d32","type":"message","user":"U6XP9LZ6V","text":"`\\\\?\\` だったかprefixを付ければ行けた？","ts":"1589448260.120300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"I2+U"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8ebd2fe4-20e3-42c4-980c-f7ef110d948c","type":"message","user":"U06BRP8VD","text":"ああ UNCパスならいけるとかそういう話?","ts":"1589448299.120700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9wU"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1930df0a-30d8-45eb-8510-060b3fc9fa42","type":"message","user":"U06BRP8VD","text":"やってみるか","ts":"1589448302.120900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"pO9"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f79c26c0-c17a-4836-8b3c-f0b5015e6bc5","type":"message","user":"U6XP9LZ6V","text":"`del \\\\?\\c:\\msys64\\tmp\\NUL` で行けた。","ts":"1589448351.121200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wuG"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5ecb2364-e543-44fa-884a-4146d862eefe","type":"message","user":"U06BRP8VD","text":"まじや…","ts":"1589448611.121400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"370"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8ff2cd08-0c74-40b3-8788-8b2f801d53d3","type":"message","user":"U6XP9LZ6V","text":"`f.Name()` で返ってくるファイル名って相対パスですか？","ts":"1589448662.121500","thread_ts":"1589448066.118300","parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"n7j+j"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eb8a2888-564f-45d6-8f46-32909275c9bb","type":"message","user":"U6XP9LZ6V","text":"パスの形式によっては、msys2 gcc が解釈できない可能性が？と思ったのですが、よく考えたら、msys2 アプリは Win32 形式も解釈できるはずなので、おそらく大丈夫ですね。","ts":"1589449057.121700","thread_ts":"1589448066.118300","parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","reactions":[{"name":"man-gesturing-ok","count":1,"users":["U03C6TEAZ"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vqZif"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
