[{"client_msg_id":"1a8fec56-b4e8-4b6d-a7e2-6e5ace0959c1","type":"message","user":"U7JL1UKKL","text":"wsdjeg氏とLuaは使わないのかという話になり、使わないという話をしていた","ts":"1609588147.417400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"v/X"}]},{"client_msg_id":"f6d58fb6-4014-4861-8bfe-71e1fd9660b3","type":"message","user":"U8R597E9H","text":"vsnip もこの辺は地獄のような処理が書いてあります。テストがなかったらもうメンテ不可能。","ts":"1609576873.416400","edited":{"user":"U8R597E9H","ts":"1609576884.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"RlD"}]},{"client_msg_id":"aeadd0c7-fd29-453e-9177-4efad1210dbb","type":"message","user":"U8R597E9H","text":"エッジケースというのはたとえば「extmark をまたぐような nvim_buf_set_text がどう振る舞うのか」「extmark と extmark の隙間めがけて nvim_buf_set_text でテキストを挿入すると、どちらにくっつくのか」とかですね。。。","ts":"1609576844.416000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"cQC6"}]},{"client_msg_id":"b6ae1ece-6858-40d7-89e6-6af3e39c51c4","type":"message","user":"U8R597E9H","text":"nvim_buf_set_text は extmark を考慮してくれるので、エッジケースを除けばスニペットに最適な気がします。（プレースホルダ位置を勝手に同期してくれると言い換えることもできるので）","ts":"1609576798.415000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4SgU"}]},{"client_msg_id":"f73e6f67-c6c6-48f2-9129-502434b2f18b","type":"message","user":"U7JL1UKKL","text":"extmarkは編集を考慮してくれるとはいえ、それはVimの編集コマンドにだけ追従するためAPI使うとすぐに情報が消える。とか、なかなかきついものがある","ts":"1609574780.414300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PbF"}]},{"client_msg_id":"98c0cb8e-786a-4d0d-8e6a-d1ea616e0c26","type":"message","user":"U7JL1UKKL","text":"deoppet作ってて思ったのがバッファーのテキストの置き換えとカーソルの制御が本当に難しい","ts":"1609574715.412600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ViIqf"}]},{"client_msg_id":"53c6d252-125f-4516-bdc5-600bc5641aeb","type":"message","user":"U8R597E9H","text":"vsnip でも内部的に Vim script 製の TextEdit 処理する君を使ってます。おそらく便利。","ts":"1609574391.411700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"3WLlh"}]},{"client_msg_id":"e5416385-d4f4-49b4-8c5c-ed2c97cddad2","type":"message","user":"U7JL1UKKL","text":"これはdeoppetでも使えそうな","ts":"1609573165.410200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/dxW"}]},{"client_msg_id":"07c39fed-eb62-4ee3-b4df-ea6028cdce75","type":"message","user":"U9S4G0LJW","text":":naruho:","ts":"1609565634.409800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6aGMW"}]},{"client_msg_id":"720ae4ce-fc4d-448d-8033-6c48c88148d3","type":"message","user":"U8R597E9H","text":"おそらく、そのうち内部実装変わる気がします。今の nvim_lsp は lua で textedit を処理していますが、カーソル位置補正などはやってくれないんですよね。","ts":"1609565621.409600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"ANGe"}]},{"client_msg_id":"b90f7cba-a0ef-43c6-834a-c3e8301ca696","type":"message","user":"U9S4G0LJW","text":"nvim_lsp用に入れたのかな","ts":"1609565583.408900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BG9Rz"}]},{"client_msg_id":"02d39e34-3c65-4dec-abbb-5e0dbcaddc1c","type":"message","user":"U9S4G0LJW","text":"すごい","ts":"1609565579.408700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"0Oy"}]},{"client_msg_id":"9c640d4b-d552-4ae6-9232-f3252d6c7ccb","type":"message","user":"U8R597E9H","text":"そして、この編集によってズレた位置を補正する機能も持っているはずです。（cursor/extmark）","ts":"1609565570.408400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Eguh9"}]},{"client_msg_id":"0e3216b2-0c3c-469f-9ded-94bcd7757530","type":"message","user":"U8R597E9H","text":"LSP の TextEdit をそのまま（byte \u0026lt;-\u0026gt; utf16 offset 変換はいりますが）使えるんですよね。","ts":"1609565545.408000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"w7P6d"}]},{"client_msg_id":"85f3e4ed-3b6f-4d8a-9daa-4b08f47e5876","type":"message","user":"U9S4G0LJW","text":"複雑なUI作る人にウケそう","ts":"1609565396.407300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=Rk"}]},{"client_msg_id":"ad3f7653-08ed-4538-896c-19d68b19f6e0","type":"message","user":"U9S4G0LJW","text":"setbuflineと何が違うんだろうと思ったけど範囲置換が可能なのか","ts":"1609565387.407000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Ve7Ku"}]},{"client_msg_id":"97ad6762-34d1-46ec-a9b3-f5f28b837f56","type":"message","user":"U8R597E9H","text":"ついにプラグイン作者的にはおそらくキラー機能になりそうな nvim_buf_set_text が入ったっぽいです。\n\u003chttps://github.com/neovim/neovim/pull/11833/files\u003e","ts":"1609565267.406600","attachments":[{"fallback":"GitHub: [WIP] nvim_buf_set_text by bfredl · Pull Request #11833 · neovim/neovim","id":1,"title":"[WIP] nvim_buf_set_text by bfredl · Pull Request #11833 · neovim/neovim","title_link":"https://github.com/neovim/neovim/pull/11833/files","text":"Sketch on an API function that allows you to change an arbitrary charwise region, both joining and splitting lines if needed, and fully preserve extmarks. NB: stream of consciousness draft. Half of...","thumb_url":"https://avatars2.githubusercontent.com/u/1363104?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/neovim/neovim/pull/11833/files","original_url":"https://github.com/neovim/neovim/pull/11833/files"}],"team":"T03C4RC8V","reactions":[{"name":"eyes","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8Om"}]}]
