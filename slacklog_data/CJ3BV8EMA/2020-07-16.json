[{"client_msg_id":"061f68b5-5dfe-427f-9963-acd77473b932","type":"message","user":"UNJ2DANJC","text":"nvim built-in lspでcodeActionの一発実行ってこんな感じでcallbackを書き換えたらできた lua面白い\nほぼ組み込みのcodeActionの流用\n\n```local buf = require 'vim.lsp.buf'\nlocal lsp = require 'vim.lsp'\nlocal util = require 'vim.lsp.util'\nlocal vim = vim\nlsp.callbacks['textDocument/codeAction'] = function(_, _, actions)\n  if actions == nil or vim.tbl_isempty(actions) then\n    print(\"No code actions available\")\n    return\n  end\n  local action_chosen = actions[1]\n  -- textDocument/codeAction can return either Command[] or CodeAction[].\n  -- If it is a CodeAction, it can have either an edit, a command or both.\n  -- Edits should be executed first\n  if action_chosen.edit or type(action_chosen.command) == \"table\" then\n    if action_chosen.edit then\n      util.apply_workspace_edit(action_chosen.edit)\n    end\n    if type(action_chosen.command) == \"table\" then\n      buf.execute_command(action_chosen.command)\n    end\n  else\n    buf.execute_command(action_chosen)\n  end\nend```","ts":"1594830093.271000","edited":{"user":"UNJ2DANJC","ts":"1594830130.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"xZR=6"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
