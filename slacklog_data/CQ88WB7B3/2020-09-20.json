[{"client_msg_id":"be654400-fbc0-49c8-942e-f9d03f8722f6","type":"message","user":"U8996GYBF","text":"ちょっと直そう","ts":"1600613272.013000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"WgofR"}]},{"client_msg_id":"a1bb55cf-4de4-4ffb-9f62-c66dba8a25a2","type":"message","user":"U8996GYBF","text":"あっ、単純に変なことしてるだけな気がしてきた","ts":"1600613270.012800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"/c7"}]},{"client_msg_id":"ed22b21f-2e18-42d4-a66f-32c98c062557","type":"message","user":"U8996GYBF","text":"package.jsonにcoc-floatinputぶっ込んで\n```diff --git a/src/fzf/process/consumer/git.ts b/src/fzf/process/consumer/git.ts\nindex 869475f..29647f7 100644\n--- a/src/fzf/process/consumer/git.ts\n+++ b/src/fzf/process/consumer/git.ts\n@@ -1,3 +1,6 @@\n+import { FloatInput } from \"coc-floatinput\"\n+import { workspace } from \"coc.nvim\"\n+\n import { gitCheckout, gitCreateBranch } from \"@/connector/git\"\n import { vimEchoMessage } from \"@/connector/util\"\n import { chainFzfCommand, createBulkLineConsumer } from \"@/fzf/process/consumer\"\n@@ -43,7 +46,12 @@ export const gitCheckoutConsumer = createBulkLineConsumer(async (dataList) =\u0026gt; {\n         await gitCheckout(data.name)\n         await vimEchoMessage(`git checkout ${data.name}`)\n       } else {\n-        await gitCreateBranch()\n+        const branchName = await getBranchName()\n+        // if (branchName != null) {\n+        //   await gitCreateBranch(branchName)\n+        // } else {\n+        //   await gitCreateBranch()\n+        // }\n       }\n       break\n     }\n@@ -60,3 +68,18 @@ export const gitCheckoutConsumer = createBulkLineConsumer(async (dataList) =\u0026gt; {\n\n   await chainFzfCommand(\"FzfPreviewGitBranches\")\n })\n+\n+async function getBranchName(): Promise\u0026lt;string | null\u0026gt; {\n+  const input = new FloatInput.components.StringInput()\n+  const content = await input.input({\n+    title: \"Branch name\",\n+    relative: \"center\",\n+    filetype: \"floatinput-command\",\n+  })\n+\n+  if (content == null) {\n+    return null\n+  }\n+\n+  return workspace.nvim.command(content) as Promise\u0026lt;string\u0026gt;\n+}```\nって試してみてました","ts":"1600613150.012300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=yUoL"}]},{"client_msg_id":"79405ca8-5341-4955-be1d-b4535ca240d3","type":"message","user":"U9S4G0LJW","text":"floatinputとcocが繋がってないから死んでるとかそういう話なんだろうか","ts":"1600613134.011900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"asIH0"}]},{"client_msg_id":"43ba4c46-2361-4d1a-afe2-430eaf10033e","type":"message","user":"U7B4ZD49X","text":"最初はヘルプのプラグインかと思ってたら、ガチなヘルパーだった。","ts":"1600613108.011400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"EW3"}]},{"client_msg_id":"1bdc9af0-6c7a-4044-8774-ac2ff9078846","type":"message","user":"U9S4G0LJW","text":"これ、coc-floatinputを自前で引っ張ってきて実行しようとしてるってことでおk?","ts":"1600613096.010900","edited":{"user":"U9S4G0LJW","ts":"1600613108.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"UxXu"}]},{"client_msg_id":"ff9d41d9-c724-4c80-b1e5-5a39b768376f","type":"message","user":"U8996GYBF","text":"なんか副産物でこんなの出てきましたね\n\u003chttps://github.com/weirongxu/coc-helper\u003e","ts":"1600613065.010100","attachments":[{"fallback":"GitHub: weirongxu/coc-helper","id":1,"title":"weirongxu/coc-helper","title_link":"https://github.com/weirongxu/coc-helper","text":"Contribute to weirongxu/coc-helper development by creating an account on GitHub.","thumb_url":"https://avatars2.githubusercontent.com/u/1709861?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/weirongxu/coc-helper","original_url":"https://github.com/weirongxu/coc-helper"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PL9"}]},{"client_msg_id":"a3980699-d02c-4be3-8fe1-8c4fc570905e","type":"message","user":"U8996GYBF","text":"input.inputからcontentがstringで返ってくる定義になってるんで、これでウィンドウ出たら終わりだったんで・・・","ts":"1600612995.009400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"8hrG"}]},{"client_msg_id":"9191f160-770a-4cb0-a8de-e40a2f381072","type":"message","user":"U8996GYBF","text":"簡単かも、自分が見てたのここだけなんですけどこれ叩ければ終わりだと思ったんで\n\u003chttps://github.com/weirongxu/coc-floatinput/blob/master/src/index.ts#L46-L67\u003e","ts":"1600612957.008700","attachments":[{"fallback":"GitHub: weirongxu/coc-floatinput","id":1,"title":"weirongxu/coc-floatinput","title_link":"https://github.com/weirongxu/coc-floatinput/blob/master/src/index.ts#L46-L67","text":"Floating input for coc.nvim. Contribute to weirongxu/coc-floatinput development by creating an account on GitHub.","thumb_url":"https://avatars2.githubusercontent.com/u/1709861?s=400\u0026v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/80588/img/unfurl_icons/github.png","thumb_width":400,"thumb_height":400,"from_url":"https://github.com/weirongxu/coc-floatinput/blob/master/src/index.ts#L46-L67","original_url":"https://github.com/weirongxu/coc-floatinput/blob/master/src/index.ts#L46-L67"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"vuFCN"}]},{"client_msg_id":"17cea322-3dea-41d7-817b-960beea2ce6d","type":"message","user":"U7B4ZD49X","text":"全然なかみ見てなんであれですけど、ただフローティングウィンドウ作ってるだけだからそんなに難しくないんじゃないかって思ってるんですけど違うんですか？？","ts":"1600612907.007700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"msM"}]},{"client_msg_id":"d2feeafa-80c5-47c2-aa56-ec295782a14e","type":"message","user":"U8996GYBF","text":"関数自体は引っ張り出せたんですけど、叩いたらなんかクラッシュする","ts":"1600612845.006800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qN0sO"}]},{"client_msg_id":"366ced55-8dbc-4248-a6b0-3f216768155c","type":"message","user":"U7B4ZD49X","text":"独自実装じゃなくて依存する形にするんですね。なるほどそれはめんどうそう","ts":"1600612771.006400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"BTk1U"}]},{"client_msg_id":"447c9f40-0fb1-4041-912d-24fe8ebddb25","type":"message","user":"U8996GYBF","text":"あれかな、coc-floaterm自体がcocに依存してるしそれで爆発するのかもしれない","ts":"1600612670.005400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"B2d"}]},{"client_msg_id":"a8830475-48e0-4ccc-a7c7-ccc8421deab6","type":"message","user":"U8996GYBF","text":"ダメみたいですね・・・、coc extensionをネストして呼んだらクラッシュする感じがする・・・","ts":"1600612649.004800","team":"T03C4RC8V","reactions":[{"name":"hee","count":1,"users":["U7B4ZD49X"]}],"replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"B2o"}]},{"client_msg_id":"8948ffa4-1d65-4684-a1b2-9e822a3bae32","type":"message","user":"U8996GYBF","text":"ブランチ作成・リネーム・stash名作成の3つあるな","ts":"1600609864.004100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6LeM"}]},{"client_msg_id":"471d75f5-0f05-4afb-82b4-4f7b0fff186e","type":"message","user":"U7B4ZD49X","text":"ブランチ作成とかは確かにいいかもしれませんね。入力するところがわかりやすくなって","ts":"1600609813.003700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YgP"}]},{"client_msg_id":"d090fb78-ab0f-43d6-88f7-7fe7cf3f8504","type":"message","user":"U8996GYBF","text":"ブランチ作成時とか","ts":"1600609764.003200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"OU0yf"}]},{"client_msg_id":"2494e96f-c9e4-401c-8ce9-494e3e9889b4","type":"message","user":"U8996GYBF","text":"あー、これ使ってfzf-previewでたまにinput必要なときフックできないかな","ts":"1600609743.002600","edited":{"user":"U8996GYBF","ts":"1600609749.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"PmXTT"}]},{"client_msg_id":"e7105b54-052f-4594-ba47-407a22cd4cc6","type":"message","user":"U8996GYBF","text":"ペアプロ用感ある","ts":"1600609717.002100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"S+/"}]},{"client_msg_id":"ca2bb670-e929-4d23-ba87-df5c39448d2c","type":"message","user":"U7B4ZD49X","text":"画面賑やかし用ですね・・","ts":"1600609682.001900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"NS4"}]},{"client_msg_id":"2e18889b-85cd-46c5-9ef7-0fba6fdfbef5","type":"message","user":"U8996GYBF","text":"rename用に入れといてみようかな","ts":"1600609674.001700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"6NB+Q"}]},{"client_msg_id":"bcd47d09-fa22-405a-8c4a-ef6f350b62b6","type":"message","user":"U8996GYBF","text":"残念・・・","ts":"1600609668.001300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"yNL"}]},{"client_msg_id":"3850b5cf-f2e9-47f8-b4ec-f8bc1537518f","type":"message","user":"U8996GYBF","text":"renameにはよさそう","ts":"1600609660.000900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"jMiq"}]},{"client_msg_id":"c72bc5db-08cd-4f27-b8b2-a7b92693992d","type":"message","user":"U7B4ZD49X","text":"使ってないです・・・","ts":"1600609659.000800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"inZh"}]},{"client_msg_id":"1f9c4188-187c-4586-b440-35c7e32ea575","type":"message","user":"U8996GYBF","text":"\u003c@U7B4ZD49X\u003e 今floatinputどの程度使ってますか？","ts":"1600609635.000400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"efaM"}]}]
