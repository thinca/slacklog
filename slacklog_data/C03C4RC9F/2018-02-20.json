[{"type":"message","user":"U03C4RC8X","text":"2つのファイル間のdiff出すのが /usr/bin/diff","ts":"1519118383.000072","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":"２つのバッファ間のdiff出せたら便利そう","ts":"1519118392.000131","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":"No Nameでもいけるように","ts":"1519118398.000518","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":"%と#固定でいいとおもう","ts":"1519118405.000095","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"`:diffthis`","ts":"1519118409.000181","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":":yusho:","ts":"1519118415.000276","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":":yonkaiyuushoo:","ts":"1519118417.000002","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"`:diffthis` よく使う。","ts":"1519118518.000128","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":"そのdiffの結果をpatchとしてyankしたい","ts":"1519118642.000193","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"それこそ diff コマンドに流せば良さそう","ts":"1519118668.000458","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":"diff -uのあれ","ts":"1519118679.000302","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":"うーんそうなるとgetlineしてsystemする感じになるか","ts":"1519118734.000043","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"一時ファイルに保存するようなスクリプト作るのが一番素直かなぁ","ts":"1519118745.000062","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":"一時ファイルよさそう","ts":"1519118751.000035","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"diff の結果にファイル名が含まれるのがアレだけど。ファイル名をいい感じにする必要がありそう","ts":"1519118777.000381","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c1fbe2ae-2066-49f0-bcb2-7eadd4611671","type":"message","user":"U03C6TEAZ","text":":diffthis 超使う派","ts":"1519125995.000045","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"871fa58a-6581-45b2-8f70-2e222360b643","type":"message","user":"U0M7GCBPD","text":"`system()` は引数に入力渡せるはずなんで一時ファイル作る必要ないはず","ts":"1519126395.000404","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8084e1df-6dd6-4a40-960c-6634a6a2e111","type":"message","user":"U0M7GCBPD","text":":h system()","ts":"1519126404.000040","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U894RTUJY","text":"```\nsystem({expr} [, {input}])                              *system()* *E677*\n                シェルコマンド {expr} の実行結果を文字列として得る。リストとし\n                て受け取るには |systemlist()| を参照。\n \n                {input} に文字列が指定された場合、その文字列はファイルに書き出\n                され、コマンドの標準入力として渡される。この文字列はそのまま\n                (as-is) 書き出されるので、正しい改行文字を使うよう自分自身で気\n                をつけなければならない。\n                {input} にリスト (|List|) が指定された場合は、|writefile()| の\n                {binary} に \"b\" を指定したのと同様にファイルに書き出される (つ\n                まり、リストの各要素は改行文字で連結され、要素内の改行文字は\n                NUL 文字に変換される)。\n                {input} が指定され、それが数値で既存のバッファとして有効な id\n                であるならば、そのバッファの内容が 1 行ずつファイルに書き出さ\n                れる。それぞれの行は NL で終端され、テキスト中の NL は NUL 文\n                字に置き換えられる。\n \n                パイプは使用されず、'shelltemp' オプションは使用されない。\n \n                |:silent| が前置されたときは、端末は cooked モードには設定され\n                ない。これはユーザー入力を必要としないコマンドを使用することを\n                意味する。これは画面に不要な文字が表示されるのを防ぐ (|CTRL-L|\n                でそれをクリアする必要がなくなる)。  \n                        :silent let f = system('ls *.vim')\n \n                Note: コマンドの引数をエスケープするには、 |shellescape()|、\n                |expand()| の |::S|、または |fnamemodify()| を使用する。{expr}\n                内に改行文字があるとコマンドは失敗するだろう。'shellquote' や\n                'shellxquote' 内にある文字も問題を起こすかもしれない。\n                対話的なコマンドを使用することはできない。\n \n                戻り値は文字列。例:  \n                    :let files = system(\"ls \" .  shellescape(expand('%:h')))\n                    :let files = system('ls ' . expand('%:h:S'))\n \n                システムに依存しないような戻り値にするために、シェルの出力を\n                フィルタリングし、マッキントッシュにおいては&lt;CR&gt;を&lt;NL&gt;に変換\n                し、DOS系のシステムにおいては&lt;CR&gt;&lt;NL&gt;を&lt;NL&gt;に変換している。\n                文字列が NUL 文字で切れるのを防ぐため、すべての NUL 文字は SOH\n                (0x01) に置換される。\n \n                実行されるコマンドはいくつかのオプションを適用して構成される:\n        'shell' 'shellcmdflag' 'shellxquote' {expr} 'shellredir' {tmp} 'shellxquote'\n                ({tmp}は自動的に生成されるファイル名)\n                UnixとOS/2ではコマンドの連結ができるように{expr}の両側に波括弧\n                が置かれる。\n \n                コマンドは「cooked」モードで実行される。そのためCTRL-Cでコマン\n                ドを中断できる(少なくともUnixでは)。\n \n                エラーコードは|v:shell_error|に格納される。\n                この関数は|restricted-mode|では失敗する。\n \n                Note 上記のオプションに不正な値が入っていると、この関数の呼び\n                出しが失敗する可能性がある。セキュリティエージェントアプリケー\n                ションを使っていると失敗することがあるとも報告されている。\n                \":!cmd\" とは違い、ファイルが変更されているかのチェックは行わな\n                い。\n                明示的にチェックさせるには|:checktime|を使う。\n```","ts":"1519126404.000250","bot_id":"B894RTUCU","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"fbb92fb7-7b52-474b-b354-e9e666db4044","type":"message","user":"U0M7GCBPD","text":":point_right: `{input}`","ts":"1519126425.000029","edited":{"user":"U0M7GCBPD","ts":"1519126468.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"`system()` が裏で一時ファイルを作ってるのでファイル作るオーバーヘッド自体は存在してそう","ts":"1519126584.000380","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"99e5a784-ddc8-43e9-abfe-32a7e270825e","type":"message","user":"U0M7GCBPD","text":"確かに","ts":"1519126641.000064","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"aba64751-26c5-44de-86e5-275ec65ac60b","type":"message","user":"U0M7GCBPD","text":"っていうか間違えた、今回は `diff old new` みたいに渡さないとダメなので input 引数使えなかった","ts":"1519126684.000158","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"diff はどうしても2ファイル受け取るので標準入力だとキビしみがある","ts":"1519126712.000202","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c1578dc8-9a27-4f1b-af6c-a3e89799a38a","type":"message","user":"U0M7GCBPD","text":"キビしみ","ts":"1519126763.000232","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":"quickrun的な何かでdiff -uだしたい","ts":"1519128131.000335","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"何と何の diff なのかと言うアレが","ts":"1519128172.000292","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":"まさにそれ","ts":"1519128592.000123","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C4RC8X","text":"まあ固定しちゃって%と#とかがいいかなあ","ts":"1519128603.000191","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"deoplete と eskk.vim を使うと1文字入力ごとに警告が出るところまではわかった","ts":"1519109203.000191","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"[] [2018年02月20日 15時38分19秒] [WARN] internal error: Preedit.get_begin_col() current phase is \"0\", but it must not be called in normal phase.\nfunction neovim_rpc#_callback[1]..eskk#complete#eskkcomplete[11]..&lt;SNR&gt;300_eskkcomplete[2]..eskk#complete#can_find_start[10]..&lt;SNR&gt;280_Preedit_get_begin_col[2]..eskk#logger#warnf[1]..eskk#logger#warn[1]..&lt;SNR&gt;281_do_log","ts":"1519109221.000022","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"(ログ出力時に一緒にトレース吐くようにしてみた)","ts":"1519109237.000033","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"たぶんだけど eskk 側を直すべき案件な気はしているけど、どう直せばいいかはまだサッパリ","ts":"1519109456.000150","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
