[{"client_msg_id":"aec512a4-3cfa-4010-b5ba-1034c98f5762","type":"message","user":"U8996GYBF","text":"以前質問してからIssueに書かせて貰ったと思うのですが、 `histdel()` でコマンドの履歴を消した結果をviminfoに反映する方法って `wviminfo!` で現在のvimの状態のみを残してviminfoを初期化するしかないんでしたっけ、 `oldfile` などもまとめて吹き飛んでしまい副作用が強く・・・","ts":"1532677017.000170","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d9126c68-f7b3-4e87-977f-028b5bffb23b","type":"message","user":"U8996GYBF","text":"`wviminfo` だとメモリから消してからマージされて復活してしまう気がしてます","ts":"1532677065.000200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d8df7624-4e96-4bd2-85a6-364db8bda036","type":"message","user":"U03C71D7H","text":"キビしみ","ts":"1532677140.000150","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9197edd8-b814-4876-90a3-acd101fbb632","type":"message","user":"U8996GYBF","text":"やっぱり難しいんでしょうか、viminfoを操作してくれる `histdel()` がほしい・・・","ts":"1532677194.000101","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"390cbeed-3503-4492-8be4-a82b44cdaadc","type":"message","user":"U03C71D7H","text":"現状の機能で可能な限りがんばるとすると、rviminfo で読んでからなるべく間を空けずに削除処理をして書き込みですかね…","ts":"1532677360.000300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"52850700-3dd2-4e13-96e1-79a11b6ae27e","type":"message","user":"U03C71D7H","text":"あまり解決にはなってないかもしれない","ts":"1532677367.000153","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"109b813d-e159-4dcf-92f0-5433e6257839","type":"message","user":"U8996GYBF","text":"viminfoに記録されてる情報を現在のvimの状態に全て持たせてからwviminfo!、って書いてたんですがやっぱりそれですよね","ts":"1532677384.000227","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"16f51a93-4915-4cd5-baa2-bbeed7cb49b1","type":"message","user":"U8996GYBF","text":"やってみてるんですが `v:oldfiles` がどうしても消えちゃうのはどうしてだろう","ts":"1532677413.000191","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"0689bf27-4430-43f2-89b1-e63a5baa8fb6","type":"message","user":"U03C71D7H","text":"oldfile が消えるのもしかしたらバグの可能性もありそうですねぇ","ts":"1532677430.000022","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"713ba214-0949-40a9-a0ff-8568fe8dbe7a","type":"message","user":"U8996GYBF","text":"`rviminfo!` しないといけないとかですかね、よく分かっていない","ts":"1532677435.000118","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6305af78-4124-4a40-a95e-8cf6e7e3298d","type":"message","user":"U03C71D7H","text":"単に `wviminfo!` の実装に漏れがあるとか。ソース一切見ずに言ってますが","ts":"1532677457.000244","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"03934174-2170-4441-91f5-be28b453b1c4","type":"message","user":"U8996GYBF","text":"neovim使ってるんでそっちだけの可能性も・・・？","ts":"1532677474.000253","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ede6e34a-f36f-46f0-82f1-aa2acb40ac5b","type":"message","user":"U8996GYBF","text":"viminfoのフォーマットが違いますよね確か","ts":"1532677487.000081","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f89a9550-bb1d-42c5-bde9-6d699c3017c9","type":"message","user":"U03C71D7H","text":"あー、ではまず Vim の最新版で試してみると良さそう","ts":"1532677494.000256","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2c97e789-addd-4aeb-8d56-71346f12556f","type":"message","user":"U8996GYBF","text":"ですね、ちょっとやってみます","ts":"1532677502.000273","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7c628adb-7dcc-475a-bd31-d4f7395de547","type":"message","user":"U8996GYBF","text":"あっ","ts":"1532677664.000054","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4b9c9327-e68f-4677-9f32-6b6c5cb07fa4","type":"message","user":"U8996GYBF","text":"vimだと消えない気がする・・・","ts":"1532677669.000319","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d67c188a-56ff-42a2-8f46-baab9bb228d6","type":"message","user":"U8996GYBF","text":"プラグインの兼ね合いとかありそうなんで `vim -u NONE` で試した方がよさそうですね","ts":"1532677713.000148","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"21ed8acd-ed0e-4443-87de-d8f23f135a13","type":"message","user":"U03C71D7H","text":"ですね","ts":"1532677726.000331","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"efabb5a2-7b0e-4f94-aa0d-77819b4a0047","type":"message","user":"U03C71D7H","text":"neovim でだけ再現するなら neovim のバグと言うことになりそう","ts":"1532677738.000156","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4b889ee9-57a0-432a-b40e-ef0d43685cbe","type":"message","user":"U8996GYBF","text":"neovimで -u NONE して消えました","ts":"1532678004.000280","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"24aa3f75-ca8f-46d7-895e-09602b7a1c0f","type":"message","user":"U03C71D7H","text":"-N しました?","ts":"1532678029.000252","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6559e820-3515-431e-b4bf-62734db67edf","type":"message","user":"U8996GYBF","text":"あれ、-u NONEだけじゃないんでしたっけ・・・、ちゃんと見てきます","ts":"1532678049.000006","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3a6c8f74-bf4e-411b-980e-9b7886ecd82f","type":"message","user":"U03C71D7H","text":"-N 付けないと compatible モードになるので viminfo オプションの値が空になります","ts":"1532678123.000241","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4964e7a0-c4ec-4018-b69b-22fbf531c8d6","type":"message","user":"U8996GYBF","text":"なるほど、compatibleが変わっちゃうのか","ts":"1532678168.000002","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a305a307-41ce-49b8-8885-93e252649fdd","type":"message","user":"U8996GYBF","text":"`nvim -u NONE -N` でも `vim -u NONE -N` でも消えちゃう・・・","ts":"1532678492.000067","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cf2216f3-102d-40a9-a51d-daca3750920b","type":"message","user":"U03C71D7H","text":"ほー","ts":"1532678540.000119","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b48c8e10-8ff9-469a-b718-416abcd08aa5","type":"message","user":"U8996GYBF","text":"```\n:e hogehoge\n:qa\n```\n\n```\n:call histdel(':', n)\n:wviminfo!\n:qa\n```\nで消えてる気がします","ts":"1532678655.000069","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7e28ebf4-8b23-489b-ac1d-554bde5b1dc0","type":"message","user":"U03C71D7H","text":"自分なりに試したけど消えてる気がする","ts":"1532678776.000085","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ebd0d263-ff9b-4e83-9172-7206b63b2ebd","type":"message","user":"U8996GYBF","text":"viminfoのオプション次第なのかと思って見てたんですが、複雑っぽくて難しい・・・","ts":"1532678861.000080","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a4e47c6e-0ff7-42e4-8879-b5cf534cb530","type":"message","user":"U03C6TEAZ","text":"えと、用途しては vim を起動、何かする、起動前の viminfo に戻したい？","ts":"1532678861.000148","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c6c2fc8b-ff07-449c-927d-15c11755be47","type":"message","user":"U8996GYBF","text":"やりたいこととしては `histdel()` で消したコマンドの履歴をviminfoに反映したい、です","ts":"1532678894.000271","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6e334cc0-1721-4151-8b9b-07e1d66e6ee9","type":"message","user":"U8996GYBF","text":"今困っているのが `:call histdel() | wviminfo!` としないと消えてくれない、 `:wviminfo!` をしたときに `v:oldfiles` が空になる副作用が発生している気がする、という内容です","ts":"1532678982.000130","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a1bfdce4-3191-48dc-83c4-d0d4f7c8749e","type":"message","user":"U03C6TEAZ","text":"`:wviminfo!` で `v:oldfiles` が消えなければ万事解決ですか？","ts":"1532679017.000037","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4603d9e5-3c00-4578-91a9-ccf3b9b4d6cc","type":"message","user":"U8996GYBF","text":"他のどこに副作用が起きているか確認できていないですが、今のところはその通りです","ts":"1532679056.000040","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"140795bf-fdda-4938-bb72-b0a8a33464b6","type":"message","user":"U8996GYBF","text":"コマンド履歴以外の部分に影響が起こらない、というのが一番期待している動作です","ts":"1532679098.000175","edited":{"user":"U8996GYBF","ts":"1532679155.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"7a6f06c8-cc29-42b0-b5f7-00d0fd43316f","type":"message","user":"U03C6TEAZ","text":"```\n:call histdel(':', n)\n```\nって valid ですっけ","ts":"1532679199.000121","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3b2924f3-8695-4db3-91e5-63b0ead1d03d","type":"message","user":"U03C6TEAZ","text":"```\n:call histdel(':', 'n')\n```\nかな","ts":"1532679223.000194","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1b395dfe-ee37-415e-9bb7-efe0ddc59f7c","type":"message","user":"U8996GYBF","text":"&gt;\t\t{item}が数値に評価される場合、インデックスとして解釈される。イ\n&gt;\t\tンデックスについては|:history-indexing|を参照。関連するエント\n&gt;\t\tリ{訳注: The respective entry}も、存在すれば削除される。\n\nなので `:history` で見たindexを渡していて、その後再度 `:history` を実行してそのindexが削除されているのは確認しました。\nその後 `:wviminfo!` してvimを再起動すると手元では `v:oldfiles` が消えています。","ts":"1532679382.000301","edited":{"user":"U8996GYBF","ts":"1532679529.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"00c7ad78-3221-4e4e-a155-710f9992fe38","type":"message","user":"U03C71D7H","text":"`histdel()` 関係なく `wviminfo!` すると消える予感","ts":"1532679449.000072","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3c179721-9ba4-4be9-b9ca-baf125bc92a5","type":"message","user":"U8996GYBF","text":"すみません、nが任意のindexのつもりだったのは書いておくべきでした","ts":"1532679464.000275","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"99401c30-bf40-428b-bd20-f2ff764d2cd7","type":"message","user":"U8996GYBF","text":"`wviminfo!` 自体の実装で吹き飛んでるんですね、なるほど","ts":"1532679488.000328","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f113d246-c7b7-4cc0-b5b6-c6ebf2ebfc1c","type":"message","user":"U8996GYBF","text":"mruみたいなプラグインで保持すればひとまずやりたいことは解決できそうではあるんですが","ts":"1532679593.000067","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6d615112-cbb2-41bf-ae96-5cd6cd79828f","type":"message","user":"U03C71D7H","text":"個人レベルでいいのであればそういう回避策もアリっぽい","ts":"1532679617.000293","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"777e274e-dbbe-4e02-baba-4fce0454c3c7","type":"message","user":"U03C71D7H","text":"プラグインにしたいのであればちょっとしんどい感じになりそう","ts":"1532679634.000103","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3c83d4d1-ca59-46cb-98a7-c74991744bca","type":"message","user":"U8996GYBF","text":"fzfでoldfiles選択するプラグイン作っていてちょっと困ってたんですよね、うーん","ts":"1532679736.000231","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c5a8b8f8-a804-4bd1-8763-4cdd790e17a5","type":"message","user":"U8996GYBF","text":"mruの実装を見てパクるみたいな感じになりそう、vitalあたりで簡単にできたりするんですかねー","ts":"1532679840.000239","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ebc92174-a135-4fc8-b389-2237ea7ef373","type":"message","user":"U8996GYBF","text":"fzfでhistdelする &gt; fzfでoldfilesを見ると全部消えてるのコンボを食らってしまって","ts":"1532679881.000116","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3796c79e-a310-406b-965c-6bac379b5b42","type":"message","user":"U8996GYBF","text":"Issue出した方がいい内容だったりするでしょうか","ts":"1532679970.000091","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a947c7a8-a6a7-4dfb-9a3f-43d4da3eb500","type":"message","user":"U03C71D7H","text":"出すのが良さそう。oldfiles が消えるのは仕様上正しくない気がします。たぶん。","ts":"1532680150.000294","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1ee23891-5411-4fcd-bb02-ada5e998515f","type":"message","user":"U03C71D7H","text":"ちなみに -u NONE しなかったら消えなかったんですっけ? そこがちょっと気になる","ts":"1532680173.000218","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"740189d9-6f63-41e8-84d8-289233aaee08","type":"message","user":"U8996GYBF","text":"あ、手順がちょっと複雑だったのでちゃんとできてるか怪しいですが `vim -u NONE` の方では消えてなかった気がしました。\n再度やってみます。","ts":"1532680215.000080","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"25948ef0-3af8-4754-9749-2d8097d772e0","type":"message","user":"U8996GYBF","text":"うーん、そもそもhistoryが保存されていないし何か勘違いしたのかな・・・","ts":"1532680321.000302","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bc786bae-3426-419f-81c4-b976d887c2e8","type":"message","user":"U8996GYBF","text":"vimの方ではそもそもviminfoが読まれていない（？）\nneovimでは同様に消えている気がします","ts":"1532680430.000306","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3a9cf6c2-ffa1-4fa6-9c25-ad187702ed59","type":"message","user":"U03C71D7H","text":"`-N` は常に必須ですが、付けてますよね","ts":"1532680698.000124","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"affae47a-b573-447c-964e-7d3ba34f23aa","type":"message","user":"U03C6TEAZ","text":"マニュアル読むと仕様通りってのはあるなー。","ts":"1532680719.000260","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b26663d7-5ed9-4521-b451-4b5e099bb77a","type":"message","user":"U03C6TEAZ","text":"&gt; [!]を指定すると古い情報は読み込まれず、Vim内部の情報だけが保存される。","ts":"1532680744.000318","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bc720a33-a2a2-4d3f-ad2c-dc448264a233","type":"message","user":"U8996GYBF","text":"あ、 g; のリストも消えてました","ts":"1532680753.000174","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f47d7441-1b38-4d4f-a15a-f969abfec437","type":"message","user":"U03C71D7H","text":"oldfiles は Vim内部の情報に含まれない?","ts":"1532680775.000015","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e69c4086-2d20-4a4b-a31e-cdf89b9b9931","type":"message","user":"U8996GYBF","text":"`:echo v:oldfiles` で見れる情報はメモリじゃなくてviminfoから逐次読んでるって認識でしょうか","ts":"1532680797.000224","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"baca5146-9fb7-456b-8aff-e666ba36d18b","type":"message","user":"U03C6TEAZ","text":"viminfo の書き込みって、一度読み込んで、現在ので更新して最後に書くんですが","ts":"1532680806.000187","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bb35bac8-bacc-43f1-a61c-67e21a0aefcc","type":"message","user":"U03C6TEAZ","text":"! の時はこの読み込みがスキップされる。","ts":"1532680814.000148","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"57ad9768-d0ea-43a5-b3b9-a97fb856fe5b","type":"message","user":"U03C71D7H","text":"Vim 起動時には読み込んでます","ts":"1532680835.000329","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"41613b3b-8035-4dc4-a3d3-0b4695906a04","type":"message","user":"U03C6TEAZ","text":"write の前にも読み込んでるんじゃないかな(要確認)","ts":"1532680886.000072","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ba6b44cd-a1fe-4782-9846-f851c0f864b7","type":"message","user":"U03C71D7H","text":"読み込んでると思います","ts":"1532680899.000025","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"091fedfe-2e0f-401f-b938-68fd0aa58cb0","type":"message","user":"U03C6TEAZ","text":"その読み込みがスキップされるので、という事だと。","ts":"1532680916.000047","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8200b3c0-8120-4fd3-a0cf-62711d119999","type":"message","user":"U03C71D7H","text":"! 付きは、単に別で起動している Vim が .viminfo を更新していても、それを無視するよって話だと思います","ts":"1532680933.000197","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"27024d71-e460-4d98-95f6-d12b587968b1","type":"message","user":"U8996GYBF","text":"ん、試した感じ `:rviminfo | wviminfo!` しても消えそうですがどうでしょう","ts":"1532680950.000187","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dd79fd9b-14c5-4be5-a5b5-ce05ab2773bd","type":"message","user":"U03C6TEAZ","text":"oldfiles って結局はファイルマークなので、マークを持ってなかったら消えると思う。","ts":"1532680963.000092","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4f6001cc-b660-48f6-8aa9-b5dba4217d42","type":"message","user":"U03C6TEAZ","text":"! 付ける理由はあるんですっけ","ts":"1532680997.000228","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"badaf689-6501-4c35-bddb-29080486648e","type":"message","user":"U03C71D7H","text":"! 付けないと履歴が消せません","ts":"1532681012.000235","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f5715913-a514-4bfb-84e8-b1d1cf3eb623","type":"message","user":"U03C71D7H","text":"古いのを読んでマージしちゃうので","ts":"1532681020.000191","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e8f4bf23-3448-44f4-a935-e8248e390434","type":"message","user":"U03C6TEAZ","text":"あー、消したいのか。","ts":"1532681023.000169","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6b015b6f-5fac-48f6-a544-4a6648c083e0","type":"message","user":"U8996GYBF","text":"`histdel()` の結果の反映ですね、メモリからしか消えてくれないので・・・","ts":"1532681031.000197","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"d3b8ad35-ad6a-42c5-9b83-30b5a7d2d9a9","type":"message","user":"U03C71D7H","text":"履歴を部分的に消したいと言うのが最終的な要求","ts":"1532681042.000039","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"76a99d35-d20b-46e9-b5ae-c0e08a36f7c8","type":"message","user":"U03C6TEAZ","text":"delmark でやるとどうなります？","ts":"1532681065.000017","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b8d7c8cd-2a73-44f5-95d4-808bb7b88f5e","type":"message","user":"U03C6TEAZ","text":"あ、ヒストリを消したいのであってマークを消したいのじゃないか。","ts":"1532681087.000193","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fb290854-81ca-423b-bb31-62e94441d9b1","type":"message","user":"U03C6TEAZ","text":"やるなら別の識別にした方が良さそうな気がする。","ts":"1532681103.000020","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"75ad09e0-947c-49a1-8f72-dc68620ba855","type":"message","user":"U03C71D7H","text":"実際に消したいのはコマンドラインや検索の実行履歴ですかね","ts":"1532681114.000118","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ed9be2e5-307d-496d-9f53-978a92cccb37","type":"message","user":"U03C6TEAZ","text":"`wviminfo!!` とか `wviminfo!?` とか `wviminfo+` とか","ts":"1532681138.000019","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e799b7ef-78e8-4574-b8d2-eb60af7d1806","type":"message","user":"U03C71D7H","text":"実際これ消せないの不便だと思うんですよね。うっかりパスワードを検索した場合、.viminfo 丸ごと消さない限り永遠に残り続けると言うのが今の Vim の仕様ということなので","ts":"1532681168.000087","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a8d2a816-661e-43a2-bd08-aa96eb2ffee4","type":"message","user":"U03C6TEAZ","text":"どういう用途か分からないけど、古い履歴を消す目的で `wviminfo` の現状の動作になってるとすると壊せない。","ts":"1532681182.000152","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"71b650b9-4265-47a7-b64a-13b8436ac711","type":"message","user":"U03C71D7H","text":"g: 変数も消えちゃったんですよね?","ts":"1532681258.000095","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"65452171-13b1-468b-bc13-f9a923162f89","type":"message","user":"U03C71D7H","text":"ただ g: はデフォルトだとそもそも保存されないか。検証めんどいな","ts":"1532681337.000051","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"47d70bf4-4b01-432b-982f-95fd47525ed6","type":"message","user":"U8996GYBF","text":"あ、 `g;` で編集履歴のジャンプでした","ts":"1532681417.000270","edited":{"user":"U8996GYBF","ts":"1532681436.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"64d661c0-70ce-4519-9233-55ce5844d05a","type":"message","user":"U03C71D7H","text":"あ、そっちか。なるほど","ts":"1532681428.000023","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9b551ddd-b8a6-4ab3-bc40-c0ee02517253","type":"message","user":"U03C71D7H","text":"oldfiles の立ち位置がいまいちよくわかってない。これどういうデータなんだろ","ts":"1532681459.000287","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9449df6c-292b-4792-b2c5-4612170391a4","type":"message","user":"U03C6TEAZ","text":"`wviminfo!` の時は強制的に飛ばしてますね。","ts":"1532681576.000144","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","ts":"1532681584.000200","files":[{"id":"FBXFU935F","created":1532681584,"timestamp":1532681584,"name":"gistfile1.diff","title":"gistfile1.diff","mimetype":"text/plain","image_exif_rotation":0,"filetype":"diff","pretty_type":"Diff","user":"U03C6TEAZ","mode":"snippet","editable":true,"is_external":true,"external_type":"unknown","size":442,"url":"","url_download":"","url_private":"https://gist.github.com/e6addbf855fcc72573814b4b82760232#file-gistfile1-diff","url_private_download":"https://gist.github.com/e6addbf855fcc72573814b4b82760232#file-gistfile1-diff","original_h":0,"original_w":0,"thumb_64":"","thumb_80":"","thumb_160":"","thumb_360":"","thumb_360_gif":"","thumb_360_w":0,"thumb_360_h":0,"thumb_480":"","thumb_480_w":0,"thumb_480_h":0,"thumb_720":"","thumb_720_w":0,"thumb_720_h":0,"thumb_960":"","thumb_960_w":0,"thumb_960_h":0,"thumb_1024":"","thumb_1024_w":0,"thumb_1024_h":0,"permalink":"https://vim-jp.slack.com/files/U03C6TEAZ/FBXFU935F/gistfile1.diff","permalink_public":"","edit_link":"https://vim-jp.slack.com/files/U03C6TEAZ/FBXFU935F/gistfile1.diff/edit","preview":"","preview_highlight":"","lines":0,"lines_more":0,"is_public":true,"public_url_shared":false,"channels":null,"groups":null,"ims":null,"initial_comment":{},"comments_count":0,"num_stars":0,"is_starred":false,"shares":{"public":null,"private":null},"display_as_bot":false,"has_rich_preview":false,"username":""}],"replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"ddb1648e-7f8a-4872-9ede-e080da3bd6f7","type":"message","user":"U03C6TEAZ","text":"これで保存される。","ts":"1532681588.000029","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"eb6e53e5-28bf-448e-9c38-ccf2765d8e95","type":"message","user":"U03C71D7H","text":"むぅ。意図的かどうかが気になるところ","ts":"1532681599.000235","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cd938a7d-542b-4a58-866e-fc73a8b30ed7","type":"message","user":"U03C6TEAZ","text":"そうそう。","ts":"1532681604.000241","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cb99772f-e35a-475d-b3d7-2a64a10dc807","type":"message","user":"U03C6TEAZ","text":"説得できる物があれば提案します。","ts":"1532681644.000324","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dafb4843-7e0c-4ead-946a-e0e884508c9c","type":"message","user":"U8996GYBF","text":"ソースコード出てくるのすごい","ts":"1532681669.000027","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"<@U03C6TEAZ> pinned a message to this channel.","ts":"1532681670.000102","attachments":[{"fallback":"[July 27th, 2018 1:53 AM] mattn:  gistfile1.diff","author_id":"U03C6TEAZ","author_name":"mattn","author_subname":"mattn","author_link":"https://vim-jp.slack.com/team/U03C6TEAZ","author_icon":"https://avatars.slack-edge.com/2018-07-31/407982080133_30e238cd92e6c88883f9_48.png","mrkdwn_in":["text"],"blocks":null,"ts":1532681584.000200}],"subtype":"pinned_item","item_type":"C","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"6e5faca0-9d10-4e25-8a11-2a23740caf21","type":"message","user":"U03C6TEAZ","text":"逆にソースしか出て来ない説","ts":"1532681686.000217","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5e94300f-cd0b-4b2a-bc73-8f8354603663","type":"message","user":"U03C6TEAZ","text":"vim の場合、ドキュメントとか皆が思ってる動作ってあまり信用ならなかった過去があるので、ソースが正です。","ts":"1532681767.000165","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2861f3ca-8255-4ea1-a4f1-37541248931e","type":"message","user":"U03C6TEAZ","text":"これ仕事で言っちゃいけない奴だ","ts":"1532681787.000216","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"46716a75-7a14-4ac1-a89c-c8da36a0ff75","type":"message","user":"U03C71D7H","text":"長文書いて POST したら消えたんだけど。Slack さん?","ts":"1532681865.000327","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e0bab551-0031-4e79-b7f7-152adda405ae","type":"message","user":"U03C71D7H","text":"(長いと言っても2行くらい)","ts":"1532681888.000043","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"273f4ca3-2d53-47a2-ac83-d5cd86ceb7bb","type":"message","user":"U03C6TEAZ","text":"めっちゃ書いてるなーと思ったけど１行だった。","ts":"1532681895.000168","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c52f239f-a106-4ca8-a180-a50838e95a3a","type":"message","user":"U8996GYBF","text":"neovimの開発の流れをよく知らないんですが、そのあたりもドキュメントじゃなくて実際のvimの挙動に合わせてるってことですよね","ts":"1532682009.000422","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"06717a78-69e7-4234-8714-cd52bd6139df","type":"message","user":"U03C71D7H","text":"私の理解があっているかはわからないけど、 `:wviminfo!` は、通常行われる `:rviminfo` をスキップして書き込むためのもので、目的は別インスタンスの Vim が `.viminfo` を更新していた場合でもこれを無視するためのもの。\nそう考えた場合、 `:rviminfo | wviminfo!` を実行した場合は `.viminfo` の中身は欠落せずに全て残っているのが期待する動作。しかし現状はそのようになっていない","ts":"1532682062.000267","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"fa581770-5b81-4407-a285-518d192b2c01","type":"message","user":"U03C6TEAZ","text":"IMO から始まる文だ。","ts":"1532682128.000049","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e69c4db2-9de6-41e7-80b9-0f1c2588101c","type":"message","user":"U03C71D7H","text":"というのも私の理解、というより私が期待する動作かな。これがそもそも違ってるってパターンが、結構あるんですよね…ユーザー的にはこうなってて欲しいんだけど…","ts":"1532682183.000366","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"3bb5ea73-65de-4b74-af78-6e0c09921905","type":"message","user":"U03C6TEAZ","text":"vim あるある","ts":"1532682198.000048","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"10cf854e-0bed-496f-be7f-1dc76659093c","type":"message","user":"U8996GYBF","text":"別にwviminfo!が吹き飛ばすのでもいいんですが、吹き飛ばさないコマンド実装とドキュメントの修正だけしてくれると・・・","ts":"1532682213.000336","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4e66d647-9248-48b8-821f-66b59c8bd2ac","type":"message","user":"U03C6TEAZ","text":"例: `:0cquit`","ts":"1532682230.000321","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5d794fb3-570e-4a04-9c33-88974531544a","type":"message","user":"U03C71D7H","text":"もっと言うなら `histdel()` しても viminfo 保存前に rviminfo するから、消したのは復元されるよってのは、理屈としてはわかるんだけど正直ユーザーが期待する動作ではないと思ってます。仕様バグだと思う","ts":"1532682241.000116","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"caff6eee-51d2-4928-a8c6-e2fa7d8c9afc","type":"message","user":"U8996GYBF","text":"以前histdelについて相談させて貰ったときにIssueに書きましたねー <https://github.com/vim-jp/issues/issues/1144>","ts":"1532682300.000323","attachments":[{"fallback":"GitHub: histdel関数を実行後、vimを再起動するとhistoryが復元している · Issue #1144 · vim-jp/issues","id":1,"title":"histdel関数を実行後、vimを再起動するとhistoryが復元している · Issue #1144 · vim-jp/issues","title_link":"https://github.com/vim-jp/issues/issues/1144","text":"質問・報告の内容 call histdel(&amp;#39;:&amp;#39;) などでコマンドの履歴を削除してもvimを再起動した際に全ての履歴が復元されています。（histdelに第二引数を渡した場合も同様） viminfoのmergeが原因のようで、 :rviminfo :call histdel(&amp;#39;:&amp;#39;) :wviminfo! などとしてhistdelを呼んだあとに明示的にvim...","thumb_url":"https://avatars1.githubusercontent.com/u/5423775?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/vim-jp/issues/issues/1144","original_url":"https://github.com/vim-jp/issues/issues/1144"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5309484a-2038-4b1a-810b-2a9d5a3ed6f3","type":"message","user":"U03C6TEAZ","text":"ラズパイケースが届いてるらしく一刻も早く帰りたいので、あまり理解していないのだけど、純粋に `:wviminfo!` で oldfiles が漏れてる、というのだけでは弱い？","ts":"1532682306.000047","thread_ts":"1532682306.000047","reply_count":1,"replies":[{"user":"U06BRP8VD","ts":"1532685822.000272"}],"team":"T03C4RC8V","reactions":[{"name":"subara","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"61bc87e3-0b29-43ed-88fa-ce79f019dba5","type":"message","user":"U03C71D7H","text":"もし単に実装漏れであればそれでも通ると思います","ts":"1532682330.000032","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ce577e17-545e-4305-8d42-605bfaa84880","type":"message","user":"U8996GYBF","text":"編集履歴のマークも飛んでる気がするので、その辺り含め確認したいですね","ts":"1532682332.000013","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"61aec3ca-1f58-40ae-b731-dea792a7db2b","type":"message","user":"U03C71D7H","text":"後は本来の意図がどうか次第…","ts":"1532682338.000158","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"4db46687-2fab-4312-860a-3fc601eec57e","type":"message","user":"U8996GYBF","text":"`:histdel! {index}` みたいなのが欲しい","ts":"1532682379.000335","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"37684b4d-cc46-4f45-82ae-bcaf30ca2101","type":"message","user":"U03C71D7H","text":"viminfo 書き込む前に読み込むのは、複数の Vim で viminfo を更新しちゃってもいい感じにマージして履歴が消えないようにするぜ、便利だろって意図で実装されているはずで、消したいはずの履歴が復元されてしまうのは恐らく想定外の副作用のはず","ts":"1532682459.000260","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1605ec3e-3416-4891-b13f-4edaf08cf7c9","type":"message","user":"U03C71D7H","text":"ただこれじゃあどうすればいい感じに消えるように実装できるんだってのは正直かなりむずい…","ts":"1532682493.000114","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6a1346ec-0506-41c2-95ee-65cce332ee53","type":"message","user":"U8996GYBF","text":"削除したマークみたいな追加の実装が必要そう","ts":"1532682533.000313","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"75f01ce9-f3e8-41b5-90ef-cbecd38ba689","type":"message","user":"U03C6TEAZ","text":"ニーズ説明してなんで ! 使わないといけないのか説明文して oldfiles が漏れてるまで説明して、↑のパッチまで載せたら何かしらやってくれるはず。","ts":"1532682598.000083","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"67ad749d-ecce-4d3f-94e0-251c223bac27","type":"message","user":"U03C71D7H","text":"かなりの英語力を必要とされるやつ","ts":"1532682629.000094","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f802ef17-ed5e-4644-90ad-fc8d2f923bf0","type":"message","user":"U03C6TEAZ","text":"oldfiles を揮発させたいニーズってあるのかな。","ts":"1532682681.000302","edited":{"user":"U03C6TEAZ","ts":"1532682731.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5922b357-5798-4f4b-9518-52c8cb9d3bbd","type":"message","user":"U8996GYBF","text":"wviminfo!で雑に全部吹き飛ばしたいニーズって意味ですか？","ts":"1532682759.000146","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"134d5217-1505-4617-b360-f1216baeac10","type":"message","user":"U03C6TEAZ","text":" そっちは :oldfiles! とかでもよさそうだけど。","ts":"1532682785.000045","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"53eef3f1-4c94-4610-979f-147e601dc625","type":"message","user":"U03C71D7H","text":"やるとしたら保存時に勝手に吹き飛ぶのではなくて事前に削除したのを保存するのが正しそう","ts":"1532682803.000132","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"2860df4d-a3c7-4cb7-b3cd-55c4fe287615","type":"message","user":"U8996GYBF","text":"histdelで指定して飛ばすみたいなのがいいと思います","ts":"1532682826.000072","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"be84d10f-8022-464f-b16c-6803e689518e","type":"message","user":"U03C71D7H","text":"今の所 hist と oldfiles は関連がなかったと思うので、そこを関連付ける必要がありそう","ts":"1532682856.000044","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"642c71b1-8e3e-4e85-ab82-2ec3940e012b","type":"message","user":"U03C71D7H","text":"やるなら","ts":"1532682860.000089","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"01c80694-eb16-4e75-85af-ea958f4b9549","type":"message","user":"U8996GYBF","text":"viminfo と大体同じ体系で `v:oldfiles` を直接操作して `:woldfiles` みたいなのでよさそう？","ts":"1532682939.000270","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a49d0178-e7e5-43db-af32-604c3dd15a93","type":"message","user":"U03C6TEAZ","text":"ワークアラウンドとしては\n```\nlet old = v:oldfiles\ncall histdel(\":\", n)\nwviminfo!\nlet v:oldfiles += old\n```","ts":"1532683237.000265","edited":{"user":"U03C6TEAZ","ts":"1532683262.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"256496ae-2de8-4346-bc6a-1018580b411f","type":"message","user":"U03C6TEAZ","text":"とかで行けそう。","ts":"1532683241.000120","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"387303db-3315-4795-95ee-45dd0af6b132","type":"message","user":"U03C71D7H","text":"viminfo に保存されないので、Vim を再起動すると死亡","ts":"1532683271.000130","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"18967a14-cb08-4dba-a719-885485d3a209","type":"message","user":"U03C6TEAZ","text":"もっかい wviminfo?","ts":"1532683291.000040","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"35b03f54-841f-43f1-b287-0ffcb276c7e4","type":"message","user":"U03C71D7H","text":"それで行けそうかも","ts":"1532683311.000310","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f4be6002-d3c7-4876-b612-a487ff8026aa","type":"message","user":"U03C6TEAZ","text":"```\nlet old = v:oldfiles\ncall histdel(\":\", n)\nwviminfo!\nlet v:oldfiles += old\nwviminfo\n```","ts":"1532683334.000017","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bb9692a5-3dd8-44da-9e95-78b1bd47325a","type":"message","user":"U03C71D7H","text":"v:oldfiles は保存しても意味ないかな","ts":"1532683338.000035","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"99a4d51a-c4ce-4f14-b793-03363af92c4f","type":"message","user":"U03C71D7H","text":":h v:oldfiles","ts":"1532683341.000289","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U894RTUJY","text":"```\n                                        *v:oldfiles* *oldfiles-variable*\nv:oldfiles      起動時に |viminfo| から読み込まれたファイルの名前のリスト。\n                これらはマークを記憶しているファイルである。リストの長さの上限\n                はオプション 'viminfo' の引数 ' によって決まる(既定では 100)。\n                |viminfo| ファイルが使われていない時、リストは空となる。\n                |:oldfiles| と |c_#&lt;| を参照。\n                このリストは変更可能であるが、後で |viminfo| ファイルに書き込ま\n                れるものには影響しない。文字列以外の値を使うと問題を引き起こす\n                だろう。\n                {|+viminfo| 機能つきでコンパイルされたときのみ有効}\n```","ts":"1532683342.000073","bot_id":"B894RTUCU","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"ba29ff30-e571-42f5-9eb5-b09002e4b9ac","type":"message","user":"U03C71D7H","text":"`:wviminfo!` すると、 `.viminfo` の中の oldfiles は消えるけど、 `:oldfiles` や `v:oldfiles` の内容はそのまま残ってる。この状態で `:wviminfo` しても、 `.viminfo` 内の oldfiles は復活しない","ts":"1532683491.000193","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f4177230-be7e-4d2a-8a62-6021021be7f2","type":"message","user":"U8996GYBF","text":"`:wviminfo!` しても終了するまでは残ってますよね、終了したらメモリから破棄される印象です","ts":"1532683567.000029","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6110f218-79c1-439b-939d-6f3e0fc7c276","type":"message","user":"U03C6TEAZ","text":"なるほど。","ts":"1532683656.000334","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"586f7f9a-9877-4658-adee-4af3f6c4e820","type":"message","user":"U06BRP8VD","text":"僕はジューサーが届いているはず。","ts":"1532685822.000272","thread_ts":"1532682306.000047","parent_user_id":"U03C6TEAZ","team":"T03C4RC8V","reactions":[{"name":"subara","count":1,"users":["U03C6TEAZ"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
