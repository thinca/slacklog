[{"type":"message","user":"U6XP9LZ6V","text":"fmfm, 古いSolarisとかHPUXだと `unsetenv()` が無いのか。","ts":"1525158147.000235","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"`unsetenv()` ない場合には無視するか、エラーにするかくらいしか選択肢がなさそう。あとは使う側が `unlet $` 使えるかどうか調べられるように `exist()` あたりになにか仕込むのかな。","ts":"1525158390.000194","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"やるかー、という心意気","ts":"1525159449.000043","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"<https://github.com/vim/vim/pull/2855>","ts":"1525159450.000134","attachments":[{"fallback":"GitHub: [WIP] add implementation of unlet $FOO by mattn · Pull Request #2855 · vim/vim","id":1,"title":"[WIP] add implementation of unlet $FOO by mattn · Pull Request #2855 · vim/vim","title_link":"https://github.com/vim/vim/pull/2855","text":"OS compatibility Error handling on some OS which doesn't work unsetenv. Add tests closes #1116","thumb_url":"https://avatars1.githubusercontent.com/u/10111?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/vim/vim/pull/2855","original_url":"https://github.com/vim/vim/pull/2855"}],"team":"T03C4RC8V","reactions":[{"name":"subara","count":1,"users":["U0M7GCBPD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U0M7GCBPD","text":"ですね、+1 しときました (Bram は reaction 全く見てなさそうだけど)","ts":"1525159500.000074","attachments":[{"color":"D0D0D0","fallback":"[May 1st, 2018 3:53 PM] raa0121: #1116 の方でやるんじゃないですかね","author_id":"U06ECBRTJ","author_name":"raa0121","author_subname":"raa0121","author_link":"https://vim-jp.slack.com/team/U06ECBRTJ","author_icon":"https://secure.gravatar.com/avatar/35b032d7b2d4182b0c2de1ef85ba91f2.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0012-48.png","text":"#1116 の方でやるんじゃないですかね","mrkdwn_in":["text"],"blocks":null,"footer":"Posted in #random","ts":1525157598.000002,"from_url":"https://vim-jp.slack.com/archives/C03C4RC9F/p1525157598000002"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U0M7GCBPD","text":"期待","ts":"1525159519.000137","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"もうしょうじき CI 動かない OS は対象外にしたい。","ts":"1525159542.000019","team":"T03C4RC8V","reactions":[{"name":"tashikani","count":5,"users":["U06ECBRTJ","U7D5LRRQD","U06BRP8VD","U8CC7MDCL","U0M7GCBPD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06ECBRTJ","text":"AROS 1.5.1 の VirtualBox 向けイメージがあったので、落としてみるか…？","ts":"1525159989.000059","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"`unsetenv()` が無い場合には、無視か、エラーか、あるいは空にセットするか。（暗黙的に動作するのはあまり良くないか？）","ts":"1525160290.000186","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"FreeBSD、Linux は unsetenv、Windows は putenv(\"FOOBAR=\")","ts":"1525160685.000063","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"他が分からん","ts":"1525160689.000222","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"OS X も unsetenv ぽい","ts":"1525160863.000021","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U6XP9LZ6V","text":"autoconfでunsetenvが使えるかチェックするのがまっとうなやり方ですかね。","ts":"1525161302.000146","team":"T03C4RC8V","reactions":[{"name":"+1","count":2,"users":["U06BRP8VD","U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"db98af9e-d87a-43ac-b4c4-27a95ab5dd91","type":"message","user":"U03C71D7H","text":"8.0.1782 便利そう","ts":"1525183371.000021","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"c4a4ab1e-46f0-44ac-8ada-63b9cf003ed6","type":"message","user":"U03C71D7H","text":"quickfix のアイテムに filename とは別に表示にのみ使われる module って項目が増えた","ts":"1525183419.000221","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U78A6ESHM","text":"おーーそれは便利だ。","ts":"1525184358.000386","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"マイナスの場合の考慮が抜けていたことに気付いたnow","ts":"1525100783.000391","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"<https://github.com/heavenshell/vim-jikoku/pull/2>","ts":"1525102282.000785","attachments":[{"fallback":"GitHub: support minus offset by mattn · Pull Request #2 · heavenshell/vim-jikoku","id":1,"title":"support minus offset by mattn · Pull Request #2 · heavenshell/vim-jikoku","title_link":"https://github.com/heavenshell/vim-jikoku/pull/2","text":"handle minus timezone offset (ex $TZ=EST)","thumb_url":"https://avatars1.githubusercontent.com/u/10111?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/heavenshell/vim-jikoku/pull/2","original_url":"https://github.com/heavenshell/vim-jikoku/pull/2"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"マイナスの場合の対応","ts":"1525102286.000505","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"$TZ=EST とかだと -5 になるので、1969 だった場合に引く処理追加。","ts":"1525102315.000370","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"<https://github.com/vim-jp/vital.vim/pull/578>","ts":"1525102904.000133","attachments":[{"fallback":"GitHub: Datetime: use strftime('%c', 0) on Windows by mattn · Pull Request #578 · vim-jp/vital.vim","id":1,"title":"Datetime: use strftime('%c', 0) on Windows by mattn · Pull Request #578 · vim-jp/vital.vim","title_link":"https://github.com/vim-jp/vital.vim/pull/578","text":"Current implementation on Windows use Windows registory since %z on Windows return &amp;#39;東京 (標準時)&amp;#39;. But it is bit slow. strftime(&amp;#39;%c&amp;#39;, 0) must be epoch based on 1970/1/1 0:0:0, so hours ...","thumb_url":"https://avatars1.githubusercontent.com/u/10111?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/vim-jp/vital.vim/pull/578","original_url":"https://github.com/vim-jp/vital.vim/pull/578"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"`echo vital#of('vital').import('DateTime').now().timezone().offset_string()` が `+0900` を返す修正(以前と同じはず？)を入れただけなのにテストが通らないというアレ。","ts":"1525104040.000071","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"ん？ Windows で master でも通らないぞw","ts":"1525104244.000452","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"38272CA2-EA09-493F-833C-1B524409CF3B","type":"message","user":"U78A6ESHM","text":"ありがとうございます！！明日診て入れます！","ts":"1525105277.000663","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"すみませんすみません。","ts":"1525105299.000497","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U0M7GCBPD","text":"<@U06BRP8VD> いつも遅くなってすみません :cat-dogeza-mike: vim magazine 新機能追加しました (がいくつか分からないコミットがあったのでコメントしました)\n<https://github.com/vim-jp/vim-jp.github.io/pull/286>","ts":"1525105677.000217","thread_ts":"1525105677.000217","reply_count":1,"replies":[{"user":"U06BRP8VD","ts":"1525145576.000078"}],"team":"T03C4RC8V","reactions":[{"name":"cat-dogeza-mike","count":2,"users":["U06BRP8VD","U9S4G0LJW"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U0M7GCBPD","text":"AppVeyor のタイムゾーンってどこなんだろう\nCI で他 TZ のテストができて :benri:","ts":"1525105930.000155","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U0M7GCBPD","text":"詳しい挙動は追ってないけど 8.0.1767 の変更で incsearch で見てる位置が上下しないようになったらしくて、確かになんかそんな気がする (気がするだけ)","ts":"1525109428.000687","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U0M7GCBPD","text":"あと `termkey` オプションが `termwinkey` になったりしてるの地味に設定してる人いそう","ts":"1525109516.000184","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06ECBRTJ","text":"```\nError detected while processing function &lt;SNR&gt;210_tz:\nline    2:\nE684: list index out of range: 1\nE15: Invalid expression: item[0] * 60 * 60 + item[1] * 60\n```","ts":"1525144111.000128","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06ECBRTJ","text":"んー","ts":"1525144113.000117","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"最新を pull って貰えますか","ts":"1525144153.000139","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U78A6ESHM","text":"```\nfunction jikoku#run[8]..&lt;SNR&gt;174_utc の処理中にエラーが検出されました:\n行    3:\nE684: リストのインデックスが範囲外です: 0\nE15: 無効な式です: hms[0] * 60 * 60 + hms[1] * 60\n行    5:\nE121: 未定義の変数です: tz_sec\nE15: 無効な式です: 60 * 60 * 24 - tz_sec\n行    7:\nE121: 未定義の変数です: tz_sec\nE15: 無効な式です: a:time - tz_sec\n```\nあとで見よう…。","ts":"1525144487.000144","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"お... すいません","ts":"1525144643.000119","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U78A6ESHM","text":"いえいえー","ts":"1525144728.000055","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"たぶんこれで直ったと思います。 &gt;&lt;","ts":"1525145067.000149","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06ECBRTJ","text":"```\nfunction! s:utc(time)\n  let hm = map(split(strftime('%H %M', 0), ' '), 'str2nr(v:val)')\n  if str2nr(strftime('%Y', 0)) != 1970\n    let tz_sec = 60*60*24 - hm[0] * 60*60 - hm[1] * 60\n  else\n    let tz_sec = hm[0] * 60*60 + hm[1] * 60\n  endif\n  return a:time - tz_sec\nendfunction\necho s:utc(localtime())\n```","ts":"1525145446.000064","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06ECBRTJ","text":"とりあえず、これは動きました","ts":"1525145451.000161","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"最新の PR がそれとまったく同じになってるはず。","ts":"1525145548.000121","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"こちらこそもうしわけない &amp; ありがとうございます。いまから最終編集作業に入ります。","ts":"1525145576.000078","thread_ts":"1525105677.000217","edited":{"user":"U06BRP8VD","ts":"1525145609.000000"},"parent_user_id":"U0M7GCBPD","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"vital の方、テスト足したいけど vim が unlet $TZ 出来ないのでつらい。","ts":"1525150840.000200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"やはり環境変数を unlet する方法が必要","ts":"1525150881.000207","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"`export TZ=EST` すると -5 なんですが `let $TZ = ''` はオフセット 0 の意味になってしまう。","ts":"1525151963.000022","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"その仕様もどうかなと思わなくもない。","ts":"1525151975.000079","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"TZ そういう感じなの…怖い","ts":"1525152007.000128","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"TZ 自体の仕様の問題なのか TZ を参照しているプログラムが何かおかしいのか","ts":"1525152040.000156","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"localtime() って関数の動作なのでほぼ OS ですね。","ts":"1525152260.000127","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"うは","ts":"1525152277.000035","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"しかしこれ逆に言うと環境変数を unlet する必要性の材料にはなりそう","ts":"1525152296.000089","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"エビデンスです。ご査収下さい。\n\n<https://go-gyazo.appspot.com/771425bfc0f07c29.png>","ts":"1525152301.000091","edited":{"user":"U03C6TEAZ","ts":"1525152516.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"確か以前 Bram さん、環境変数を空にすればいいしそれで誤動作するのはプログラムが悪いみたいなことを言っていた気がしないでもない (曖昧な記憶)","ts":"1525152365.000176","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"Windows は空の環境変数が設定できない(設定すると unset)のでその理屈は通りそう。","ts":"1525152396.000075","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"TZ がこの動作だとプログラムが悪いとは言ってられなくなる感じはする","ts":"1525152440.000122","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"プログラムと言うかここで言ってるのはユーザーランドで動くソフトになるかな","ts":"1525152493.000021","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"幾つかの OS だと API が無いんですよねー。","ts":"1525152534.000114","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"Amiga とか無かった気がする。(無かったのか見つけられなかったのか覚えてない)","ts":"1525152553.000176","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"まずそもそも実装がむずいと言うアレかー","ts":"1525152561.000080","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"`$:` で dict を返してくれー","ts":"1525152581.000040","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"最悪見つからない環境では空を設定する実装にすれば…","ts":"1525152586.000066","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"辞書ほしいのわかる。環境変数一覧とか取れないのよね。今の所必要になったことあまりないけど","ts":"1525152609.000159","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"system('env') みたいなのでお茶を濁すことに (そして Windows で(ry","ts":"1525152636.000030","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U78A6ESHM","text":"つらみ","ts":"1525152681.000118","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06ECBRTJ","text":"windows だと set がありますねぇ","ts":"1525152762.000140","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06ECBRTJ","text":"env と set はほぼ同じ形式で返してくれるのか 便利","ts":"1525152838.000090","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"ただし set の方法が同じでないというアレ","ts":"1525152875.000096","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"空白を含む値の場合、UNIX shell では `export FOO=\"foo bar\"`","ts":"1525152899.000092","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"Windows だと `set \"FOO=foo bar\"`","ts":"1525152908.000134","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"こ　れ　は　ひ　ど　い","ts":"1525152918.000010","team":"T03C4RC8V","reactions":[{"name":"totemoturai","count":2,"users":["U06ECBRTJ","U8CC7MDCL"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"存在している環境変数の一覧の取得が目的ならそこは問題にならなさそう","ts":"1525152969.000062","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"しかし環境変数の値に改行が入っていると死亡","ts":"1525152980.000067","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06ECBRTJ","text":"```\nC:\\WINDOWS&gt;set FOO=\"hoge huga\"\nC:\\WINDOWS&gt;echo %FOO%\n\"hoge huga\"\n\nC:\\WINDOWS&gt;set \"FOO=hoge huga\"\nC:\\WINDOWS&gt;echo %FOO%\nhoge huga\n```","ts":"1525152981.000171","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06ECBRTJ","text":"なるほど、確かに","ts":"1525152986.000037","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"`-0` オプションがあったのでこれを使えば…","ts":"1525153110.000119","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"どれの話だろう","ts":"1525153240.000002","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"`env -0`","ts":"1525153250.000119","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"改行を NULL 文字にするやつか","ts":"1525153302.000020","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"です","ts":"1525153311.000056","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"環境変数の値に改行含まれてる場合にいる奴すね","ts":"1525153320.000132","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"ですねー","ts":"1525153328.000047","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"この場合 Vim から呼ぶには `systemlist()` を使う必要があるわけだけど `systemlist('env -0')`","ts":"1525153414.000156","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"結果は改行区切りの配列で返ってくる。各要素内の NUL 文字は改行文字になってる。パースがしんどいw","ts":"1525153458.000040","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"思い立ったが吉日","ts":"1525153777.000072","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"<https://github.com/vim/vim/issues/2854>","ts":"1525153779.000040","attachments":[{"fallback":"GitHub: [RFC] unset environment variable · Issue #2854 · vim/vim","id":1,"title":"[RFC] unset environment variable · Issue #2854 · vim/vim","title_link":"https://github.com/vim/vim/issues/2854","text":"In current implementation, vim doesn&amp;#39;t have a way to unset environment variable. Most of programs works well with empty value as same as no-set variable. But for example, TZ variable $ TZ=EST d...","thumb_url":"https://avatars1.githubusercontent.com/u/10111?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":250,"thumb_height":250,"from_url":"https://github.com/vim/vim/issues/2854","original_url":"https://github.com/vim/vim/issues/2854"}],"team":"T03C4RC8V","reactions":[{"name":"sokudo","count":4,"users":["U03C71D7H","U06ECBRTJ","U8CC7MDCL","U0M7GCBPD"]},{"name":"69b9bbe795f19442","count":2,"users":["U06ECBRTJ","U78A6ESHM"]},{"name":"shinchoku","count":1,"users":["U03C71D7H"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"`unlet $ FOO` $ の後ろのスペース気になる","ts":"1525153861.000120","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":":+1: した","ts":"1525153896.000168","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"まえまえから要るって話は出てたんですよねー。","ts":"1525154080.000032","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"実際以前どこかで議論してたの見た気がする","ts":"1525154119.000078","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1384e417-6c9d-46db-8f9a-be6685566da1","type":"message","user":"U6XP9LZ6V","text":"todo.txtには載ってたはずだし、vim_devでは何回か議論があったはずだけど、issuesにはありませんでしたっけ？覚えておらず。","ts":"1525154535.000023","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"<https://github.com/vim/vim/issues/1116> あった","ts":"1525154657.000007","attachments":[{"fallback":"GitHub: `:unlet $FOOBAR` · Issue #1116 · vim/vim","id":1,"title":"`:unlet $FOOBAR` · Issue #1116 · vim/vim","title_link":"https://github.com/vim/vim/issues/1116","text":"When an environment variable isn&amp;#39;t set, exists() return false. We can assign a value to the variable with :let, after which point it exists. But we can&amp;#39;t revert to an non-existent state (re...","thumb_url":"https://avatars2.githubusercontent.com/u/501871?s=400&v=4","blocks":null,"service_name":"GitHub","service_icon":"https://a.slack-edge.com/bfaba/img/unfurl_icons/github.png","thumb_width":120,"thumb_height":120,"from_url":"https://github.com/vim/vim/issues/1116","original_url":"https://github.com/vim/vim/issues/1116"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"歴史は繰り返される","ts":"1525154701.000227","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"結局 unset できない環境どうすんのってところで止まってるのかな。できないもんはしょうがないし空を設定するようにするでもいい気がしている","ts":"1525154741.000418","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U6XP9LZ6V"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"unset できない環境って…Win?","ts":"1525154905.000140","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"dup だと言われる前に自分で dup だというスタイル","ts":"1525154906.000038","team":"T03C4RC8V","reactions":[{"name":"+1","count":1,"users":["U06BRP8VD"]}],"replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"Windows 以外全部","ts":"1525154919.000157","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"Windows は空文字入れると unset","ts":"1525154931.000044","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"これは OS の動作","ts":"1525154941.000191","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"うへ。Win以外はunsetできないの?","ts":"1525155675.000130","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f3881af2-9e97-4077-a068-b89da9f55c98","type":"message","user":"U03C6TEAZ","text":"です。","ts":"1525155724.000044","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"FreeBSD だと man ~2~ 3 に unsetenv() あるな。なんか僕が話の流れを勘違いしていそう。","ts":"1525155758.000081","edited":{"user":"U06BRP8VD","ts":"1525155784.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e32b795b-8f7f-435f-a1b4-61c1562c0fb9","type":"message","user":"U03C6TEAZ","text":"以前やろうと思ったけど amiga と vms がわからんかった。","ts":"1525155776.000152","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06BRP8VD","text":"amigaってまだ動作対象だっけ?","ts":"1525155805.000014","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"1f614436-fbec-407c-8a6d-8df9f602ac3c","type":"message","user":"U03C6TEAZ","text":"やる方法はあるけど bram が要らんやろというところで話が止まってる。","ts":"1525155836.000005","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C71D7H","text":"mattn さんが Windows 以外全部と言ってるのは Vim から unset できないと言う話でシステムとしては別の話","ts":"1525156926.000130","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"はい。単に未実装って話です。","ts":"1525157133.000219","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U03C6TEAZ","text":"<https://www.greenend.org.uk/rjk/tech/putenv.html>","ts":"1525157185.000197","attachments":[{"fallback":"putenv() and setenv()","id":1,"title":"putenv() and setenv()","title_link":"https://www.greenend.org.uk/rjk/tech/putenv.html","text":"Notes Modifying The Environment","blocks":null,"service_name":"greenend.org.uk","service_icon":"https://www.greenend.org.uk/favicon.ico","from_url":"https://www.greenend.org.uk/rjk/tech/putenv.html","original_url":"https://www.greenend.org.uk/rjk/tech/putenv.html"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U0M7GCBPD","text":"issue、duplicate ってことで即閉じられてしまった…","ts":"1525157468.000006","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06ECBRTJ","text":"#1116 の方でやるんじゃないですかね","ts":"1525157598.000002","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"U06ECBRTJ","text":"これっすね","ts":"1525157610.000117","attachments":[{"color":"D0D0D0","fallback":"[May 1st, 2018 3:04 PM] thinca: <https://github.com/vim/vim/issues/1116> あった","author_id":"U03C71D7H","author_name":"thinca","author_subname":"thinca","author_link":"https://vim-jp.slack.com/team/U03C71D7H","author_icon":"https://avatars.slack-edge.com/2015-01-15/3417067010_04a676b32692fb2507e1_48.jpg","text":"<https://github.com/vim/vim/issues/1116> あった","mrkdwn_in":["text"],"blocks":null,"footer":"Posted in #random","ts":1525154657.000007,"from_url":"https://vim-jp.slack.com/archives/C03C4RC9F/p1525154657000007"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":null,"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
