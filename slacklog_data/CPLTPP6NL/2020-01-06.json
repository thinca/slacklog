[{"client_msg_id":"cf0eb5f1-a111-4812-b1a2-e01a8b5d4857","type":"message","user":"UB88NP1PY","text":"基本的な話で、Windows -&gt; mintty -&gt; SSH to Linux -&gt; tmux -&gt; Vim の状態で使っているときの `$TERM`  `'term'` の値なんですが、mintty だから xterm にするのが正しいという理解であっていますか？\n途中何を挟もうが最終的な端末の値を設定するのが正しいですよね？","ts":"1578305132.049300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"eB=s"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"db7c404a-2906-4549-9c4e-bc3dbb731e14","type":"message","user":"U03C6TEAZ","text":"今は知らないですが、昔は tmux は背景色で端末の一部を消す bce というコードが対応できてなくて","ts":"1578306408.050900","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"C+nJd"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"dfdea5e4-5736-4b65-b09d-d9a92709f9c8","type":"message","user":"U03C6TEAZ","text":"それを補うのに screen-256color を default-terminal に設定する、みたいな事をやってた(ユーザが)事はありましたね。","ts":"1578306437.051700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"QsCWz"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"849939e6-2df4-4c6b-807d-27a69b964af4","type":"message","user":"UG6DF6W87","text":"tmux の中では $TERM は tmux-256color にしてます","ts":"1578306630.053100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"+S/G"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"f7bcc199-0758-4f01-beea-c374052ea4de","type":"message","user":"UG6DF6W87","text":"Vim が端末の制御コードを投げるのは tmux なので terminfo もそれを見るべき、と解釈してました","ts":"1578306790.056300","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"m2u"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b38b3e79-4931-4089-b7e9-9348e1d5bb9f","type":"message","user":"UB88NP1PY","text":"あれ、なんだかよく分からなくなってきたかも。。\n最終的？に制御コードを処理するのは端末だと思ったので、`'term'` の値もそれに合わせるべきなのかと思ったのですが。\ntmux-256color にしてたんですけど、`shift + F11` とかの挙動がおかしくなったんで何か間違ってるのかなと。","ts":"1578307623.063100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"4kGBg"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"32664be8-0229-418b-a824-f3bb7988b2da","type":"message","user":"U03C6TEAZ","text":"vim が出力する端末コードは一度 tmux が食います。","ts":"1578307694.063400","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"w4y"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"a153e640-cca4-4984-9505-04366200d3c7","type":"message","user":"U03C6TEAZ","text":"例えば縦分割した tmux の右側で vim が動く場合、tmux は pty 内で実行した vim の端末出力に X オフセットを足して ssh もしくは mintty に送り返します。","ts":"1578307781.064400","edited":{"user":"U03C6TEAZ","ts":"1578307830.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"SLv"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cafbfd1a-09ea-4523-9caa-534a9d400bc0","type":"message","user":"U03C6TEAZ","text":"縦分割だけでなく、必要な端末制御が行われるので vim の出力がそのまま mintty には届きません。","ts":"1578307808.065000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"wJed"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"bd50f138-ed75-4ed4-8fd5-4a7c064ca4e3","type":"message","user":"UB88NP1PY","text":"あー、なるほど。。なんとなく。。","ts":"1578308031.065500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"qVX1"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"26f5c4ff-35cb-49c5-ae95-119a4b31b0b5","type":"message","user":"U03C71D7H","text":"Sixel も tmux が適切に外側の端末に流してくれないと見れない","ts":"1578308275.066000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"r2F"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"cc0058bd-a301-48a9-aeda-84ff09672fdc","type":"message","user":"UB88NP1PY","text":"うーん、ということは使っている環境によって、これを設定しておけば間違いないってものはないのかな。","ts":"1578308358.066800","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"z+c"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"b32f86fd-e601-40a5-bc3d-9e3fc7798f99","type":"message","user":"UB88NP1PY","text":"ちなみになんですが、Vim 側で、自分が tmux 上で動いているか確認する方法ってありますか？","ts":"1578308402.067600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"lazr"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e3da44e1-7c93-4fb8-a265-448bc5864833","type":"message","user":"UB88NP1PY","text":"こんな感じのことがやりたかったんですが。\n<https://qiita.com/m_nish/items/f6e5f875c2d0954a6630#vimrc>","ts":"1578308433.068000","attachments":[{"fallback":"Qiita: mintty + tmux + Vim の環境で、insert mode 終了時に IME を off にする - Qiita","id":1,"title":"mintty + tmux + Vim の環境で、insert mode 終了時に IME を off にする - Qiita","title_link":"https://qiita.com/m_nish/items/f6e5f875c2d0954a6630#vimrc","text":"# 自分の環境 Windows -&gt; mintty -&gt; SSH -&gt; tmux -&gt; Vim # vimrc ```vim if &amp;term =~ &amp;#39;tmux&amp;#39; let &amp...","image_url":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Fogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-1.2.2&w=1200&mark=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D380%26txt%3Dmintty%2520%252B%2520tmux%2520%252B%2520Vim%2520%25E3%2581%25AE%25E7%2592%25B0%25E5%25A2%2583%25E3%2581%25A7%25E3%2580%2581insert%2520mode%2520%25E7%25B5%2582%25E4%25BA%2586%25E6%2599%2582%25E3%2581%25AB%2520IME%2520%25E3%2582%2592%2520off%2520%25E3%2581%25AB%25E3%2581%2599%25E3%2582%258B%26txt-color%3D%2523333%26txt-font%3DAvenir-Black%26txt-size%3D54%26txt-clip%3Dellipsis%26txt-align%3Dcenter%252Cmiddle%26s%3D356a43d683404e0f3410c382a4c73221&mark-align=center%2Cmiddle&blend=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D500%26txt%3D%2540m_nish%26txt-color%3D%2523333%26txt-font%3DAvenir-Black%26txt-size%3D45%26txt-align%3Dright%252Cbottom%26s%3D8c892d4387420b7c4c786337a6d60c09&blend-align=center%2Cmiddle&blend-mode=normal&s=53a7d0a285234fe7a57aa58d840f4130","blocks":null,"service_name":"Qiita","service_icon":"https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png","from_url":"https://qiita.com/m_nish/items/f6e5f875c2d0954a6630#vimrc","original_url":"https://qiita.com/m_nish/items/f6e5f875c2d0954a6630#vimrc"}],"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"sS0"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6bf6b97b-118e-481e-92af-d5f23e4c66b2","type":"message","user":"U03C6TEAZ","text":"tmux のソース見てないのであてずっぽですが、tmux は結構厳密なコードのチェックが入ってるので、消されてる可能性があります。例えば sixel なんかも thinca さんの言った通り消されてます。","ts":"1578308666.071700","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"9HS"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"8329595a-6b14-4a46-ad60-ce4f3100702e","type":"message","user":"U03C6TEAZ","text":"tmux 3 から通す様にしてくれたので sixel は ok になったらしいですが。","ts":"1578308719.073100","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"gxJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"5e55b2a0-9777-45f6-b464-1ce96a9f1aac","type":"message","user":"U03C71D7H","text":"Vim 側からは $TMUX_PANE 環境変数があるかどうかを見ればわかります","ts":"1578308723.073200","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"AeV"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"951637da-c821-4e39-9855-7669a0d33412","type":"message","user":"U03C71D7H","text":"お、3 の時点でもう通してくれる?","ts":"1578308740.073500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Xlw"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"e3b74169-0f7a-4800-ba30-6ae5b3a8820f","type":"message","user":"U03C6TEAZ","text":"と聞いたけどガセかも。","ts":"1578308760.074000","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"u2U"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"33f44f67-4830-4747-9364-b8263b8e3343","type":"message","user":"U03C71D7H","text":"3 がリリースした直後くらいに sixel ブランチが作られたという話を聞いた気がする","ts":"1578308780.074500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"Yu1F"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"9774ae25-1585-411d-8f1d-f893d47a8b72","type":"message","user":"UB88NP1PY","text":"あ、$TMUX_PANE で確認できそうですね。どうもありがとうございます。\nもっと基礎のところを押さえないといけない気がする。。`'term'` の値によって `:set termcap` の値が変わるのも、雰囲気でしか理解できていない。。","ts":"1578309858.076500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"YFDUJ"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"type":"message","user":"USBSHPXFH","text":"<@USBSHPXFH> has joined the channel","ts":"1578270388.045000","subtype":"channel_join","replace_original":false,"delete_original":false,"blocks":null},{"client_msg_id":"80939cbe-660c-4ae7-9c9a-e4b47a364135","type":"message","user":"UG6DF6W87","text":"mouse 有効な tmux で右クリックしたらメニューが表われてびっくりした...","ts":"1578288052.045600","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"710a"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"ea1e98b4-2c45-4a05-a566-37774cd40ceb","type":"message","user":"UEB17JJJE","text":"実装でとしてはこれで書いてるscriptですね\n<https://vim-jp.slack.com/archives/CPLTPP6NL/p1577603069009800>","ts":"1578288527.045900","attachments":[{"fallback":"[December 28th, 2019 11:04 PM] h.hata.ai.t: display-menuで近いことができますよ","id":1,"author_id":"UEB17JJJE","author_name":"Hirokazu Hata","author_subname":"Hirokazu Hata","author_link":"https://vim-jp.slack.com/team/UEB17JJJE","author_icon":"https://secure.gravatar.com/avatar/c83c988365a0fabc4c83cdb600268d59.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0014-48.png","text":"display-menuで近いことができますよ","mrkdwn_in":["text"],"blocks":null,"footer":"Posted in #tmux","ts":1577603069.009800,"from_url":"https://vim-jp.slack.com/archives/CPLTPP6NL/p1577603069009800","original_url":"https://vim-jp.slack.com/archives/CPLTPP6NL/p1577603069009800"}],"edited":{"user":"UEB17JJJE","ts":"1578288538.000000"},"team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"=+6q"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"},{"client_msg_id":"6639b273-b314-4873-8181-a9abfd5ffab6","type":"message","user":"UG6DF6W87","text":"おーなるほど、これが噂の...","ts":"1578290943.046500","team":"T03C4RC8V","replace_original":false,"delete_original":false,"blocks":[{"type":"rich_text","block_id":"XmvbT"}],"source_team":"T03C4RC8V","user_team":"T03C4RC8V"}]
