<!doctype html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="robots" content="noindex, nofollow">
<title>vim-jp &raquo; vim-jp.slack.com log - &#35;tech-git - 2020Âπ¥09Êúà</title>
<link rel="stylesheet" href="/slacklog/assets/css/site.css" type="text/css" />
<link rel="stylesheet" href="https://unpkg.com/@primer/css/dist/primer.css" type="text/css" />
<link rel="stylesheet" href="https://unpkg.com/prismjs@1.20.0/themes/prism-tomorrow.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="//vim-jp.org/rss.xml" />
<link rel="canonical" href="/slacklog/C011V4T7VJP/2020/09/" />
<link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicon.ico" />
<link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js"></script>
<script src="https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js"></script>
<script src="/slacklog/assets/javascripts/slacklog.js"></script>
</head>
<body>
  <div class="body">
    <div id="content">
      <!-- header -->
      <div class="pagehead ml-3">
        <h1>
          <span class="author">
            <a href="//vim-jp.org" class="url fn" >vim-jp</a>
          </span>
          <span class="path-divider">/</span>
          <a href="/slacklog">slacklog</a>
        </h1>
      </div>
      <!-- /header -->
      <div>
        <div class="m-3">
          <nav aria-label="Breadcrumb">
            <ol>
              <li class="breadcrumb-item f4"><a href="/slacklog/C011V4T7VJP/">&#35;tech-git</a></li>
              <li class="breadcrumb-item f4" aria-current="page">2020Âπ¥09Êúà</li>
            </ol>
          </nav>
          <h4 class="text-gray pb-2 border-bottom"></h4>
        </div>
        <div class="clearfix m-3" id="ts-1599003040.000900">
          <div class="border-bottom">
            <div class="float-left mr-2">
              <img class="avatar" width="36" height="36" src="https://avatars.slack-edge.com/2019-06-23/667212021009_557c3073c5b377011dbb_48.png" />
            </div>
            <div>
              <span class="text-bold mr-1">„Ç¥„É™„É©(„Éê„Éä„ÉäÊé¢„Åó„Å¶„ÅÑ„Çã)</span>
              <a href="#ts-1599003040.000900">2Êó• 08:30:40</a>
              <span class="Label Label--outline">
                <a href="https://vim-jp.slack.com/archives/C011V4T7VJP/p1599003040000900" target="_blank" rel="noopener noreferrer">Slack</a>
              </span>
            </div>
            <div class="overflow-hidden mb-3">
              <div class="pt-1 pb-1">
                @kuu „ÅÆ„Çπ„ÇØ„É™„Éó„Éà„ÇíÂèÇËÄÉ„Å´ gina„ÅÆ„Éó„É¨„Éì„É•„Éº„ÅÆ„ÇÑ„Å§„Åß„Åç„ÅüÔºà„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºâ
              </div>

              <div>
                  <div>
                    <ul class="d-flex list-style-none flex-justify-start pt-2">
                        <li>
                          <span class="tooltipped tooltipped-ne tooltipped-align-left-1 p-1" aria-label="kuu">
                              <span>üéâ1</span>
                          </span>
                        </li>
                    </ul>
                  </div>
              </div>
              <div class="mt-2 border p-3">
                <div>
                  <a href="/slacklog/files/F019QHSD25U/%E7%84%A1%E9%A1%8C.txt" target="_blank" rel="noopener noreferrer">
                  <span class="f5">[[„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ: ÁÑ°È°å(„Éó„É¨„Éº„É≥„ÉÜ„Ç≠„Çπ„Éà)]]</span>
                  </a>
                  <pre><code class='language-none'>function! s:clean_up() abort
  execute &#34;tabclose!&#34;
  let t:gina_preview = 0 
  call gina#core#emitter#unsubscribe(&#34;command:called&#34;, function(&#34;s:boot&#34;))
  augroup status-cursor
    au!
  augroup END
endfunction

function! s:boot(...) abort
  nnoremap &lt;silent&gt; &lt;buffer&gt; q :call &lt;SID&gt;clean_up()&lt;CR&gt;

  let l = substitute(getline(&#34;.&#34;), &#34;\&lt;Esc&gt;[^m]\\+m&#34;, &#34;&#34;, &#34;g&#34;)
  if empty(l)
    return
  endif

  let type = l[0:2]
  let file = l[3:]

  if type[0] == &#34;M&#34;
    let cmd = [&#34;git&#34;, &#34;diff&#34;, &#34;--cached&#34;]
  elseif type[1] == &#34;M&#34;
    let cmd = [&#34;git&#34;, &#34;diff&#34;]
  elseif type[0] == &#34;D&#34;
    let cmd = [&#34;git&#34;, &#34;diff&#34;, &#34;--cached&#34;, &#34;--&#34;]
  elseif type[1] == &#34;D&#34;
    let cmd = [&#34;git&#34;, &#34;diff&#34;, &#34;--&#34;]
  elseif file[-1:] == &#34;/&#34;
    let cmd = [&#34;tree&#34;]
  else
    let cmd = [&#34;cat&#34;]
  endif

  let cmd += [file]
  
  call win_gotoid(t:winid_preview)
  %d_
  call execute(&#34;0r!&#34; . join(cmd, &#34; &#34;))
  normal! gg

  call win_gotoid(t:winid_gina)
endfunction

function! s:open_git_status_preview() abort
  if get(t:, &#34;gina_preview&#34;, 0)
    return
  endif
  let t:gina_preview = 1
  tabnew
  Gina status -s

  let t:winid_gina = win_getid()

  belowright vnew
  set ft=diff
  set buftype=nofile
  let t:winid_preview = win_getid()

  call win_gotoid(t:winid_gina)
  execute &#34;vertical resize&#34; &amp;columns / 3
  call gina#core#emitter#subscribe(&#34;command:called&#34;, function(&#34;s:boot&#34;))

  augroup status-cursor
    au!
    autocmd CursorMoved &lt;buffer&gt; call s:boot()
  augroup END
endfunction

nnoremap &lt;silent&gt; gp :call &lt;SID&gt;open_git_status_preview()&lt;CR&gt;
</code></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- footer -->
    <div class="clearfix"></div>
    <div id="footer">
      <p>
        Powered by <a href="https://github.com/" target="_blank" rel="noopener noreferrer">GitHub</a>
      </p>
    </div>
    <!-- /footer -->
  </div>
</body>
